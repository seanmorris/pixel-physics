!function(){"use strict";var t="undefined"==typeof global?self:global;if("function"!=typeof t.require){var e={},r={},n={},o={}.hasOwnProperty,i=/^\.\.?(\/|$)/,a=function(t,e){for(var r,n=[],o=(i.test(e)?t+"/"+e:e).split("/"),a=0,s=o.length;a<s;a++)".."===(r=o[a])?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},s=function(t){return t.split("/").slice(0,-1).join("/")},c=function(e,n){var o,i={id:e,exports:{},hot:h&&h.createHot(e)};return r[e]=i,n(i.exports,(o=e,function(e){var r=a(s(o),e);return t.require(r,o)}),i),i.exports},l=function(t){var e=n[t];return e&&t!==e?l(e):t},u=function(t,n){null==n&&(n="/");var i=l(t);if(o.call(r,i))return r[i].exports;if(o.call(e,i))return c(i,e[i]);throw new Error("Cannot find module '"+t+"' from '"+n+"'")};u.alias=function(t,e){n[e]=t};var f=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/;u.register=u.define=function(t,i){if(t&&"object"==typeof t)for(var a in t)o.call(t,a)&&u.register(a,t[a]);else e[t]=i,delete r[t],function(t){if(f.test(t)){var e=t.replace(f,"");o.call(n,e)&&n[e].replace(f,"")!==e+"/index"||(n[e]=t)}if(p.test(t)){var r=t.replace(p,"");o.call(n,r)||(n[r]=t)}}(t)},u.list=function(){var t=[];for(var r in e)o.call(e,r)&&t.push(r);return t};var h=t._hmr&&new t._hmr(function(t,e){return l(a(s(t),e))},u,e,r);u._cache=r,u.hmr=h&&h.wrap,u.brunch=!0,t.require=u}}(),function(){"undefined"==typeof window||window;var t=function(t,e,r){var n={},o=function(e,r){try{return t(r+"/node_modules/"+e)}catch(t){if(-1===t.toString().indexOf("Cannot find module"))throw t;if(-1!==r.indexOf("node_modules")){var i=r.split("/"),a=i.lastIndexOf("node_modules"),s=i.slice(0,a).join("/");return o(e,s)}}return n};return function(i){if(i in e&&(i=e[i]),i){if("."!==i[0]&&r){var a=o(i,r);if(a!==n)return a}return t(i)}}};require.register("curvature/animate/Ease.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Ease=void 0;var n=r("../base/Mixin"),o=r("../mixin/PromiseMixin");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=c(e);if(r){var i=c(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(this,n)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,n.Mixin["with"](o.PromiseMixin));var e,r,c,l=s(u);function u(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=l.call(this)).interval=t,e.terminal=!1,e.initial=!1,e.timeout=!1,e.final=!1,e.canceled=!1,e.done=!1,e.calculate=!!(e.calculate||"calculate"in r)&&r.calculate,e.bounded=!("bounded"in r)||r.bounded,e.repeat="repeat"in r?r.repeat:1,e.reverse="reverse"in r&&r.reverse,e}return e=u,(r=[{key:"start",value:function(){var t=this;this.done=!1,requestAnimationFrame(function(){t.initial=Date.now(),t.terminal=t.initial+t.interval,t.repeat>=0&&(t.terminal=t.initial+t.interval*t.repeat,t.timeout=setTimeout(function(){if(t.done)return t.reverse?0:1;t.done=!0,t[o.PromiseMixin.Accept](t.reverse?0:1)},t.interval*t.repeat))})}},{key:"cancel",value:function(){return this.done?this.final:(clearTimeout(this.timeout),this.final=this.current(),this.canceled=this.done=!0,this[o.PromiseMixin.Reject](this.final),this.final)}},{key:"fraction",value:function(){if(this.done)return this.reverse?0:1;if(!1===this.initial)return this.reverse?1:0;var t=Date.now()-this.initial;if(t/this.interval>=this.repeat)return this.reverse?0:1;var e=t%this.interval/this.interval;return this.reverse?1-e:e}},{key:"current",value:function(){var t=this.fraction();return this.calculate?this.calculate(t):t}}])&&i(e.prototype,r),c&&i(e,c),Object.defineProperty(e,"prototype",{writable:!1}),u}();e.Ease=l}()}),require.register("curvature/animate/ease/CubicInOut.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CubicInOut=void 0;var n=r("../Ease");function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=c(e);if(r){var i=c(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,n)}}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(u,n.Ease);var e,r,c,l=a(u);function u(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=l.call.apply(l,[this].concat(i)),e=s(t),n=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},(r="calculate")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=u,r&&o(e.prototype,r),c&&o(e,c),Object.defineProperty(e,"prototype",{writable:!1}),e}();e.CubicInOut=l}()}),require.register("curvature/animate/ease/QuintInOut.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.QuintInOut=void 0;var n=r("../Ease");function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=c(e);if(r){var i=c(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,n)}}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(u,n.Ease);var e,r,c,l=a(u);function u(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=l.call.apply(l,[this].concat(i)),e=s(t),n=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},(r="calculate")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=u,r&&o(e.prototype,r),c&&o(e,c),Object.defineProperty(e,"prototype",{writable:!1}),e}();e.QuintInOut=l}()}),require.register("curvature/base/Bag.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Bag=void 0;var n=r("./Bindable"),o=r("./Mixin"),i=r("../mixin/EventTargetMixin");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=l(e);if(r){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(this,n)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=Symbol("Mapped"),f=Symbol("Has"),p=Symbol("Add"),h=Symbol("Remove"),g=Symbol("Delete"),d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(y,o.Mixin["with"](i.EventTargetMixin));var e,r,l,d=c(y);function y(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),(t=d.call(this)).changeCallback=e,t.content=new Map,t.current=0,t.length=0,t.list=n.Bindable.makeBindable([]),t.meta=Symbol("meta"),t.type=void 0,t}return e=y,(r=[{key:"has",value:function(t){return this[u]?this[u].has(t):this[f](t)}},{key:f,value:function(t){return this.content.has(t)}},{key:"add",value:function(t){return this[u]?this[u].add(t):this[p](t)}},{key:p,value:function(t){if(void 0===t||!(t instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(t instanceof this.type))throw console.error(this.type,t),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(t=n.Bindable.make(t),!this.content.has(t)){var e=new CustomEvent("adding",{detail:{item:t}});if(this.dispatchEvent(e)){var r,o=(r=this.current++,Number(r));this.content.set(t,o),this.list[o]=t,this.changeCallback&&this.changeCallback(t,this.meta,y.ITEM_ADDED,o);var i=new CustomEvent("added",{detail:{item:t,id:o}});return this.dispatchEvent(i),this.length=this.size,o}}}},{key:"remove",value:function(t){return this[u]?this[u].remove(t):this[h](t)}},{key:h,value:function(t){if(void 0===t||!(t instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(t instanceof this.type))throw console.error(this.type,t),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(t=n.Bindable.make(t),!this.content.has(t))return this.changeCallback&&this.changeCallback(t,this.meta,0,void 0),!1;var e=new CustomEvent("removing",{detail:{item:t}});if(this.dispatchEvent(e)){var r=this.content.get(t);delete this.list[r],this.content.delete(t),this.changeCallback&&this.changeCallback(t,this.meta,y.ITEM_REMOVED,r);var o=new CustomEvent("removed",{detail:{item:t,id:r}});return this.dispatchEvent(o),this.length=this.size,t}}},{key:"delete",value:function(t){if(this[u])return this[u].delete(t);this[g](t)}},{key:g,value:function(t){this.remove(t)}},{key:"map",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},r=new WeakMap,n=new y;return n[u]=this,this.addEventListener("added",function(o){var i=o.detail.item;if(e(i)&&!r.has(i)){var a=t(i);r.set(i,a),n[p](a)}}),this.addEventListener("removed",function(t){var e=t.detail.item;if(r.has(e)){var o=r.get(e);r.delete(e),n[h](o)}}),n}},{key:"size",get:function(){return this.content.size}},{key:"items",value:function(){return Array.from(this.content.entries()).map(function(t){return t[0]})}}])&&a(e.prototype,r),l&&a(e,l),Object.defineProperty(e,"prototype",{writable:!1}),y}();e.Bag=d,Object.defineProperty(d,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(d,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}()}),require.register("curvature/base/Bindable.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e,n,o){return(t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i}).apply(null,arguments)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=i(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.Bindable=void 0;var u=Symbol("ref"),f=Symbol("original"),p=Symbol("deck"),h=Symbol("binding"),g=Symbol("subBinding"),d=Symbol("bindingAll"),y=Symbol("isBindable"),b=Symbol("wrapping"),v=Symbol("Names"),m=Symbol("executing"),w=Symbol("stack"),S=(Symbol("object"),Symbol("wrapped")),O=Symbol("unwrapped"),k=Symbol("getProto"),x=Symbol("onGet"),j=Symbol("onAllGet"),P=Symbol("bindChain"),_=Symbol("Descriptors"),R=Symbol("Before"),M=Symbol("After"),T=Symbol("NoGetters"),E=Object.getPrototypeOf(Int8Array),A=Set.prototype[Symbol.iterator],C=Map.prototype[Symbol.iterator],B=globalThis,D=[B.Node,B.File,B.Map,B.Set,B.WeakMap,B.WeakSet,B.ArrayBuffer,B.ResizeObserver,B.MutationObserver,B.PerformanceObserver,B.IntersectionObserver,B.IDBCursor,B.IDBCursorWithValue,B.IDBDatabase,B.IDBFactory,B.IDBIndex,B.IDBKeyRange,B.IDBObjectStore,B.IDBOpenDBRequest,B.IDBRequest,B.IDBTransaction,B.IDBVersionChangeEvent,B.Event,B.CustomEvent,B.FileSystemFileHandle].filter(function(t){return"function"==typeof t}),I=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,i,a;return r=e,a=[{key:"isBindable",value:function(t){return!(!t||!t[y])&&t[y]===e}},{key:"onDeck",value:function(t,e){return t[p][e]||!1}},{key:"ref",value:function(t){return t[u]||t||!1}},{key:"makeBindable",value:function(t){return this.make(t)}},{key:"shuck",value:function(t,r){r=r||new Map;var n={};if(t instanceof E||t instanceof ArrayBuffer){var o=t.slice(0);return r.set(t,o),o}var i=Object.keys(t);for(var a in i){var c=i[a];if("___"!==c.substring(0,3)){var l=r.get(t[c]);if(l)n[c]=l;else if(t[c]!==t){if(t[c]&&"object"===s(t[c])){var u=t[c];e.isBindable(t[c])&&(u=t[c][f]),n[c]=this.shuck(u,r)}else n[c]=t[c];r.set(t[c],n[c])}else r.set(t[c],n),n[c]=n}}return e.isBindable(t)&&(delete n.bindTo,delete n.isBound),n}},{key:"make",value:function(r){var i=this;if(!r||!["function","object"].includes(s(r)))return r;if(r[u])return r[u];if(r[y])return r;if(Object.isSealed(r)||Object.isFrozen(r)||!Object.isExtensible(r)||D.filter(function(t){return r instanceof t}).length)return r;Object.defineProperty(r,y,{configurable:!1,enumerable:!1,writable:!1,value:e}),Object.defineProperty(r,u,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(r,f,{configurable:!1,enumerable:!1,writable:!1,value:r}),Object.defineProperty(r,p,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,h,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,g,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(r,d,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,m,{enumerable:!1,writable:!0}),Object.defineProperty(r,b,{enumerable:!1,writable:!0}),Object.defineProperty(r,w,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,R,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,M,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,S,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)}),Object.defineProperty(r,O,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,_,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)});Object.defineProperty(r,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:function t(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=!1;if(Array.isArray(n)){var l=n.forEach(function(e){return t(e,o,a)});return function(){return l.forEach(function(t){return t()})}}if(n instanceof Function&&(a=o||{},o=n,c=!0),a.delay>=0&&(o=i.wrapDelayCallback(o,a.delay)),a.throttle>=0&&(o=i.wrapThrottleCallback(o,a.throttle)),a.wait>=0&&(o=i.wrapWaitCallback(o,a.wait)),a.frame&&(o=i.wrapFrameCallback(o,a.frame)),a.idle&&(o=i.wrapIdleCallback(o)),c){var u=r[d].length;if(r[d].push(o),!("now"in a)||a.now)for(var f in r)o(r[f],f,r,!1);return function(){delete r[d][u]}}if(r[h][n]||(r[h][n]=new Set),a.children){var p=o;o=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=n[0],c=r[g].get(p);if(c&&(r[g].delete(p),c()),"object"===s(i)){var l=e.make(i);e.isBindable(l)&&r[g].set(p,l.bindTo(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return p.apply(void 0,n.concat(e))},Object.assign({},a,{children:!1}))),p.apply(void 0,n)}else p.apply(void 0,n)}}r[h][n].add(o),"now"in a&&!a.now||o(r[n],n,r,!1);var y=function(){var t=r[g].get(o);t&&(r[g].delete(o),t()),r[h][n]&&r[h][n].has(o)&&r[h][n].delete(o)};return a.removeWith&&a.removeWith instanceof View&&a.removeWith.onRemove(function(){return y}),y}});Object.defineProperty(r,P,{configurable:!1,enumerable:!1,writable:!1,value:function(t,e){var n=t.split("."),o=n.shift(),a=n.slice(0),s=[];return s.push(r.bindTo(o,function(t,r,n,o){var c=a.join(".");0!==a.length?(void 0===t&&(t=n[r]=i.make({})),s=s.concat(t[P](c,e))):e(t,r,n,o)})),function(){return s.forEach(function(t){return t()})}}}),Object.defineProperty(r,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(t){var e=r[R].length;r[R].push(t);var n=!1;return function(){n||(n=!0,delete r[R][e])}}}),Object.defineProperty(r,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(t){var e=r[M].length;r[M].push(t);var n=!1;return function(){n||(n=!0,delete r[M][e])}}});Object.defineProperty(r,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var t in r[d])if(r[d][t])return!0;for(var e in r[h]){var n,i=o(r[h][e]);try{for(i.s();!(n=i.n()).done;)if(n.value)return!0}catch(t){i.e(t)}finally{i.f()}}return!1}});var a=function(t){r[t]&&r[t]instanceof Object&&!r[t]instanceof Promise&&(D.filter(function(e){return r[t]instanceof e}).length||!Object.isExtensible(r[t])||Object.isSealed(r[t])||(r[t]=e.make(r[t])))};for(var c in r)a(c);var l=r[_],B=r[S],I=r[w],L={get:function(n,i){if(B.has(i))return B.get(i);if(i===u||i===f||"apply"===i||"isBound"===i||"bindTo"===i||"__proto__"===i||"constructor"===i)return r[i];var a;if(l.has(i)?a=l.get(i):(a=Object.getOwnPropertyDescriptor(r,i),l.set(i,a)),a&&!a.configurable&&!a.writable)return r[i];if(j in r)return r[j](i);if(x in r&&!(i in r))return r[x](i);if(a&&!a.configurable&&!a.writable)return B.set(i,r[i]),r[i];if("function"==typeof r[i]){if(v in r[i])return r[i];Object.defineProperty(r[O],i,{configurable:!1,enumerable:!1,writable:!0,value:r[i]});var s=Object.getPrototypeOf(r)[i]===r[i],c="function"==typeof Promise&&r instanceof Promise||"function"==typeof Map&&r instanceof Map||"function"==typeof Set&&r instanceof Set||"function"==typeof C&&r.prototype===C||"function"==typeof A&&r.prototype===A||"function"==typeof A&&r.prototype===A||"function"==typeof WeakMap&&r instanceof WeakMap||"function"==typeof WeakSet&&r instanceof WeakSet||"function"==typeof Date&&r instanceof Date||"function"==typeof E&&r instanceof E||"function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||"function"==typeof EventTarget&&r instanceof EventTarget||"function"==typeof ResizeObserver&&r instanceof ResizeObserver||"function"==typeof MutationObserver&&r instanceof MutationObserver||"function"==typeof PerformanceObserver&&r instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&r instanceof IntersectionObserver||"function"==typeof r[Symbol.iterator]&&"next"===i?r:r[u],p=function(){r[m]=i,I.unshift(i);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var l,u,f=o(r[R]);try{for(f.s();!(l=f.n()).done;)(0,l.value)(r,i,I,r,n)}catch(t){f.e(t)}finally{f.f()}if(new.target)u=t(r[O][i],n);else{var p=r[O][i];u=s?p.apply(c||r,n):p.apply(void 0,n)}var h,g=o(r[M]);try{for(g.s();!(h=g.n()).done;)(0,h.value)(r,i,I,r,n)}catch(t){g.e(t)}finally{g.f()}return r[m]=null,I.shift(),u};(p[v]=p[v]||new WeakMap).set(r,i),p[j]=function(t){var e=p[v].get(r);return r[e][t]};var h=e.make(p);return B.set(i,h),h}return r[i]},set:function(t,n,i){if(B.has(n)&&B.delete(n),n===f)return!0;var a=r[p];if(n in a&&a[n]===i)return!0;if(n.slice&&"___"===n.slice(-3))return!0;if(t[n]===i||"number"==typeof i&&isNaN(a[n])&&isNaN(i))return!0;for(var s in i&&i instanceof Object&&(D.filter(function(t){return r instanceof t}).length||!Object.isExtensible(r)||Object.isSealed(r)||(r[T],i=e.make(i))),a[n]=i,r[d])r[d][s]&&r[d][s](i,n,t,!1);var c=!1;if(n in r[h]){var l,u=o(r[h][n]);try{for(u.s();!(l=u.n()).done;)!1===(0,l.value)(i,n,t,!1,t[n])&&(c=!0)}catch(t){u.e(t)}finally{u.f()}}if(delete a[n],!c){var g=Object.getOwnPropertyDescriptor(t,n);t instanceof File&&"lastModifiedDate"==n||g&&!g.writable||t[n]!==i||(t[n]=i)}var y=Reflect.set(t,n,i);if(Array.isArray(t)&&r[h].length)for(var b in r[h].length)(0,r[h].length[b])(t.length,"length",t,!1,t.length);return y},construct:function(o,i){var a="constructor";for(var s in o[R])o[R][s](o,a,r[w],void 0,i);var c=e.make(t(o[f],n(i)));for(var l in o[M])o[M][l](o,a,r[w],c,i);return c},getPrototypeOf:function(t){return k in r?r[k]:Reflect.getPrototypeOf(t)},deleteProperty:function(t,e){var n=r[p];if(void 0!==n[e])return!0;if(!(e in t))return!0;if(l.has(e)){var i=l.get(e);if(i&&!i.configurable)return!1;l.delete(e)}for(var a in n[e]=null,B.has(e)&&B.delete(e),r[d])r[d][a](void 0,e,t,!0,t[e]);if(e in r[h]){var s,c=o(r[h][e]);try{for(c.s();!(s=c.n()).done;)(0,s.value)(void 0,e,t,!0,t[e])}catch(t){c.e(t)}finally{c.f()}}return delete n[e],delete t[e],!0}};return r[T]&&delete L.get,Object.defineProperty(r,u,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(r,L)}),r[u]}},{key:"clearBindings",value:function(t){var e;(e=function(t){return Object.keys(t).map(function(e){return delete t[e]})},function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.map(e)})(t[S],t[h],t[d],t[M],t[R])}},{key:"resolve",value:function(t,e){for(var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.split("."),i=o[0];o.length;){if(n&&1===o.length)return[this.make(t),o.shift(),i];!(!(r=o.shift())in t)&&t[r]&&t[r]instanceof Object||(t[r]={}),t=this.make(t[r])}return[this.make(t),r,i]}},{key:"wrapDelayCallback",value:function(t,e){return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return setTimeout(function(){return t.apply(void 0,n)},e)}}},{key:"wrapThrottleCallback",value:function(t,e){var r=this;return this.throttles.set(t,!1),function(){r.throttles.get(t,!0)||(t.apply(void 0,arguments),r.throttles.set(t,!0),setTimeout(function(){r.throttles.set(t,!1)},e))}}},{key:"wrapWaitCallback",value:function(t,e){var r=this;return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var a;(a=r.waiters.get(t))&&(r.waiters.delete(t),clearTimeout(a)),a=setTimeout(function(){return t.apply(void 0,o)},e),r.waiters.set(t,a)}}},{key:"wrapFrameCallback",value:function(t,e){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];requestAnimationFrame(function(){return t.apply(void 0,r)})}}},{key:"wrapIdleCallback",value:function(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];(window.requestIdleCallback||requestAnimationFrame)(function(){return t.apply(void 0,r)})}}}],(i=null)&&c(r.prototype,i),a&&c(r,a),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.Bindable=I,l(I,"waiters",new WeakMap),l(I,"throttles",new WeakMap),Object.defineProperty(I,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:x}),Object.defineProperty(I,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:T}),Object.defineProperty(I,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:k}),Object.defineProperty(I,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:j})}()}),require.register("curvature/base/Cache.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Cache=void 0;var r=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,o;return r=e,o=[{key:"store",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",o=0;r&&(o=1e3*r+(new Date).getTime()),this.buckets||(this.buckets=new Map),this.buckets.has(n)||this.buckets.set(n,new Map);var i=new CustomEvent("cvCacheStore",{cancelable:!0,detail:{key:t,value:e,expiry:r,bucket:n}});document.dispatchEvent(i)&&this.buckets.get(n).set(t,{value:e,expiration:o})}},{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard",n=new CustomEvent("cvCacheLoad",{cancelable:!0,detail:{key:t,defaultvalue:e,bucket:r}});if(!document.dispatchEvent(n))return e;if(this.buckets&&this.buckets.has(r)&&this.buckets.get(r).has(t)){var o=this.buckets.get(r).get(t);if(0===o.expiration||o.expiration>(new Date).getTime())return this.buckets.get(r).get(t).value}return e}}],(n=null)&&t(r.prototype,n),o&&t(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.Cache=r}()}),require.register("curvature/base/Config.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var n={},o=r;try{n=o("/Config").Config||{}}catch(t){!0===globalThis.devMode&&console.error(t)}var i=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,o;return r=e,o=[{key:"get",value:function(t){return this.configs[t]}},{key:"set",value:function(t,e){return this.configs[t]=e,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n in e){var o=e[n];for(var i in"string"==typeof o&&(o=JSON.parse(o)),o){var a=o[i];return this.configs[i]=a}}return this}}],(n=null)&&t(r.prototype,n),o&&t(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.Config=i,Object.defineProperty(i,"configs",{configurable:!1,enumerable:!1,writable:!1,value:n})}()}),require.register("curvature/base/Dom.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Dom=void 0;var r=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,o;return r=e,o=[{key:"mapTags",value:function(t,e,r,n,o){var i=[],a=!0;n&&(a=!1);var s=!1,c=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(t,r){if(!a){if(t!==n)return NodeFilter.FILTER_SKIP;a=!0}return o&&t===o&&(s=!0),s?NodeFilter.FILTER_SKIP:e?t instanceof Element&&t.matches(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);for(0;c.nextNode();)i.push(r(c.currentNode,c));return i}},{key:"dispatchEvent",value:function(t,r){t.dispatchEvent(r),e.mapTags(t,!1,function(t){t.dispatchEvent(r)})}}],(n=null)&&t(r.prototype,n),o&&t(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.Dom=r}()}),require.register("curvature/base/Mixin.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mixin=void 0;var t=r("./Bindable");function n(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=a(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function a(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,r){return e&&g(t.prototype,e),r&&g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var y=Symbol("constructor"),b=(Symbol("mixinList"),function(){function e(){h(this,e)}return d(e,null,[{key:"from",value:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return function(r){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(s,t);var a=l(s);function s(){var r;h(this,s);for(var c=arguments.length,l=new Array(c),p=0;p<c;p++)l[p]=arguments[p];var g,d=t.constructor?r=a.call.apply(a,[this].concat(l)):null,y=i(n);try{for(y.s();!(g=y.n()).done;){var b=g.value;switch(b[e.Constructor]&&b[e.Constructor].apply(f(r)),o(b)){case"function":e.mixClass(b,s);break;case"object":e.mixObject(b,f(r))}}}catch(t){y.e(t)}finally{y.f()}return u(r,d)}return d(s)}()}},{key:"make",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r.pop();return e.to.apply(e,[o].concat(r))}},{key:"to",value:function(t){for(var e={},r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];n.map(function(r){switch(o(r)){case"object":Object.assign(e,Object.getOwnPropertyDescriptors(r));break;case"function":Object.assign(e,Object.getOwnPropertyDescriptors(r.prototype))}delete e.constructor,Object.defineProperties(t.prototype,e)})}},{key:"with",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.from.apply(this,[function(){return d(function t(){h(this,t)})}()].concat(e))}},{key:"mixObject",value:function(t,e){var r,n=i(Object.getOwnPropertyNames(t));try{for(n.s();!(r=n.n()).done;){var o=r.value;"function"!=typeof t[o]?e[o]=t[o]:e[o]=t[o].bind(e)}}catch(t){n.e(t)}finally{n.f()}var a,s=i(Object.getOwnPropertySymbols(t));try{for(s.s();!(a=s.n()).done;){var c=a.value;"function"!=typeof t[c]?e[c]=t[c]:e[c]=t[c].bind(e)}}catch(t){s.e(t)}finally{s.f()}}},{key:"mixClass",value:function(t,e){var r,n=i(Object.getOwnPropertyNames(t.prototype));try{for(n.s();!(r=n.n()).done;){var o=r.value;if(!["name","prototype","length"].includes(o)){var a=Object.getOwnPropertyDescriptor(e,o);a&&!a.writable||("function"==typeof t[o]?e.prototype[o]=t.prototype[o].bind(e.prototype):e.prototype[o]=t.prototype[o])}}}catch(t){n.e(t)}finally{n.f()}var s,c=i(Object.getOwnPropertySymbols(t.prototype));try{for(c.s();!(s=c.n()).done;){var l=s.value;"function"==typeof t[l]?e.prototype[l]=t.prototype[l].bind(e.prototype):e.prototype[l]=t.prototype[l]}}catch(t){c.e(t)}finally{c.f()}var u,f=i(Object.getOwnPropertyNames(t));try{var p=function(){var r=u.value;if(["name","prototype","length"].includes(r))return"continue";var n=Object.getOwnPropertyDescriptor(e,r);if(n&&!n.writable)return"continue";if("function"!=typeof t[r])return e[r]=t[r],"continue";var o=e[r]||!1,i=t[r].bind(e);e[r]=function(){return o&&o.apply(void 0,arguments),i.apply(void 0,arguments)}};for(f.s();!(u=f.n()).done;)p()}catch(t){f.e(t)}finally{f.f()}var h,g=i(Object.getOwnPropertySymbols(t));try{var d=function(){var r=h.value;if("function"!=typeof t[r])return e.prototype[r]=t[r],"continue";var n=e[r]||!1,o=t[r].bind(e);e[r]=function(){return n&&n.apply(void 0,arguments),o.apply(void 0,arguments)}};for(g.s();!(h=g.n()).done;)d()}catch(t){g.e(t)}finally{g.f()}}},{key:"mix",value:function(e){for(var r={},o={},a=t.Bindable.makeBindable(e),s=function(t){var e,s=Object.getOwnPropertyNames(t.prototype),c=/^(before|after)__(.+)/,l=i(Object.getOwnPropertyNames(t));try{var u=function(){var o=e.value,i=o.match(c);if(i){switch(i[1]){case"before":a.___before(function(e,r,a,s,c){if(r===i[2])return t[o].bind(s).apply(void 0,n(c))});break;case"after":a.___after(function(e,r,a,s,c){if(r===i[2])return t[o].bind(s).apply(void 0,n(c))})}return"continue"}return r[o]?"continue":"function"!=typeof t[o]?"continue":void(r[o]=t[o])};for(l.s();!(e=l.n()).done;)u()}catch(t){l.e(t)}finally{l.f()}var f,p=i(s);try{var h=function(){var e=f.value,r=e.match(c);if(r){switch(r[1]){case"before":a.___before(function(o,i,a,s,c){if(i===r[2])return t.prototype[e].bind(s).apply(void 0,n(c))});break;case"after":a.___after(function(o,i,a,s,c){if(i===r[2])return t.prototype[e].bind(s).apply(void 0,n(c))})}return"continue"}return o[e]?"continue":"function"!=typeof t.prototype[e]?"continue":void(o[e]=t.prototype[e])};for(p.s();!(f=p.n()).done;)h()}catch(t){p.e(t)}finally{p.f()}},c=this;c&&c.prototype;c=Object.getPrototypeOf(c))s(c);for(var l in r)e[l]=r[l].bind(e);var u=function(t){e.prototype[t]=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return o[t].apply(this,r)}};for(var f in o)u(f);return a}}]),e}());e.Mixin=b,b.Constructor=y}()}),require.register("curvature/base/Router.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var t,n=r("./View"),o=(r("./Cache"),r("./Config")),i=r("./Routes");function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=c(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function c(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var p=Symbol("NotFound"),h=Symbol("Internal");globalThis.CustomEvent=null!==(t=globalThis.CustomEvent)&&void 0!==t?t:globalThis.Event;var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,c;return e=t,c=[{key:"wait",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded";(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).addEventListener(r,function(){e.listen(t)})}},{key:"listen",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.listener=t||this.listener,this.routes=r||t.routes,Object.assign(this.query,this.queryOver({}));var n=function(r){r.preventDefault(),r.state&&"routedId"in r.state?(r.state.routedId<=e.routeCount?(e.history.splice(r.state.routedId),e.routeCount=r.state.routedId):r.state.routedId>e.routeCount&&(e.history.push(r.state.prev),e.routeCount=r.state.routedId),e.state=r.state):null!==e.prevPath&&e.prevPath!==location.pathname&&e.history.push(e.prevPath),"null"!==location.origin?e.match(location.pathname,t):e.match(e.nextPath,t)};window.addEventListener("cvUrlChanged",n),window.addEventListener("popstate",n);var o="null"!==location.origin&&location.pathname+location.search;location.origin&&location.hash&&(o+=location.hash);var i={routedId:this.routeCount,url:location.pathname,prev:this.prevPath};"null"!==location.origin&&history.replaceState(i,null,location.pathname),this.go(!1!==o?o:"/")}},{key:"go",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=o.Config.get("title");r&&(document.title=r);var n={routedId:this.routeCount,prev:this.prevPath,url:location.pathname};-1===e?this.match(t,this.listener,!0):"null"===location.origin?this.nextPath=t:2===e&&location.pathname!==t?history.replaceState(n,null,t):location.pathname!==t&&history.pushState(n,null,t),(!e||e<0)&&(!1===e&&(this.path=null),e||("#"===t.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged")))),this.prevPath=t}},{key:"processRoute",value:function(t,e,r){return"function"==typeof t[e]?t[e].prototype instanceof n.View?new t[e](r):t[e](r):t[e]}},{key:"handleError",value:function(t,e,r,n,o,i,a,s){console.error(t),"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:t,path:i,prev:a,view:o,routes:e,selected:r}}));var c=globalThis.devMode?"Unexpected error: "+String(t):"Unexpected error.";e[h]&&(n[h]=t,c=this.processRoute(e,h,n)),this.update(o,i,c,e,r,n,s)}},{key:"match",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=null,c=!1;if(!0===n&&(c=n),n&&"object"===u(n)&&(c=n.forceRefresh,o=n.event),"undefined"==typeof document||this.path!==t||c){var l="http://example.com";"undefined"!=typeof document&&(l="null"!==location.origin?location.origin:l,this.queryString=location.search);var f=new URL(t,l);t=this.path=f.pathname,"undefined"==typeof document&&(this.queryString=f.search);var h=this.prevPath,g=e&&e.args?e.args.content:null,d=this.routes||e&&e.routes||i.Routes.dump(),y=new URLSearchParams(this.queryString);for(var b in o&&o.request&&(this.request=o.request),Object.keys(this.query))delete this.query[b];var v,m=s(y);try{for(m.s();!(v=m.n()).done;){var w=a(v.value,2),S=w[0],O=w[1];this.query[S]=O}}catch(t){m.e(t)}finally{m.f()}var k={},x=!1,j="";for(var P in"/"===t.substring(0,1)&&(t=t.substring(1)),t=t.split("/"),this.query)k[P]=this.query[P];t:for(var _ in d){var R=_.split("/");if(!(R.length<t.length&&"*"!==R[R.length-1])){for(var M in R)if("%"==R[M].substr(0,1)){var T=null,E=/^%(\w+)\??/.exec(R[M]);if(E&&E[1]&&(T=E[1]),!T)throw new Error("".concat(R[M],' is not a valid argument segment in route "').concat(_,'"'));if(t[M])k[T]=t[M];else{if("?"!=R[M].substr(R[M].length-1,1))continue t;k[T]=""}}else if("*"!==R[M]&&t[M]!==R[M])continue t;x=_,j=d[_],"*"===R[R.length-1]&&(k.pathparts=t.slice(R.length-1));break}}var A=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:t,prev:h,root:e,selected:x,routes:d}});if("undefined"==typeof document||document.dispatchEvent(A)){if(!c&&e&&g&&j instanceof Object&&g instanceof j&&!(j instanceof Promise)&&g.update(k))return e.args.content=g,!0;x in d||(d[x]=d[p]);try{return!1===(j=this.processRoute(d,x,k))&&(j=this.processRoute(d,p,k)),j instanceof Promise||(j=Promise.resolve(j)),"undefined"==typeof document?j:j.then(function(n){r.update(e,t,n,d,x,k,c)}).catch(function(n){r.handleError(n,d,x,k,e,t,h,c)})}catch(r){this.handleError(r,d,x,k,e,t,h,c)}}}}},{key:"update",value:function(t,e,r,o,i,a,s){if(t){var c=this.prevPath,l=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:r,path:e,prev:c,view:t,routes:o,selected:i}});!1!==r&&(t.args.content instanceof n.View&&(t.args.content.pause(!0),t.args.content.remove()),document.dispatchEvent(l)&&(t.args.content=r),r instanceof n.View&&(r.pause(!1),r.update(a,s)));var u=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:r,path:e,prev:c,view:t,routes:o,selected:i}});document.dispatchEvent(u)}}},{key:"queryOver",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={},n={},o=s(new URLSearchParams(location.search));try{for(o.s();!(t=o.n()).done;){var i=t.value;n[i[0]]=i[1]}}catch(t){o.e(t)}finally{o.f()}return delete(r=Object.assign(r,n,e)).api,r}},{key:"queryToString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],n=t;for(var o in e||(n=this.queryOver(t)),n)""!==n[o]&&r.push(o+"="+encodeURIComponent(n[o]));return r.join("&")}},{key:"setQuery",value:function(t,e,r){var n=this.queryOver();n[t]=e,void 0===e&&delete n[t];var o=this.queryToString(n,!0);this.go(location.pathname+(o?"?"+o:"?"),r)}}],(r=null)&&f(e.prototype,r),c&&f(e,c),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Router=g,Object.defineProperty(g,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(g,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(g,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(g,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(g,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(g,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:h}),Object.defineProperty(g,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:p})}()}),require.register("curvature/base/Routes.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Routes=void 0;var n={},o=r,i=!1,a=function(){if(!i){try{Object.assign(n,o("Routes").Routes||{})}catch(t){!0===globalThis.devMode&&console.warn(t)}i=!0}},s=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,o;return r=e,o=[{key:"get",value:function(t){return a(),this.routes[t]}},{key:"dump",value:function(){return a(),this.routes}}],(n=null)&&t(r.prototype,n),o&&t(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.Routes=s,Object.defineProperty(s,"routes",{configurable:!1,enumerable:!1,writable:!1,value:n})}()}),require.register("curvature/base/RuleSet.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuleSet=void 0;r("./Dom");var t=r("./Tag"),n=r("./View");function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=a(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function a(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,a,s;return r=e,s=[{key:"add",value:function(t,e){return this.globalRules=this.globalRules||{},this.globalRules[t]=this.globalRules[t]||[],this.globalRules[t].push(e),this}},{key:"apply",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in this.globalRules)for(var n in this.globalRules[r]){var o,a=this.globalRules[r][n],s=this.wrap(t,a,e),c=i(t.querySelectorAll(r));try{for(c.s();!(o=c.n()).done;){s(o.value)}}catch(t){c.e(t)}finally{c.f()}}}},{key:"wait",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=function(e,r){return function(){return r.removeEventListener(e,n),t.apply()}}(e,r);r.addEventListener(e,n)}},{key:"wrap",value:function(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=r;return(r instanceof n.View||r&&r.prototype&&r.prototype instanceof n.View)&&(i=function(){return r}),function(e){if(void 0===e.___cvApplied___&&Object.defineProperty(e,"___cvApplied___",{enumerable:!1,writable:!1,value:new WeakSet}),!e.___cvApplied___.has(r)){var a,s;o&&(a=s=o,o.viewList&&(s=o.viewList.parent));var c,l=new t.Tag(e,s,null,void 0,a),u=l.element.parentNode,f=l.element.nextSibling,p=i(l);if(!1!==p&&e.___cvApplied___.add(r),p instanceof HTMLElement&&(p=new t.Tag(p)),p instanceof t.Tag){if(!p.element.contains(l.element)){for(;l.element.firstChild;)p.element.appendChild(l.element.firstChild);l.remove()}f?u.insertBefore(p.element,f):u.appendChild(p.element)}p&&p.prototype&&p.prototype instanceof n.View&&(p=new p({},o)),p instanceof n.View&&(o&&(o.cleanup.push((c=p,function(){c.remove()})),o.cleanup.push(o.args.bindTo(function(t,e,r){r[e]=t,p.args[e]=t})),o.cleanup.push(p.args.bindTo(function(t,e,r,n){r[e]=t,o.args[e]=t}))),l.clear(),p.render(l.element))}}}}],(a=[{key:"add",value:function(t,e){return this.rules=this.rules||{},this.rules[t]=this.rules[t]||[],this.rules[t].push(e),this}},{key:"apply",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in e.apply(t,r),this.rules)for(var o in this.rules[n]){var a,s=this.rules[n][o],c=e.wrap(t,s,r),l=i(t.querySelectorAll(n));try{for(l.s();!(a=l.n()).done;){c(a.value)}}catch(t){l.e(t)}finally{l.f()}}}},{key:"purge",value:function(){if(this.rules)for(var t=0,e=Object.entries(this.rules);t<e.length;t++){var r=o(e[t],2),n=r[0];r[1];if(this.rules[n])for(var i in this.rules[n])delete this.rules[n][i]}}}])&&c(r.prototype,a),s&&c(r,s),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.RuleSet=l}()}),require.register("curvature/base/SetMap.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e,n,o){return(t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i}).apply(null,arguments)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.SetMap=void 0;var s=function(){function e(){var t,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="_map",n=new Map,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var r,i,s;return r=e,(i=[{key:"has",value:function(t){return this._map.has(t)}},{key:"get",value:function(t){return this._map.get(t)}},{key:"getOne",value:function(t){var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=o(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}(this.get(t));try{for(r.s();!(e=r.n()).done;){return e.value}}catch(t){r.e(t)}finally{r.f()}}},{key:"add",value:function(t,e){var r=this._map.get(t);return r||this._map.set(t,r=new Set),r.add(e)}},{key:"remove",value:function(t,e){var r=this._map.get(t);if(r){var n=r.delete(e);return r.size||this._map.delete(t),n}}},{key:"values",value:function(){return t(Set,n(n(this._map.values()).map(function(t){return n(t.values())})))}}])&&a(r.prototype,i),s&&a(r,s),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.SetMap=s}()}),require.register("curvature/base/Tag.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=void 0;var t=r("./Bindable");function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=Symbol("CurrentStyle"),i=function(t){if(this.node)for(var e in t){var r=String(t[e]);this[o].has(e)&&this[o].get(e)===t[e]||("-"===e[0]?this.node.style.setProperty(e,r):this.node.style[e]=r,void 0!==t[e]?this[o].set(e,t[e]):this[o].delete(e))}},a=function(t){var e=this;return"function"==typeof this[t]?this[t]:this.node&&"function"==typeof this.node[t]?function(){var r;return(r=e.node)[t].apply(r,arguments)}:"style"===t?this.proxy.style:this.node&&t in this.node?this.node[t]:this[t]},s=function(){function e(r,n,s,c,l){var u=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof r){var f=document.createRange().createContextualFragment(r);r=f.firstChild}this.element=t.Bindable.makeBindable(r),this.node=this.element,this.parent=n,this.direct=l,this.ref=s,this.index=c,this.cleanup=[],this[t.Bindable.OnAllGet]=a.bind(this),this[o]=new Map;var p=t.Bindable.make(i.bind(this));return Object.defineProperty(this,"style",{value:p}),this.proxy=t.Bindable.make(this),this.proxy.style.bindTo(function(t,e,r,n){u[o].has(e)&&u[o].get(e)===t||(u.node.style[e]=t,n||void 0===t?u[o].delete(e):u[o].set(e,t))}),this.proxy.bindTo(function(t,e){if("index"!==e)return e in r&&r[e]!==t&&(r[e]=t),!1}),this.proxy}var r,s,c;return r=e,(s=[{key:"attr",value:function(t){for(var e in t)void 0===t[e]?this.node.removeAttribute(e):null===t[e]?this.node.setAttribute(e,""):this.node.setAttribute(e,t[e]);return this}},{key:"remove",value:function(){var e;for(this.node&&this.node.remove(),t.Bindable.clearBindings(this);e=this.cleanup.shift();)e();if(this.clear(),this.node){var r=new Event("cvDomDetached");this.node.dispatchEvent(r),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var t=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(t),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}},{key:"listen",value:function(t,e,r){var n=this.node;n.addEventListener(t,e,r);var o=function(){n.removeEventListener(t,e,r)},i=function(){o(),o=function(){return console.warn("Already removed!")}};return this.parent.onRemove(function(){return i()}),i}}])&&n(r.prototype,s),c&&n(r,c),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.Tag=s}()}),require.register("curvature/base/Uuid.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";var t;function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.Uuid=void 0,t=Symbol.toPrimitive;var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"uuid",null),n(this,"version",4),t){if(!t||"string"!=typeof t&&!(t instanceof e)||!t.match(/[0-9A-Fa-f]{8}(-[0-9A-Fa-f]{4}){3}-[0-9A-Fa-f]{12}/))throw new Error('Invalid input for Uuid: "'.concat(t,'"'));this.version=r,this.uuid=t}else"function"==typeof crypto.randomUUID?this.uuid=crypto.randomUUID():this.uuid=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)});Object.freeze(this)}var o,i,a;return o=e,(i=[{key:t,value:function(){return this.toString()}},{key:"toString",value:function(){return this.uuid}},{key:"toJson",value:function(){return{version:this.version,uuid:this.uuid}}}])&&r(o.prototype,i),a&&r(o,a),Object.defineProperty(o,"prototype",{writable:!1}),e}();e.Uuid=o}()}),require.register("curvature/base/View.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var t=r("./Bindable"),n=r("./ViewList"),o=r("./Router"),i=r("./Uuid"),a=r("./Dom"),s=r("./Tag"),c=r("./Bag"),l=r("./RuleSet"),u=r("./Mixin"),f=(r("../mixin/PromiseMixin"),r("../mixin/EventTargetMixin"));function p(t){"@babel/helpers - typeof";return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||y(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=y(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function y(t,e){if(t){if("string"==typeof t)return b(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=O(t);if(e){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return S(t)}(this,r)}}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=Symbol("dontParse"),x=Symbol("expandBind"),j=Symbol("uuid"),P=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(_,u.Mixin["with"](f.EventTargetMixin));var y,b,O,P=w(_);function _(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_),e=P.call(this,r,n),Object.defineProperty(S(e),"args",{value:t.Bindable.make(r)}),Object.defineProperty(S(e),j,{value:e.constructor.uuid()}),Object.defineProperty(S(e),"nodesAttached",{value:new c.Bag(function(t,e,r){})}),Object.defineProperty(S(e),"nodesDetached",{value:new c.Bag(function(t,e,r){})}),Object.defineProperty(S(e),"_onRemove",{value:new c.Bag(function(t,e,r){})}),Object.defineProperty(S(e),"cleanup",{value:[]}),Object.defineProperty(S(e),"parent",{value:n}),Object.defineProperty(S(e),"views",{value:new Map}),Object.defineProperty(S(e),"viewLists",{value:new Map}),Object.defineProperty(S(e),"withViews",{value:new Map}),Object.defineProperty(S(e),"tags",{value:t.Bindable.make({})}),Object.defineProperty(S(e),"nodes",{value:t.Bindable.make([])}),Object.defineProperty(S(e),"timeouts",{value:new Map}),Object.defineProperty(S(e),"intervals",{value:[]}),Object.defineProperty(S(e),"frames",{value:[]}),Object.defineProperty(S(e),"ruleSet",{value:new l.RuleSet}),Object.defineProperty(S(e),"preRuleSet",{value:new l.RuleSet}),Object.defineProperty(S(e),"subBindings",{value:{}}),Object.defineProperty(S(e),"templates",{value:{}}),Object.defineProperty(S(e),"eventCleanup",{value:[]}),Object.defineProperty(S(e),"unpauseCallbacks",{value:new Map}),Object.defineProperty(S(e),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(S(e),"rendered",{value:new Promise(function(t,r){return Object.defineProperty(S(e),"renderComplete",{value:t})})}),e.controller=S(e),e.loaded=Promise.resolve(S(e)),e.template="",e.firstNode=null,e.lastNode=null,e.viewList=null,e.mainView=null,e.preserve=!1,e.removed=!1,e}return y=_,b=[{key:"_id",get:function(){return this[j]}},{key:"onFrame",value:function(t){var e=this,r=!1,n=function(){r=!0};return requestAnimationFrame(function(){return function n(o){e.removed||r||(e.paused||t(Date.now()),requestAnimationFrame(n))}(Date.now())}),this.frames.push(n),n}},{key:"onNextFrame",value:function(t){return requestAnimationFrame(function(){return t(Date.now())})}},{key:"onIdle",value:function(t){return requestIdleCallback(function(){return t(Date.now())})}},{key:"onTimeout",value:function(t,e){var r=this,n={timeout:null,callback:null,time:t,fired:!1,created:(new Date).getTime(),paused:!1},o=function(){e(),n.fired=!0,r.timeouts.delete(n.timeout)},i=setTimeout(o,t);return n.callback=o,n.timeout=i,this.timeouts.set(n.timeout,n),i}},{key:"clearTimeout",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){var e,r=d(this.timeouts);try{for(r.s();!(e=r.n()).done;){var n=g(e.value,2),o=(n[0],n[1]);clearTimeout(o.timeout),this.timeouts.delete(o.timeout)}}catch(t){r.e(t)}finally{r.f()}})},{key:"onInterval",value:function(t,e){var r=setInterval(e,t);return this.intervals.push({timeout:r,callback:e,time:t,paused:!1}),r}},{key:"clearInterval",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){for(var e in this.intervals)t===this.intervals[e].timeout&&(clearInterval(this.intervals[e].timeout),delete this.intervals[e])})},{key:"pause",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===t&&(this.paused=!this.paused),this.paused=t,this.paused){var e,r=d(this.timeouts);try{for(r.s();!(e=r.n()).done;){var n=g(e.value,2),o=(n[0],n[1]);o.fired?this.timeouts.delete(o.timeout):(clearTimeout(o.timeout),o.paused=!0,o.time=Math.max(0,o.time-(Date.now()-o.created)))}}catch(t){r.e(t)}finally{r.f()}for(var i in this.intervals)clearInterval(this.intervals[i].timeout)}else{var a,s=d(this.timeouts);try{for(s.s();!(a=s.n()).done;){var c=g(a.value,2),l=(c[0],c[1]);l.paused&&(l.fired?this.timeouts.delete(l.timeout):(l.timeout=setTimeout(l.callback,l.time),l.paused=!1))}}catch(t){s.e(t)}finally{s.f()}for(var u in this.intervals)this.intervals[u].timeout.paused&&(this.intervals[u].timeout.paused=!1,this.intervals[u].timeout=setInterval(this.intervals[u].callback,this.intervals[u].time));var f,p=d(this.unpauseCallbacks);try{for(p.s();!(f=p.n()).done;){(0,g(f.value,2)[1])()}}catch(t){p.e(t)}finally{p.f()}this.unpauseCallbacks.clear()}var h,y=d(this.viewLists);try{for(y.s();!(h=y.n()).done;){var b=g(h.value,2);b[0];b[1].pause(!!t)}}catch(t){y.e(t)}finally{y.f()}for(var v in this.tags)if(Array.isArray(this.tags[v]))for(var m in this.tags[v])this.tags[v][m].pause(!!t);else this.tags[v].pause(!!t)}},{key:"render",value:function(){var t,e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r instanceof _&&(r=r.firstNode.parentNode),n instanceof _&&(n=n.firstNode),this.firstNode)return this.reRender(r,n);this.dispatchEvent(new CustomEvent("render"));var o=this.template instanceof DocumentFragment?this.template.cloneNode(!0):_.templates.has(this.template),i=o?this.template instanceof DocumentFragment?o:_.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(o||this.template instanceof DocumentFragment||_.templates.set(this.template,i.cloneNode(!0)),this.mainView||this.preRuleSet.apply(i,this),this.mapTags(i),this.mainView||this.ruleSet.apply(i,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(t=this.nodes).push.apply(t,[this.firstNode].concat(h(Array.from(i.childNodes)),[this.lastNode])),this.postRender(r),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(r){var a=r.getRootNode();if(n?(r.insertBefore(this.firstNode,n),r.insertBefore(this.lastNode,n)):(r.appendChild(this.firstNode),r.appendChild(this.lastNode)),r.insertBefore(i,this.lastNode),0,a.isConnected)this.attached(a,r),this.dispatchAttached(a,r);else{r.addEventListener("cvDomAttached",function t(n){n.target.isConnected&&(e.attached(a,r),e.dispatchAttached(a,r),r.removeEventListener("cvDomAttached",t))})}}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.dispatchEvent(new CustomEvent("attached",{detail:{view:r||this,node:e,root:t,mainView:this}})),this.dispatchDomAttached(r);var n,o=d(this.nodesAttached.items());try{for(o.s();!(n=o.n()).done;){(0,n.value)(t,e)}}catch(t){o.e(t)}finally{o.f()}}},{key:"dispatchDomAttached",value:function(t){var e=this;this.nodes.filter(function(t){return t.nodeType!==Node.COMMENT_NODE}).forEach(function(r){r.matches&&(a.Dom.mapTags(r,!1,function(r,n){r.matches&&r.dispatchEvent(new CustomEvent("cvDomAttached",{target:r,detail:{view:t||e,mainView:e}}))}),r.dispatchEvent(new CustomEvent("cvDomAttached",{target:r,detail:{view:t||e,mainView:e}})))})}},{key:"reRender",value:function(t,e){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var r=new DocumentFragment;if(this.firstNode.isConnected){var n=this.nodesDetached.items();for(var o in n)n[o]()}if(r.append.apply(r,h(this.nodes)),t){e?(t.insertBefore(this.firstNode,e),t.insertBefore(this.lastNode,e)):(t.appendChild(this.firstNode),t.appendChild(this.lastNode)),t.insertBefore(r,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var i=t.getRootNode();i.isConnected&&(this.attached(i,t),this.dispatchAttached(i,t))}return this.nodes}}},{key:"mapTags",value:function(t){var e=this;a.Dom.mapTags(t,!1,function(t,r){t[k]||(t=t.matches?(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=e.mapInterpolatableTag(t)).matches("[cv-template]")&&e.mapTemplateTag(t)||t).matches("[cv-slot]")&&e.mapSlotTag(t)||t).matches("[cv-prerender]")&&e.mapPrendererTag(t)||t).matches("[cv-link]")&&e.mapLinkTag(t)||t).matches("[cv-attr]")&&e.mapAttrTag(t)||t).matches("[cv-expand]")&&e.mapExpandableTag(t)||t).matches("[cv-ref]")&&e.mapRefTag(t)||t).matches("[cv-on]")&&e.mapOnTag(t)||t).matches("[cv-each]")&&e.mapEachTag(t)||t).matches("[cv-bind]")&&e.mapBindTag(t)||t).matches("[cv-with]")&&e.mapWithTag(t)||t).matches("[cv-if]")&&e.mapIfTag(t)||t).matches("[cv-view]")&&e.mapViewTag(t)||t:e.mapInterpolatableTag(t))!==r.currentNode&&(r.currentNode=t)})}},{key:"mapExpandableTag",value:function(e){var r=e[x];r&&(r(),e[x]=!1);var n=g(t.Bindable.resolve(this.args,e.getAttribute("cv-expand"),!0),2),o=n[0],i=n[1];return e.removeAttribute("cv-expand"),o[i]||(o[i]={}),o[i]=t.Bindable.make(o[i]),this.onRemove(e[x]=o[i].bindTo(function(t,r,n,o,i){o||void 0===t?e.removeAttribute(r,t):null!==t?e.setAttribute(r,t):e.setAttribute(r,"")})),e}},{key:"compileExpandableTag",value:function(e){return function(r){var n=e.cloneNode(!0),o=n.getAttribute("cv-expand"),i=t.Bindable.make(r.args[o]||{});n.removeAttribute("cv-expand");var a=function(e){if("name"===e||"type"===e)return"continue";var o=i.bindTo(e,function(t,e){return function(r){t.setAttribute(e,r)}}(n,e));r.onRemove(function(){o(),i.isBound()&&t.Bindable.clearBindings(i)})};for(var s in i)a(s);return n}}},{key:"mapAttrTag",value:function(t){var e=this.compileAttrTag(t)(this);return t.replaceWith(e),e}},{key:"compileAttrTag",value:function(e){var r=e.getAttribute("cv-attr").split(",").map(function(t){return t.split(":")});return e.removeAttribute("cv-attr"),function(n){var o=e.cloneNode(!0),i=function(e){var i=r[e][1]||r[e][0],a=g(t.Bindable.resolve(n.args,i,!0),2),s=a[0],c=a[1],l=r[e][0];n.onRemove(s.bindTo(c,function(t,e,r,n){n||void 0===t?o.removeAttribute(l,t):null!==t?o.setAttribute(l,t):o.setAttribute(l,"")}))};for(var a in r)i(a);return o}}},{key:"mapInterpolatableTag",value:function(e){var r=this,n=this.interpolateRegex;if(e.nodeType===Node.TEXT_NODE){var o=e.nodeValue;if(!this.interpolatable(o))return e;for(var i,a=0,c=function(){var n=i[2],c=!1,l=!1,u=n.split("|"),f=!1;if(u.length>1&&(f=r.stringTransformer(u.slice(1)),n=u[0]),"$$"===n.substr(0,2)&&(c=!0,l=!0,n=n.substr(2)),"$"===n.substr(0,1)&&(c=!0,n=n.substr(1)),"000"===n.substr(0,3))return expand=!0,n=n.substr(3),"continue";var h=o.substring(a,i.index);a=i.index+i[1].length;var d=document.createTextNode(h);d[k]=!0,e.parentNode.insertBefore(d,e);var y=void 0;(y=c?document.createElement("div"):document.createTextNode(""))[k]=!0;var b=r.args,v=n;if(n.match(/\./)){var m=g(t.Bindable.resolve(r.args,n,!0),2);b=m[0],v=m[1]}if(e.parentNode.insertBefore(y,e),"object"!==p(b))return"break";var w=(b=t.Bindable.make(b)).bindTo(v,function(t,n,o){if(o[n]!==t&&(o[n]instanceof _||o[n]instanceof Node||o[n]instanceof s.Tag)&&(o[n].preserve||o[n].remove()),y.nodeValue="",l&&!(t instanceof _)){var i,a=null!==(i=t)&&void 0!==i?i:"";(t=new _(r.args,r)).template=a}if(f&&(t=f(t)),t instanceof _){var u=function(e,n){t.dispatchAttached(e,n,r)};r.nodesAttached.add(u),t.render(e.parentNode,y);var p=function(){t.preserve||t.remove()};r.onRemove(p),t.onRemove(function(){r.nodesAttached.remove(u),r._onRemove.remove(p)})}else t instanceof Node?(e.parentNode.insertBefore(t,y),r.onRemove(function(){return t.remove()})):t instanceof s.Tag?t.node?(e.parentNode.insertBefore(t.node,y),r.onRemove(function(){return t.remove()})):t.remove():(t instanceof Object&&t.__toString instanceof Function&&(t=t.__toString()),c?y.innerHTML=t:y.nodeValue=t);y[k]=!0});r.onRemove(w)};i=n.exec(o);){var l=c();if("continue"!==l&&"break"===l)break}var u=o.substring(a),f=document.createTextNode(u);f[k]=!0,e.parentNode.insertBefore(f,e),e.nodeValue=""}else if(e.nodeType===Node.ELEMENT_NODE)for(var h=function(o){if(!r.interpolatable(e.attributes[o].value))return"continue";for(var i=0,a=void 0,s=e.attributes[o].value,c=e.attributes[o],l={},u=[];a=n.exec(s);)u.push(s.substring(i,a.index)),l[a[2]]||(l[a[2]]=[]),l[a[2]].push(u.length),u.push(a[1]),i=a.index+a[1].length;u.push(s.substring(i));var f=function(n){var o=r.args,i=n,a=n.split("|"),s=!1,f=n;if(a.length>1&&(s=r.stringTransformer(a.slice(1)),i=a[0]),i.match(/\./)){var p=g(t.Bindable.resolve(r.args,i,!0),2);o=p[0],i=p[1]}l[f];r.onRemove(o.bindTo(i,function(t,n,o,a){for(var p in s&&(t=s(t)),l)for(var h in l[f])u[l[f][h]]=o[p],n===i&&(u[l[f][h]]=t);r.paused?r.unpauseCallbacks.set(c,function(){return e.setAttribute(c.name,u.join(""))}):e.setAttribute(c.name,u.join(""))})),r.onRemove(function(){o.isBound()||t.Bindable.clearBindings(o)})};for(var p in l)f(p)},d=0;d<e.attributes.length;d++)h(d);return e}},{key:"mapRefTag",value:function(t){var e=g(t.getAttribute("cv-ref").split(":"),3),r=e[0],n=e[1],o=void 0===n?null:n,i=e[2],a=void 0===i?null:i,c=s.Tag;o&&(c=this.stringToClass(o)),t.removeAttribute("cv-ref"),Object.defineProperty(t,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(function(){t.___tag___=null,t.remove()});var l=this;this.viewList&&(l=this.viewList.parent);var u=new c(t,this,r,void 0,this);for(t.___tag___=u,this.tags[r]=u;l;){var f=this.args[a];if(void 0!==f?(l.tags[r]||(l.tags[r]=[]),l.tags[r][f]=u):l.tags[r]=u,!l.parent)break;l=l.parent}return t}},{key:"mapBindTag",value:function(e){var r=this,n=e.getAttribute("cv-bind"),o=this.args,i=n,c=null;if(n.match(/\./)){var l=g(t.Bindable.resolve(this.args,n,!0),3);o=l[0],i=l[1],c=l[2]}o!==this.args&&(this.subBindings[n]=this.subBindings[n]||[],this.onRemove(this.args.bindTo(c,function(){for(;r.subBindings.length;)r.subBindings.shift()()})));var u=!1;"$"===i.substr(0,1)&&(i=i.substr(1),u=!0);var f=o.bindTo(i,function(t,n,o,i,c){(c instanceof _||c instanceof Node||c instanceof s.Tag)&&c!==t&&c.remove();var l=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(e.tagName)){var f=e.getAttribute("type");if(f&&"checkbox"===f.toLowerCase())e.checked=!!t,e.dispatchEvent(l);else if(f&&"radio"===f.toLowerCase())e.checked=t==e.value,e.dispatchEvent(l);else if("file"!==f){if("SELECT"===e.tagName){var p=function(){for(var r=0;r<e.options.length;r++){e.options[r].value==t&&(e.selectedIndex=r)}};p(),r.nodesAttached.add(p)}else e.value=null==t?"":t;e.dispatchEvent(l)}}else if(t instanceof _){var h,g=d(e.childNodes);try{for(g.s();!(h=g.n()).done;){h.value.remove()}}catch(t){g.e(t)}finally{g.f()}var y=function(e){t.dispatchDomAttached(r)};r.nodesAttached.add(y),t.render(e),t.onRemove(function(){return r.nodesAttached.remove(y)})}else if(t instanceof Node)e.insert(t);else if(t instanceof s.Tag)e.append(t.node);else if(u){if(e.innerHTML!==t){if(t=String(t),e.innerHTML===t.substring(0,e.innerHTML.length))e.innerHTML+=t.substring(e.innerHTML.length);else{var b,v=d(e.childNodes);try{for(v.s();!(b=v.n()).done;){b.value.remove()}}catch(t){v.e(t)}finally{v.f()}e.innerHTML=t}a.Dom.mapTags(e,!1,function(t){return t[k]=!0})}}else if(e.textContent!==t){var m,w=d(e.childNodes);try{for(w.s();!(m=w.n()).done;){m.value.remove()}}catch(t){w.e(t)}finally{w.f()}e.textContent=t}});o!==this.args&&this.subBindings[n].push(f),this.onRemove(f);var p=e.getAttribute("type"),h=e.getAttribute("multiple"),y=function(r){if(r.target===e)if(p&&"checkbox"===p.toLowerCase())e.checked?o[i]=r.target.getAttribute("value"):o[i]=!1;else if(r.target.matches("[contenteditable=true]"))o[i]=r.target.innerHTML;else if("file"===p&&h){var n=Array.from(r.target.files),a=o[i]||t.Bindable.onDeck(o,i);if(a&&n.length){var s=function(t){if(n[t]!==a[t])return n[t].toJSON=function(){return{name:file[t].name,size:file[t].size,type:file[t].type,date:file[t].lastModified}},a[t]=n[t],"break"};for(var c in n){if("break"===s(c))break}}else o[i]=n}else if("file"===p&&!h&&r.target.files.length){var l=r.target.files.item(0);l.toJSON=function(){return{name:l.name,size:l.size,type:l.type,date:l.lastModified}},o[i]=l}else o[i]=r.target.value};return"file"===p||"radio"===p?e.addEventListener("change",y):(e.addEventListener("input",y),e.addEventListener("change",y),e.addEventListener("value-changed",y)),this.onRemove(function(){"file"===p||"radio"===p?e.removeEventListener("change",y):(e.removeEventListener("input",y),e.removeEventListener("change",y),e.removeEventListener("value-changed",y))}),e.removeAttribute("cv-bind"),e}},{key:"mapOnTag",value:function(t){var e=this;return String(t.getAttribute("cv-on")).split(";").map(function(t){return t.split(":")}).forEach(function(r){var n,o=(r=r.map(function(t){return t.trim()})).length,i=String(r.shift()).trim(),a=String(r.shift()||i).trim(),s=String(r.shift()||"").trim(),c=[],l=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(a);l&&(a=l[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),l[2]&&(c=l[2].split(",").map(function(t){return t.trim()}))),c.length||c.push("$event"),i&&1!==o||(i=a);for(var u=e,f=function(){var t=u.controller;return"function"==typeof t[a]?(n=function(){t[a].apply(t,arguments)},"break"):"function"==typeof u[a]?(n=function(){var t;(t=u)[a].apply(t,arguments)},"break"):u.parent?void(u=u.parent):"break"};u;){if("break"===f())break}var p=function(r){var o=c.map(function(n){var o;return Number(n)==n?n:"event"===n||"$event"===n?r:"$view"===n?u:"$controller"===n?controller:"$tag"===n?t:"$parent"===n?e.parent:"$subview"===n?e:n in e.args?e.args[n]:(o=/^['"]([\w-]+?)["']$/.exec(n))?o[1]:void 0});if("function"!=typeof n)throw new Error("".concat(a," is not defined on View object.")+"\nTag:\n"+"".concat(t.outerHTML));n.apply(void 0,h(o))},g={};switch(s.includes("p")?g.passive=!0:s.includes("P")&&(g.passive=!1),s.includes("c")?g.capture=!0:s.includes("C")&&(g.capture=!1),s.includes("o")?g.once=!0:s.includes("O")&&(g.once=!1),i){case"_init":p();break;case"_attach":e.nodesAttached.add(p);break;case"_detach":e.nodesDetached.add(p);break;default:t.addEventListener(i,p,g),e.onRemove(function(){t.removeEventListener(i,p,g)})}return[i,a,c]}),t.removeAttribute("cv-on"),t}},{key:"mapLinkTag",value:function(t){var e=t.getAttribute("cv-link");t.setAttribute("href",e);var r=function(r){r.preventDefault(),"http"!==e.substring(0,4)&&"//"!==e.substring(0,2)?o.Router.go(t.getAttribute("href")):window.open(t.getAttribute("href",e))};return t.addEventListener("click",r),this.onRemove(function(t,e){return function(){t.removeEventListener("click",e),t=void 0,e=void 0}}(t,r)),t.removeAttribute("cv-link"),t}},{key:"compileLinkTag",value:function(t){var e=t.getAttribute("cv-link");return t.removeAttribute("cv-link"),function(r){var n=t.cloneNode(!0);return n.setAttribute("href",e),n}}},{key:"mapPrendererTag",value:function(t){var e=t.getAttribute("cv-prerender"),r=window.prerenderer||navigator.userAgent.match(/prerender/i);return r&&(window.prerenderer=window.prerenderer||!0),("never"===e&&r||"only"===e&&!r)&&t.parentNode.removeChild(t),t}},{key:"mapWithTag",value:function(e){var r=this,n=e.getAttribute("cv-with"),o=e.getAttribute("cv-carry"),i=e.getAttribute("cv-view");e.removeAttribute("cv-with"),e.removeAttribute("cv-carry"),e.removeAttribute("cv-view");var a=i?this.stringToClass(i):_,s=new DocumentFragment;h(e.childNodes).forEach(function(t){return s.appendChild(t)});var c=[];o&&(c=o.split(",").map(function(t){return t.trim()}));var l=this.args.bindTo(n,function(n,o,i,l){for(r.withViews.has(e)&&r.withViews.delete(e);e.firstChild;)e.removeChild(e.firstChild);var u=new a({},r);r.onRemove(function(t){return function(){t.remove()}}(u)),u.template=s;var f=function(t){var e=r.args.bindTo(c[t],function(t,e){u.args[e]=t});u.onRemove(e),r.onRemove(function(){e(),u.remove()})};for(var h in c)f(h);var g=function(e){if("object"!==p(n))return"continue";var o=(n=t.Bindable.make(n)).bindTo(e,function(t,e,r,n){n?e in u.args&&delete u.args[e]:u.args[e]=t});u.args.bindTo(e,function(t,e,r,o){o?e in n&&delete n[e]:n[e]=t});r.onRemove(function(){o(),n.isBound()||t.Bindable.clearBindings(n),u.remove()}),u.onRemove(function(){o(),n.isBound()||t.Bindable.clearBindings(n)})};for(var d in n)g(d);u.render(e),r.withViews.set(e,u)});return this.onRemove(function(){r.withViews.delete(e),l()}),e}},{key:"mapViewTag",value:function(t){var e=this,r=t.getAttribute("cv-view");t.removeAttribute("cv-view");var n=new DocumentFragment;h(t.childNodes).forEach(function(t){return n.appendChild(t)});var o=r.split(":"),i=o.pop()?this.stringToClass(r):_,a=o.shift(),s=new i(this.args,this);return this.views.set(t,s),a&&this.views.set(a,s),this.onRemove(function(r){return function(){r.remove(),e.views.delete(t),e.views.delete(a)}}(s)),s.template=n,s.render(t),t}},{key:"mapEachTag",value:function(e){var r=this,o=e.getAttribute("cv-each"),i=e.getAttribute("cv-view");e.removeAttribute("cv-each"),e.removeAttribute("cv-view");var a=i?this.stringToClass(i):_,s=new DocumentFragment;h(e.childNodes).forEach(function(t){return s.appendChild(t)});var l=g(o.split(":"),3),u=l[0],f=l[1],p=l[2],d=this.args,y=u;if(u.match(/\./)){var b=g(t.Bindable.resolve(this.args,u,!0),2);d=b[0],y=b[1]}var v=d.bindTo(y,function(t,o,i,l,u){t instanceof c.Bag&&(t=t.list),r.viewLists.has(e)&&r.viewLists.get(e).remove();var h=new n.ViewList(s,f,t,r,p,a),g=function(){return h.remove()};r.onRemove(g),h.onRemove(function(){return r._onRemove.remove(g)});var d=r.args.bindTo(function(t,e,r,n){"_id"!==e&&(n?e in h.subArgs&&delete h.subArgs[e]:h.subArgs[e]=t)}),y=h.args.bindTo(function(t,e,n,o,i){"_id"!==e&&"value"!==e&&"___"!==String(e).substring(0,3)&&(o?delete r.args[e]:e in r.args&&(r.args[e]=t))});for(h.onRemove(d),h.onRemove(y),r.onRemove(d),r.onRemove(y);e.firstChild;)e.removeChild(e.firstChild);r.viewLists.set(e,h),h.render(e)});return this.onRemove(v),e}},{key:"mapIfTag",value:function(e){var r=this,n=e,o=n.getAttribute("cv-view"),i=n.getAttribute("cv-if"),s=n.getAttribute("cv-is"),l=!1,u=!1;n.removeAttribute("cv-view"),n.removeAttribute("cv-if"),n.removeAttribute("cv-is");var f=o?this.stringToClass(o):_;"!"===i.substr(0,1)&&(i=i.substr(1),l=!0),"?"===i.substr(0,1)&&(i=i.substr(1),u=!0);var p=new DocumentFragment;h(n.childNodes).forEach(function(t){return p.appendChild(t)});var d=this,y=new DocumentFragment,b=new f(Object.assign({},this.args),d);b.tags.bindTo(function(t,e){return r.tags[e]=t},{removeWith:this}),b.template=p;var v=d.args,m=i;if(i.match(/\./)){var w=g(t.Bindable.resolve(d.args,i,!0),2);v=w[0],m=w[1]}b.render(y);var S=v.bindTo(m,function(t,n){var o=t;u&&(t=null!==t&&void 0!==t),t instanceof c.Bag&&(t=t.list),Array.isArray(t)&&(t=!!t.length),null!==s&&(t=o==s),l&&(t=!t),t?(e.appendChild(y),h(y.childNodes).forEach(function(t){return a.Dom.mapTags(t,!1,function(t,e){t.matches&&t.dispatchEvent(new CustomEvent("cvDomAttached",{target:t,detail:{view:b||r,mainView:r}}))})})):(b.nodes.forEach(function(t){return y.appendChild(t)}),a.Dom.mapTags(y,!1,function(t,e){t.matches&&new CustomEvent("cvDomDetached",{target:t,detail:{view:b||r,mainView:r}})}))},{children:Array.isArray(v[m])});d.onRemove(S);var O=this.args.bindTo(function(t,e,r,n){"_id"!==e&&(n?e in b.args&&delete b.args[e]:b.args[e]=t)}),k=b.args.bindTo(function(t,e,n,o,i){"_id"!==e&&"___"!==String(e).substring(0,3)&&e in r.args&&(o?delete r.args[e]:r.args[e]=t)});return d.onRemove(function(){S(),O(),k(),d._onRemove.remove(S)}),this.onRemove(function(){O(),k(),b.remove(),d!==r&&d.remove()}),e}},{key:"compileIfTag",value:function(e){var r=e.getAttribute("cv-if"),n=!1;e.removeAttribute("cv-if"),"!"===r.substr(0,1)&&(r=r.substr(1),n=!0);var o=new DocumentFragment;return h(e.childNodes).forEach(function(t){return o.appendChild(t.cloneNode(!0))}),function(i){var a=e.cloneNode(),s=new DocumentFragment,c=new _({},i);c.template=o,i.syncBind(c);var l=i.args,u=r;if(r.match(/\./)){var f=g(t.Bindable.resolve(i.args,r,!0),2);l=f[0],u=f[1]}var p=!1,h=l.bindTo(u,function(t,e){if(!p){var r=i.args[u]||n?a:s;return c.render(r),void(p=!0)}Array.isArray(t)&&(t=!!t.length),n&&(t=!t),t?a.appendChild(s):c.nodes.forEach(function(t){return s.appendChild(t)})});i.onRemove(h);var d=function(){l.isBound()||t.Bindable.clearBindings(l)};return c.onRemove(function(){h(),d(),i._onRemove.remove(h),i._onRemove.remove(d)}),a}}},{key:"mapTemplateTag",value:function(t){var e=t.getAttribute("cv-template");return t.removeAttribute("cv-template"),this.templates[e]=function(){return"TEMPLATE"===t.tagName?t.content.cloneNode(!0):new DocumentFragment(t.innerHTML)},this.rendered.then(function(){return t.remove()}),t}},{key:"mapSlotTag",value:function(t){var e=t.getAttribute("cv-slot"),r=this.templates[e];if(!r){for(var n=this;n&&!(r=n.templates[e]);)n=this.parent;if(!r)return void console.error("Template ".concat(e," not found."))}var o=r();for(t.removeAttribute("cv-slot");t.firstChild;)t.firstChild.remove();return t.appendChild(o),t}},{key:"syncBind",value:function(t){var e=this,r=this.args.bindTo(function(e,r,n,o){"_id"!==r&&t.args[r]!==e&&(t.args[r]=e)}),n=t.args.bindTo(function(t,r,n,o,i){if("_id"!==r){var a=t,s=i;a instanceof _&&(a=a.___ref___),s instanceof _&&(s=s.___ref___),a!==s&&s instanceof _&&i.remove(),r in e.args&&(e.args[r]=t)}});this.onRemove(r),this.onRemove(n),t.onRemove(function(){e._onRemove.remove(r),e._onRemove.remove(n)})}},{key:"postRender",value:function(t){}},{key:"attached",value:function(t){}},{key:"interpolatable",value:function(t){return!!String(t).match(this.interpolateRegex)}},{key:"remove",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.dispatchEvent(new CustomEvent("remove",{detail:{view:this},cancelable:!0}))){var r=function(){for(var e in t.tags)Array.isArray(t.tags[e])?(t.tags[e]&&t.tags[e].forEach(function(t){return t.remove()}),t.tags[e].splice(0)):(t.tags[e]&&t.tags[e].remove(),t.tags[e]=void 0);for(var r in t.nodes)t.nodes[r]&&t.nodes[r].dispatchEvent(new Event("cvDomDetached")),t.nodes[r]&&t.nodes[r].remove(),t.nodes[r]=void 0;t.nodes.splice(0),t.firstNode=t.lastNode=void 0};e?r():requestAnimationFrame(r);var n,o=d(this._onRemove.items());try{for(o.s();!(n=o.n()).done;){var i=n.value;i(),this._onRemove.remove(i)}}catch(t){o.e(t)}finally{o.f()}var a,s=d(this.cleanup);try{for(s.s();!(a=s.n()).done;){var c=a.value;c&&c()}}catch(t){s.e(t)}finally{s.f()}this.cleanup.length=0;var l,u=d(this.viewLists);try{for(u.s();!(l=u.n()).done;){var f=g(l.value,2);f[0];f[1].remove()}}catch(t){u.e(t)}finally{u.f()}this.viewLists.clear();var p,h=d(this.timeouts);try{for(h.s();!(p=h.n()).done;){var y=g(p.value,2),b=(y[0],y[1]);clearTimeout(b.timeout),this.timeouts.delete(b.timeout)}}catch(t){h.e(t)}finally{h.f()}var v,m=d(this.intervals);try{for(m.s();!(v=m.n()).done;){var w=v.value;clearInterval(w)}}catch(t){m.e(t)}finally{m.f()}this.intervals.length=0;var S,O=d(this.frames);try{for(O.s();!(S=O.n()).done;){(0,S.value)()}}catch(t){O.e(t)}finally{O.f()}this.frames.length=0,this.preRuleSet.purge(),this.ruleSet.purge(),this.removed=!0,this.dispatchEvent(new CustomEvent("removed",{detail:{view:this},cancelable:!0}))}}},{key:"findTag",value:function(t){for(var e in this.nodes){var r;if(this.nodes[e].querySelector){if(this.nodes[e].matches(t))return new s.Tag(this.nodes[e],this,void 0,void 0,this);if(r=this.nodes[e].querySelector(t))return new s.Tag(r,this,void 0,void 0,this)}}}},{key:"findTags",value:function(t){var e=this;return this.nodes.filter(function(t){return t.querySelectorAll}).map(function(e){return h(e.querySelectorAll(t))}).flat().map(function(t){return new s.Tag(t,e,void 0,void 0,e)})||[]}},{key:"onRemove",value:function(t){t instanceof Event||this._onRemove.add(t)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(t){}},{key:"afterUpdate",value:function(t){}},{key:"stringTransformer",value:function(t){var e=this;return function(r){for(var n in t){for(var o=e,i=t[n];o&&!o[i];)o=o.parent;if(!o)return;r=o[t[n]](r)}return r}}},{key:"stringToClass",value:function(t){if(_.refClasses.has(t))return _.refClasses.get(t);var e=t.split("/"),n=e[e.length-1],o=r(t);return _.refClasses.set(t,o[n]),o[n]}},{key:"preventParsing",value:function(t){t[k]=!0}},{key:"toString",value:function(){return this.nodes.map(function(t){return t.outerHTML}).join(" ")}},{key:"listen",value:function(t,e,r,n){var o=this;if("string"==typeof t&&(n=r,r=e,e=t,t=this),t instanceof _)return this.listen(t.nodes,e,r,n);if(Array.isArray(t))return t.map(function(t){return o.listen(t,e,r,n)}).forEach(function(t){return t()});if(t instanceof s.Tag)return this.listen(t.element,e,r,n);t.addEventListener(e,r,n);var i=function(){return t.removeEventListener(e,r,n)},a=function(){i(),i=function(){}};return this.onRemove(function(){return a()}),a}},{key:"detach",value:function(){for(var t in this.nodes)this.nodes[t].remove();return this.nodes}}],O=[{key:"from",value:function(t){var e=new this(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return e.template=t,e}},{key:"isView",value:function(){return _}},{key:"uuid",value:function(){return new i.Uuid}}],b&&v(y.prototype,b),O&&v(y,O),Object.defineProperty(y,"prototype",{writable:!1}),_}();e.View=P,Object.defineProperty(P,"templates",{value:new Map}),Object.defineProperty(P,"refClasses",{value:new Map})}()}),require.register("curvature/base/ViewList.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewList=void 0;var t=r("./Bindable"),n=r("./SetMap"),o=r("./Bag");function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function e(r,n,i,a){var c=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.removed=!1,this.args=t.Bindable.makeBindable({}),this.args.value=t.Bindable.makeBindable(i||{}),this.subArgs=t.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=u,this._onRemove=new o.Bag,this.template=r,this.subProperty=n,this.keyProperty=l,this.tag=null,this.downDebind=[],this.upDebind=[],this.paused=!1,this.parent=a,this.rendered=new Promise(function(t,e){Object.defineProperty(c,"renderComplete",{configurable:!1,writable:!0,value:t})}),this.willReRender=!1,this.args.___before(function(t,e,r,n,o){"bindTo"!=e&&(c.paused=!0)}),this.args.___after(function(t,e,r,n,o){"bindTo"!=e&&(c.paused=r.length>1,c.reRender())});var f=this.args.value.bindTo(function(t,e,r,n){if(!c.paused){var o=e;if("symbol"!==s(e))if(isNaN(e)&&(o="_"+e),n)for(var i in c.views[o]&&c.views[o].remove(),delete c.views[o],c.views)isNaN(i)?c.views[i].args[c.keyProperty]=i.substr(1):c.views[i].args[c.keyProperty]=i;else c.views[o]?c.views[o]&&c.views[o].args&&(c.views[o].args[c.keyProperty]=e,c.views[o].args[c.subProperty]=t):(cancelAnimationFrame(c.willReRender),c.willReRender=requestAnimationFrame(function(){c.reRender()}))}});this._onRemove.add(f),Object.preventExtensions(this)}var r,a,l;return r=e,(a=[{key:"render",value:function(t){var e,r=this,n=[],o=i(this.views);try{var a=function(){var r=e.value;r.render(t),n.push(r.rendered.then(function(){return r}))};for(o.s();!(e=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}this.tag=t,Promise.all(n).then(function(t){return r.renderComplete(t)}),this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}},{key:"reRender",value:function(){var t=this;if(!this.paused&&this.tag){var e=[],r=new n.SetMap;for(var o in this.views){var a=this.views[o],s=a.args[this.subProperty];r.add(s,a),e[o]=a}var c=[],l=new Set;this.downDebind.length&&this.downDebind.forEach(function(t){return t&&t()}),this.upDebind.length&&this.upDebind.forEach(function(t){return t&&t()}),this.upDebind.length=0,this.downDebind.length=0;var u=1/0,f=1/0,p=function(e){var n=!1,o=e;if(isNaN(o)?o="_"+e:String(o).length&&(o=Number(o)),void 0!==t.args.value[e]&&r.has(t.args.value[e])){var i=r.getOne(t.args.value[e]);i&&(i.args[t.keyProperty]=e,c[o]=i,l.add(i),n=!0,isNaN(o)||(u=Math.min(u,o),o>0&&(f=Math.min(f,o))),r.remove(t.args.value[e],i))}if(!n){var a={},s=c[o]=new t.viewClass(a,t.parent);isNaN(o)||(u=Math.min(u,o),o>0&&(f=Math.min(f,o))),c[o].template=t.template,c[o].viewList=t,c[o].args[t.keyProperty]=e,c[o].args[t.subProperty]=t.args.value[e],t.upDebind[o]=a.bindTo(t.subProperty,function(e,r,n,o){var i=a[t.keyProperty];o?delete t.args.value[i]:t.args.value[i]=e}),t.downDebind[o]=t.subArgs.bindTo(function(t,e,r,n){n?delete a[e]:a[e]=t});var p=function(){t.upDebind.filter(function(t){return t}).forEach(function(t){return t()}),t.upDebind.length=0},h=function(){t.downDebind.filter(function(t){return t}).forEach(function(t){return t()}),t.downDebind.length=0};s.onRemove(function(){t._onRemove.remove(p),t._onRemove.remove(h),t.upDebind[o]&&t.upDebind[o](),t.downDebind[o]&&t.downDebind[o](),delete t.upDebind[o],delete t.downDebind[o]}),t._onRemove.add(p),t._onRemove.add(h),a[t.subProperty]=t.args.value[e]}};for(var h in this.args.value)p(h);for(var g in e)l.has(e[g])||e[g].remove();if(Array.isArray(this.args.value)){var d=0===u&&void 0!==c[1]&&c.length>1||f===1/0?u:f;this.rendered=function e(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=c.length-r-1;n>d&&void 0===c[n];)n--;if(n<d)return Promise.resolve();if(c[n]===t.views[n])return c[n]&&!c[n].firstNode?(c[n].render(t.tag,c[n+1]),c[n].rendered.then(function(){return e(Number(r)+1)})):0===r||r%500?e(Number(r)+1):new Promise(function(t){return requestAnimationFrame(function(){return t(e(Number(r)+1))})});return c[n].render(t.tag,c[n+1]),t.views.splice(n,0,c[n]),c[n].rendered.then(function(){return e(r+1)})}()}else{var y,b=[],v=Object.assign({},c),m=function(t){return parseInt(t)===t-0},w=i(Object.keys(c).sort(function(t,e){return m(t)&&m(e)?Math.sign(t-e):m(t)||m(e)?!m(t)&&m(e)?-1:m(t)&&!m(e)?1:void 0:0}));try{var S=function(){var e=y.value;if(delete v[e],c[e].firstNode&&c[e]===t.views[e])return"continue";c[e].render(t.tag),b.push(c[e].rendered.then(function(){return c[e]}))};for(w.s();!(y=w.n()).done;)S()}catch(t){w.e(t)}finally{w.f()}for(var O in v)delete this.args.views[O],v.remove();this.rendered=Promise.all(b)}for(var k in c)isNaN(k)?c[k].args[this.keyProperty]=k.substr(1):c[k].args[this.keyProperty]=k;this.views=Array.isArray(this.args.value)?[].concat(c):c,l.clear(),this.willReRender=!1,this.rendered.then(function(){t.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:t.subProperty,value:t.args.value,tag:t.tag}}})),t.tag.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:t.subProperty,value:t.args.value,tag:t.tag}}}))})}}},{key:"pause",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var e in this.views)this.views[e].pause(t)}},{key:"onRemove",value:function(t){this._onRemove.add(t)}},{key:"remove",value:function(){for(var e in this.views)this.views[e].remove();var r=this._onRemove.items();for(var n in r)this._onRemove.remove(r[n]),r[n]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&t.Bindable.clearBindings(this.subArgs),t.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&t.Bindable.clearBindings(this.args.value),this.removed=!0}}])&&c(r.prototype,a),l&&c(r,l),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.ViewList=l}()}),require.register("curvature/input/Keyboard.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Keyboard=void 0;var t=r("../base/Bindable");function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function e(){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxDecay=120,this.comboTime=500,this.listening=!1,this.focusElement=document.body,this[t.Bindable.NoGetters]=!0,Object.defineProperty(this,"combo",{value:t.Bindable.make([])}),Object.defineProperty(this,"whichs",{value:t.Bindable.make({})}),Object.defineProperty(this,"codes",{value:t.Bindable.make({})}),Object.defineProperty(this,"keys",{value:t.Bindable.make({})}),Object.defineProperty(this,"pressedWhich",{value:t.Bindable.make({})}),Object.defineProperty(this,"pressedCode",{value:t.Bindable.make({})}),Object.defineProperty(this,"pressedKey",{value:t.Bindable.make({})}),Object.defineProperty(this,"releasedWhich",{value:t.Bindable.make({})}),Object.defineProperty(this,"releasedCode",{value:t.Bindable.make({})}),Object.defineProperty(this,"releasedKey",{value:t.Bindable.make({})}),Object.defineProperty(this,"keyRefs",{value:t.Bindable.make({})}),document.addEventListener("keyup",function(t){r.listening&&(r.keys[t.key]>0||!r.focusElement||document.activeElement===r.focusElement||r.focusElement.contains(document.activeElement)&&!document.activeElement.matches("input,textarea"))&&(t.preventDefault(),r.releasedWhich[t.which]=Date.now(),r.releasedCode[t.code]=Date.now(),r.releasedKey[t.key]=Date.now(),r.whichs[t.which]=-1,r.codes[t.code]=-1,r.keys[t.key]=-1)}),document.addEventListener("keydown",function(t){r.listening&&(!r.focusElement||document.activeElement===r.focusElement||r.focusElement.contains(document.activeElement)&&!document.activeElement.matches("input,textarea"))&&(t.preventDefault(),t.repeat||(r.combo.push(t.code),clearTimeout(r.comboTimer),r.comboTimer=setTimeout(function(){return r.combo.splice(0)},r.comboTime),r.pressedWhich[t.which]=Date.now(),r.pressedCode[t.code]=Date.now(),r.pressedKey[t.key]=Date.now(),r.keys[t.key]>0||(r.whichs[t.which]=1,r.codes[t.code]=1,r.keys[t.key]=1)))});var n=function(t){for(var e in r.keys)r.keys[e]<0||(r.releasedKey[e]=Date.now(),r.keys[e]=-1);for(var n in r.codes)r.codes[n]<0||(r.releasedCode[n]=Date.now(),r.codes[n]=-1);for(var o in r.whichs)r.whichs[o]<0||(r.releasedWhich[o]=Date.now(),r.whichs[o]=-1)};window.addEventListener("blur",n),window.addEventListener("visibilitychange",function(){"visible"!==document.visibilityState&&n()})}var r,o,i;return r=e,i=[{key:"get",value:function(){return this.instance=this.instance||t.Bindable.make(new this)}}],(o=[{key:"getKeyRef",value:function(e){return this.keyRefs[e]=this.keyRefs[e]||t.Bindable.make({})}},{key:"getKeyTime",value:function(t){var e=this.releasedKey[t],r=this.pressedKey[t];return r?!e||e<r?Date.now()-r:-1*(Date.now()-e):0}},{key:"getCodeTime",value:function(t){var e=this.releasedCode[t],r=this.pressedCode[t];return r?!e||e<r?Date.now()-r:-1*(Date.now()-e):0}},{key:"getWhichTime",value:function(t){var e=this.releasedWhich[t],r=this.pressedWhich[t];return r?!e||e<r?Date.now()-r:-1*(Date.now()-e):0}},{key:"getKey",value:function(t){return this.keys[t]?this.keys[t]:0}},{key:"getKeyCode",value:function(t){return this.codes[t]?this.codes[t]:0}},{key:"reset",value:function(){for(var t in this.keys)delete this.keys[t];for(var t in this.codes)delete this.codes[t];for(var t in this.whichs)delete this.whichs[t]}},{key:"update",value:function(){for(var t in this.keys)this.keys[t]>0?this.keys[t]++:this.keys[t]>-this.maxDecay?this.keys[t]--:delete this.keys[t];for(var t in this.codes){var e=this.releasedCode[t],r=this.pressedCode[t],n=this.getKeyRef(t);if(this.codes[t]>0){if(n.frames=this.codes[t]++,n.time=r?Date.now()-r:0,n.down=!0,!e||e<r)return;return-1*(Date.now()-e)}this.codes[t]>-this.maxDecay?(n.frames=this.codes[t]--,n.time=e-Date.now(),n.down=!1):(n.frames=0,n.time=0,n.down=!1,delete this.codes[t])}for(var t in this.whichs)this.whichs[t]>0?this.whichs[t]++:this.whichs[t]>-this.maxDecay?this.whichs[t]--:delete this.whichs[t]}}])&&n(r.prototype,o),i&&n(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.Keyboard=o}()}),require.register("curvature/input/Sequence.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Sequence=void 0;var n,o=r("../base/Bindable"),i=r("../base/Mixin"),a=r("../mixin/EventTargetMixin");function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=h(e);if(r){var i=h(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}(this,n)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}n=o.Bindable.NoGetters;var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(h,i.Mixin["with"](a.EventTargetMixin));var e,r,o,c=f(h);function h(t){var e,r=t.callback,o=t.keys,i=t.timing,a=t.gamepad;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),g(p(e=c.call(this)),n,!0),g(p(e),"lastTap",!1),g(p(e),"recent",[]),g(p(e),"callback",function(){}),g(p(e),"timing",500),g(p(e),"keys","");var s=[r,i,o,a];return e.callback=s[0],e.timing=s[1],e.keys=s[2],e.gamepad=s[3],e}return e=h,(r=[{key:"check",value:function(t){var e=this.recent,r=Date.now();r+-this.lastTap>this.timing&&e.splice(0),e.push({code:t,time:Date.now()});var n=e.map(function(t){return t.code}).join(","),o=this.keys.join(",");this.lastTap=r;var i=[];for(var a in e){e[a];var c=e.slice(a),l=c.map(function(t){return t.code}).join(",");if(l===o.substr(0,l.length)){i.push.apply(i,s(c)),this.dispatchEvent(new CustomEvent("advance",{detail:{matched:i,recent:e,keys:this.keys,length:c.length}}));break}}i.length?o===n.substr(-o.length)&&this.dispatchEvent(new CustomEvent("complete",{detail:{matched:i,recent:e,keys:this.keys,length:i.length}})):this.dispatchEvent(new CustomEvent("cancel",{detail:{matched:i,recent:e,keys:this.keys,length:i.length}}))}}])&&l(e.prototype,r),o&&l(e,o),Object.defineProperty(e,"prototype",{writable:!1}),h}();e.Sequence=d}()}),require.register("curvature/mixin/EventTargetMixin.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventTargetMixin=void 0;var t,n=r("../base/Mixin");function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=Symbol("Target"),a=(o(t={},n.Mixin.Constructor,function(){try{this[i]=new EventTarget}catch(t){this[i]=document.createDocumentFragment()}}),o(t,"dispatchEvent",function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=r[0];"string"==typeof o&&(o=new CustomEvent(o),r[0]=o),(t=this[i]).dispatchEvent.apply(t,r);var a="on".concat(o.type[0].toUpperCase()+o.type.slice(1));return"function"==typeof this[a]&&this[a](o),o.returnValue}),o(t,"addEventListener",function(){var t;(t=this[i]).addEventListener.apply(t,arguments)}),o(t,"removeEventListener",function(){var t;(t=this[i]).removeEventListener.apply(t,arguments)}),t);e.EventTargetMixin=a}()}),require.register("curvature/mixin/PromiseMixin.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PromiseMixin=void 0;var t,n=r("../base/Mixin");function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=Symbol("Promise"),a=Symbol("Accept"),s=Symbol("Reject"),c=(o(t={},n.Mixin.Constructor,function(){var t=this;this[i]=new Promise(function(e,r){t[a]=e,t[s]=r})}),o(t,"then",function(){var t;return(t=this[i]).then.apply(t,arguments)}),o(t,"catch",function(){var t;return(t=this[i]).catch.apply(t,arguments)}),o(t,"finally",function(){var t;return(t=this[i]).finally.apply(t,arguments)}),t);e.PromiseMixin=c,Object.defineProperty(c,"Reject",{value:s}),Object.defineProperty(c,"Accept",{value:a})}()}),require.register("curvature/model/Database.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Database=void 0;var n=r("../base/Bindable"),o=r("../base/Mixin"),i=r("../mixin/EventTargetMixin");function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=p(e);if(r){var i=p(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,n)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=Symbol("BeforeWrite"),g=Symbol("AfterWrite"),d=Symbol("BeforeDelete"),y=Symbol("AfterDelete"),b=Symbol("BeforeInsert"),v=Symbol("AfterInsert"),m=Symbol("BeforeUpdate"),w=Symbol("AfterUpdate"),S=Symbol("BeforeRead"),O=Symbol("AfterRead"),k=Symbol("PrimaryKey"),x=Symbol("Connection"),j=Symbol("Instances"),P=(Symbol("HighWater"),Symbol("Metadata")),_=Symbol("Timers"),R=Symbol("Target"),M=(Symbol("Store"),Symbol("Each")),T=Symbol("Name"),E=Symbol("Bank"),A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.Mixin["with"](i.EventTargetMixin));var e,r,s,p=u(h);function h(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),e=p.call(this),Object.defineProperty(f(e),x,{value:t}),Object.defineProperty(f(e),T,{value:t.name}),Object.defineProperty(f(e),_,{value:{}}),Object.defineProperty(f(e),P,{value:{}}),Object.defineProperty(f(e),E,{value:{}}),e}return e=h,s=[{key:"open",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[j][t]?this[j][t]:this[j][t]=new Promise(function(n,o){var i=indexedDB.open(t,r);i.onerror=function(t){h.dispatchEvent(new CustomEvent("error",{detail:{database:e[T],error:t,store:void 0,type:"read",subType:"select"}})),o(t)},i.onsuccess=function(t){var r=new e(t.target.result);n(r)},i.onupgradeneeded=function(t){var n=t.target.result;n.addEventListener("error",function(t){return console.error(t)});for(var o=new e(n),i=t.oldVersion+1;i<=r;i+=1)o["_version_"+i](n)}})}},{key:"getPrimaryKey",value:function(t){return t[k]?t[k]:null}},{key:"destroyDatabase",value:function(){var t=this;return new Promise(function(e,r){var n=indexedDB.delete(dbName);n.onerror=function(t){h.dispatchEvent(new CustomEvent("error",{detail:{database:dbName,error:t,type:"destroy"}})),r(t)},n.onsuccess=function(r){delete t[j][dbName],e(dbName)}})}}],(r=[{key:"select",value:function(t){var e=this,r=t.store,n=t.index,o=t.range,i=void 0===o?null:o,a=t.ranges,s=void 0===a?[]:a,c=t.direction,l=void 0===c?"next":c,u=t.limit,f=void 0===u?0:u,p=t.offset,h=void 0===p?0:p,g=t.type,d=void 0!==g&&g,y=t.origin,b=void 0===y?void 0:y,v=t.map,m=void 0===v?void 0:v,w=this[x].transaction(r,"readonly").objectStore(r),S=n?w.index(n):w;return s&&s.length||(s=[i]),{each:this[M](d,S,l,s,f,h,b,m),one:this[M](d,S,l,s,1,h,b,m),then:function(t){return e[M](d,S,l,s,f,h,b,m)(function(t){return t}).then(t)}}}},{key:"insert",value:function(t,e){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this[E][t]=this[E][t]||{};var i=this[x].transaction([t],"readwrite"),a=i.objectStore(t),s=this[E][t],c=!0;Array.isArray(e)||(e=[e],c=!1);var l,u=e.map(function(e){return new Promise(function(c,l){e=n.Bindable.make(e);var u={database:r[T],record:e,store:t,type:"write",subType:"insert",origin:o},f=e[h.BeforeWrite]?e[h.BeforeWrite](u):null,p=e[h.BeforeInsert]?e[h.BeforeInsert](u):null,g=a.add(Object.assign({},n.Bindable.shuck(e)));!1!==f&&!1!==p&&(g.onerror=function(t){r.dispatchEvent(new CustomEvent("writeError",{detail:u})),l(t)},g.onsuccess=function(n){var a=n.target.result;s[a]=e;if(u.key=h.getPrimaryKey(e),r.dispatchEvent(new CustomEvent("write",{cancelable:!0,detail:u}))){if(e[k]=Symbol.for(a),r[P][t]||(r[P][t]=r.getStoreMeta(t,"store",{})),r[P][t]){var l=r.checkHighWaterMark(t,e),f=r.checkLowWaterMark(t,e),p=r[P][t],g=e[p.highWater];o.setHighWater&&l<g&&r.setHighWaterMark(t,e,o,"insert"),o.setLowWater&&f>g&&r.setLowWaterMark(t,e,o,"insert")}e[h.AfterInsert]&&e[h.AfterInsert](u),e[h.AfterWrite]&&e[h.AfterWrite](u)}else i.abort();c(e)})})});return l=c?Promise.allSettled(u):u[0],Promise.all(u).then(function(){return i.commit&&i.commit()}),l}},{key:"update",value:function(t,e){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e[k])throw Error("Value provided is not a DB record!");return new Promise(function(i,a){var s=r[x].transaction([t],"readwrite"),c=s.objectStore(t),l={database:r[T],key:h.getPrimaryKey(e),record:e,store:t,type:"write",subType:"update",origin:o};e[h.AfterInsert]&&e[h.AfterInsert](l),e[h.AfterWrite]&&e[h.AfterWrite](l);var u=e[h.BeforeWrite]?e[h.BeforeWrite](l):null,f=e[h.BeforeUpdate]?e[h.BeforeUpdate](l):null;if(!1!==u&&!1!==f){var p=c.put(Object.assign({},n.Bindable.shuck(e)));p.onerror=function(t){r.dispatchEvent(new CustomEvent("writeError",{detail:l})),a(t)},p.onsuccess=function(n){if(r.dispatchEvent(new CustomEvent("write",{cancelable:!0,detail:l}))){if(r[P][t]||(r[P][t]=r.getStoreMeta(t,"store",{})),r[P][t]){var a=r.checkHighWaterMark(t,e),c=r.checkLowWaterMark(t,e),u=r[P][t],f=e[u.highWater];o.setHighWater&&a<f&&r.setHighWaterMark(t,e,o,"insert"),o.setLowWater&&c>f&&r.setLowWaterMark(t,e,o,"insert")}s.commit&&s.commit()}else s.abort();i(n)}}})}},{key:"delete",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!e[k])throw Error("Value provided is not a DB record!");return new Promise(function(o,i){var a=r[x].transaction([t],"readwrite"),s=a.objectStore(t),c={database:r[T],record:e,key:h.getPrimaryKey(e),store:t,type:"write",subType:"delete",origin:n};if(!1!==(e[h.BeforeDelete]?e[h.BeforeDelete](c):null)){var l=s.delete(e.id);e[k]=void 0,e[h.AfterDelete]&&e[h.AfterDelete](c),l.onerror=function(t){c.original=t;var e=new CustomEvent("writeError",{detail:c});r.dispatchEvent(e),i(t)},l.onsuccess=function(t){c.original=t;var e=new CustomEvent("write",{detail:c});r.dispatchEvent(e),a.commit&&a.commit(),o(e)}}})}},{key:"clear",value:function(t){var e=this;return new Promise(function(r,n){var o=e[x].transaction([t],"readwrite"),i=o.objectStore(t).clear(),a={database:e[T],store:t,type:"write",subType:"clear",origin:origin};i.onerror=function(t){a.original=t;var r=new CustomEvent("writeError",{detail:a});e.dispatchEvent(r),n(t)},i.onsuccess=function(t){a.original=t;var n=new CustomEvent("write",{detail:a});e.dispatchEvent(n),o.commit&&o.commit(),r(n)}})}},{key:"listStores",value:function(){return a(this[x].objectStoreNames)}},{key:"listIndexes",value:function(t){return a(this[x].transaction([t]).objectStore(t).indexNames)}},{key:M,value:function(t,e,r,o,i,a,s,c){var l=this;return function(u){return Promise.all(o.map(function(o){return new Promise(function(f,p){var g=0;e.openCursor(o,r).addEventListener("success",function(r){var o=r.target.result;if(!o)return f({record:null,result:null,index:g});l[E][S]=l[E][S]||{};var p=l[E][S],d=o.primaryKey,y=t?t.from(o.value):o.value,b=n.Bindable.makeBindable(y),v={database:l[T],key:h.getPrimaryKey(b),record:y,store:e.name,type:"read",subType:"select",origin:s},m=y[h.BeforeRead]?y[h.BeforeRead](v):null;if(a>g++||!1===m)return o.continue();p[d]?Object.assign(p[d],y):(y[k]=Symbol.for(d),p[d]=y);var w=o.source,S=w.objectStore?w.objectStore.name:e.name;v.record=y,p[d][h.AfterRead]&&p[d][h.AfterRead](v);if(l.dispatchEvent(new CustomEvent("read",{detail:v,cancelable:!0}))){var O=t?t.from(p[d]):p[d];O[k]=Symbol.for(d);var x=c?c(O):O,j=u?u(x,g):x;if(i&&g-a>=i)return a+=i,f({mapped:x,result:j,index:g})}o.continue()})})})).then(function(t){return 1===t.length?t[0]:t})}}},{key:"setStoreMeta",value:function(t,e,r){localStorage.setItem("::::cvdb::".concat(t,"::").concat(e),JSON.stringify(r))}},{key:"getStoreMeta",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=localStorage.getItem("::::cvdb::".concat(t,"::").concat(e)),o=null!==n?JSON.parse(n):r;return null===o?r:o}},{key:"createObjectStore",value:function(t,e){var r=this[x].createObjectStore(t,e);return this.setStoreMeta(t,"store",e),r}},{key:"deleteObjectStore",value:function(t){return this[x].deleteObjectStore(t)}},{key:"checkHighWaterMark",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.getStoreMeta(t,"highWater",0)}},{key:"setHighWaterMark",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=e[this[P][t].highWater],i=this.getStoreMeta(t,"highWater",0);this.setStoreMeta(t,"highWater",o),this.dispatchEvent(new CustomEvent("highWaterMoved",{detail:{database:this[T],record:e,store:t,type:"highWaterMoved",subType:n,origin:r,oldValue:i,value:o}}))}},{key:"checkLowWaterMark",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.getStoreMeta(t,"lowWater",1/0)}},{key:"setLowWaterMark",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=e[this[P][t].highWater],i=this.getStoreMeta(t,"lowWater",null);this.setStoreMeta(t,"lowWater",o),this.dispatchEvent(new CustomEvent("lowWaterMoved",{detail:{database:this[T],record:e,store:t,type:"lowWaterMoved",subType:n,origin:r,oldValue:i,value:o}}))}}])&&c(e.prototype,r),s&&c(e,s),Object.defineProperty(e,"prototype",{writable:!1}),h}();e.Database=A,Object.defineProperty(A,j,{value:[]});try{Object.defineProperty(A,R,{value:new EventTarget})}catch(t){Object.defineProperty(A,R,{value:document.createDocumentFragment()})}Object.defineProperty(A,"BeforeDelete",{value:d}),Object.defineProperty(A,"AfterDelete",{value:y}),Object.defineProperty(A,"BeforeWrite",{value:h}),Object.defineProperty(A,"AfterWrite",{value:g}),Object.defineProperty(A,"BeforeInsert",{value:b}),Object.defineProperty(A,"AfterInsert",{value:v}),Object.defineProperty(A,"BeforeUpdate",{value:m}),Object.defineProperty(A,"AfterUpdate",{value:w}),Object.defineProperty(A,"BeforeRead",{value:S}),Object.defineProperty(A,"AfterRead",{value:O}),Object.defineProperty(A,"PKSymbol",{value:k});var C=function(t){Object.defineProperty(A,t,{value:function(){var e;return(e=A[R])[t].apply(e,arguments)}})};for(var B in["addEventListener","removeEventListener","dispatchEvent"])C(B)}()}),require.register("curvature/model/Model.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var t=r("../base/Cache"),n=r("../base/Bindable"),o=r("./Database");function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=s(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=Symbol("Changed"),h=Symbol("Deleted"),g=Symbol("Saved"),d=Symbol("Keys"),y=function(){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"id",void 0),f(this,"class",void 0),Object.defineProperty(this,p,{value:n.Bindable.make({})}),Object.defineProperty(this,h,{writable:!0,value:!1}),Object.defineProperty(this,g,{writable:!0,value:!1}),Object.defineProperty(this,d,{writable:!0,value:new Set}),n.Bindable.make(this)}var r,s,c;return r=e,c=[{key:"keyProps",get:function(){return["id","class"]}},{key:"from",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.keyProps,o=n.map(function(t){return e[t]});o.unshift(this.name);var a,s=o.join("::"),c="models-by-type-and-publicId",u=t.Cache.load(s,!1,c),f=u||new this,h=i(n);try{for(h.s();!(a=h.n()).done;){var d,y,b=a.value;f[b]=null!==(d=null!==(y=f[b])&&void 0!==y?y:e[b])&&void 0!==d?d:null}}catch(t){h.e(t)}finally{h.f()}if(f.consume(e),!u){t.Cache.store(s,f,0,c);var v=!1;f.bindTo(function(t,e,r,n){"symbol"!==l(e)&&t!==r[e]&&(f[p][e]=v,f[g]=!(v||!f[g]))}),0===Object.keys(f[p]).length&&(f[g]=r),v=!0}return f}}],(s=[{key:"consume",value:function(r){var n=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=e.keyProps,u=function(e,r){if(r&&"object"===l(r)&&r.constructor.keyProps){var o=r.constructor.keyProps.map(function(t){return r[t]}).join("::"),i=t.Cache.load(o,!1,"models-by-type-and-publicId");i&&(i.consume(r),r=i)}!s&&n[p][e]||(n[e]=r)};o.Database.PKSymbol in r&&u(o.Database.PKSymbol,r[o.Database.PKSymbol]),this[d]=new Set([].concat(a(this[d]),a(Object.keys(this)),a(Object.keys(r))));var f,h=i(this[d]);try{for(h.s();!(f=h.n()).done;){var g=f.value;!s&&this[p][g]||(c.includes(g)||g in r&&u(g,r[g]))}}catch(t){h.e(t)}finally{h.f()}}},{key:"changed",value:function(){this[g]=!1}},{key:"markDeleted",value:function(){for(var t in this[p])this[p][t]=!1;this[h]=!0,this[g]=!1}},{key:"markStored",value:function(){for(var t in this)this[p][t]=!1;this[h]=!1,this[g]=!0}},{key:"isSaved",value:function(){return this[g]}}])&&u(r.prototype,s),c&&u(r,c),Object.defineProperty(r,"prototype",{writable:!1}),e}();e.Model=y,Object.defineProperty(y,"Changed",{value:p}),Object.defineProperty(y,"Deleted",{value:h}),Object.defineProperty(y,"Saved",{value:g})}()}),require.register("curvature/net/Elicit.js",function(e,r,n){r=t(r,{},"curvature"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Elicit=void 0;var n=r("curvature/base/Mixin"),o=r("curvature/mixin/EventTargetMixin"),i=r("curvature/mixin/PromiseMixin");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=l(e);if(r){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(this,n)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=Symbol("IterateDownload"),f=Symbol("Retry"),p=Symbol("HandleFirstByte"),h=Symbol("HandleProgress"),g=Symbol("HandleComplete"),d=Symbol("HandleHeaders"),y=Symbol("HandleClose"),b=Symbol("HandleError"),v=Symbol("HandleOpen"),m=Symbol("HandleFail"),w=Symbol("LastChunkSize"),S=Symbol("LastChunkTime"),O=Symbol("Options"),k=Symbol("Fetch"),x=Symbol("Type"),j=Symbol("Url"),P=Symbol("RetriesLeft"),_=Symbol("TimeoutLeft"),R=Symbol("Timeout"),M=Symbol("Timer"),T=Symbol("Canecller"),E=Symbol("Caneclled"),A=Symbol("Paused"),C=Symbol("Received"),B=Symbol("Length"),D=Symbol("Opened"),I=Symbol("Closed"),L=Symbol("Start"),F=Symbol("First"),N=Symbol("End"),z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(q,n.Mixin["with"](o.EventTargetMixin,i.PromiseMixin));var e,r,l,z=c(q);function q(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,q),(e=z.call(this))[P]=r.retries||5,e[R]=r.timeout||4500,e[_]=r.maxTimeout||e[R]*e[P],e[S]=0,e[w]=0,e[E]=!1,e[C]=0,e[A]=!1,e[I]=0,e[O]=Object.assign({},r),e[j]=t,r.defer||e.open(),e}return e=q,(r=[{key:"open",value:function(){var t=this;if(!this[D]||this[I]){this[L]||(this[L]=Date.now()),this[T]=new AbortController,this[O].signal=this[T].signal,this[D]=Date.now(),this[I]=0,this[F]=0,this[k]=fetch(this[j],this[O]).then(function(e){return t[v](e)}).catch(function(e){return t[b](e)});this[M]=setTimeout(function(){if(!t[F]){if(t[T].abort(),t[y](),t[_]=Math.max(0,t[_]-t[R]),!t[_])return;t[m](new Error("Timed out."))}},this[R])}}},{key:"headers",value:function(){return this[k].then(function(t){var e=t.response;t.stream;return e.headers})}},{key:"json",value:function(){var t=this;return this[k].then(function(e){e.response;var r=e.stream;return new Response(r,{headers:{"Content-Type":t.type}}).json()})}},{key:"text",value:function(){var t=this;return this[k].then(function(e){e.response;var r=e.stream;return new Response(r,{headers:{"Content-Type":t.type}}).text()})}},{key:"css",value:function(){return this.text().then(function(t){var e=new CSSStyleSheet;return e.replace(t),e})}},{key:"blob",value:function(){var t=this;return this[k].then(function(e){e.response;var r=e.stream;return new Response(r,{headers:{"Content-Type":t.type}}).blob()})}},{key:"objectUrl",value:function(){return this.blob().then(function(t){return URL.createObjectURL(t)})}},{key:"dataUri",value:function(){return this.blob().then(function(t){return new Promise(function(e,r){var n=new FileReader;n.onload=function(t){return e(n.result)},n.onerror=function(t){return r(n.error)},n.onabort=function(t){return r(new Error("Read aborted"))},n.readAsDataURL(t)})})}},{key:"buffer",value:function(){return this.blob().then(function(t){return t.arrayBuffer()})}},{key:"bytes",value:function(){return this.buffer().then(function(t){return new Uint8Array(t)})}},{key:"cancel",value:function(){this.emitCancelEvent()&&(this[T].abort(),this[E]=!0,this.emitCancelledEvent())}},{key:"pause",value:function(){this[N]||this[A]||this[I]||this.emitPauseEvent()&&(this[A]=!0,this.emitPausedEvent())}},{key:"unpause",value:function(){!this[N]&&this[A]&&this.emitUnpauseEvent()&&(this[A]=!1,this.emitUnpausedEvent())}},{key:"done",get:function(){return!!this[N]}},{key:"type",get:function(){return this[x]}},{key:"totalTime",get:function(){return this[N]?this[N]-this[L]:Date.now()-this[L]}},{key:"waitTime",get:function(){return this[F]?this[F]-this[D]:Date.now()-this[D]}},{key:"loadTime",get:function(){return this[D]?this[I]?this[I]-this[F]:Date.now()-this[F]:0}},{key:"speed",get:function(){return this[D]?((t=this[N]?this[N]-this[S]:Date.now()-this[S])||(t=.01),this[w]/t):0;var t}},{key:"received",get:function(){return this[C]}},{key:"length",get:function(){return this[B]}},{key:"isPaused",get:function(){return this[A]}},{key:u,value:function(t,e,r){var n=this;this[h](r,0,null);var o=Date.now(),i=1,a=function(t){var a=t.done,c=t.value;return a?(e.close(),n[g]()):(e.enqueue(c),n[C]+=c.length,n[F]||n[p](c),n[h](r,n[C]),n[S]=o,n[w]=i,o=Date.now(),i=c.length,s())},s=function e(){return n[E]?t.cancel():n[A]?new Promise(function(t){setTimeout(function(){return t(e())},100)}):t.read().then(function(t){return a(t)}).catch(function(t){return n[b](t)})};return s()}},{key:f,value:function(){if(this.emitRetryEvent()&&!(this[P]<=0))return this[T].abort(),this[y](),this[C]=0,this[P]--,this.open()}},{key:v,value:function(t){var e=t.body.getReader(),r=this[B]||Number(t.headers.get("Content-Length")),n=this[n]||t.headers.get("Content-Type");this[B]=r,this[x]=n,this[d](t.headers);var o=this;return{response:t,stream:new ReadableStream({start:function(t){o[u](e,t,r)}})}}},{key:y,value:function(){this[I]=Date.now(),this.emitCloseEvent()}},{key:d,value:function(t){this.emitHeadersEvent(t)}},{key:h,value:function(t,e,r){this.emitProgressEvent(t,e,r)}},{key:g,value:function(){this[N]=Date.now(),this[y](),this.emitCompleteEvent(),this[i.PromiseMixin.Accept]()}},{key:b,value:function(t){return console.warn(t),this.emitErrorEvent(t)?this[m](t):this[f]()}},{key:m,value:function(t){return this[N]=Date.now(),this[y](),this.emitFailEvent(t),this[i.PromiseMixin.Reject](t)}},{key:p,value:function(t){clearInterval(this[M]),this[F]=Date.now(),this.emitFirstByteEvent(t)}},{key:"emitProgressEvent",value:function(t,e,r){var n=t?e/t:0,o=this.totalTime,i=this.loadTime,a=this.waitTime,s=this.speed;return this.dispatchEvent(new CustomEvent("progress",{detail:{length:t,received:e,done:n,speed:s,loadTime:i,waitTime:a,totalTime:o,value:r}}))}},{key:"emitOpenEvent",value:function(){return this.dispatchEvent(new CustomEvent("open"))}},{key:"emitCloseEvent",value:function(){return this.dispatchEvent(new CustomEvent("close"))}},{key:"emitFirstByteEvent",value:function(t){return this.dispatchEvent(new CustomEvent("firstByte",{detail:{received:t}}))}},{key:"emitHeadersEvent",value:function(t){return this.dispatchEvent(new CustomEvent("headers",{detail:{headers:t}}))}},{key:"emitCompleteEvent",value:function(){return this.dispatchEvent(new CustomEvent("complete"))}},{key:"emitErrorEvent",value:function(){return this.dispatchEvent(new CustomEvent("error",{cancelable:this[P]>0}))}},{key:"emitRetryEvent",value:function(){return this.dispatchEvent(new CustomEvent("retry",{cancelable:!0}))}},{key:"emitFailEvent",value:function(){return this.dispatchEvent(new CustomEvent("fail"))}},{key:"emitPauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("pause",{cancelable:!0}))}},{key:"emitPausedEvent",value:function(){this.dispatchEvent(new CustomEvent("paused"))}},{key:"emitUnpauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("unpause",{cancelable:!0}))}},{key:"emitUnpausedEvent",value:function(){this.dispatchEvent(new CustomEvent("unpaused"))}},{key:"emitCancelEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancel",{cancelable:!0}))}},{key:"emitCancelledEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancelled"))}}])&&a(e.prototype,r),l&&a(e,l),Object.defineProperty(e,"prototype",{writable:!1}),q}();e.Elicit=z}()}),require.register("matrix-api/Matrix.js",function(e,r,n){r=t(r,{},"matrix-api"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;var n=r("curvature/base/Uuid"),o=r("curvature/base/Mixin"),i=r("curvature/mixin/EventTargetMixin");function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=h(e);if(r){var i=h(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}(this,n)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(d,o.Mixin["with"](i.EventTargetMixin));var e,r,c,h=f(d);function d(t){var e,r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),g(p(o=h.call(this)),"ssoUuid",String(new n.Uuid)),g(p(o),"isLoggedIn",!1),g(p(o),"loggingIn",null),o.baseUrl=t||"https://matrix.org/_matrix",o.clientUrl="".concat(o.baseUrl,"/client/r0"),o.mediaUrl="".concat(o.baseUrl,"/media/r0"),o.profileCache=new Map,o.mediaCache=new Map,o.storage=null!==(e=i.storage)&&void 0!==e?e:globalThis.sessionStorage,o.interval=null!==(r=i.interval)&&void 0!==r&&r,o}return e=d,(r=[{key:"isLoggedIn",get:function(){this.isLoggedIn&&this.dispatchEvent(new CustomEvent("logged-in"));var t=this.storage.getItem("matrix:access-token")||"false";JSON.parse(t);return this.storage.getItem("matrix:access-token")}},{key:"initSso",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(this.storage.getItem("matrix:access-token"))return this.isLoggedIn=!0,void this.dispatchEvent(new CustomEvent("logged-in"));var n=new URLSearchParams({redirectUrl:t}),o="login/sso/redirect?".concat(n),i=window.screenX+window.outerWidth/2+200,a=window.screenY+window.outerHeight/2-300,s="width=".concat(400,",height=").concat(600,",screenX=").concat(i,",screenY=").concat(a);r.open("".concat(this.clientUrl,"/").concat(o),"matrix-login-".concat(this.ssoUuid),s);r.addEventListener("message",function t(n){if(n.origin===location.origin&&n.source!==window&&"string"==typeof n.data){var o=JSON.parse(n.data);"s.sso.complete"===o.type&&(e.storage.setItem("matrix:access-token",JSON.stringify(o.data)),e.isLoggedIn=!0,e.dispatchEvent(new CustomEvent("logged-in")),r.removeEventListener("message",t))}})}},{key:"completeSso",value:function(t){var e={type:"m.login.token",token:t,txn_id:(1/Math.random()).toString(36)};fetch("".concat(this.clientUrl,"/").concat("login"),{method:"POST",body:JSON.stringify(e)}).then(function(t){return t.json()}).then(function(t){window.opener.postMessage(JSON.stringify({type:"s.sso.complete",data:t}),location.origin),window.close()})}},{key:"logIn",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return this.initSso(t,r),this.loggingIn?this.loggingIn:(this.loggingIn=new Promise(function(t){e.addEventListener("logged-in",function(e){t(e)})},{once:!0}),this.loggingIn)}},{key:"logOut",value:function(){this.storage.removeItem("matrix:access-token"),this.isLoggedIn=!1,this.loggingIn=null,this.dispatchEvent(new CustomEvent("logged-out"))}},{key:"getGuestToken",value:function(){var t=this,e=this.storage.getItem("matrix:access-token")||"false",r=JSON.parse(e);if(r&&r.isGuest)return Promise.resolve(r);var n=new URLSearchParams({kind:"guest"}),o=fetch("".concat(this.clientUrl,"/register?").concat(n),{method:"POST",body:"{}"}).then(function(t){return t.json()});return o.then(function(e){e.isGuest=!0,t.isLoggedIn=!0,t.storage.setItem("matrix:access-token",JSON.stringify(e))}),o}},{key:"getToken",value:function(){var t=this.storage.getItem("matrix:access-token")||"false",e=JSON.parse(t);return e?Promise.resolve(e):matrix.getGuestToken()}},{key:"listenForServerEvents",value:function(){var t=this,e=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!e)return Promise.reject("No access token found.");var r=new URLSearchParams({access_token:e.access_token}),n="".concat(this.clientUrl,"/events?").concat(r);fetch(n).then(function(t){return t.json()}).then(function(e){return t.streamServerEvents(e)})}},{key:"listenForRoomEvents",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e||!e.cancelled){var o=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!o)return Promise.reject("No access token found.");var i=new URLSearchParams({access_token:o.access_token,room_id:t,from:n}),a="".concat(this.clientUrl,"/events?").concat(i);return e=e||{cancelled:!1},fetch(a).then(function(t){return t.json()}).then(function(n){return r.streamServerEvents(n,t,e)}),e}}},{key:"streamServerEvents",value:function(t,e,r){var o=this;r&&r.cancelled||(this.interval?setTimeout(function(){e?o.listenForRoomEvents(e,r,t.end):o.listenForServerEvents()},this.interval):e?this.listenForRoomEvents(e,r,t.end):this.listenForServerEvents(),t.chunk&&t.chunk.forEach(function(t){var e={};t.event_id||(t.event_id="local:".concat(new n.Uuid)),Object.assign(e,t),o.dispatchEvent(new CustomEvent("matrix-event",{detail:e})),o.dispatchEvent(new CustomEvent(e.type,{detail:e}))}))}},{key:"getUserProfile",value:function(t){if(this.profileCache.has(t))return this.profileCache.get(t);var e=fetch("".concat(this.clientUrl,"/profile/").concat(t)).then(function(t){return t.json()});return this.profileCache.set(t,e),e}},{key:"getUserData",value:function(t){var e=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!e)return Promise.reject("No access token found.");var r=new URLSearchParams({access_token:e.access_token});return fetch("".concat(this.clientUrl,"/user/").concat(e.user_id,"/account_data/").concat(t,"?").concat(r)).then(function(t){return t.json()})}},{key:"putUserData",value:function(t,e){var r=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(r){var n=new URLSearchParams({access_token:r.access_token}),o="".concat(this.clientUrl,"/user/").concat(r.user_id,"/account_data/").concat(t,"?").concat(n);return fetch(o,{method:"PUT",body:e}).then(function(t){if(!t.ok){var e=new Error("HTTP status code: "+t.status);throw e.status=t.status,e.response=t,e}return t}).then(function(t){return t.json()})}}},{key:"getMediaUrl",value:function(t){var e=new URL(t);return"".concat(this.mediaUrl,"/download/").concat(e.pathname.substr(2))}},{key:"getMedia",value:function(t){if(this.mediaCache.has(t))return this.mediaCache.get(t);var e=fetch(this.getMediaUrl(t)).then(function(t){return Promise.all([t.arrayBuffer(),t.headers.get("Content-type")])}).then(function(t){var e=a(t,2),r=e[0],n=e[1];return URL.createObjectURL(new Blob([r],{type:n}))});return this.mediaCache.set(t,e),e}},{key:"postMedia",value:function(t,e){var r=this.storage.getItem("matrix:access-token")||"false",n=JSON.parse(r);if(n){var o=new URLSearchParams({access_token:n.access_token}),i="".concat(this.mediaUrl,"/upload?").concat(o),a=new Headers({"Content-Type":t.type});return fetch(i,{method:"POST",headers:a,body:t}).then(function(t){return t.json()})}}},{key:"putEvent",value:function(t,e,r){var n=this.storage.getItem("matrix:access-token")||"false",o=JSON.parse(n);if(o){var i=new URLSearchParams({access_token:o.access_token}),a="".concat(this.clientUrl,"/rooms/").concat(t,"/send/").concat(e,"/").concat(Math.random().toString(36),"?").concat(i),s={method:"PUT",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(r)};return fetch(a,s).then(function(t){return t.json()})}}},{key:"getEvent",value:function(t,e){var r=this.storage.getItem("matrix:access-token")||"false",n=JSON.parse(r);if(n){var o=new URLSearchParams({access_token:n.access_token}),i="".concat(this.clientUrl,"/rooms/").concat(t,"/event/").concat(e,"?").concat(o),a=new Headers({"Content-Type":"application/json"});return fetch(i,{method:"GET",headers:a}).then(function(t){return t.json()})}}},{key:"sync",value:function(){var t=this.storage.getItem("matrix:access-token")||"false",e=JSON.parse(t);if(!e)return Promise.resolve();var r=new URLSearchParams({full_state:!0,access_token:e.access_token}),n="".concat(this.clientUrl,"/sync?").concat(r);return fetch(n).then(function(t){return t.json()})}},{key:"getRoomState",value:function(t){var e=this.storage.getItem("matrix:access-token")||"false",r=JSON.parse(e);if(!r)return Promise.resolve();var n=new URLSearchParams({access_token:r.access_token}),o="".concat(this.clientUrl,"/rooms/").concat(t,"/state?").concat(n);return fetch(o).then(function(t){return t.json()})}},{key:"syncRoom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!r)return Promise.reject("No access token found.");var n=new URLSearchParams({access_token:r.access_token,room_id:t,dir:"b",from:e}),o="".concat(this.clientUrl,"/rooms/").concat(t,"/messages?").concat(n);return fetch(o).then(function(t){return t.json()})}},{key:"syncRoomHistory",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.syncRoom(t,o||"").then(function(o){var i=new CustomEvent("roomSyncFrame",{detail:{frame:o},cancelable:!0});if(e.dispatchEvent(i)){if(r&&o.chunk){var a,c=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=s(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(o.chunk);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(n&&l.origin_server_ts<=n)return Promise.resolve();r(l)}}catch(t){c.e(t)}finally{c.f()}}if(e.isLoggedIn)return new Promise(function(i){var a;return setTimeout(function(){return i(o.chunk.length&&e.syncRoomHistory(t,r,n,o.end))},null!==(a=e.interval)&&void 0!==a?a:0)})}})}},{key:"getCurrentUserId",value:function(){var t=this.storage.getItem("matrix:access-token")||"false",e=JSON.parse(t);if(e)return e.user_id}},{key:"createRoom",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=JSON.stringify({name:t,topic:e,visibility:r,initial_state:n}),i=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!i)return Promise.resolve();var a=new URLSearchParams({access_token:i.access_token}),s="".concat(this.clientUrl,"/createRoom?").concat(a);return fetch(s,{body:o,method:"POST"}).then(function(t){return t.json()})}},{key:"joinRoom",value:function(t){var e=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!e)return Promise.reject("No access token found.");var r=new URLSearchParams({access_token:e.access_token});fetch("".concat(this.clientUrl,"/rooms/").concat(t,"/join?").concat(r),{method:"POST"}).then(function(t){return t.json()})}},{key:"leaveRoom",value:function(t){var e=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!e)return Promise.reject("No access token found.");var r=new URLSearchParams({access_token:e.access_token});fetch("".concat(this.clientUrl,"/rooms/").concat(t,"/leave?").concat(r),{method:"POST"}).then(function(t){return t.json()})}},{key:"whoAmI",value:function(){var t=JSON.parse(this.storage.getItem("matrix:access-token")||"false");if(!t)return Promise.reject("No access token found.");var e=new URLSearchParams({access_token:t.access_token});return fetch("".concat(this.clientUrl,"/account/whoami?").concat(e)).then(function(t){return t.json()})}}])&&l(e.prototype,r),c&&l(e,c),Object.defineProperty(e,"prototype",{writable:!1}),d}();e.Matrix=d}()}),require.register("subspace-console/Console.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Console=void 0;var t=r("curvature/base/View"),n=r("curvature/base/Bag"),o=r("./view/MeltingText"),i=r("./view/EchoMessage"),a=r("./Task"),s=r("./Path"),c=r("./ansi/Renderer"),l=r("./ansi/Parser");function u(t,e,r){return(u=v()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&y(o,r.prototype),o}).apply(null,arguments)}function f(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){"@babel/helpers - typeof";return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(t){if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=v();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(w,t.View);var r,g,v,m=b(w);function w(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,w),t=m.call(this,r);var o={init:!1,path:s.Path},i=Object.assign({},o,e);return t.template='<div class = "terminal [[inverted]]" cv-on = "click:focus(event);:keydown(event):c;:keyup(event)c">\n\t<div class = "output" cv-each = "output:line:l" cv-ref = "output:curvature/base/Tag">\n\t\t<p>[[line]]</p>\n\t</div>\n\t<div class = "bottom">\n\t\t<div>[[prompt]]&nbsp;</div>\n\t\t<div>\n\t\t\t<form cv-on = "submit:cancel(event)">\n\t\t\t\t<textarea\n\t\t\t\t\tcv-bind = "input"\n\t\t\t\t\tcv-ref  = "input:curvature/base/Tag"\n\t\t\t\t\trow     = "1"\n\t\t\t\t></textarea>\n\t\t\t</form>\n\n\t\t\t<form cv-on = "submit:cancel(event)">\n\t\t\t\t<input\n\t\t\t\t\tautocomplete = "one-time-code"\n\t\t\t\t\tname    = "pw-input"\n\t\t\t\t\ttype    = "password"\n\t\t\t\t\tcv-bind = "input"\n\t\t\t\t\tcv-ref  = "password:curvature/base/Tag"\n\t\t\t\t/>\n\t\t\t</form>\n\n\t\t\t<input\n\t\t\t\tcv-on  = "input:fileLoaded(event)"\n\t\t\t\tcv-ref = "file:curvature/base/Tag"\n\t\t\t\tname   = "file-input"\n\t\t\t\ttype   = "file"\n\t\t\t\tstyle  = "display: none"\n\t\t\t/>\n\t\t</div>\n\t</div>\n</div>\n\n<div class = "scanlines"></div>\n',t.args.input="",t.args.output=[],t.args.inverted="",t.localEcho=!0,t.postToken=null,t.args.prompt="::",t.routes={},t.args.passwordMode=!1,t.tasks=[],t.external=e.external||[],t.taskList=new n.Bag,t.taskList.type=a.Task,t.max=10,t.historyCursor=-1,t.history=[],t.env=new Map,t.args.output.___after(function(t,e,r,n){}),i.init&&t.runScript(i.init),t.scroller=i.scroller||document.body,t.path=i.path||{},t.originalInput="",t}return r=w,(g=[{key:"runCommand",value:function(t){var e=this;return 0!=this.historyCursor&&this.history.unshift(t),new Promise(function(r){var n;if("/"===t.substring(0,1)){if(!e.args.passwordMode){var o=new i.EchoMessage({message:t});e.args.output.push(o)}var s=e.unescape(t.substr(1));n=e.interpret(s)}else if(e.tasks.length){if(!e.args.passwordMode){var c=new i.EchoMessage({message:t,prompt:e.tasks[0].prompt});e.args.output.push(c)}var l=e.unescape(t);n=e.tasks[0].write(l)||Promise.resolve()}else{e.args.passwordMode||e.args.output.push(":: ".concat(t));var u=e.unescape(t);n=e.interpret(u)}n instanceof a.Task||n instanceof Promise||(n=Promise.resolve(n)),e.historyCursor=-1,e.originalInput=e.args.input="",n.then(function(t){return r(t)})}).catch(function(t){e.args.output.push("Unexpected error: ".concat(t))})}},{key:"runScript",value:function(t){var e=this;fetch(t+"?api=txt").then(function(t){return t.text()}).then(function(t){!function t(r){if(r.length){var n=r.shift();n&&"!"==n[0]?(e.args.output.push(n.substring(1)),t(r)):n?e.runCommand(n).then(function(){return t(r)}):t(r)}}(t.split("\n"))})}},{key:"postRender",value:function(){var t=this,e=this.tags.input.element,r=this.tags.password.element;this.args.bindTo("input",function(t){},{frame:1}),this.args.bindTo("passwordMode",function(t){t?(e.style.display="none",r.style.display="unset"):(e.style.display="unset",r.style.display="none")}),this.args.bindTo("passwordMode",function(e){t.focus(null,e)},{frame:1})}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&t.preventDefault(),t&&t.target&&t.target.matches("input,textarea")||window.getSelection().toString()||(e||this.args.passwordMode?this.tags.password.element.focus():this.tags.input.element.focus())}},{key:"interpret",value:function(t){var e=this;this.historyCursor=-1;var r,n=null,o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=h(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(t.split(/\s*\;\s*/));try{var i=function(){var t=r.value,o=e.pipe(t.split(/\s*\|\s*/));if(o){e.tasks.unshift(o);var i=function(t){var r=t.detail;if("object"===p(r))e.args.output.push(r);else{var n=o.outPrompt||o.prompt||e.args.prompt||"::",i=e.parseAnsi(r,n);e.args.output.push(i)}},a=function(t){console.error(t);var r=t.detail,n=o.errorPrompt||"!!",i=e.parseAnsi(r,n);e.args.output.push(i)};o.addEventListener("output",i),o.addEventListener("error",a),o.execute(),o.catch(function(t){return console.error(t)}),o.catch(function(t){return e.args.output.push("!! ".concat(t))}),e.args.prompt=o.prompt,o.finally(function(t){o.removeEventListener("error",a),o.removeEventListener("output",i),e.tasks.shift(),e.tasks.length?e.args.prompt=e.tasks[0].prompt:e.args.prompt="::"})}n=o};for(o.s();!(r=o.n()).done;)i()}catch(t){o.e(t)}finally{o.f()}return n}},{key:"pipe",value:function(t,e){var r=null,n=t.shift().trim().split(" "),i=n.shift().trim();if(!(i.length>1&&"?"==i.substr(-1))){if(i in this.path)r=u(this.path[i],[n,e,this].concat(f(this.external)));else switch(i){case"clear":this.args.output.splice(0);break;case"z":this.args.output.splice(0),this.args.output.push(new o.MeltingText({input:"!!!"}));break;case"commands":case"?":for(var a in this.args.output.push("   Subspace Console 0.29a 2018-2021 Sean Morris"),this.path)this.args.output.push(" * ".concat(a," - ").concat(this.path[a].helpText)),this.path[a].useText&&this.args.output.push("   ".concat(this.path[a].useText)),this.args.output.push("  ");break;default:this.args.output.push("!! Bad command: ".concat(i))}return t.length?this.pipe(t,r):r}(i=i.substr(0,i.length-1))in this.path&&(this.args.output.push("?? ".concat(this.path[i].helpText)),this.args.output.push("?? ".concat(this.path[i].useText)))}},{key:"keydown",value:function(t,e){switch(t.key){case"Tab":if(e)break;t.preventDefault();break;case"Enter":t.ctrlKey||t.preventDefault()}}},{key:"keyup",value:function(t,e){var r=this;switch(t.key){case"ArrowDown":if(this.onNextFrame(function(){return r.scrollToBottom()}),this.historyCursor--,this.historyCursor<=-1)return this.historyCursor=-1,void(this.args.input=this.originalInput);this.args.input=this.history[this.historyCursor];var n=this.tags.input.element;n.selectionStart=n.value.length,n.selectionEnd=n.value.length,t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault();break;case"ArrowUp":if(this.onNextFrame(function(){return r.scrollToBottom()}),-1==this.historyCursor&&(this.originalInput=this.args.input),this.historyCursor++,this.historyCursor>=this.history.length)return void this.historyCursor--;this.args.input=this.history[this.historyCursor];var o=this.tags.input.element;o.selectionStart=o.value.length,o.selectionEnd=o.value.length,t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault();break;case"Escape":this.tasks.length&&(this.tasks[0].finally(function(){return r.args.output.push(":: Killed.")}),this.tasks[0].signal(a.Task.KILL)),this.args.passwordMode=!1;break;case"Tab":if(t.preventDefault(),!this.args.input)break;var i=this.args.input,s="";if("/"===this.args.input[0]){i=this.args.input.substr(1),s=this.args.input.substr(0,1);break}for(var c in this.path)if(!(c.length<i.length)&&i===c.substr(0,i.length)){this.args.input=s+c;break}break;case"Enter":if(t.ctrlKey)return;t.preventDefault(),this.runCommand(this.args.input),this.args.input="";break;default:this.historyCursor=-1,this.scrollToBottom()}}},{key:"cancel",value:function(t){t.preventDefault(),t.stopPropagation()}},{key:"scrollToBottom",value:function(){var t=(this.scroller===document.body?window:this.scroller)||window,e=this.scroller.scrollHeight;this.onNextFrame(function(){t.scrollTo({behavior:"smooth",left:0,top:e})})}},{key:"parseAnsi",value:function(e,r){e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");var n=new c.Renderer,o=l.Parser.parse(e),i=n.process(o);if(!r)return t.View.from('<span class ="ansi">'.concat(i,"</span>"));var a=r.replace(/</g,"&lt;").replace(/>/g,"&gt;");return t.View.from("".concat(a,' <span class ="ansi">').concat(i,"</span>"))}},{key:"unescape",value:function(t){return t.replace(/\\n/gm,"\n").replace(/\\r/gm,"\r").replace(/\\t/gm,"\t").replace(/\\e/gm,"").replace(/\\u001b/gm,"")}},{key:"write",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,o=e;n<o.length;n++){var i=o[n];if("string"!=typeof i)this.args.output.push(i);else{var a=this.unescape(i),s=this.parseAnsi(a);this.args.output.push(s)}}}}])&&d(r.prototype,g),v&&d(r,v),w}();e.Console=w}()}),require.register("subspace-console/Path.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;r("subspace-console/Task");e.Path={}}()}),require.register("subspace-console/Task.js",function(e,n,o){n=t(n,{},"subspace-console"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Task=void 0;n("curvature/base/Bindable");var o=n("curvature/base/Mixin"),i=n("./mixin/Target"),a=n("./mixin/TaskSignals");function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?h(e):r}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var y=0,b=(Symbol("target"),Symbol("accept")),v=Symbol("reject"),m=Symbol("execute"),w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(w,o.Mixin["with"](i.Target,a.TaskSignals));var e,n,c,g=f(w);function w(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,w),d(h(t=g.call(this)),"title","Generic Task"),d(h(t),"prompt","::"),t.args=e,t.prev=r,t.term=n,t.status=-1,t.thread=new Promise(function(e,r){t[b]=e,t[v]=r}),t.id=y++,p(t,h(t))}return e=w,(n=[{key:"then",value:function(t){return this.thread.then(t)}},{key:"catch",value:function(t){return this.thread.catch(t)}},{key:"finally",value:function(t){return this.thread.finally(t)}},{key:"print",value:function(t){this.dispatchEvent(new CustomEvent("output",{detail:t}))}},{key:"printErr",value:function(t){this.dispatchEvent(new CustomEvent("error",{detail:t}))}},{key:"write",value:function(t){return this.main(t)}},{key:"signal",value:function(t){switch(this["signal::".concat(t)]&&this["signal::".concat(t)](),t){case"close":this.dispatchEvent(new CustomEvent("close"))&&(this.status>0?this[v]():this[b]());break;case"kill":this.status>0?this[v]():this[b]()}}},{key:"execute",value:function(){return this[m](this.prev)}},{key:m,value:function(){var t=this,e=function(e){var r=e.detail;return t.write(r)},n=this.init.apply(this,s(this.args)),o=this.prev;return o&&o.addEventListener("output",e),n instanceof Promise||(n=Promise.resolve(n)),o?(o[m](),Promise.allSettled([o,n]).finally(function(){return o.then(function(e){return t[b](e)}),o.catch(function(e){return t[v](r)}),o.removeEventListener("output",e),t.done()})):Promise.allSettled([n]).then(function(e){try{t.main(void 0),t[b]()}catch(e){t[v]()}t.done()})}},{key:"init",value:function(){}},{key:"main",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"done",value:function(t){return this.status}}])&&l(e.prototype,n),c&&l(e,c),w}();e.Task=w}()}),require.register("subspace-console/ansi/Colors255.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Colors255=void 0;e.Colors255={0:{r:0,g:0,b:0},1:{r:128,g:0,b:0},2:{r:0,g:128,b:0},3:{r:128,g:128,b:0},4:{r:0,g:0,b:128},5:{r:128,g:0,b:128},6:{r:0,g:128,b:128},7:{r:192,g:192,b:192},8:{r:128,g:128,b:128},9:{r:255,g:0,b:0},10:{r:0,g:255,b:0},11:{r:255,g:255,b:0},12:{r:0,g:0,b:255},13:{r:255,g:0,b:255},14:{r:0,g:255,b:255},15:{r:255,g:255,b:255},16:{r:0,g:0,b:0},17:{r:0,g:0,b:95},18:{r:0,g:0,b:135},19:{r:0,g:0,b:175},20:{r:0,g:0,b:215},21:{r:0,g:0,b:255},22:{r:0,g:95,b:0},23:{r:0,g:95,b:95},24:{r:0,g:95,b:135},25:{r:0,g:95,b:175},26:{r:0,g:95,b:215},27:{r:0,g:95,b:255},28:{r:0,g:135,b:0},29:{r:0,g:135,b:95},30:{r:0,g:135,b:135},31:{r:0,g:135,b:175},32:{r:0,g:135,b:215},33:{r:0,g:135,b:255},34:{r:0,g:175,b:0},35:{r:0,g:175,b:95},36:{r:0,g:175,b:135},37:{r:0,g:175,b:175},38:{r:0,g:175,b:215},39:{r:0,g:175,b:255},40:{r:0,g:215,b:0},41:{r:0,g:215,b:95},42:{r:0,g:215,b:135},43:{r:0,g:215,b:175},44:{r:0,g:215,b:215},45:{r:0,g:215,b:255},46:{r:0,g:255,b:0},47:{r:0,g:255,b:95},48:{r:0,g:255,b:135},49:{r:0,g:255,b:175},50:{r:0,g:255,b:215},51:{r:0,g:255,b:255},52:{r:95,g:0,b:0},53:{r:95,g:0,b:95},54:{r:95,g:0,b:135},55:{r:95,g:0,b:175},56:{r:95,g:0,b:215},57:{r:95,g:0,b:255},58:{r:95,g:95,b:0},59:{r:95,g:95,b:95},60:{r:95,g:95,b:135},61:{r:95,g:95,b:175},62:{r:95,g:95,b:215},63:{r:95,g:95,b:255},64:{r:95,g:135,b:0},65:{r:95,g:135,b:95},66:{r:95,g:135,b:135},67:{r:95,g:135,b:175},68:{r:95,g:135,b:215},69:{r:95,g:135,b:255},70:{r:95,g:175,b:0},71:{r:95,g:175,b:95},72:{r:95,g:175,b:135},73:{r:95,g:175,b:175},74:{r:95,g:175,b:215},75:{r:95,g:175,b:255},76:{r:95,g:215,b:0},77:{r:95,g:215,b:95},78:{r:95,g:215,b:135},79:{r:95,g:215,b:175},80:{r:95,g:215,b:215},81:{r:95,g:215,b:255},82:{r:95,g:255,b:0},83:{r:95,g:255,b:95},84:{r:95,g:255,b:135},85:{r:95,g:255,b:175},86:{r:95,g:255,b:215},87:{r:95,g:255,b:255},88:{r:135,g:0,b:0},89:{r:135,g:0,b:95},90:{r:135,g:0,b:135},91:{r:135,g:0,b:175},92:{r:135,g:0,b:215},93:{r:135,g:0,b:255},94:{r:135,g:95,b:0},95:{r:135,g:95,b:95},96:{r:135,g:95,b:135},97:{r:135,g:95,b:175},98:{r:135,g:95,b:215},99:{r:135,g:95,b:255},100:{r:135,g:135,b:0},101:{r:135,g:135,b:95},102:{r:135,g:135,b:135},103:{r:135,g:135,b:175},104:{r:135,g:135,b:215},105:{r:135,g:135,b:255},106:{r:135,g:175,b:0},107:{r:135,g:175,b:95},108:{r:135,g:175,b:135},109:{r:135,g:175,b:175},110:{r:135,g:175,b:215},111:{r:135,g:175,b:255},112:{r:135,g:215,b:0},113:{r:135,g:215,b:95},114:{r:135,g:215,b:135},115:{r:135,g:215,b:175},116:{r:135,g:215,b:215},117:{r:135,g:215,b:255},118:{r:135,g:255,b:0},119:{r:135,g:255,b:95},120:{r:135,g:255,b:135},121:{r:135,g:255,b:175},122:{r:135,g:255,b:215},123:{r:135,g:255,b:255},124:{r:175,g:0,b:0},125:{r:175,g:0,b:95},126:{r:175,g:0,b:135},127:{r:175,g:0,b:175},128:{r:175,g:0,b:215},129:{r:175,g:0,b:255},130:{r:175,g:95,b:0},131:{r:175,g:95,b:95},132:{r:175,g:95,b:135},133:{r:175,g:95,b:175},134:{r:175,g:95,b:215},135:{r:175,g:95,b:255},136:{r:175,g:135,b:0},137:{r:175,g:135,b:95},138:{r:175,g:135,b:135},139:{r:175,g:135,b:175},140:{r:175,g:135,b:215},141:{r:175,g:135,b:255},142:{r:175,g:175,b:0},143:{r:175,g:175,b:95},144:{r:175,g:175,b:135},145:{r:175,g:175,b:175},146:{r:175,g:175,b:215},147:{r:175,g:175,b:255},148:{r:175,g:215,b:0},149:{r:175,g:215,b:95},150:{r:175,g:215,b:135},151:{r:175,g:215,b:175},152:{r:175,g:215,b:215},153:{r:175,g:215,b:255},154:{r:175,g:255,b:0},155:{r:175,g:255,b:95},156:{r:175,g:255,b:135},157:{r:175,g:255,b:175},158:{r:175,g:255,b:215},159:{r:175,g:255,b:255},160:{r:215,g:0,b:0},161:{r:215,g:0,b:95},162:{r:215,g:0,b:135},163:{r:215,g:0,b:175},164:{r:215,g:0,b:215},165:{r:215,g:0,b:255},166:{r:215,g:95,b:0},167:{r:215,g:95,b:95},168:{r:215,g:95,b:135},169:{r:215,g:95,b:175},170:{r:215,g:95,b:215},171:{r:215,g:95,b:255},172:{r:215,g:135,b:0},173:{r:215,g:135,b:95},174:{r:215,g:135,b:135},175:{r:215,g:135,b:175},176:{r:215,g:135,b:215},177:{r:215,g:135,b:255},178:{r:215,g:175,b:0},179:{r:215,g:175,b:95},180:{r:215,g:175,b:135},181:{r:215,g:175,b:175},182:{r:215,g:175,b:215},183:{r:215,g:175,b:255},184:{r:215,g:215,b:0},185:{r:215,g:215,b:95},186:{r:215,g:215,b:135},187:{r:215,g:215,b:175},188:{r:215,g:215,b:215},189:{r:215,g:215,b:255},190:{r:215,g:255,b:0},191:{r:215,g:255,b:95},192:{r:215,g:255,b:135},193:{r:215,g:255,b:175},194:{r:215,g:255,b:215},195:{r:215,g:255,b:255},196:{r:255,g:0,b:0},197:{r:255,g:0,b:95},198:{r:255,g:0,b:135},199:{r:255,g:0,b:175},200:{r:255,g:0,b:215},201:{r:255,g:0,b:255},202:{r:255,g:95,b:0},203:{r:255,g:95,b:95},204:{r:255,g:95,b:135},205:{r:255,g:95,b:175},206:{r:255,g:95,b:215},207:{r:255,g:95,b:255},208:{r:255,g:135,b:0},209:{r:255,g:135,b:95},210:{r:255,g:135,b:135},211:{r:255,g:135,b:175},212:{r:255,g:135,b:215},213:{r:255,g:135,b:255},214:{r:255,g:175,b:0},215:{r:255,g:175,b:95},216:{r:255,g:175,b:135},217:{r:255,g:175,b:175},218:{r:255,g:175,b:215},219:{r:255,g:175,b:255},220:{r:255,g:215,b:0},221:{r:255,g:215,b:95},222:{r:255,g:215,b:135},223:{r:255,g:215,b:175},224:{r:255,g:215,b:215},225:{r:255,g:215,b:255},226:{r:255,g:255,b:0},227:{r:255,g:255,b:95},228:{r:255,g:255,b:135},229:{r:255,g:255,b:175},230:{r:255,g:255,b:215},231:{r:255,g:255,b:255},232:{r:8,g:8,b:8},233:{r:18,g:18,b:18},234:{r:28,g:28,b:28},235:{r:38,g:38,b:38},236:{r:48,g:48,b:48},237:{r:58,g:58,b:58},238:{r:68,g:68,b:68},239:{r:78,g:78,b:78},240:{r:88,g:88,b:88},241:{r:98,g:98,b:98},242:{r:108,g:108,b:108},243:{r:118,g:118,b:118},244:{r:128,g:128,b:128},245:{r:138,g:138,b:138},246:{r:148,g:148,b:148},247:{r:158,g:158,b:158},248:{r:168,g:168,b:168},249:{r:178,g:178,b:178},250:{r:188,g:188,b:188},251:{r:198,g:198,b:198},252:{r:208,g:208,b:208},253:{r:218,g:218,b:218},254:{r:228,g:228,b:228},255:{r:238,g:238,b:238}}}()}),require.register("subspace-console/ansi/Parser.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var t=r("sixgram/Actions"),n=r("sixgram/Parser"),o={normal:{reset:[t.IGNORE,t.ENTER,t.LEAVE],escaped:[t.IGNORE,t.ENTER,t.LEAVE],graphics:[t.IGNORE,t.ENTER,t.LEAVE],characters:[t.INSERT]}},i=new n.Parser({reset:/\u001b\[(0);?m/,graphics:/\u001b\[(\d+);?(\d+)?;?([\d;]*)?./,escaped:/\\([^e])/,characters:/[\s\S]+?(?=\x1B|$)/},o);e.Parser=i}()}),require.register("subspace-console/ansi/Renderer.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Renderer=void 0;var t=r("sixgram/Renderer"),n=r("./pallete"),o=r("./Colors255");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=p(t);if(e){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h="function"==typeof window.AudioContext&&new window.AudioContext;if(h){var g=h.createGain();g.connect(h.destination),g.gain.value=.1}var d=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(d,t.Renderer);var r,s,p,g=u(d);function d(){var t,e,r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),t=g.call(this,{normal:function(e,r){return t.setGraphicsMode(e,r)}}),e=f(t),n={},(r="style")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return r=d,(s=[{key:"reset",value:function(){for(var t=0,e=Object.entries(this.style);t<e.length;t++){var r=a(e[t],1)[0];delete this.style[r]}}},{key:"beep",value:function(){if(h){var t=h.createOscillator();t.connect(gainNode),t.frequency.value=840,t.type="square",t.start(h.currentTime),t.stop(h.currentTime+.2)}}},{key:"setGraphicsMode",value:function(t,e){if("string"==typeof t){if(""===t)return!1;for(var r="",s=0,c=Object.entries(this.style);s<c.length;s++){var l=a(c[s],2),u=l[0],f=l[1];r+="".concat(u,": ").concat(f,"; ")}return'<span class = "ansi" style = "'.concat(r,'">').concat(t,"</span>")}if("object"===i(t)){if("escaped"===t.type&&"a"===t.groups[0]&&this.beep(),"graphics"===t.type||"reset"===t.type)for(var p=0;p<t.groups.length;p++){var h=Number(t.groups[p]);if(""===t.groups[p])return!1;switch(h){case 0:for(var g in this.style)delete this.style[g];break;case 1:this.style.filter="contrast(1.25)",this.style["font-weight"]="bold",this.style.opacity=1;break;case 2:this.style.filter="brightness(0.85)",this.style["font-weight"]="light",this.style.opacity=.75;break;case 3:this.style["font-style"]="italic";break;case 4:this.style["text-decoration"]="underline";break;case 5:this.style.animation="var(--ansiBlink)";break;case 7:this.style.filter="invert(1)";break;case 8:this.style.filter="contrast(0.5)",this.style.opacity=.1;break;case 9:this.style["text-decoration"]="line-through";break;case 10:this.style["font-family"]="var(--base-font))";break;case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:this.style["font-family"]="var(--alt-font-no-".concat(h,")");break;case 20:this.style["font-family"]="var(--alt-font-fraktur)",this.style["font-size"]="1.1rem";break;case 21:case 22:this.style["font-weight"]="initial";break;case 23:this.style["font-weight"]="initial",this.style["font-style"]="initial";break;case 24:this.style["text-decoration"]="none",this.style["font-family"]="sans-serif",this.style["font-size"]="12pt";break;case 25:this.style.animation="none";break;case 26:this.style["text-transform"]="full-width";break;case 27:this.style.filter="initial";break;case 28:this.style.opacity="initial";break;case 29:this.style["text-decoration"]="initial";break;case 30:this.style.color=n.pallete.black;break;case 31:this.style.color=n.pallete.red;break;case 32:this.style.color=n.pallete.green;break;case 33:this.style.color=n.pallete.yellow;break;case 34:this.style.color=n.pallete.blue;break;case 35:this.style.color=n.pallete.magenta;break;case 36:this.style.color=n.pallete.cyan;break;case 37:this.style.color=n.pallete.white;break;case 38:if(2==t.groups[1+p]){var d=a(t.groups[2+p].split(";"),3),y=d[0],b=d[1],v=d[2];this.style.color="rgb(".concat(y,",").concat(b,",").concat(v,")")}if(5==t.groups[1+p]){var m=o.Colors255[Number(t.groups[2+p])],w=m.r,S=m.g,O=m.b;this.style.color="rgb(".concat(w,",").concat(S,",").concat(O,")")}p+=2;break;case 39:this.style.color="var(--fgColor)";break;case 40:this.style["background-color"]=n.pallete.black;break;case 41:this.style["background-color"]=n.pallete.red;break;case 42:this.style["background-color"]=n.pallete.green;break;case 43:this.style["background-color"]=n.pallete.yellow;break;case 44:this.style["background-color"]=n.pallete.blue;break;case 45:this.style["background-color"]=n.pallete.magenta;break;case 46:this.style["background-color"]=n.pallete.cyan;break;case 47:this.style["background-color"]=n.pallete.white;break;case 48:if(2==t.groups[1+p]){var k=a(t.groups[2+p].split(";"),3),x=k[0],j=k[1],P=k[2];this.style["background-color"]="rgb(".concat(x,",").concat(j,",").concat(P,")")}if(5==t.groups[1+p]){var _=o.Colors255[Number(t.groups[2+p])],R=_.r,M=_.g,T=_.b;this.style["background-color"]="rgb(".concat(R,",").concat(M,",").concat(T,")")}p+=2;break;case 49:this.style["background-color"]="var(--bgColor)";break;case 50:this.style["text-transform"]="initial";break;case 51:this.style.border="1px solid currentColor";break;case 52:this.style.border="1px solid currentColor",this.style["border-radius"]="1em";break;case 53:this.style["text-decoration"]="overline";break;case 54:case 55:this.style.border="initial"}}return!1}}}])&&c(r.prototype,s),p&&c(r,p),d}();e.Renderer=d}()}),require.register("subspace-console/ansi/pallete.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pallete=void 0;e.pallete={black:"var(--ansi-black, #000000)",dBlack:"var(--ansi-black-dark, #343434)",bBlack:"var(--ansi-black-light, #888888)",red:"var(--ansi-red, #c0002c)",dRed:"var(--ansi-red-dark, #4a132b)",bRed:"var(--ansi-red-light, #ff7869)",green:"var(--ansi-green, #80a763)",dGreen:"var(--ansi-green-dark, #326f38)",bGreen:"var(--ansi-green-light, #93d393)",yellow:"var(--ansi-yellow, #e3c651)",dYellow:"var(--ansi-yellow-dark, #baa447)",bYellow:"var(--ansi-yellow-light, #fdc253)",blue:"var(--ansi-blue, #5485c0)",dBlue:"var(--ansi-blue-dark, #38577d)",bBlue:"var(--ansi-blue-light, #77aff2)",magenta:"var(--ansi-magenta, #C61B6E)",dMagenta:"var(--ansi-magenta-dark, #935894)",bMagenta:"var(--ansi-magenta-light, #bf83c0)",cyan:"var(--ansi-cyan, #57c2c0)",dCyan:"var(--ansi-cyan-dark, #2d5695)",bCyan:"var(--ansi-cyan-light, #cef6f5)",white:"var(--ansi-cyan, #e0e0e0)",dWhite:"var(--ansi-cyan-dark, #b0b0b0)",bWhite:"var(--ansi-cyan-light, #ffffff)"}}()}),require.register("subspace-console/mixin/Target.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var t,n=r("curvature/base/Mixin");function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=Symbol("target"),a=0,s=(o(t={},n.Mixin.Constructor,function(){try{this[i]=new EventTarget}catch(t){this[i]=document.createDocumentFragment()}this[i].x=a++}),o(t,"dispatchEvent",function(){var t;(t=this[i]).dispatchEvent.apply(t,arguments)}),o(t,"addEventListener",function(){var t;(t=this[i]).addEventListener.apply(t,arguments)}),o(t,"removeEventListener",function(){var t;(t=this[i]).removeEventListener.apply(t,arguments)}),t);e.Target=s}()}),require.register("subspace-console/mixin/TaskSignals.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.TaskSignals=void 0;var n=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,o;return r=e,(n=[{key:"signal::kill",value:function(){console.log("KILL!"),this.status>0?this[Reject]():this[Accept]()}},{key:"signal::close",value:function(){this.dispatchEvent(new CustomEvent("error",{detail:detail}))&&(this.status>0?this[Reject]():this[Accept]())}}])&&t(r.prototype,n),o&&t(r,o),e}();e.TaskSignals=n,r(n,"KILL","kill"),r(n,"CLOSE","close")}()}),require.register("subspace-console/node_modules/sixgram/Actions.js",function(e,r,n){r=t(r,{},"subspace-console/node_modules/sixgram"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HOME=e.LEAVE=e.ENTER=e.INSERT=e.IGNORE=void 0;e.IGNORE=0;e.INSERT=1;e.ENTER=2;e.LEAVE=3;e.HOME=4}()}),require.register("subspace-console/node_modules/sixgram/Chunk.js",function(e,r,n){r=t(r,{},"subspace-console/node_modules/sixgram"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chunk=void 0;e.Chunk=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.depth=0,this.match=null,this.type="normal",this.list=[]}}()}),require.register("subspace-console/node_modules/sixgram/Parser.js",function(e,r,n){r=t(r,{},"subspace-console/node_modules/sixgram"),function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var t=r("./Chunk"),n=r("./Actions");function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function e(t,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.tokens=t||{},this.modes=r||{}}var r,i,c;return r=e,(i=[{key:"parse",value:function(e){if(this.index=0,this.mode="normal",this.stack=[],!(this.mode in this.modes))throw new Error("Mode ".concat(this.mode," does not exist on parser."),this);var r=new t.Chunk,i=this.modes[this.mode];for(r.type=this.mode;this.index<e.length;){var s=!1;for(var c in i){var l=this.tokens[c],u=l.exec(e.substr(this.index));if(u&&!(u.index>0)){if(!i[c])throw new Error('Invalid token type "'.concat(c,'" found in mode "').concat(this.mode,'".'));var f=u[0],p="object"===a(i[c])?i[c]:[i[c]];s=!0,this.index+=f.length;var h="normal";for(var g in p){var d=p[g];if("string"!=typeof d)switch(d){case n.INSERT:r.list.push(f);break;case n.ENTER:var y=new t.Chunk;y.depth=r.depth+1,y.match=f,y.groups=o(f.match(l)).slice(1),y.mode=h,y.type=c,r.list.push(y),this.stack.push(r),r=y;break;case n.LEAVE:this.stack.length&&(r=this.stack.pop(),this.mode=r.type,i=this.modes[this.mode]);break;case n.HOME:this.stack.splice(0),i=this.modes.normal}else{if(!(d in this.modes))throw new Error('Mode "'.concat(d,'" does not exist.'));this.mode=d,i=this.modes[this.mode],h=d}}break}}if(!s)break}if(this.stack.length)throw new Error("Did not return to top of stack!");return this.stack.shift()||r}}])&&s(r.prototype,i),c&&s(r,c),e}();e.Parser=c}()}),require.register("subspace-console/node_modules/sixgram/Renderer.js",function(e,r,n){r=t(r,{},"subspace-console/node_modules/sixgram"),function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Renderer=void 0;var r=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.ops=t||{}}var r,n,o;return r=e,(n=[{key:"process",value:function(t){var e="";for(var r in t.list){var n=t.list[r];if(this.ops[t.type]){var o=this.ops[t.type](n,t);!1!==o&&(e+=o)}else!1!==n&&(e+=n)}return e}}])&&t(r.prototype,n),o&&t(r,o),e}();e.Renderer=r}()}),require.register("subspace-console/view/EchoMessage.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.EchoMessage=void 0;var n=r("curvature/base/View");function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=a(e);if(r){var i=a(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(this,n)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(r,n.View);var e=i(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=e.call(this,n)).args.prompt=t.args.prompt||"<<",t.template='<span>[[prompt]]&nbsp;</span><span class = "text">[[message]]</span>',t}return r}();e.EchoMessage=s}()}),require.register("subspace-console/view/MeltingText.js",function(e,r,n){r=t(r,{},"subspace-console"),function(){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MeltingText=void 0;var n=r("curvature/base/View");function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=s(e);if(r){var i=s(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(this,n)}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(l,n.View);var e,r,s,c=a(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=c.call(this,t)).last=e.init=Date.now(),e.charUp=["","",""],e.charMid=["","","","","","","","","","","","","","","","","","","","",""],e.charDown=["","","",""],e.template='\n\t\t\t<div cv-bind = "output" class = "melting"></div>\n\t\t',e.args.input="Magic is no more than the art of employing consciously invisible means to produce visible effects. Will, love, and imagination are magic powers that everyone possesses; and whoever knows how to develop them to their fullest extent is a magician. Magic has but one dogma, namely, that the seen is the measure of the unseen\n",e.args.output="uh.",e.corruptors=[],e.maxMaxCorrupt=25,e.maxCorrupt=0,e.type="",e.onFrame(function(){e.typewriter(e.args.input)}),e.onInterval(64,function(){var t=window.getSelection();t.anchorOffset===t.focusOffset&&t.anchorNode===t.focusNode&&(e.args.output=e.corrupt(e.type))}),e.args.bindTo("input",function(t){e.type="",e.corruptors=[]}),e}return e=l,(r=[{key:"age",value:function(){return this.init-Date.now()}},{key:"lastFrame",value:function(){return this.last-Date.now()}},{key:"corrupt",value:function(t){if(1.15*t.length<this.args.input.length)return this.type;var e=t.split(""),r=function(t){return parseInt(Math.random()*t)};for(var n in r(1024)<256&&this.maxCorrupt<this.maxMaxCorrupt&&(this.maxCorrupt+=5),e)if(this.corruptors[n]=this.corruptors[n]||[],!e[n].match(/\W/)){var o=[this.charDown,this.charMid],i=o[r(o.length)];r(8192)<1&&this.corruptors[n].unshift(i[r(i.length)]),this.corruptors[n].length<this.maxCorrupt&&this.corruptors[n].unshift(i[r(i.length)]),r(2048)<1&&this.maxCorrupt>25&&this.corruptors[n].splice(5*r(5)),this.corruptors[n].push(this.corruptors[n].shift())}for(var a in e)this.corruptors[a]&&(e[a]+=this.corruptors[a].join(""));return e.join("")}},{key:"typewriter",value:function(t){return this.type=this.type||"",this.type===t||(this.type+=t.substr(this.type.length,1),this.onTimeout(150,function(){var t=window.scrollY+window.innerHeight;document.body.scrollHeight>t&&window.scrollTo({top:document.body.scrollHeight,left:0,behavior:"smooth"})}),!1)}}])&&o(e.prototype,r),s&&o(e,s),l}();e.MeltingText=c}()}),require.register("BackdropPalette.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackdropPalette=void 0;var n=e("backdrop/MarbleGarden"),o=e("backdrop/ProtoLabrynth"),i=e("backdrop/Industrial"),a=e("backdrop/MysticCave"),s=e("backdrop/WestSideCloudy"),c=e("backdrop/WestSideDay"),l=e("backdrop/WestSide"),u=e("backdrop/AngelIsland"),f=e("backdrop/Wood"),p=e("backdrop/Underground"),h=e("backdrop/Moon"),g=e("backdrop/SouthRidge"),d={"west-side-cloudy":s.WestSideCloudy,"west-side-day":c.WestSideDay,"west-side":l.WestSide,"angel-island":u.AngelIsland,wood:f.Wood,moon:h.Moon,"south-ridge":g.SouthRidge,"proto-labrynth":o.ProtoLabrynth,"marble-garden":n.MarbleGarden,industrial:i.Industrial,"mystic-cave":a.MysticCave,underground:p.Underground};t.BackdropPalette=d}),require.register("Classifier.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Classifier=void 0;var o=e("curvature/base/Mixin"),i=e("curvature/mixin/EventTargetMixin");function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=c(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function c(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(l,o.Mixin["with"](i.EventTargetMixin));var e,r,n,c=p(l);function l(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,e){return e instanceof t};for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=c.call(this)).compare=r,e.index=new Map,t)e.index.set(t[n],new Set);return e}return e=l,(r=[{key:"add",value:function(t){var e=new CustomEvent("adding",{detail:{object:t}});if(this.dispatchEvent(e)){var r,n=new Set,o=s(this.index.entries());try{for(o.s();!(r=o.n()).done;){var i=a(r.value,2),c=i[0],l=i[1];this.compare(c,t)&&(n.add(c),l.add(t))}}catch(t){o.e(t)}finally{o.f()}var u=new CustomEvent("added",{detail:{object:t,indexes:n}});this.dispatchEvent(u)}}},{key:"remove",value:function(t){var e=new CustomEvent("removing",{detail:{object:t}});if(this.dispatchEvent(e)){var r,n=new Set,o=s(this.index.entries());try{for(o.s();!(r=o.n()).done;){var i=a(r.value,2),c=i[0],l=i[1];this.compare(c,t)&&(n.add(c),l.delete(t))}}catch(t){o.e(t)}finally{o.f()}var u=new CustomEvent("added",{detail:{object:t,indexes:n}});this.dispatchEvent(u)}}},{key:"clear",value:function(){this.index.clear()}},{key:"get",value:function(t){return this.index.get(t)}},{key:"count",value:function(t){return this.index.has(t)&&this.get(t).size}},{key:"has",value:function(t){return!!this.count(t)}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Classifier=g}),require.register("Menu/ButtonSelect.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonSelect=void 0;var o=e("curvature/base/View"),i=e("../ui/CharacterString");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.View);var e,r,n,u=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return f(l(t=u.call.apply(u,[this].concat(r))),"template",'<div class = "button-select">[[prompt]] [[_button]] <button cv-on = "click:remove">exit</button></div>'),f(l(t),"buttons",["","","","","","","","","","","",null,"","","",""]),t}return e=p,(r=[{key:"onRendered",value:function(t){this.args.prompt=new i.CharacterString({value:"Select a button!",font:"small-menu-font"}),this.args._button=new i.CharacterString({value:"",font:"small-menu-font"})}},{key:"input",value:function(t){for(var e in t.buttons){if(!(e>100))t.buttons[e].pressure&&(this.args._button.args.value=this.buttons[e],this.args.button=e)}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.ButtonSelect=p}),require.register("Menu/CharacterPreview.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterPreview=void 0;var o=e("curvature/base/View");function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(f,o.View);var e,r,n,a=l(f);function f(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),p(u(r=a.call(this,t,e)),"preserve",!0),p(u(r),"template",'<div class = "character-preview" data-character = "[[setting]]">\n\t<div class = "character"></div>\n\t<div class = "emeralds" cv-each = "emeralds:emerald">[[emerald]]</div>\n\t<div class = "rings"></div>\n\t<div class = "score"></div>\n</div>');var n=r.args.emeralds=[o.View.from('<img style = "--x:[[x]];--y:[[y]];" src = "/Sonic/emerald-super-red-alt-mini.png" />'),o.View.from('<img style = "--x:[[x]];--y:[[y]];" src = "/Sonic/emerald-super-purple-mini.png" />'),o.View.from('<img style = "--x:[[x]];--y:[[y]];" src = "/Sonic/emerald-super-pink-mini.png" />'),o.View.from('<img style = "--x:[[x]];--y:[[y]];" src = "/Sonic/emerald-super-yellow-mini.png" />'),o.View.from('<img style = "--x:[[x]];--y:[[y]];" src = "/Sonic/emerald-super-cyan-mini.png" />'),o.View.from('<img style = "--x:[[x]];--y:[[y]];" src = "/Sonic/emerald-super-green-mini.png" />'),o.View.from('<img style = "--x:[[x]];--y:[[y]];" src = "/Sonic/emerald-super-white-mini.png" />')];return r.onFrame(function(){var t,e=0,r=i(n);try{for(r.s();!(t=r.n()).done;){var o=t.value,a=Date.now()/300,s=e++*(2*Math.PI)/7+a;o.args.x=Math.cos(s),o.args.y=Math.sin(s)}}catch(t){r.e(t)}finally{r.f()}}),r}return e=f,r&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.CharacterPreview=h}),require.register("Menu/MainMenu.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MainMenu=void 0;var o=e("curvature/base/Router"),i=e("../audio/Bgm"),a=(e("../intro/Card"),e("../effects/Cylinder"),e("../effects/Pinch")),s=(e("../effects/Droop"),e("../effects/Twist"),e("./Menu")),c=(e("./SavestateMenu"),e("./SettingsMenu")),l=(e("../tileMap/TileMap"),e("../ui/CharacterString")),u=e("./CharacterPreview"),f=e("./ZoneSuffix"),p=e("../network/Lobby");function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=v(t);if(e){var i=v(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}(this,r)}}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(S,s.Menu);var r,n,m,w=y(S);function S(t,r){var n,i,a,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,S),n=w.call(this,t,r),i=b(n),a="template",s=e("./main-menu.html"),a in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,o.Router.query.menuPath&&(n.args.initialPath=JSON.parse(o.Router.query.menuPath)),n.args.cardName="main-menu",n.args.haveToken=!1,n.args.joinGame=!1,n.args.hostGame=!1,n.args.copy="copy",n.font="small-menu-font",n.args.title=new l.CharacterString({value:"Sonic 3000",font:n.font}),n.args.ok=new l.CharacterString({value:" ok",font:n.font}),n.args.back=new l.CharacterString({value:" back",font:n.font}),n.args.select=new l.CharacterString({value:" select",font:n.font}),n.refreshConnection();var h={input:"select",options:["Sonic","Tails","Knuckles","Robotnik","EggRobo","Mecha-Sonic","Seymour","Chalmers","Sean"],locked:["Robotnik","EggRobo","Mecha-Sonic","Seymour","Chalmers","Sean"],default:"Sonic",set:function(t){return n.parent.args.selectedChar=t},get:function(){var t;return null!==(t=n.parent.args.selectedChar)&&void 0!==t?t:"Sonic"}};return h.prefix=new u.CharacterPreview(h),n.items=n.args.items={"Single Player":{available:"available",children:{Character:h,"Sonic Control Tutorial":{subtext:"Learn the controls for Sonic",characters:["Sonic"],callback:function(){n.parent.loadMap({mapUrl:"/map/sonic-movement.json"}),n.accept()}},"Tails Control Tutorial":{subtext:"Learn the controls for Tails",characters:["Tails"],callback:function(){n.parent.loadMap({mapUrl:"/map/tails-movement.json"}),n.accept()}},"Knuckles Control Tutorial":{subtext:"Learn the controls for Knuckles",characters:["Knuckles"],callback:function(){n.parent.loadMap({mapUrl:"/map/knuckles-movement.json"}),n.accept()}},"Radical City Zone Act 1":{characters:["Sonic","Tails","Knuckles","Robotnik"],suffix:new f.ZoneSuffix({map:"/map/empty-zone.json"},n.parent),callback:function(){n.parent.loadMap({mapUrl:"/map/empty-zone.json"}),n.accept()}},"Radical City Zone Act 2":{characters:["Sonic","Tails","Knuckles","Robotnik"],suffix:new f.ZoneSuffix({map:"/map/empty-zone-2.json"},n.parent),callback:function(){n.parent.loadMap({mapUrl:"/map/empty-zone-2.json"}),n.accept()}},"Seaview Park Zone Act 1":{characters:["Sonic","Tails","Knuckles","Robotnik"],suffix:new f.ZoneSuffix({map:"/map/west-side-zone.json"},n.parent),callback:function(){n.parent.loadMap({mapUrl:"/map/west-side-zone.json"}),n.accept()}},"Seaview Park Zone Act 2":{characters:["Sonic","Tails","Knuckles","Robotnik"],suffix:new f.ZoneSuffix({map:"/map/west-side-zone-2.json"},n.parent),callback:function(){n.parent.loadMap({mapUrl:"/map/west-side-zone-2.json"}),n.accept()}},"Manic Harbor Test Zone":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing art, layout and physics for Manic Harbor Zone",callback:function(){n.parent.loadMap({mapUrl:"/map/manic-harbor-zone.json"}),n.accept()}},"Misty Ruins Test Zone":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing art, layout and physics for Misty Ruins Zone",callback:function(){n.parent.loadMap({mapUrl:"/map/ruins-test.json"}),n.accept()}},"Underground Test":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing art, layout and physics for Underground Zone",callback:function(){n.parent.loadMap({mapUrl:"/map/underground-test.json"}),n.accept()}},"Moon Test":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing art for Moon Zone",callback:function(){n.parent.loadMap({mapUrl:"/map/moon-test.json"}),n.accept()}},"Terrain Test":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing different terrain types",callback:function(){n.parent.loadMap({mapUrl:"/map/bendy-bridges.json"}),n.accept()}},"Space Pinball Test":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing pinball physics",callback:function(){n.parent.loadMap({mapUrl:"/map/pinball-test.json"}),n.accept()}},"Belt and Wheel Test":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing elastic and rotational physics",callback:function(){n.parent.loadMap({mapUrl:"/map/belt-test.json"}),n.accept()}},"See-Saw Test":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing see-saw physics",callback:function(){n.parent.loadMap({mapUrl:"/map/see-saw-test.json"}),n.accept()}},"Vehicle Test":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing vehicles",callback:function(){n.parent.loadMap({mapUrl:"/map/vehicle-test.json"}),n.accept()}},"Spotlight Test":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Testing spotlight effects",callback:function(){n.parent.loadMap({mapUrl:"/map/visor-test.json"}),n.accept()}},"Flickie Test":{characters:["Sonic","Tails","Knuckles","Robotnik"],subtext:"Flickie stress test",callback:function(){n.parent.loadMap({mapUrl:"/map/flickie-test.json"}),n.accept()}},"Block Test":{characters:["Sonic","Tails","Knuckles","Robotnik"],callback:function(){n.parent.loadMap({mapUrl:"/map/block-test.json"}),n.accept()}},"Arch Test":{characters:["Sonic","Tails","Knuckles","Robotnik"],callback:function(){n.parent.loadMap({mapUrl:"/map/arc-test.json"}),n.accept()}}}},Multiplayer:{children:{"Matrix Lobby":{callback:function(){n.parent.matrixConnect().then(function(t){n.args.override=new p.Lobby({},n.parent)})}},"Peer to Peer":{children:{"Host a game":{callback:function(){n.args.hostOutput="",n.args.hostGame=!0,n.args.copy="copy"}},"Join a game":{callback:function(){n.args.joinOutput="",n.args.joinGame=!0,n.args.copy="copy",n.client.offer().then(function(t){var e=JSON.stringify(t),r="s3ktp://request/".concat(btoa(e));n.args.joinOutput=r,n.args.haveToken=!0})}}}}}},Settings:(0,c.SettingsMenu)(r),Graphics:{input:"select",options:["High","Medium","Low","Very Low"],set:function(t){return r.settings.graphicsLevel=t},get:function(){return r.settings.graphicsLevel}},About:{callback:function(){window.open("/about.html")}}},n}return r=S,(n=[{key:"clear",value:function(){this.args.input="",this.args.joinOutput="",this.args.hostOutput=""}},{key:"input",value:function(t){g(v(S.prototype),"input",this).call(this,t);if(this.args.pinch){var e=(t.axes[2]?t.axes[2].magnitude:0)+.1*(t.axes[0]?t.axes[0].magnitude:0),r=(t.axes[3]?t.axes[3].magnitude:0)+.1*(t.axes[1]?t.axes[1].magnitude:0);this.args.pinch.args.dx=103.552*e,this.args.pinch.args.dy=64*r}}},{key:"disconnect",value:function(){this.clear(),this.args.hostGame?this.server.close():this.args.joinGame&&this.client.close(),this.args.connected=!1,this.args.hostGame=!1,this.args.joinGame=!1,this.refreshConnection()}},{key:"onRendered",value:function(t){g(v(S.prototype),"onRendered",this).call(this,t),this.args.pinch=new a.Pinch({id:"menu-pinch",scale:64,width:Math.floor(103.552),height:64})}},{key:"back",value:function(){g(v(S.prototype),"back",this).call(this),this.disconnect()}},{key:"focus",value:function(t){g(v(S.prototype),"focus",this).call(this,t),t.scrollIntoView({behavior:"smooth",block:"center"})}},{key:"answer",value:function(){var t=this,e=this.args.input,r=/^s3ktp:\/\/request\/(.+)/.exec(e);r&&(e=atob(r[1]));var n=JSON.parse(e),o=this.server.answer(n);return o.then(function(e){var r=JSON.stringify(e),n="s3ktp://accept/".concat(btoa(r));t.args.hostOutput=n,t.args.haveToken=!0}),o}},{key:"acceptRtp",value:function(){var t=this.args.input,e=/^s3ktp:\/\/accept\/(.+)/.exec(t);e&&(t=atob(e[1]));var r=JSON.parse(t);this.client.accept(r)}},{key:"select",value:function(){this.args.hostGame?this.tags.hostOutput.select():this.args.joinGame&&this.tags.joinOutput.select()}},{key:"copy",value:function(){if(this.args.hostGame){if(!this.args.input)return;this.tags.hostOutput.select()}else if(this.args.joinGame){if(!this.args.joinOutput)return;this.tags.joinOutput.select()}document.execCommand("copy"),this.args.copy="copied!"}},{key:"paste",value:function(t){var e=this;navigator.clipboard.readText().then(function(t){e.args.hostGame&&t.match(/^s3ktp:\/\/request\//)&&(e.args.input=t,e.answer().then(function(t){e.copy()})),e.args.joinGame&&t.match(/^s3ktp:\/\/accept\//)&&(e.args.input=t,e.acceptRtp())})}},{key:"refreshConnection",value:function(){var t=this;this.server=this.parent.getServer(!0),this.client=this.parent.getClient(!0);var e=this.server,r=this.client,n=function(e){t.parent.loadMap({mapUrl:"/map/empty-zone-2.json",networked:!0}).then(function(){return console.log("Peer connection opened!")})},o=function(e){return t.disconnect()};this.listen(e,"open",n),this.listen(e,"close",o),this.listen(r,"open",n),this.listen(r,"close",o)}},{key:"play",value:function(){var t=this;g(v(S.prototype),"play",this).call(this),i.Bgm.play("MENU_THEME",!0);var e=this.done;return e.then(function(){return t.onTimeout(250,function(){return t.remove()})}),e}}])&&h(r.prototype,n),m&&h(r,m),Object.defineProperty(r,"prototype",{writable:!1}),S}();t.MainMenu=m}),require.register("Menu/Menu.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=void 0;var o=e("curvature/base/Bindable"),i=e("../intro/Card"),a=(e("../effects/Cylinder"),e("../effects/Pinch"),e("../ui/CharacterString")),s=e("../audio/Sfx");function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=d(t);if(e){var i=d(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}(this,r)}}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=Symbol("bindings"),b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(b,i.Card);var r,n,u,d=h(b);function b(t,r){var n,i,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b),t[o.Bindable.NoGetters]=!0,n=d.call(this,t,r),i=g(n),a="template",s=e("./main-menu.html"),a in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,n[o.Bindable.NoGetters]=!0,n.font="small-menu-font",n.args.initialPath=[],n.args.cardName="menu",n.args.items={},n.currentItem=null,n.include="a, button, input, textarea, select, details, [tabindex]",n.exclude='[tabindex="-1"]',n.onRemove(function(){return r.focus()}),n}return r=b,(n=[{key:"onRendered",value:function(t){var e=this;this.args.bindTo("items",function(t){for(var r in e.args.items){var n=e.args.items[r];n[y]&&c(n[y]).forEach(function(t){return t()})}var i=function(r){var n=t[r];if(n._title=new a.CharacterString({value:r,font:e.font}),n._value=new a.CharacterString({value:"",font:e.font}),n.get&&(n.setting=n.get()),"boolean"===n.input)n._value.args.value=n.setting?"ON":"OFF",n._boolValue=n._value;else if("select"===n.input)n._value.args.value=n.setting,n._selectValue=n._value;else if("output"===n.input){var i,s=o.Bindable.make(n);n[y]=null!==(i=n[y])&&void 0!==i?i:new Set,n[y].add(s.bindTo("setting",function(t){return n._value.args.value=t})),n.bind&&n[y].add(n.bind(o.Bindable.make(n)))}};for(var s in t)i(s)}),this.args.bindTo("items",function(t){if(t&&Object.keys(t).length){e.args.items&&(e.currentItem=null);var r=e.findNext(e.currentItem,e.tags.bound.node);r&&e.focus(r)}},{wait:0}),this.focusFirst()}},{key:"onAttached",value:function(t){var e=this;this.onTimeout(0,function(){return function t(){if(e.args.initialPath.length){var r=e.args.initialPath.shift();r in e.args.items&&(e.onTimeout(0,function(){return e.run(e.args.items[r])}),e.args.initialPath.length&&e.onTimeout(0,function(){return t()}))}}()})}},{key:"focusFirst",value:function(){if(this.tags.bound){var t=this.findNext(null,this.tags.bound);t&&this.focus(t)}}},{key:"findNext",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.querySelectorAll(this.include);if(n.length){var o,i=!1,a=null,s=null,c=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=l(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(n);try{for(c.s();!(o=c.n()).done;){var u=o.value;if(!u.matches(this.exclude)){if(!a){if(!t&&!r)return u;a=u}if(!r&&i)return u;if(u===t){if(r&&s)return s;i=!0}s=u}}}catch(t){c.e(t)}finally{c.f()}return r?s:this.findNext(void 0,e,r)}}},{key:"focus",value:function(t){var e=this;this.currentItem&&this.currentItem!==t&&this.blur(this.currentItem),t&&(t.classList.add("focused"),t.focus(),t.addEventListener("blur",function(){return e.blur(t)},{once:!0})),this.currentItem=t}},{key:"blur",value:function(t){t.classList.remove("focused"),t.blur()}},{key:"input",value:function(t){if(this.zeroMe=t,this.tags.bound)if(this.args.override)this.args.override.input(t);else{var e;t.buttons[0]&&1===t.buttons[0].time?(this.currentItem&&this.currentItem.click(),this.args.last="A",e=this.currentItem,this.beep()):t.buttons[1]&&1===t.buttons[1].time&&(this.back(),this.args.last="B",this.beep());var r=function(e){return t.buttons[e]&&(1===t.buttons[e].time||t.buttons[e].time>=140&&t.buttons[e].time%5==1||t.buttons[e].time>30&&t.buttons[e].time<140&&t.buttons[e].time%15==1)};r(12)||t.axes[7]&&t.axes[7].magnitude<0&&t.axes[7].delta?(e=this.findNext(this.currentItem,this.tags.bound.node,!0),this.beep()):r(13)||t.axes[7]&&t.axes[7].magnitude>0&&t.axes[7].delta?(e=this.findNext(this.currentItem,this.tags.bound.node),this.focus(e),this.beep()):r(14)||t.axes[6]&&t.axes[6].magnitude<0&&t.axes[6].delta?(this.currentItem&&this.contract(this.currentItem),this.beep()):(r(15)||t.axes[6]&&t.axes[6].magnitude>0&&t.axes[6].delta)&&(this.currentItem&&this.expand(this.currentItem),this.beep()),e&&this.focus(e)}}},{key:"beep",value:function(){this.parent.args.audio&&s.Sfx.play("SWITCH_HIT")}},{key:"run",value:function(t,e){var r=this;if(this.zeroMe&&this.zeroMe.zero(),"unavailable"!==t.available){if(e&&t.input&&this.onNextFrame(function(){return r.focus(e.target.closest("li"))}),t.children){var n=this.args.items,o={_title:new a.CharacterString({value:"back",font:"small-menu-font"}),callback:function(){r.args.items=n,r.args.currentKey=n._title?n._title.args.value:"",r.onNextFrame(function(){return r.focusFirst()})}};this.args.items=t.children,this.args.currentKey=t._title.args.value,this.args.items.back=this.args.items.back||o,this.onNextFrame(function(){return r.focusFirst()})}t.callback&&t.callback(t,this)}}},{key:"back",value:function(){this.args.items.back&&this.args.items.back.callback()}},{key:"expand",value:function(t){var e=t.querySelector("input"),r=t.getAttribute("data-title"),n=this.args.items[r];n&&("number"===n.input?(n.setting=Number(n.setting)+1,n.setting>n.max&&(n.setting=n.max),n.set&&n.set(n.setting)):"boolean"===n.input?(n.setting=!n.setting,n._value.args.value=n.setting?"ON":"OFF",n.set&&n.set(n.setting)):n&&"select"===n.input?this.cycleSelect(n,r,1):e&&e.focus())}},{key:"contract",value:function(t){var e=t.getAttribute("data-title"),r=this.args.items[e];r&&("number"===r.input?(r.setting=Number(r.setting)-1,r.setting<r.min&&(r.setting=r.min),r.set&&r.set(r.setting)):"boolean"===r.input?(r.setting=!r.setting,r._value.args.value=r.setting?"ON":"OFF",r.set&&r.set(r.setting)):r&&"select"===r.input?this.cycleSelect(r,e,-1):this.focus(t))}},{key:"keyup",value:function(t,e){if(("ArrowUp"===t.key||"ArrowDown"===t.key)&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),"INPUT"===t.currentTarget.tagName)){var r=this.findNext(this.currentItem,this.tags.bound.node,"ArrowUp"===t.key);if(r)return void this.focus(r)}}},{key:"change",value:function(t,e){var r=this.args.items[e];r&&(r.setting=t.target.value,this.selectListChanged(r,e),r.set(r.setting))}},{key:"toggle",value:function(t,e){t&&t.preventDefault(),e.setting=!e.setting,e._value.args.value=e.setting?"ON":"OFF",e.set&&e.set(e.setting)}},{key:"cancel",value:function(t){t.preventDefault()}},{key:"cycleSelect",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=!1,o=void 0,i=void 0,a=[];if(Object.assign(a,t.options),-1===r)a.reverse();else if(1!==r)return;for(var s=0,c=a;s<c.length;s++){var l,u=c[s];if(o=null!==(l=o)&&void 0!==l?l:u,u!==t.setting){if(n){t.setting=u,i=void 0;break}i=u}else n=!0}void 0!==i&&(t.setting=o),this.selectListChanged(t,e),t.set(t.setting)}},{key:"selectListRendered",value:function(t,e,r,n,o,i){if("select"===e.input){var a;e.setting=null!==(a=e.get?e.get():e.default)&&void 0!==a?a:void 0;var s=0;for(var c in e.options)e.options[c]===e.setting&&(s=c);void 0===e.setting&&e.options.length&&(s=0,e.setting=e.options[0]);var l=o.findTag("select");o.findTag("option");l.selectedIndex=s,e._value.args.value=e.setting,this.selectListChanged(e,r,!0)}else"boolean"===e.input&&e.element&&(e.element.selectedIndex=e.setting?0:1,e._value.args.value=e.setting?"ON":"OFF")}},{key:"selectListChanged",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("boolean"===t.input?(t._value.args.value=t.setting?"ON":"OFF",this.selectListChanged(t,e,!0)):"select"===t.input&&t._value&&(t.locked&&t.locked.includes(t.setting)?t._value.args.value="Locked":t._value.args.value=t.setting),"Character"===e)for(var n=0,o=Object.values(this.args.items);n<o.length;n++){var i,a,s=o[n];s._available=null!==(i=null!==(a=s._available)&&void 0!==a?a:s.available)&&void 0!==i?i:"available",s.characters&&!s.characters.includes(t.setting)?s.available="unavailable":s.available=s._available}this.parent.args.audio&&!r&&this.beep()}}])&&f(r.prototype,n),u&&f(r,u),Object.defineProperty(r,"prototype",{writable:!1}),b}();t.Menu=b}),require.register("Menu/PauseMenu.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PauseMenu=void 0;e("../intro/Card"),e("../effects/Cylinder"),e("../effects/Pinch");var o=e("./Menu"),i=e("./SettingsMenu"),a=(e("./SaveMenu"),e("../ui/CharacterString"));function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(d,o.Menu);var r,n,h,g=u(d);function d(t,r){var n,o,s,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),n=g.call(this,t,r),o=f(n),s="template",c=e("./pause-menu.html"),s in o?Object.defineProperty(o,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[s]=c,n.args.cardName="pause-menu",n.args.animation="",n.args.title=new a.CharacterString({value:"Sonic 3000",font:"small-menu-font"}),n.items=n.args.items={Continue:{subtext:"Return to gameplay.",callback:function(){return r.unpauseGame()}},Mute:{input:"boolean",subtext:"Mute all audio",set:function(t){return r.args.audio=!t},get:function(){return!r.args.audio}},Settings:(0,i.SettingsMenu)(r),Graphics:{input:"select",options:["High","Medium","Low","Very Low"],set:function(t){return r.settings.graphicsLevel=t},get:function(){return r.settings.graphicsLevel}},Reset:{subtext:"Reset the run.",children:{"Last Checkpoint":{subtext:"Restart from the last checkpoint.",children:{No:{callback:function(){return n.args.items.back.callback()}},Yes:{callback:function(){r.unpauseGame(),r.reset(),r.startLevel()}}}},"Level Start":{subtext:"Restart from the beginning of the act.",children:{No:{callback:function(){return n.args.items.back.callback()}},Yes:{callback:function(){r.clearCheckpoints(),r.unpauseGame(),r.reset(),r.startLevel()}}}}}},Quit:{subtext:"Quit to the title screen.",children:{No:{callback:function(){return n.args.items.back.callback()}},Yes:{callback:function(){n.args.items.back.callback(),r.clearCheckpoints(),r.unpauseGame(),r.quit(),r.playCards()}}}}},n}return r=d,(n=[{key:"run",value:function(t,e){t.stopPropagation(),t.stopImmediatePropagation(),c(p(d.prototype),"run",this).call(this,e)}},{key:"input",value:function(t){if(t.buttons[1011]&&t.buttons[1011].active){var e=t.buttons[1011].time;(1===e||e>30&&e%15==1)&&(this.parent.focus(),this.parent.args.paused=1,this.args.hideMenu="pause-menu-hide")}this.args.hideMenu?t.buttons[9]&&t.buttons[9].active&&(this.args.hideMenu=""):c(p(d.prototype),"input",this).call(this,t),t.buttons[1012]&&t.buttons[1012].time>0?(this.parent.focus(),this.args.hideMenu="pause-menu-hide"):t.buttons[1012]&&t.buttons[1012].time<0&&(this.args.hideMenu="")}},{key:"reset",value:function(){this.args.items=this.items}}])&&s(r.prototype,n),h&&s(r,h),Object.defineProperty(r,"prototype",{writable:!1}),d}();t.PauseMenu=h}),require.register("Menu/SaveMenu.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaveMenu=void 0;e("../save/SaveDatabase");t.SaveMenu=function(t){return{children:{Save:{callback:function(){if(t.controlActor){var e=t.controlActor,r={currentMap:t.currentMap,character:e.args.canonical,checkpoint:t.getCheckpoint(e.args.id)};console.log(r),SavestateDatabase.open("savestates",1).then(function(t){t.insert("savestates",r).then(function(e){console.log(e);var r={store:"savestates",index:"id"};t.select(r).each(function(t){return console.log(t)}).then(function(t){return console.log(t)})})})}}}}}}}),require.register("Menu/SavestateMenu.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaveMenu=void 0;var n=e("../save/SaveDatabase");t.SaveMenu=function(t){var e={};return n.SaveDatabase.open("saves",1).then(function(r){var n={store:"savestates",index:"id"};r.select(n).each(function(r){var n=r.id,o=r.character;e["".concat(n," ").concat(o)]={callback:function(){var e,n,i;console.log(r),t.setCheckpoint(r.currentMap,(e={},n=o,i=r.checkpoint,n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e)),t.loadMap({mapUrl:r.currentMap})}}}).then(function(t){return console.log(t)})}),{children:e}}}),require.register("Menu/SettingsMenu.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsMenu=void 0;var n=e("../controller/GamepadConfig"),o=(e("../intro/Series"),e("./ButtonSelect"));t.SettingsMenu=function(t){return{subtext:"Edit your configuration.",children:{Video:{subtext:"Video settings.",children:{"Motion Blur Effects":{input:"boolean",subtext:"Enable/Disable Motion Blur Effects",set:function(e){return t.settings.blur=e},get:function(){return t.settings.blur}},"Displacement Effects":{input:"boolean",subtext:"Enable/Disable Displacement Effects",set:function(e){return t.settings.displace=e},get:function(){return t.settings.displace}},Scaling:{input:"boolean",subtext:"Enable/Disable Scaling",set:function(e){return t.settings.scaling=e},get:function(){return t.settings.scaling}},Smoothing:{input:"boolean",subtext:"Enable/Disable Smoothing",set:function(e){return t.settings.smoothing=e},get:function(){return t.settings.smoothing}},"Display HUD":{input:"boolean",subtext:"Enable/Disable the HUD",set:function(e){return t.settings.showHud=e},get:function(){return t.settings.showHud}},"FPS Meter":{input:"boolean",subtext:"Enable/Disable the FPS Meter",set:function(e){return t.settings.showFps=e},get:function(){return t.settings.showFps}},"Mute/Fullscreen":{input:"boolean",subtext:"Show the mute & fullscreen controls in the bottom right.",set:function(e){return t.settings.shortcuts=e},get:function(){return t.settings.shortcuts}}}},Audio:{subtext:"Audio settings.",children:{Mute:{input:"boolean",subtext:"Mute all audio",set:function(e){return t.args.audio=!e},get:function(){return!t.args.audio}},"Music Volume":{input:"number",subtext:"Background music volume - 0% - 100%",set:function(e){return t.settings.musicVol=e},get:function(){return t.settings.musicVol},max:100,min:0},SFX:{input:"number",subtext:"Sound effect music volume - 0% - 100%",set:function(e){return t.settings.sfxVol=e},get:function(){return t.settings.sfxVol},max:100,min:0}}},Input:{subtext:"Input settings.",children:{"Gamepad Test":{callback:function(e,r){r.args.override=new n.GamepadConfig({},t),r.args.override.onRemove(function(){r.args.override=null,r.onNextFrame(function(){return r.focusFirst()})})}},"Select A Button":{callback:function(t,e){console.log("Select a button!"),e.args.override=new o.ButtonSelect({},e),e.args.override.onRemove(function(){e.args.override=null,e.onNextFrame(function(){return e.focusFirst()})})}},"Output test":{input:"output",bind:function(e){return t.settings.bindTo("buttonTest",function(t){e.setting=t})},set:function(e){return t.settings.buttonTest=e},get:function(){return t.settings.buttonTest}},"Button Font Test":{input:"select",options:["","","","","","","","","","","","","","","","","","","","","","","","","","","",""],set:function(e){return t.settings.buttonTest=e},get:function(){return t.settings.buttonTest}},Rumble:{input:"boolean",subtext:"Enable/Disable controller vibration",set:function(e){return t.settings.rumble=e},get:function(){return t.settings.rumble}}}},Network:{subtext:"Network settings.",children:{Username:{input:"string",subtext:"Name to display in online games",set:function(e){return t.settings.username=e},get:function(){return t.settings.username},max:15,min:0},"Matrix URL":{input:"string",subtext:"Matrix Server URL for lobby.",set:function(e){return t.settings.matrixUrl=e},get:function(){return t.settings.matrixUrl},min:0},"ICE Servers":{children:{"ICE Server #1":{input:"string",subtext:"ICE candidate server.",available:"unavailable"},"ICE Server #2":{input:"string",subtext:"ICE candidate server.",available:"unavailable"},"ICE Server #3":{input:"string",subtext:"ICE candidate server.",available:"unavailable"},"ICE Server #4":{input:"string",subtext:"ICE candidate server.",available:"unavailable"}}}}}}}}}),require.register("Menu/ZoneSuffix.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ZoneSuffix=void 0;var o=e("curvature/base/View"),i=e("../ui/CharacterString");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.View);var e,r,n,u=c(p);function p(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),f(l(r=u.call(this,t,e)),"preserve",!0),f(l(r),"template",'<div class = "zone-suffix">\n\t<div class = "row">\n\t\t\x3c!-- <div class = "checkpoint"></div> --\x3e\n\t\t<div class = "rings">[[rings]]</div>\n\t\t<div class = "time">[[time]]</div>\n\t\t<div class = "air">[[air]]</div>\n\t\t<div class = "score">[[score]]</div>\n\t</div>\n\t<div class = "row">\n\t\t<div class = "emblems" cv-each = "emblems:emblem">\n\t\t\t<img src = "/custom/hud-emblem.png" />\n\t\t</div>\n\t</div>\n</div>'),f(l(r),"font","small-menu-font"),e.loadSaves().then(function(t){var n=e.getZoneState(r.args.map),o=Math.floor(n.time/60),a=String(Math.ceil(n.time%60*1.67)).padEnd(2,"0"),s=String(n.time?o%60:0).padStart(2,"0"),c=n.time?Math.floor(o/60):0;r.args.emblems=n.emblems,r.args.rings=new i.CharacterString({value:n.rings||0,font:r.font}),r.args.time=new i.CharacterString({value:"".concat(c,":").concat(s,".").concat(a)||"--",font:r.font}),r.args.air=new i.CharacterString({value:(100*Number(n.air||0)).toFixed(2)+"%",font:r.font}),r.args.score=new i.CharacterString({value:n.score||0,font:r.font}),console.log()}),r}return e=p,r&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.ZoneSuffix=p}),require.register("Menu/main-menu.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]]">\n\n\t<div class = "menu-scroller"></div>\n\n\t[[pinch]]\n\t[[twist]]\n\n\t<section class = "buttons">\n\t\t<span>[[select]]</span>\n\t\t<span>[[ok]]</span>\n\t\t<span>[[back]]</span>\n\t</section>\n\n\t<section class = "contents" cv-if = "!connected">\n\t\t<div class = "menu-container" data-current-menu = "[[currentKey]]">\n\t\t\t<div>[[title]]</div>\n\t\t\t<div>\n\t\t\t\t<ul cv-ref = "bound" cv-each = "items:item:title">\n\n\t\t\t\t\t<li data-title = "[[title]]" class = "[[item.available]]" cv-on = "click:run(item, event); keyup(event, item):c" tabindex="0">\n\t\t\t\t\t\t[[item.prefix]]\n\t\t\t\t\t\t<span class = "title">[[item._title]]</span>\n\t\t\t\t\t\t<span class = "subtext">[[item.subtext]]</span>\n\t\t\t\t\t\t<span cv-if = "item.input" cv-is = "output">\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<span data-wraps = "output">\n\t\t\t\t\t\t\t\t[[item._value]]\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span cv-if = "item.input" cv-is = "string" class = "field">\n\t\t\t\t\t\t\t: <span data-wraps = "string"><input cv-ref = "string" cv-bind = "item.setting" cv-on = "keyup(event);input:change(event, title)" tabindex="-1" /></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span cv-if = "item.input" cv-is = "number" class = "field">\n\t\t\t\t\t\t\t<span data-wraps = "number"><input cv-ref = "number" cv-bind = "item.setting" type = "number" cv-on = "keyup(event);change(event, title)" tabindex="-1" max = "[[item.max]]" min = "[[item.min]]" /></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span cv-if = "item.input" cv-is = "boolean" class = "field">\n\t\t\t\t\t\t\t<span data-wraps = "select">\n\t\t\t\t\t\t\t\t[[item._boolValue]]\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tcv-on    = "cvDomAttached:selectListRendered(event, item, title, $view, $subview, $parent);click:toggle(event,item);mousedown:cancel(event);input:change(event, title)" cv-ref = "boolean"\n\t\t\t\t\t\t\t\t\tcv-bind = "item.setting"\n\t\t\t\t\t\t\t\t\ttabindex="-1">\n\t\t\t\t\t\t\t\t<option value = "1">on</option>\n\t\t\t\t\t\t\t\t<option value = "0">off</option>\n\t\t\t\t\t\t\t</select></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span cv-if = "item.input" cv-is = "select" class = "field">\n\t\t\t\t\t\t\t<span data-wraps = "select">\n\t\t\t\t\t\t\t\t[[item._selectValue]]\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tcv-on    = "input:change(event, title); listRendered:selectListRendered(event, item, title, $view, $subview, $parent);"\n\t\t\t\t\t\t\t\t\tcv-ref   = "options"\n\t\t\t\t\t\t\t\t\tcv-bind  = "item.setting"\n\t\t\t\t\t\t\t\t\ttabindex = "-1"\n\t\t\t\t\t\t\t\t\tcv-each  = "item.options:option">\n\t\t\t\t\t\t\t\t\t<option value = "[[option]]">[[option]]</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t[[item.suffix]]\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</section>\n\n\t<section class = "contents" cv-if = "!connected">\n\t\t<section class = "contents" cv-if = "lobby">[[lobby]]</section>\n\t\t<section class = "contents" cv-if = "hostGame">\n\t\t\t<div class = "token-exchange" data-have-token = "[[haveToken]]">\n\t\t\t\t<label>\n\t\t\t\t\t<p>Input the token from your friend here.</p>\n\t\t\t\t\t<textarea cv-bind = "input" cv-on = "click:paste(event)"></textarea>\n\t\t\t\t\t<button cv-on = "click:answer">go!</button>\n\t\t\t\t</label>\n\n\t\t\t\t<label>\n\t\t\t\t\t<p>Send this token to your friend to get started.</p>\n\t\t\t\t\t<textarea cv-on = "click:copy" cv-ref = "hostOutput" cv-bind = "hostOutput" readonly = "true"></textarea>\n\t\t\t\t\t<button cv-on = "click:copy">[[copy]]</button>\n\t\t\t\t\t<div class = "close" cv-on = "click:disconnect"></div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</section>\n\n\t\t<section class = "contents" cv-if = "joinGame">\n\t\t\t<div class = "token-exchange">\n\t\t\t\t<label cv-if = "haveToken">\n\t\t\t\t\t<p>Send this token to your friend to get started.</p>\n\t\t\t\t\t<textarea cv-on = "click:copy" cv-ref = "joinOutput" cv-bind = "joinOutput" readonly = "true"></textarea>\n\t\t\t\t\t<button cv-on = "click:copy">[[copy]]</button>\n\t\t\t\t</label>\n\n\t\t\t\t<label cv-if = "haveToken">\n\t\t\t\t\t<p>Input the token they send back here.</p>\n\t\t\t\t\t<textarea cv-bind = "input" cv-on = "click:paste(event)"></textarea>\n\t\t\t\t\t<button cv-on = "click:acceptRtp">go!</button>\n\t\t\t\t\t<div class = "close" cv-on = "click:disconnect"></div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</section>\n\t</section>\n\t<section class = "override">[[override]]</section>\n</div>\n'}),require.register("Menu/menu.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]]">\n\t<div class = "menu-scroller"></div>\n\t[[warp]]\n\t<div class = "menu-container" data-current-menu = "[[currentKey]]">\n\t\t<ul cv-ref = "bound" cv-each = "items:item:title">\n\t\t\t<li data-title = "[[title]]" class = "[[item.available]]" cv-on = "click:run(item);cvDomDetached:removeItem(item);" tabindex="0">\n\t\t\t\t<span class = "title">[[item._title]]</span>\n\t\t\t\t<span class = "subtext">[[item.subtext]]</span>\n\t\t\t\t<span cv-if = "item.input" cv-is = "output">\n\t\t\t\t\t: <span data-wraps = "output"><span cv-ref = "output" cv-bind = "item.setting"></span></span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-if = "item.input" cv-is = "string">\n\t\t\t\t\t: <span data-wraps = "string"><input cv-ref = "string" cv-bind = "item.setting" cv-on = "keyup(event);input:change(event)" tabindex="-1" /></span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-if = "item.input" cv-is = "number">\n\t\t\t\t\t: <span data-wraps = "number"><input cv-ref = "number" cv-bind = "item.setting" type = "number" cv-on = "keyup(event);change(event)" tabindex="-1" max = "[[item.max]]" min = "[[item.min]]" /></span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-if = "item.input" cv-is = "boolean">\n\t\t\t\t\t: <span data-wraps = "select"><select cv-on = "click:toggle(event,item);mousedown:cancel(event);change(event)" cv-ref = "boolean" cv-bind = "item.setting" tabindex="-1">\n\t\t\t\t\t\t<option value = "1">on</option>\n\t\t\t\t\t\t<option value = "0">off</option>\n\t\t\t\t\t</select></span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-if = "item.input" cv-is = "select">\n\t\t\t\t\t: <span data-wraps = "select"><select cv-on = "change(event)" cv-ref = "select" cv-bind = "item.setting" tabindex="-1" cv-each = "options:option:o">\n\t\t\t\t\t\t<option value = "[[o]]">[[o]]</option>\n\t\t\t\t\t</select></span>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n'}),require.register("Menu/pause-menu.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[hideMenu]]">\n\n\t<div class = "menu-scroller"></div>\n\n\t[[warp]]\n\n\t<section class = "contents" cv-if = "!connected">\n\n\t\t<div class = "menu-container" data-current-menu = "[[currentKey]]">\n\n\t\t\t<div>[[title]]</div>\n\n\t\t\t<ul cv-ref = "bound" cv-each = "items:item:title">\n\n\t\t\t\t<li data-title = "[[title]]" class = "[[item.available]]" cv-on = "click:run(event, item):c; keyup(event, item):c;" tabindex="0">\n\t\t\t\t\t[[item.prefix]]\n\t\t\t\t\t<span class = "title">[[item._title]]</span>\n\t\t\t\t\t<span class = "subtext">[[item.subtext]]</span>\n\t\t\t\t\t<span cv-if = "item.input" cv-is = "string">\n\t\t\t\t\t\t: <input cv-ref = "string" cv-bind = "item.setting" cv-on = "keyup(event);input:change(event)" tabindex="-1" />\n\t\t\t\t\t</span>\n\t\t\t\t\t<span cv-if = "item.input" cv-is = "number">\n\t\t\t\t\t\t: <input cv-ref = "number" cv-bind = "item.setting" type = "number" cv-on = "keyup(event);change(event)" tabindex="-1" max = "[[item.max]]" min = "[[item.min]]" />\n\t\t\t\t\t</span>\n\t\t\t\t\t<span cv-if = "item.input" cv-is = "boolean">\n\t\t\t\t\t\t: <select cv-on = "click:toggle(event,item);mousedown:cancel(event);change(event)" cv-ref = "boolean" cv-bind = "item.setting" tabindex="-1">\n\t\t\t\t\t\t\t<option value = "1">on</option>\n\t\t\t\t\t\t\t<option value = "0">off</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span cv-if = "item.input" cv-is = "select" class = "field">\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<span data-wraps = "select">\n\t\t\t\t\t\t\t[[item._selectValue]]\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tcv-on    = "input:change(event, title); listRendered:selectListRendered(event, item, title, $view, $subview, $parent);"\n\t\t\t\t\t\t\t\tcv-ref   = "options"\n\t\t\t\t\t\t\t\tcv-bind  = "item.setting"\n\t\t\t\t\t\t\t\ttabindex = "-1"\n\t\t\t\t\t\t\t\tcv-each  = "item.options:option">\n\t\t\t\t\t\t\t\t<option value = "[[option]]">[[option]]</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t[[item.suffix]]\n\t\t\t\t</li>\n\t\t</ul>\n\n\t\t</div>\n\n\t</section>\n\n\t<section class = "override">[[override]]</section>\n\n</div>\n'}),require.register("ObjectPalette.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectPalette=void 0;e("./actor/PointActor");var n=e("./actor/LayerSwitch"),o=e("./region/Region"),i=e("./region/ShadeRegion"),a=(e("./region/BgShadeRegion"),e("./region/FgShadeRegion"),e("./region/WaterRegion")),s=e("./region/DarkRegion"),c=e("./region/LavaRegion"),l=e("./region/RollingRegion"),u=e("./region/GrindingRegion"),f=e("./region/ForceRegion"),p=e("./region/FrictionRegion"),h=e("./region/CorkscrewRegion"),g=e("./region/BossRegion"),d=e("./region/ExitRegion"),y=e("./region/LoadingRegion"),b=e("./region/ExplodingRegion"),v=e("./region/SwitchRegion"),m=e("./region/RainRegion"),w=e("./region/DebrisRegion"),S=e("./region/WaterfallRegion"),O=e("./region/KillRegion"),k=e("./region/VehicleRegion"),x=e("./region/DropVehicleRegion"),j=e("./actor/CompanionBlock"),P=e("./actor/QuestionBlock"),_=e("./actor/MarbleBlock"),R=e("./actor/BreakableBlock"),M=e("./actor/Stopper"),T=e("./actor/Zipline"),E=e("./actor/Block"),A=e("./actor/Tree"),C=e("./actor/Coconut"),B=e("./actor/Mushroom"),D=e("./actor/Door"),I=(e("./actor/Monitor"),e("./actor/monitor/WebMonitor")),L=e("./actor/monitor/RingMonitor"),F=e("./actor/monitor/TripleRingMonitor"),N=e("./actor/monitor/InfoMonitor"),z=e("./actor/monitor/SheildStarMonitor"),q=e("./actor/monitor/SheildNormalMonitor"),U=e("./actor/monitor/SheildFireMonitor"),W=e("./actor/monitor/SheildWaterMonitor"),V=e("./actor/monitor/SheildElectricMonitor"),H=e("./actor/Bumper"),G=e("./actor/Flipper"),K=e("./actor/SeeSaw"),Y=e("./actor/Cinematic"),J=e("./actor/Flickie"),X=e("./actor/Bubbles"),$=e("./actor/Redz"),Z=e("./actor/GuardBot"),Q=e("./actor/Sping"),tt=e("./actor/CrabMeat"),et=e("./actor/BuzzBomber"),rt=e("./actor/MechaFroggy"),nt=e("./actor/DrainFly"),ot=e("./actor/GohlaBall"),it=e("./actor/Voltorb"),at=e("./actor/Balkiry"),st=e("./actor/Jawz"),ct=e("./actor/SnailBot"),lt=e("./actor/Motobug"),ut=e("./actor/BFish"),ft=e("./actor/Grounder"),pt=e("./actor/SpringTurtle"),ht=e("./actor/SpitFire"),gt=e("./actor/Explosion"),dt=e("./actor/StarPost"),yt=e("./actor/ArrowSign"),bt=e("./actor/Emerald"),vt=e("./actor/FakeEmerald"),mt=e("./actor/Window"),wt=e("./actor/Spring"),St=(e("./actor/BrokenMonitor"),e("./actor/Ring")),Ot=e("./actor/Coin"),kt=e("./actor/Emblem"),xt=e("./actor/Apple"),jt=e("./actor/AntiRing"),Pt=e("./actor/DropCage"),_t=e("./actor/SlotMachine"),Rt=e("./actor/WaterFall"),Mt=e("./actor/WaterJet"),Tt=e("./actor/PowerupGlow"),Et=e("./actor/Projectile"),At=e("./actor/TextActor"),Ct=e("./actor/EggMobile"),Bt=e("./actor/SnowBoard"),Dt=e("./actor/DrillCar"),It=e("./actor/Tornado"),Lt=e("./actor/RailCar"),Ft=e("./actor/EggWalker"),Nt=e("./actor/EggShuttle"),zt=e("./actor/PogoSpring"),qt=e("./actor/NuclearSuperball"),Ut=e("./actor/Platformer"),Wt=e("./actor/MechaSonic"),Vt=e("./actor/Eggrobo"),Ht=e("./actor/Eggman"),Gt=e("./actor/Sonic"),Kt=e("./actor/Tails"),Yt=e("./actor/Knuckles"),Jt=e("./actor/Seymour"),Xt=e("./actor/Chalmers"),$t=e("./actor/Sean"),Zt=e("./actor/Big"),Qt=e("./actor/Rocks"),te=e("./actor/Switch"),ee=e("./actor/HeavyDutySwitch"),re=e("./actor/Balloon"),ne=e("./actor/StarBalloon"),oe=e("./actor/Spinner"),ie=e("./actor/Springboard"),ae=e("./actor/GrapplePoint"),se=e("./actor/WoodenCrate"),ce=e("./actor/SteelCrate"),le=e("./actor/ChaoCrate"),ue=e("./actor/UnbreakableCrate"),fe=e("./actor/Rocket"),pe=e("./actor/Booster"),he=e("./actor/WindStone"),ge=e("./actor/RoadBarrier"),de=e("./actor/Spikes"),ye=e("./actor/SpikesSmall"),be=e("./actor/Cone"),ve=e("./actor/Fountain"),me=e("./actor/CautionSign"),we=e("./actor/RollingSign"),Se=e("./actor/Bell"),Oe=e("./actor/Torch"),ke=e("./actor/Signpost"),xe=e("./actor/Umbrella"),je=e("./actor/Dish"),Pe=e("./actor/RedEyeJet"),_e=e("./actor/MiniMace"),Re=e("./actor/MegaMace"),Me=e("./actor/Beelzebub"),Te=e("./actor/MiniBoss"),Ee=e("./actor/Magnet"),Ae=e("./actor/Pulley"),Ce=e("./actor/PulleySmall"),Be=e("./actor/Orb"),De=e("./actor/Egg"),Ie=e("./actor/Chao"),Le=e("./actor/EggShellTop"),Fe=e("./actor/EggShellBottom"),Ne=e("./actor/BackdropSwapper"),ze=e("./actor/LayerController"),qe=e("./actor/WaterController"),Ue=e("./actor/TilesetSwapper"),We=e("./actor/CutScene"),Ve=e("./actor/HtmlFrame"),He=e("./actor/Panel"),Ge=e("./actor/Tester"),Ke=(e("./actor/Cursor"),e("./actor/Spawner")),Ye=e("./actor/NeverBetter"),Je={player:qt.NuclearSuperball,cinematic:Y.Cinematic,spring:wt.Spring,"layer-switch":n.LayerSwitch,"layer-controller":ze.LayerController,"water-controller":qe.WaterController,"backdrop-swapper":Ne.BackdropSwapper,"tileset-swapper":Ue.TilesetSwapper,"star-post":dt.StarPost,"arrow-sign":yt.ArrowSign,projectile:Et.Projectile,block:E.Block,tree:A.Tree,coconut:C.Coconut,mushroom:B.Mushroom,door:D.Door,"q-block":P.QuestionBlock,"marble-block":_.MarbleBlock,"companion-block":j.CompanionBlock,"breakable-block":R.BreakableBlock,stopper:M.Stopper,zipline:T.Zipline,bumper:H.Bumper,flipper:G.Flipper,"see-saw":K.SeeSaw,"drill-car":Dt.DrillCar,"rail-car":Lt.RailCar,tornado:It.Tornado,"egg-walker":Ft.EggWalker,"snow-board":Bt.SnowBoard,"egg-mobile":Ct.EggMobile,"egg-shuttle":Nt.EggShuttle,"pogo-spring":zt.PogoSpring,"rocks-tall":Qt.Rocks,"rocks-med":Qt.Rocks,"rocks-short":Qt.Rocks,"mecha-sonic":Wt.MechaSonic,platformer:Ut.Platformer,sonic:Gt.Sonic,tails:Kt.Tails,knuckles:Yt.Knuckles,eggman:Ht.Eggman,robotnik:Ht.Eggman,eggrobo:Vt.Eggrobo,seymour:Jt.Seymour,chalmers:Xt.Chalmers,sean:$t.Sean,big:Zt.Big,switch:te.Switch,"heavy-duty-switch":ee.HeavyDutySwitch,window:mt.Window,emerald:bt.Emerald,"fake-emerald":vt.FakeEmerald,"base-region":o.Region,region:a.WaterRegion,"lava-region":c.LavaRegion,"dark-region":s.DarkRegion,"shade-region":i.ShadeRegion,"force-region":f.ForceRegion,"friction-region":p.FrictionRegion,"corkscrew-region":h.CorkscrewRegion,"rolling-region":l.RollingRegion,"grinding-region":u.GrindingRegion,"exploding-region":b.ExplodingRegion,"boss-region":g.BossRegion,"exit-region":d.ExitRegion,"loading-region":y.LoadingRegion,"switch-region":v.SwitchRegion,"rain-region":m.RainRegion,"debris-region":w.DebrisRegion,"waterfall-region":S.WaterfallRegion,"kill-region":O.KillRegion,"vehicle-region":k.VehicleRegion,"drop-vehicle-region":x.DropVehicleRegion,ring:St.Ring,antiring:jt.AntiRing,coin:Ot.Coin,emblem:kt.Emblem,apple:xt.Apple,"drop-cage":Pt.DropCage,"slot-machine":_t.SlotMachine,"powerup-glow":Tt.PowerupGlow,explosion:gt.Explosion,"text-actor":At.TextActor,"water-jet":Mt.WaterJet,"water-fall":Rt.WaterFall,balloon:re.Balloon,"star-balloon":ne.StarBalloon,"web-monitor":I.WebMonitor,"ring-monitor":L.RingMonitor,"triple-ring-monitor":F.TripleRingMonitor,"info-monitor":N.InfoMonitor,"sheild-fire-monitor":U.SheildFireMonitor,"sheild-normal-monitor":q.SheildNormalMonitor,"sheild-star-monitor":z.SheildStarMonitor,"sheild-water-monitor":W.SheildWaterMonitor,"sheild-electric-monitor":V.SheildElectricMonitor,flickie:J.Flickie,crabmeat:tt.CrabMeat,redz:$.Redz,"guard-bot":Z.GuardBot,sping:Q.Sping,"mecha-froggy":rt.MechaFroggy,"buzz-bomber":et.BuzzBomber,bubbles:X.Bubbles,drainfly:nt.DrainFly,"gohla-ball":ot.GohlaBall,voltorb:it.Voltorb,balkiry:at.Balkiry,jawz:st.Jawz,snailbot:ct.SnailBot,motobug:lt.Motobug,"b-fish":ut.BFish,grounder:ft.Grounder,"spring-turtle":pt.SpringTurtle,spitfire:ht.SpitFire,"grapple-point":ae.GrapplePoint,rocket:fe.Rocket,booster:pe.Booster,spinner:oe.Spinner,springboard:ie.Springboard,"wooden-crate":se.WoodenCrate,"steel-crate":ce.SteelCrate,"chao-crate":le.ChaoCrate,"unbreakable-crate":ue.UnbreakableCrate,"road-barrier":ge.RoadBarrier,signpost:ke.Signpost,umbrella:xe.Umbrella,dish:je.Dish,"red-eye-jet":Pe.RedEyeJet,beelzebub:Me.Beelzebub,"mini-boss":Te.MiniBoss,"mini-mace":_e.MiniMace,"mega-mace":Re.MegaMace,magnet:Ee.Magnet,pulley:Ae.Pulley,"pulley-small":Ce.PulleySmall,spikes:de.Spikes,"spikes-small":ye.SpikesSmall,cone:be.Cone,"wind-stone":he.WindStone,fountain:ve.Fountain,"caution-sign":me.CautionSign,"rolling-sign":we.RollingSign,bell:Se.Bell,torch:Oe.Torch,orb:Be.Orb,chao:Ie.Chao,egg:De.Egg,"egg-shell-top":Le.EggShellTop,"egg-shell-bottom":Fe.EggShellBottom,"cut-scene":We.CutScene,"html-frame":Ve.HtmlFrame,panel:He.Panel,tester:Ge.Tester,spawner:Ke.Spawner,"never-better":Ye.NeverBetter};t.ObjectPalette=Je}),require.register("QuadCell.js",function(t,e,r){"use strict";function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(t,"__esModule",{value:!0}),t.QuadCell=void 0;var s=Symbol("CellRef"),c=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"position",{}),a(this,"size",{}),a(this,"divided",!1),a(this,"parent",null),a(this,"leafPoint",{x:null,y:null}),a(this,"leafRefs",null),a(this,"ld",null),a(this,"rd",null),a(this,"lu",null),a(this,"ru",null),a(this,"cells",[]),a(this,"minSize",0),this.parent=o,this.position.x=r.x,this.position.y=r.y,this.size.x=n.x,this.size.y=n.y,this.minSize=e,Object.seal(this)}var e,r,o;return e=t,(r=[{key:"empty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.divided)return!this.leafRefs||!this.leafRefs.size;for(var e in this.cells)if(!this.cells[e].empty(t+1))return!1;return!0}},{key:"insert",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};if(!this.contains(e))return!1;if(!this.leafRefs&&!this.divided)return this.leafRefs=new Set,this.leafPoint.x=e.x,this.leafPoint.y=e.y,this.leafRefs.add(t),t[s]=this,!0;if(this.size.x<=this.minSize)return this.leafRefs.add(t),t[s]=this,!0;if(this.leafRefs&&e.x===this.leafPoint.x&&e.y===this.leafPoint.y)return this.leafRefs.add(t),t[s]=this,!0;this.divided||this.divide();var r,o=n(this.cells);try{for(o.s();!(r=o.n()).done;){if(r.value.insert(t,e))return!0}}catch(t){o.e(t)}finally{o.f()}return!1}},{key:"move",value:function(t,e){var r=t[s];if(r){if(r.leafPoint.x===e.x&&r.leafPoint.y===e.y)return;t[s]=null,r.leafRefs.delete(t),r.parent&&r.parent.join()}this.insert(t,e)}},{key:"remove",value:function(t){var e=t[s];e&&(t[s]=null,e.leafRefs.delete(t),e.parent&&e.parent.join())}},{key:"join",value:function(){var t=this;if(!this.empty())return!1;var e,r=null,o=n(this.cells);try{for(o.s();!(e=o.n()).done;){var i=e.value;if(!i.empty()){if(r)return!1;r=i}}}catch(t){o.e(t)}finally{o.f()}this.ld=null,this.rd=null,this.lu=null,this.ru=null,this.cells=[],this.divided=!1,r&&r.leafRefs.forEach(function(e){return t.insert(e)}),this.parent&&this.parent.join()}},{key:"divide",value:function(){if(this.divided)return!1;var t=this.position,e=this.size,r=this.minSize;if(this.ld=new this.constructor(r,{x:t.x-e.x/4,y:t.y-e.y/4},{x:e.x/2,y:e.y/2},this),this.rd=new this.constructor(r,{x:t.x+e.x/4,y:t.y-e.y/4},{x:e.x/2,y:e.y/2},this),this.lu=new this.constructor(r,{x:t.x-e.x/4,y:t.y+e.y/4},{x:e.x/2,y:e.y/2},this),this.ru=new this.constructor(r,{x:t.x+e.x/4,y:t.y+e.y/4},{x:e.x/2,y:e.y/2},this),this.cells.push(this.ld,this.rd,this.lu,this.ru),this.divided=!0,!this.leafRefs.size)return!0;var o,i=n(this.leafRefs);try{t:for(i.s();!(o=i.n()).done;){var a,s=o.value,c=n(this.cells);try{for(c.s();!(a=c.n()).done;){if(a.value.insert(s,this.leafPoint)){this.leafRefs.delete(s);continue t}}}catch(t){c.e(t)}finally{c.f()}}}catch(t){i.e(t)}finally{i.f()}}},{key:"contains",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=this.position.x-this.size.x/2,r=this.position.x+this.size.x/2;if(t.x<e||t.x>r)return!1;var n=this.position.y-this.size.y/2,o=this.position.y+this.size.y/2;return!(t.y<n||t.y>o)}},{key:"select",value:function(t,e,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(this.empty())return[];if(r/2+this.size.x/2<Math.abs(t-this.position.x))return[];if(o/2+this.size.y/2<Math.abs(e-this.position.y))return[];if(this.divided){var a,s=new Set,c=n(this.cells);try{for(c.s();!(a=c.n()).done;){var l,u=n(a.value.select(t,e,r,o,i+1));try{for(u.s();!(l=u.n()).done;){var f=l.value;s.add(f)}}catch(t){u.e(t)}finally{u.f()}}}catch(t){c.e(t)}finally{c.f()}return s}return this.leafRefs?this.leafRefs:[]}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.QuadCell=c}),require.register("World.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.World=void 0;var n=e("curvature/base/Bag"),o=e("curvature/base/Bindable"),i=e("tileMap/TileMap");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"tileMap",new i.TileMap),this.viewports=new n.Bag(function(t,r,n){switch(n){case BAG.ITEM_ADDED:t.world=e;break;case BAG.ITEM_REMOVED:t.world=null}}),this.actors=new n.Bag(function(t,r,n){switch(n){case BAG.ITEM_ADDED:t.world=e;break;case BAG.ITEM_REMOVED:t.world=null}})}var e,r,o;return e=t,(r=[{key:"getOnScreenObjects",value:function(t){}},{key:"update",value:function(){}}])&&a(e.prototype,r),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.World=c,s(c,"globals",o.Bindable.make({}))}),require.register("abilities/LightDash.js",function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.LightDash=void 0;var o=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)});t.LightDash=o}),require.register("actor/AntiRing.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AntiRing=void 0;var o=e("./PointActor"),i=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,o.PointActor);var e,r,n,h=l(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return p(u(n=h.call.apply(h,[this].concat(i))),"template",'<div class  = "point-actor [[type]]">\n\t\t<div class = "sprite" cv-ref = "sprite"></div>\n\t</div>'),p(u(n),"float",-1),n.args.type="actor-item actor-anti-ring",n.args.width=15,n.args.height=15,n.args.static=null===(t=n.args.static)||void 0===t||t,n.args.dropped=null===(e=n.args.dropped)||void 0===e||e,n.args.gone=!1,n.args.gravity=.4,n.args.delay=null!==(r=n.args.delay)&&void 0!==r?r:48,n}return e=g,(r=[{key:"update",value:function(){var t=this;if(this.viewport){this.viewport.args.frameId,this.startFrame;this.args.noClip?this.noClip=!0:this.args.decoration?this.noClip=!0:this.args.ySpeed<0?this.noClip=!0:this.attract||(this.noClip=!1),this.args.decoration&&(this.args.type="actor-item actor-anti-ring decoration",this.args.gravity=.36),this.dropped&&(this.args.type="actor-item actor-anti-ring dropped",this.args.height=14);var e=this.viewport;this.dropped&&this.viewport&&!this.viewport.actorIsOnScreen(this,256)&&e.onFrameOut(15,function(){e.actors.remove(t)}),this.args.reward&&this.args.gone&&e.onFrameOut(15,function(){e.actors.remove(t)}),s(f(g.prototype),"update",this).call(this),this.args.reward||(this.getMapSolidAt(this.x+this.args.xSpeed*this.args.direction,this.y+-8)&&(this.args.xSpeed*=-1),!this.dropped&&!this.scattered||this.args.falling&&this.args.ySpeed||(this.args.xSpeed=this.args.xSpeed||this.xSpeedLast||Math.random()-.5,this.args.ySpeed=Math.min(.75*-Math.abs(this.args.ySpeed||this.ySpeedLast||0),-5),this.args.gSpeed=0,this.args.x+=this.args.xSpeed,this.args.y+=this.args.ySpeed,this.args.falling=!0,this.args.groundAngle=0))}}},{key:"callCollideHandler",value:function(t){return!(t instanceof g)&&s(f(g.prototype),"callCollideHandler",this).call(this,t)}},{key:"collideA",value:function(t){var e=this;if(!(t instanceof this.constructor)){if(!this.viewport||this.args.gone||this.args.ignore)return!1;if(!t.controllable&&!t.occupant&&!t.args.owner)return!1;var r=this.viewport.args.frameId-this.startFrame;if(this.dropped&&r<this.args.delay)return!1;s(f(g.prototype),"collideA",this).call(this,t),t.args.owner&&(t=t.args.owner),t.occupant&&(t=t.occupant),t.controllable&&(t.args.rings-=1),this.args.gone=!0,this.viewport.auras.delete(this),this.args.static=!0,this.args.float=-1,this.args.type="actor-item actor-anti-ring collected",this.args.xSpeed=0,this.args.ySpeed=0,this.viewport.args.audio&&i.Sfx.play("SPIKE_DAMAGE"),this.viewport.onFrameOut(5,function(){e.args.type="actor-item actor-anti-ring collected gone"});this.x,this.y,this.viewport;this.viewport.onFrameOut(1200,function(){e.restore=!0}),t.collect&&this.onNextFrame(function(){t.collect(e)})}}},{key:"wakeUp",value:function(){this.def&&this.restore&&(this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.args.gone=this.restore=!1,this.args.type="actor-item actor-anti-ring")}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.AntiRing=h}),require.register("actor/Apple.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Apple=void 0;var o=e("./PointActor"),i=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.width=11,t.args.height=11,t.args.type="actor-item actor-apple",t.args.float=-1,t.collected=!1,t}return e=p,(r=[{key:"onRendered",value:function(t){return s(u(p.prototype),"onRendered",this).call(this,t)}},{key:"collideA",value:function(t){var e=this;if(t.controllable&&!this.gone){var r=this.viewport;r.getZoneState();this.collected?this.args.type="actor-item actor-apple actor-apple-gone actor-apple-collected":this.args.type="actor-item actor-apple actor-apple-gone",this.gone=!0,r.onFrameOut(20,function(){r.actors.remove(e)}),r.currentSave.save(),this.viewport.args.audio&&i.Sfx.play("apple_COLLECTED")}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Apple=f}),require.register("actor/ArrowSign.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ArrowSign=void 0;var o=e("./PointActor"),i=e("curvature/base/Tag");e("../actor/Projectile"),e("./Monitor"),e("./monitor/RingMonitor"),e("./monitor/SheildFireMonitor"),e("./monitor/SheildWaterMonitor"),e("./monitor/SheildElectricMonitor");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.PointActor);var e,r,n,f=c(p);function p(t,e){var r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(o=f.call(this,t,e)).args.type="actor-item actor-arrow-sign",o.args.float=null!==(r=o.args.float)&&void 0!==r?r:-1,o.args.static=null===(n=o.args.static)||void 0===n||n,o.args.width=t.width||32,o.args.height=t.height||64,o}return e=p,n=[{key:"fromDef",value:function(t){var e=l(u(p),"fromDef",this).call(this,t);return e.args.rotation=t.rotation,e.args.height=t.height,e}}],(r=[{key:"onRendered",value:function(t){var e=this;l(u(p.prototype),"onRendered",this).call(this,t),this.headBox||(this.sprite=this.findTag("div.sprite"),this.box=this.findTag("div"),this.headBox=new i.Tag('<div class = "arrow-sign-head-box">'),this.post=new i.Tag('<div class = "arrow-sign-post">'),this.head=new i.Tag('<div class = "arrow-sign-head">'),this.sprite.appendChild(this.post.node),this.headBox.appendChild(this.head.node),this.sprite.appendChild(this.headBox.node),this.args.bindTo(["point","height"],function(t,r){var n,o,i;e.headBox.style((i=t,(o="--"+r)in(n={})?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,n))}))}},{key:"solid",get:function(){return!1}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.ArrowSign=f}),require.register("actor/BFish.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BFish=void 0;e("./Flickie");var o=e("curvature/base/Mixin"),i=(e("curvature/base/Tag"),e("./PointActor")),a=e("../behavior/SkidDust"),s=e("../behavior/Patrol"),c=e("../mixin/CanPop");function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,o.Mixin.from(i.PointActor,c.CanPop));var e,r,n,g=p(d);function d(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var r=t.jumpForce||14;return(e=g.call(this,t)).behaviors.add(new a.SkidDust),e.behaviors.add(new s.Patrol),e.args.type="actor-item actor-b-fish",e.args.animation="standing",e.noClip=!0,e.args.gSpeedMax=5,e.args.jumpForce=r||14,e.args.jumpDelay=e.args.jumpDelay||0,e.args.gravity=.5,e.args.width=24,e.args.height=32,e.willStick=!1,e.stayStuck=!1,e.age=0,e}return e=d,(r=[{key:"update",value:function(){var t=this,e=this.def.get("y");this.age<=this.args.jumpDelay?this.args.float=-1:this.args.float=!1,this.age>this.args.jumpDelay&&this.args.y>e&&this.viewport.onNextFrame(function(){return t.args.ySpeed=-t.args.jumpForce}),u(h(d.prototype),"update",this).call(this),this.age++}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.BFish=g}),require.register("actor/BackdropController.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BackdropController=void 0;var o=e("./PointActor");e("../BackdropPalette");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.hidden=!0,r}return e=l,(r=[{key:"activate",value:function(t,e){}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.BackdropController=l}),require.register("actor/BackdropSwapper.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BackdropSwapper=void 0;var o=e("./PointActor");e("../BackdropPalette");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.hidden=!0,r}return e=l,(r=[{key:"activate",value:function(t,e){}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.BackdropSwapper=l}),require.register("actor/Balkiry.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Balkiry=void 0;e("./Flickie");var o=e("./Spring"),i=e("curvature/base/Mixin"),a=e("curvature/base/Tag"),s=e("./PointActor"),c=(e("../behavior/SkidDust"),e("../mixin/CanPop"));e("../actor/Explosion"),e("../actor/Projectile");function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,i.Mixin.from(s.PointActor,c.CanPop));var e,r,n,g=p(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=g.call.apply(g,[this].concat(r))).args.type="actor-item actor-balkiry",t[o.Spring.WontSpring]=!0,t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=32,t.args.height=16,t.willStick=!1,t.stayStuck=!1,t.args.float=-1,t.noClip=!0,t}return e=d,(r=[{key:"onRendered",value:function(){u(h(d.prototype),"onRendered",this).call(this),this.flame=new a.Tag('<div class = "balkiry-flame">'),this.sprite.appendChild(this.flame.node),this.box.setAttribute("data-animation","standing")}},{key:"update",value:function(){this.args.facing="left",this.args.xSpeed>-12&&(this.args.xSpeed-=.1),this.args.ySpeed=0,this.args.falling=!0,this.args.flying=!0,u(h(d.prototype),"update",this).call(this)}},{key:"effect",value:function(t){u(h(d.prototype),"effect",this).call(this,t)}},{key:"wakeUp",value:function(){}},{key:"sleep",value:function(){}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.Balkiry=g}),require.register("actor/Balloon.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Balloon=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.type="actor-item actor-balloon",t.args.width=32,t.args.height=33,t.args.float=-1,t.args.airAngle=-Math.PI,t}return e=l,(r=[{key:"collideA",value:function(t){t.controllable}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Balloon=l}),require.register("actor/Beelzebub.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Beelzebub=void 0;var o=e("curvature/base/Tag"),i=e("./PointActor"),a=e("../behavior/Platformer"),s=e("curvature/base/Mixin"),c=(e("../mixin/CanPop"),e("./CutScene")),l=e("../audio/Sfx");function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(y,s.Mixin.from(i.PointActor));var e,r,n,d=h(y);function y(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),(r=d.call(this,t,e)).args.type="actor-item actor-beelzebub",r.args.width=64,r.args.height=32,r.args.float=-1,r.args.damagers=new Map,r.args.phase="idle",r.args.hitPoints=8,r.args.noseAngle=Math.PI/2*3,r.args.drillPush=0,r.args.phaseFrameId=0,r.args.frameId=0,r.args.direction=-1,r.args.facing="left",r.args.bindTo("phase",function(t){return r.args.phaseFrameId=0}),r.clearScene=new c.CutScene({src:"/cutscenes/clear-seaview.json"}),r}return e=y,(r=[{key:"onRendered",value:function(t){f(g(y.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--nose-angle"]="noseAngle",this.autoStyle.get(this.box)["--drill-push"]="drillPush",this.autoAttr.get(this.box)["data-phase"]="phase",this.drill=new o.Tag('<div class = "drill">'),this.body=new o.Tag('<div class = "body">'),this.nose=new o.Tag('<div class = "nose">'),this.eyeBack=new o.Tag('<div class = "eye-back">'),this.eyeFore=new o.Tag('<div class = "eye-fore">'),this.body.appendChild(this.eyeBack.node),this.body.appendChild(this.eyeFore.node),this.body.appendChild(this.nose.node),this.sprite.appendChild(this.body.node),this.nose.appendChild(this.drill.node),this.attractor=null,this.clearScene.viewport=this.viewport}},{key:"update",value:function(){if(this.args.phaseFrameId++,this.args.frameId++,this.viewport){var t=this.viewport;t.auras.add(this);var e=this.viewport.controlActor;if(e){this.attractor||(this.attractor={},this.attractor.x=this.x,this.attractor.y=this.y);var r=Math.abs(this.x-this.attractor.x),n=Math.abs(this.y-this.attractor.y),i=Math.sign(this.x-this.attractor.x),a=Math.sign(this.y-this.attractor.y);switch(this.args.phase){case"idle":this.args.xSpeed=0,this.args.ySpeed=0;break;case"intro":this.args.phaseFrameId>30&&(this.args.phase="stalking");break;case"alert":this.args.phaseFrameId>4&&(this.args.drillPush=1,this.args.falling=!0,this.args.float=-1,this.y>this.args.alertTo?this.args.ySpeed--:(this.args.y=this.args.alertTo,this.args.ySpeed=0)),this.args.phaseFrameId>0&&(this.args.phase="stalking");break;case"damaged":this.args.hitPoints>0?this.args.phaseFrameId>20&&(this.args.phase="stalking"):this.args.phaseFrameId>6&&(this.args.phase="dead");break;case"knocked":this.args.xSpeed=0,this.args.phaseFrameId>30&&(this.args.phase="stalking");break;case"dead":this.args.float=0;break;case"stalking":this.args.xSpeed=-i*Math.max(1,r/25),this.args.ySpeed=-a*Math.max(1,n/25),this.args.ySpeed+=3*Math.sin(this.args.frameId/3),this.pointIsSafe(e.x,e.y-128)&&(this.attractor.x=e.x,this.attractor.y=e.y-128),this.args.noseAngle=Math.PI/2*3,this.args.drillPush=0,this.args.phaseFrameId>10&&(this.args.noseAngle=this.angleTo({x:e.x,y:Math.max(this.y,e.y)})),this.args.phaseFrameId>20&&(this.args.drillPush=.5),this.args.phaseFrameId>25&&(this.args.phase="ready");break;case"buzzing":this.pointIsSafe(e.x,e.y+-e.args.height+-34)&&(this.attractor.x=e.x,this.attractor.y=e.y+-e.args.height+-34),this.args.xSpeed=-i*Math.max(1,r/15),this.args.ySpeed=-a*Math.max(1,n/15),this.args.noseAngle=Math.PI/2*3,this.args.drillPush=1,this.args.phaseFrameId>10&&(this.args.drillPush=.5),this.args.phaseFrameId>20&&(this.args.noseAngle=this.angleTo({x:e.x,y:Math.max(this.y,e.y)})),this.args.phaseFrameId>30&&(this.args.phase="ready");break;case"ready":if(this.args.phaseFrameId<10&&(this.readySide=Math.sign(e.xSpeedLast||e.gSpeedLast)),this.pointIsSafe(e.x+128*this.readySide,e.y+-e.args.height+-128)&&(this.attractor.x=e.x+128*this.readySide,this.attractor.y=e.y+-e.args.height+-128),this.args.xSpeed=-i*Math.max(1,r/15),this.args.ySpeed=-a*Math.max(1,n/15),this.args.ySpeed+=3*Math.sin(this.args.frameId/3),this.args.drillPush=.75,this.args.phaseFrameId>30){var s=Math.random();e.args.falling?this.args.phase=s>.5?"buzzing":"stalking":this.args.phase=s>.5?"swooping":"attacking"}break;case"attacking":this.args.float=-1,this.args.falling=!0,this.args.phaseFrameId>100&&(this.args.phase="stalking"),this.args.phaseFrameId<50?(this.pointIsSafe(e.x+256*(this.readySide||1),e.y-32)&&(this.attractor.x=e.x+256*(this.readySide||1),this.attractor.y=e.y-32),this.args.noseAngle=0):(this.pointIsSafe(e.x+256*(-this.readySide||-1),e.y-16)&&(this.attractor.x=e.x+256*(-this.readySide||-1),this.attractor.y=e.y-16),this.args.noseAngle=this.angleTo({x:e.x,y:Math.max(this.y,e.y)})),this.args.drillPush=1,this.args.float=-1;var c=e.args.xSpeed||e.args.gSpeed;this.args.xSpeed=-i*Math.max(1,r/10)+1.1*c,this.args.ySpeed=-a*Math.max(1,n/10);break;case"swooping":this.pointIsSafe(e.x,e.y-32)&&(this.attractor.x=e.x,this.attractor.y=e.y-32),this.args.xSpeed+=-i*Math.max(1,r/1e4),this.args.ySpeed+=-a*Math.max(1,n/1e4),this.args.noseAngle=this.angleTo({x:e.x,y:Math.max(this.y,e.y)}),this.args.drillPush=1,this.args.float=-1,this.args.phaseFrameId>180&&(this.args.phase="stalking");e.args.xSpeed||e.args.gSpeed;break;case"exploding":if(90===this.args.phaseFrameId&&(this.args.falling=!0,this.args.ySpeed=-14,this.args.xSpeed=0,this.args.gSpeed=0,this.noClip=!0,this.viewport.auras.delete(this),this.args.phase="exploded",this.clearScene.activate(e,this,!0),l.Sfx.play("OBJECT_DESTROYED")),this.args.phaseFrameId>90)return;if(t&&t.args.frameId%3==0){var u=new o.Tag('<div class = "particle-explosion">');l.Sfx.play("BOSS_DAMAGED");var p=this.args.width*Math.random()-this.args.width/2,h=this.args.height*Math.random()-this.args.height/2;u.style({"--x":this.x+p,"--y":this.y+h+-16}),t.particles.add(u),setTimeout(function(){return t.particles.remove(u)},512)}}"knocked"!==this.args.phase&&this.args.ySpeed<0&&!this.pointIsSafe(this.x,this.y+-this.args.height+this.args.ySpeed+-1)&&(this.args.ySpeed=0),f(g(y.prototype),"update",this).call(this)}}}},{key:"updateEnd",value:function(){if(f(g(y.prototype),"updateEnd",this).call(this),this.viewport){var t=this.viewport.controlActor;if(t){var e=Math.abs(this.args.x-t.x),r=Math.abs(this.args.y-t.y),n=Math.sign(this.args.x-t.x),o=Math.sign(this.args.y-t.y);switch(this.args.phase){case"attacking":case"swooping":case"stalking":case"knocked":case"damaged":case"ready":e>384&&(this.args.x=t.x+384*n),r>192&&(this.args.y=t.y+192*o),this.args.hitPoints<=0&&(this.viewport.auras.delete(this),this.args.phase="dead",this.noClip=!1,this.args.float=0,"function"==typeof ga&&ga("send","event",{eventCategory:"boss",eventAction:"defeated",eventLabel:"".concat(this.viewport.args.actName,"::").concat(this.args.id)}))}switch(this.args.xSpeed<0?this.args.facing="left":this.args.xSpeed>0&&(this.args.facing="right"),this.args.groundAngle=0,this.args.phase){case"attacking":case"swooping":case"stalking":case"ready":this.bMap("checkBelow",this.x,this.y).get(a.Platformer)&&(this.args.falling=!0,this.args.ySpeed=-4,this.args.y--)}}}}},{key:"collideA",value:function(t,e){var r=this;if("exploded"===this.args.phase||t.args.mercy)return!1;if(!t.controllable&&!t.hazard)return!0;if(-1!==e){var n=Math.sign(this.x-t.x),o=(Math.sign(this.y-t.y),Math.max(Math.abs(t.args.xSpeed),5));Math.sign(t.args.xSpeed);if(this.args.hitPoints>0&&t.controllable&&!(t.args.jumping||t.args.rolling||t.dashed))return t.damage(),this.args.phase="ready","function"==typeof ga&&ga("send","event",{eventCategory:"boss",eventAction:"damaged-player",eventLabel:"".concat(this.viewport.args.actName,"::").concat(this.args.id,"::").concat(t.args.id)}),!0;if("dead"===this.args.phase){if(!(t.args.jumping||t.args.rolling||t.dashed))return!0;this.args.explodeFrame=this.viewport.args.frameId,this.args.phase="exploding"}if(1!==e&&3!==e||(t.args.falling?this.ignores.set(t,15):(t.args.gSpeed=4*-Math.sign(this.x-t.x),t.args.rolling&&this.onNextFrame(function(){t.args.gSpeed=-Math.sign(r.x-t.x),t.args.rolling=!0,t.args.direction=Math.sign(t.args.gSpeed)})),this.args.ySpeed=0,this.args.hitPoints>0&&this.damage(t),this.args.hitPoints>0?(t.args.xSpeed=-n*o,this.args.xSpeed=n*o):(t.args.xSpeed=-n,this.args.xSpeed=n)),2===e&&(this.viewport.args.audio&&l.Sfx.play("BOSS_DUDHIT"),t.args.falling&&(this.args.ySpeed=2.5*t.args.ySpeed,t.args.controllable&&(t.args.ySpeed=Math.max(7,Math.abs(t.args.ySpeed)))),this.args.xSpeed=0,this.args.hitPoints>0&&(this.args.phase="knocked"),this.ignores.set(t,15)),0===e){if(t.args.falling&&this.ignores.set(t,15),t.controllable){t.args.y=this.y-this.args.height;t.args.animation;var i=t.args.ySpeed;this.onNextFrame(function(){t.args.ySpeed=-Math.floor(Math.abs(i))||-4})}this.args.xSpeed=0,this.damage(t)}return t.args.ignore=1,this.args.hitPoints||(t.args.ignore=-2),!0}}},{key:"damage",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(this.args.hitPoints<=0)){var e=this.args.damagers.get(t);this.args.frameId-e<5||(this.args.hitPoints--,this.args.damagers.set(t,this.args.frameId),this.args.phase="damaged",l.Sfx.play("BOSS_DAMAGED"))}}},{key:"pointIsSafe",value:function(t,e){return!this.viewport.actorsAtPoint(t,e).filter(function(t){return t.hazard}).length}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.Beelzebub=d}),require.register("actor/Bell.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bell=void 0;var o=e("curvature/base/Mixin"),i=e("./PointActor"),a=e("../mixin/Constrainable"),s=e("./Ring");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,o.Mixin.from(i.PointActor,a.Constrainable));var e,r,n,h=f(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=h.call.apply(h,[this].concat(r))).args.z=100,t.args.width=64,t.args.height=64,t.args.type="actor-item actor-bell",t.cooldown=0,t.noClip=!0,t.args.gravity=.4,t}return e=g,(r=[{key:"update",value:function(){var t=this;this.xLast=this.x,this.yLast=this.y,l(p(g.prototype),"update",this).call(this),this.cooldown>0&&this.cooldown--,this.cooldown<1&&(this.cooldown=0);this.args.tiedTo;this.setPos(),this.args.falling=!0;var e=this.x-this.xLast;if(Math.abs(e)>1?this.args.animation=["ring-left","","ring-right"][1+Math.sign(this.x-this.xLast)]:this.args.animation="",!this.cooldown&&(Math.abs(this.args.xSpeed)>2||Math.abs(this.args.ySpeed)>6)){var r=new s.Ring({x:this.x,y:this.y});r.dropped=!0,r.delay=5,r.args.static=!1,r.args.ignore=10,r.args.xSpeed=.75*this.args.xSpeed,r.args.ySpeed=this.args.ySpeed;var n=this.rotatePoint(0,32);r.args.x+=n[0],r.args.y+=n[1],this.viewport.spawn.add({object:r}),this.cooldown=45*Math.random()+15,this.viewport.onFrameOut(120,function(){t.viewport.actors.remove(r)})}}},{key:"updateEnd",value:function(){Math.abs(this.args.xSpeed)<3&&Math.abs(this.args.ySpeed)<3?this.viewport&&!this.viewport.auras.has(this)&&this.viewport.auras.add(this):this.viewport.auras.delete(this),l(p(g.prototype),"updateEnd",this).call(this)}},{key:"collideB",value:function(t){t.controllable&&(this.args.xSpeed=t.args.xSpeed,this.args.ySpeed=t.args.ySpeed,t.args.xSpeed*=.99,this.viewport.args.backdrop.args.sunrise=1)}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Bell=h}),require.register("actor/Big.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Big=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.type="actor-item actor-big",t.args.width=42,t.args.height=46,t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Big=l}),require.register("actor/Block.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;var o=e("./PointActor"),i=e("curvature/base/Tag"),a=e("./Ring"),s=(e("curvature/animate/ease/QuintInOut"),e("curvature/animate/ease/CubicInOut"),e("../behavior/Platformer"));function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=f(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function u(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=b(t);if(e){var i=b(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(p,o.PointActor);var e,r,n,f=d(p);function p(){var t,e,r,n,o,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(i=f.call(this,a,s)).args.yForce=0,i.args.yLean=0,i.args.z=null!==(t=i.args.z)&&void 0!==t?t:100,i.args.type="actor-item actor-block",i.args.width=a.width||32,i.args.height=a.height||32,i.args.convey=null!==(e=a.convey)&&void 0!==e?e:0,i.args.conveyed=0,i.args.ySpeedMax=16,i.originalX=i.args.x,i.originalY=i.args.y,i.args.solid=null===(r=i.args.solid)||void 0===r||r,i.args.gravity=.6,i.args.collapse=null!==(n=a.collapse)&&void 0!==n&&n,i.args.drop=null!==(o=a.drop)&&void 0!==o&&o,i.args.active=-1,i.weighted=!1,i.activatedAt=null,i}return e=p,n=[{key:"fromDef",value:function(t){var e=y(b(p),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e.args.y=e.originalY=t.y,e}}],(r=[{key:"onRendered",value:function(t){if(y(b(p.prototype),"onRendered",this).call(this,t),this.viewport){if(this.args.match&&(this.match=this.viewport.actorsById[this.args.match]),this.args.spriteSheet=this.args.spriteSheet||"/Sonic/marble-zone-block.png",this.args.droop&&this.droop(0),this.args.collapse&&this.tags.sprite.classList.add("collapse"),this.args.platform&&this.tags.sprite.classList.add("platform"),this.args.drop&&this.tags.sprite.classList.add("drop"),this.args.hidden)return t&&t.preventDefault(),!1;this.setTile()}}},{key:"wakeUp",value:function(){var t=this;if(this.setTile(),this.noClip=!1,this.args.tiedTo){this.args._tiedTo||(this.args._tiedTo=this.viewport.actorsById[this.args.tiedTo]);var e=this.args._tiedTo;if(e&&!e.hanging.has(this.constructor)){e.hanging.set(this.constructor,new Set);var r=e.hanging.get(this.constructor);r.add(this),this.chain=new i.Tag('<div class = "chain">'),this.sprite.appendChild(this.chain.node),this.onRemove(function(){return r.delete(t)})}}}},{key:"collideA",value:function(t,e){var r=this;if(t instanceof this.constructor&&!t.args.falling)return!1;if(t.isRegion||t.noClip)return!1;if(t.args.standingOn===this&&(this.weighted=!0),!t.args.falling&&this.args.droop&&t.args.ySpeed>=0&&t.args.standingOn!==this)return!0;if(this.args.droop&&t.controllable&&(0===e||2===e)&&t.args.ySpeed>=0){var n=this.originalY+-this.args.height,o=Math.floor(this.args.width/2),i=t.args.gSpeed;if(Math.abs(i)>o)return this.args.y=this.originalY,t.args.y=n+-1,this.args.yForce=0,this.args.yLean=0,!0;var s=(this.x+-t.x+-2*i)/o,c=.9*Number(this.args.droop);if(Math.abs(s)>=.9)return this.args.yForce=0,this.args.yLean=this.args.yLean/100,!0;var l=Math.round(c*(1-Math.abs(s))/2);this.args.yForce+=Math.max(t.ySpeedLast,0),this.args.yForce=Math.min(l,this.args.yForce),this.args.yForce=Math.max(this.args.yForce,-l),this.droopPos=this.x-t.x}if(-1===e&&!this.args.platform&&t.controllable&&t.args.ySpeed)return t.args.y<this.args.y&&(t.args.y=this.y+-this.args.height+this.args.ySpeed,t.args.ySpeed=this.args.ySpeed),void this.onNextFrame(function(){t.args.y=r.y+-r.args.height,t.args.falling=!1});if(this.args.platform&&!(t instanceof a.Ring)){t.args.y,t.args.height;var u=this.args.y-this.args.height,f=this.args.width/2;return t.args.falling&&t.args.y-u<16&&t.args.ySpeed>=0&&!t.args.float&&Math.abs(t.args.x-this.args.x)<f-16&&(t.controllable?t.args.y=-1+u:t.args.y=u),t.args.y<=u&&(!1===t.args.falling||t.args.ySpeed>0)?!0:(t.args.npc&&!t.args.falling&&this.args.falling&&!this.args.float&&t.startle(),!1)}if(!t.controllable&&!t.isVehicle)return!0;if(!this.switch&&this.args.drop&&(0===e||2===e)&&this.args.float<=0&&(this.args.float=1,this.args.goBack=!1),!this.switch&&this.args.collapse&&(0===e||2===e)&&this.args.float<=0){if(t.args.ySpeed>15){this.args.float=1,this.args.goBack=!1;var p=t.args.ySpeed;this.onNextFrame(function(){r.args.falling||r.args.float?(r.args.ySpeed=p,r.args.float=1):(r.args.ySpeed=-1,r.args.float=1),r.args.falling=!0})}else(t.args.ySpeed>0||t.args.gSpeed)&&(this.args.float=this.args.float>=0?this.args.float:this.args.delay||0);this.viewport.onFrameOut(1,function(){return r.args.falling=!0})}return!0}},{key:"activate",value:function(){this.args.active=!0}},{key:"deactivate",value:function(){this.args.active=!1}},{key:"update",value:function(){var t=this;if(this.viewport)if(this.args.active>0&&(this.activatedAt||(this.activatedAt=this.viewport.args.frameId)),this.args.switch&&!this.switch&&(this.switch=this.viewport.actorsById[this.args.switch]),this.args.static)y(b(p.prototype),"update",this).call(this);else{if(this.args.collapse&&(this.args.gSpeed=0,(!this.switch&&this.activatedAt&&this.viewport.args.frameId-this.activatedAt>25||this.switch&&this.switch.args.active)&&(this.args.float=this.args.float>=0?this.args.float:this.args.delay||0,this.args.float||(this.args.ySpeed=this.args.ySpeed||12))),this.args.drop&&(this.args.gSpeed=0,(!this.switch&&this.activatedAt&&this.viewport.args.frameId-this.activatedAt>25||this.switch&&this.switch.args.active)&&(this.args.float=this.args.float>=0?this.args.float:this.args.delay||0,this.noClip=!0,this.args.active=!1,this.args.falling=!0)),this.match&&(this.args.convey=-this.match.args.convey),this.xLast=this.args.x,this.yLast=this.args.y,this.args.float&&this.args.oscillateX&&this.args.oscillateY){var e=Math.sin(this.viewport.args.frameId/this.args.timeX)*this.args.oscillateX;this.args.x=this.originalX-e;var r=-Math.cos(this.viewport.args.frameId/this.args.timeY)*this.args.oscillateY;this.args.y=this.originalY-r}else if(this.args.float&&(this.args.oscillateX||this.args.oscillateY)){var n=Math.pow(Math.cos(Math.pow(Math.sin(this.viewport.args.frameId/90),5)),16.665);if(this.args.oscillateX){var o=Math.round(n*this.args.oscillateX);this.args.x=this.originalX-o}if(this.args.oscillateY){var i=Math.round(n*this.args.oscillateY);this.args.y=this.originalY-i}}if(!this.switch&&this.args.collapse);else if(this.args.droop){if(this.snapBack=this.snapBack||!1,!this.args.colliding&&this.args.yForce&&this.viewport&&this.viewport.onFrameOut(4,function(){var e=t.viewport.collisions.has(t),r=e?u(t.viewport.collisions.get(t).keys()):[];e&&r.filter(function(t){return t.controllable}).length||(t.snapBack=!0)}),!this.args.colliding&&this.args.yForce&&this.snapBack&&(this.args.yForce*=.15),Math.abs(this.args.yForce)<=1&&(this.snapBack=!1),this.args.yForce!==this.args.yLean){var a=this.args.yLean-this.args.yForce,s=this.args.yForce>this.args.yLean?.666*Math.abs(a):.333*Math.abs(a);this.args.yLean-=Math.sign(a)*s,Math.abs(a)<s&&(this.args.yLean=this.args.yForce)}this.args.yLean?(this.args.y=Math.ceil(this.originalY+this.args.yLean)||this.originalY,this.droop(-1*this.args.yLean,this.droopPos||0)):this.args.y=this.originalY}this.box&&this.box.style({"--convey":Math.abs(this.args.convey)}),this.box&&this.box.style({"--conveyDir":Math.sign(this.args.conveyed)}),this.args.conveyed+=this.args.convey,this.box&&this.box.style({"--conveyed":.8*this.args.conveyed}),this.box&&this.box.setAttribute("data-design",this.args.design);var c=this.args._tiedTo;if(c&&this.chain){var l={x:this.args.x,y:this.args.y-this.args.height};this.chain.style({"--distance":c.distanceFrom(l)+this.args.height,"--angle":c.angleTo(l)+Math.PI/2})}y(b(p.prototype),"update",this).call(this)}}},{key:"updateStart",value:function(){this.args.float&&this.args.settle&&(this.weighted&&this.args.y<this.def.get("y")+this.args.settle&&(this.args.y+=Math.min(Math.abs(this.args.settle),64)/8*Math.sign(this.args.settle)),!this.weighted&&this.y>this.def.get("y")&&(this.args.y-=Math.min(Math.abs(this.args.settle),32)/8*Math.sign(this.args.settle))),this.weighted=!1}},{key:"updateEnd",value:function(){if(y(b(p.prototype),"updateEnd",this).call(this),this.viewport&&this.viewport.collisions.has(this)){var t=this.viewport.collisions.get(this);if(this.args.treadmill){this.args.convey=0;var e,r=0,n=0,o=l(t);try{for(o.s();!(e=o.n()).done;){var i=c(e.value,2),a=i[0];i[1];a.args.standingOn===this&&(a.args.gSpeed&&(r++,n+=a.args.gSpeed))}}catch(t){o.e(t)}finally{o.f()}r&&(this.args.convey=-n/r)}if(this.args.convey){var u,f=l(t);try{for(f.s();!(u=f.n()).done;){var h=c(u.value,2),g=h[0];h[1];if(g.controllable&&!g.args.falling){var d=g.bMap("findNextStep",this.args.convey).get(s.Platformer);d[3]||(d[2]&&(g.args.xSpeed=this.args.convey,g.args.ySpeed=0,g.args.falling=!0,g.args.y=-1+this.y-this.args.height),g.args.x+=d[0],g.args.y+=d[1])}}}catch(t){f.e(t)}finally{f.f()}}}}},{key:"sleep",value:function(){var t=this;this.args.drop&&this.args.once&&!this.args.float&&this.viewport.actors.remove(this),this.args.drop&&this.args.float>=0&&(this.args.ySpeed=0,this.args.float=-1,this.args.active=!1,this.args.falling=!1,this.viewport.onFrameOut(120,function(){t.args.y=t.originalY,t.activatedAt=null,t.args.goBack=!1,t.noClip=!1,t.args.ySpeed=0,t.args.float=-1,t.args.active=!1,t.args.falling=!1,t.viewport.setColCell(t)}))}},{key:"rotateLock",get:function(){return!0}},{key:"canStick",get:function(){return!this.args.platform}},{key:"solid",get:function(){return this.args.solid&&(!this.args.collapse||0!==this.args.float||!this.args.goBack)}}])&&h(e.prototype,r),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Block=v}),require.register("actor/Block3d.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Block3d=void 0;var o=e("./MarbleBlock");e("../region/LavaRegion");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.MarbleBlock);var e,r,n,c=s(l);function l(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).args.type="actor-item actor-block-3d",t}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Block3d=l}),require.register("actor/Booster.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Booster=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.PointActor);var e,r,n,u=c(f);function f(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(r=u.call.apply(u,[this].concat(o))).args.type="actor-item actor-booster",r.args.xMax=null!==(t=r.args.xMax)&&void 0!==t?t:24,r.args.yMax=null!==(e=r.args.yMax)&&void 0!==e?e:24,r.args.width=64,r.args.height=345,r.args.float=-1,r}return e=f,(r=[{key:"update",value:function(){this.viewport&&(a(l(f.prototype),"update",this).call(this),this.args.launched&&Math.abs(this.args.xSpeed)<Math.abs(this.args.xMax)&&(this.args.xSpeed+=.5*Math.sign(this.args.xMax)),this.args.launched&&Math.abs(this.args.ySpeed)<Math.abs(this.args.yMax)&&(this.args.ySpeed-=5*Math.sign(this.args.yMax)),this.args.launched&&(this.args.falling=!0),this.args.launched&&0===this.args.xSpeed&&this.args.ySpeed)}},{key:"activate",value:function(){console.log("GO!"),this.args.active=!0,this.viewport.auras.add(this),this.args.launched=!0,this.args.xMax&&(this.args.xSpeed+=.5),this.args.yMax&&(this.args.ySpeed-=.5)}},{key:"explode",value:function(){var t=this;this.viewport.onFrameOut(60,function(){t.args.launched=!1,t.args.active=!1,t.viewport.auras.delete(t),t.args.x=t.def.get("x"),t.args.y=t.def.get("y"),t.args.xSpeed=0,t.args.ySpeed=0,t.args.gSpeed=0,t.viewport.setColCell(t),console.log(t.args.x,t.args.y)})}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Booster=u}),require.register("actor/BreakableBlock.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BreakableBlock=void 0;var o=e("./Block"),i=e("./Orb"),a=e("curvature/base/Tag"),s=e("../audio/Sfx");e("../behavior/Platformer");function c(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(d,o.Block);var e,r,n,l=h(d);function d(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(t=l.call(this,e,r)).args.type="actor-item actor-breakable-block",t.args.collapse&&(t.args.type="actor-item actor-breakable-block collapsible-block"),t.args.static=!0,t.args.strength=Number(t.args.strength),t.fragmentsX=document.createElement("div"),t.fragmentsY=document.createElement("div"),t.fragmentsX.classList.add("fragmentsX"),t.fragmentsY.classList.add("fragmentsY"),t.fragmentTopLeft=document.createElement("div"),t.fragmentTopRight=document.createElement("div"),t.fragmentBottomLeft=document.createElement("div"),t.fragmentBottomRight=document.createElement("div"),t.fragmentTopLeft.classList.add("fragment"),t.fragmentTopLeft.classList.add("fragment-top-left"),t.fragmentTopRight.classList.add("fragment"),t.fragmentTopRight.classList.add("fragment-top-right"),t.fragmentBottomLeft.classList.add("fragment"),t.fragmentBottomLeft.classList.add("fragment-bottom-left"),t.fragmentBottomRight.classList.add("fragment"),t.fragmentBottomRight.classList.add("fragment-bottom-right"),t.fragmentsY.append(t.fragmentTopLeft),t.fragmentsY.append(t.fragmentTopRight),t.fragmentsY.append(t.fragmentBottomLeft),t.fragmentsY.append(t.fragmentBottomRight),t.fragmentsX.append(t.fragmentsY),t.broken=!1,t}return e=d,(r=[{key:"onRendered",value:function(t){this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite"),f(g(d.prototype),"onRendered",this).call(this,t)}},{key:"updateStart",value:function(){f(g(d.prototype),"updateStart",this).call(this),this.switch&&this.switch.args.active&&!this.broken&&this.break()}},{key:"update",value:function(){var t,e=c(this.viewport.regionsAtPoint(this.args.x,this.args.y));try{for(e.s();!(t=e.n()).done;){t.value.updateActor(this)}}catch(t){e.e(t)}finally{e.f()}f(g(d.prototype),"update",this).call(this)}},{key:"callCollideHandler",value:function(){var t;if(this.broken)return!1;for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f(g(d.prototype),"callCollideHandler",this)).call.apply(t,[this].concat(r))}},{key:"collideA",value:function(t,e){var r=this;if(this.broken)return!1;if(t instanceof o.Block&&(t.args.float||this.args.float))return!1;if(!(t instanceof i.Orb||t.isVehicle||t.controllable||t.args.rolling))return!this.broken;if(this.args.collapse)return!this.broken&&t.y<=this.y-this.args.height?(this.fragmentsX.style.setProperty("--xSpeed",0),t.args.falling||(this.args.worm?this.delayedBreak(5):this.delayedBreak(25)),!0):!this.broken&&(!t.args.falling||t.args.ySpeed>0&&t.y<this.y-this.args.height);if(-2===this.args.strength&&(t.args.falling||Math.abs(t.args.gSpeed)>4))return this.broken||this.break(t),!1;if(-1===this.args.strength)return!0;if(1===this.args.strength&&"knuckles"===t.args.name&&(t.args.falling||Math.abs(t.args.gSpeed)>4))return this.broken||this.break(t),!1;if(1===this.args.strength){if("knuckles"!==t.args.name&&!t.isVehicle)return!0;if("knuckles"!==t.args.name||t.args.falling||Math.abs(t.args.gSpeed)>4)return this.broken||this.break(t),!1}if(2===this.args.strength)return!(t.isVehicle||t.args.standingOn&&t.args.standingOn.isVehicle)||(0===e?(this.viewport.onFrameOut(1,function(){return r.broken||r.break(t)}),!0):(this.broken||this.break(t),!1));if(!(t.args.rolling&&t.args.mode||t.isVehicle||t.args.spinning)&&(t.args.falling&&!t.dashed&&!t.args.jumping||!t.args.falling&&0===e))return!this.broken;if(!(t instanceof i.Orb||t.falling||t.isVehicle||t.args.gSpeed||t.args.falling))return!this.broken;if(t instanceof i.Orb||t.isVehicle||t.args.spinning||t.args.dashed||t.punching){var n=this.y-this.args.height;return this.args.bounceBack&&t.args.jumping&&t.y<n&&(t.args.ySpeed*=-bounceBack,t.args.y=n),this.break(t),!1}return!this.broken}},{key:"sleep",value:function(){this.viewport&&(this.args.dontRestore||(this.args.collapse&&(this.args.static=!0,this.args.falling=!1,this.args.float=-1,this.noClip=!1,this.args.ySpeed=0,this.box.classList.remove("broken"),this.box.classList.remove("breaking"),this.box.classList.remove("will-break"),this.fragmentsX.remove(),this.broken=!1),this.args.worm?this.args.x+=this.args.worm:this.args.x=this.def.get("x"),this.args.y=this.def.get("y")+1,this.broken&&(this.box.classList.remove("broken"),this.box.classList.remove("breaking"),this.box.classList.remove("will-break"),this.fragmentsX.remove()),this.args.active=0,this.broken=!1,this.viewport.setColCell(this)))}},{key:"delayedBreak",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r&&r.args.falling||(this.box.append(this.fragmentsX),this.viewport.onFrameOut(e,function(){return t.break(r)}))}},{key:"break",value:function(t){var e=this,r=this.broken;if(!this.broken){if(this.box.append(this.fragmentsX),this.broken=!0,this.box){var n=this.viewport;this.box.classList.add("will-break"),this.box.classList.add("breaking"),n.onFrameOut(1,function(){e.box.classList.add("broken")})}this.viewport.onFrameOut(Math.floor(3*Math.random()),function(){return s.Sfx.play("BLOCK_DESTROYED")});var o=t&&t.occupant||t;if(o&&o.controllable){o.args.popCombo+=1;var i=document.createElement("div");i.classList.add("particle-score"),i.classList.add("score-10");var l=new a.Tag(i);l.style({"--x":this.args.x,"--y":this.args.y-this.args.height}),this.viewport.particles.add(l),setTimeout(function(){return e.viewport.particles.remove(l)},768),o.args.score+=10}}if(this.viewport.onFrameOut(30,function(){e.box&&e.box.classList.remove("breaking"),e.fragmentsX.remove()}),!this.args.collapse&&t&&t.args.mode%2==0){var u=t.args.xSpeed||t.args.gSpeed;t.isVehicle?this.fragmentsX.style.setProperty("--xSpeed",Math.round(1.1*u)):t.controllable?this.fragmentsX.style.setProperty("--xSpeed",Math.round(u)):this.fragmentsX.style.setProperty("--xSpeed",2*Math.round(u))}if(this.refresher||(this.refresher=!0),this.args.active=1,this.args.collapse&&!r){var f=this.viewport.actorsAtPoint(this.x-this.args.width,this.y),p=this.viewport.actorsAtPoint(this.x+this.args.width,this.y),h=this.viewport.actorsAtPoint(this.x,this.y+1);if(Array.isArray(f)&&!Math.sign(this.args.worm)){var g,y=c(f);try{for(y.s();!(g=y.n()).done;){var b=g.value;b instanceof d&&(b.args.collapse&&(b.broken||b.delayedBreak(8)))}}catch(t){y.e(t)}finally{y.f()}}if(Array.isArray(p)&&!Math.sign(this.args.worm)){var v,m=c(p);try{for(m.s();!(v=m.n()).done;){var w=v.value;w instanceof d&&(w.args.collapse&&(w.broken||w.delayedBreak(8)))}}catch(t){m.e(t)}finally{m.f()}}if(Array.isArray(h)&&!Math.sign(this.args.worm)){var S,O=c(h);try{for(O.s();!(S=O.n()).done;){var k=S.value;k instanceof d&&(k.args.collapse&&(k.broken||k.delayedBreak(8)))}}catch(t){O.e(t)}finally{O.f()}}}else if(!r){var x=this.viewport.actorsAtPoint(this.x,this.y+-this.args.height);if(Array.isArray(x)&&!Math.sign(this.args.worm)){var j,P=c(x);try{for(P.s();!(j=P.n()).done;){var _=j.value;_ instanceof d&&(_.args.collapse&&(_.broken||_.delayedBreak(8)))}}catch(t){P.e(t)}finally{P.f()}}}this.viewport.settings.rumble&&!this.broken&&t&&t.controller&&t.controller.rumble&&(t.controller&&t.controller.rumble&&t.controller.rumble({duration:140,strongMagnitude:1,weakMagnitude:1}),this.onTimeout(140,function(){t.controller.rumble({duration:100,strongMagnitude:0,weakMagnitude:.25})})),this.broken=!0}},{key:"damage",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.break(t)}},{key:"solid",get:function(){return!this.broken&&-2!==this.args.strength}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.BreakableBlock=d}),require.register("actor/BrokenMonitor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BrokenMonitor=void 0;var o=e("./PointActor");e("../actor/Explosion"),e("../actor/Monitor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call.apply(u,[this].concat(r))).args.type="actor-item actor-monitor actor-monitor-broken",t.args.width=28,t.args.height=32,t}return e=f,(r=[{key:"collideA",value:function(t){return a(l(f.prototype),"collideA",this).call(this,t),!0}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.BrokenMonitor=u}),require.register("actor/Bubbles.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bubbles=void 0;var o=e("curvature/base/Mixin"),i=e("curvature/base/Tag"),a=(e("./Flickie"),e("./PointActor")),s=e("../behavior/SkidDust"),c=e("../mixin/CanPop"),l=(e("../actor/Explosion"),e("../actor/Projectile"),e("../powerups/ElectricSheild"));function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(y,o.Mixin.from(a.PointActor,c.CanPop));var e,r,n,d=h(y);function y(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=d.call.apply(d,[this].concat(r))).behaviors.add(new s.SkidDust),t.args.type="actor-item actor-bubbles",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=32,t.args.height=32,t.willStick=!1,t.stayStuck=!1,t.args.float=-1,t.args.static=!0,t.aiming=!1,t}return e=y,(r=[{key:"onRendered",value:function(t){f(g(y.prototype),"onRendered",this).call(this,t),this.shield=new l.ElectricSheild,this.args.electric&&(this.inventory.add(this.shield),this.args.currentSheild=this.shield),this.autoAttr.get(this.box)["data-gold"]="gold",this.autoAttr.get(this.box)["data-fade"]="fade",this.chain=new i.Tag('<div class = "bubbles-flame">'),this.sprite.appendChild(this.chain.node)}},{key:"update",value:function(){var t=this;if(this.viewport&&this.viewport.controlActor){if(this.args.gold&&!this.args.fading&&Math.abs(this.viewport.controlActor.x-this.x)<256&&Math.abs(this.viewport.controlActor.y-this.y)<128){this.args.fading=!0;var e=this.viewport;e.onFrameOut(25,function(){return t.args.fade=!0}),e.onFrameOut(55,function(){return e.actors.remove(t)})}this.viewport&&this.args.electric&&this.viewport.args.frameId%100==0&&(this.args.currentSheild=this.args.currentSheild?null:this.shield),this.box&&this.box.setAttribute("data-animation","standing"),this.args.falling=!0,this.args.flying=!0,f(g(y.prototype),"update",this).call(this)}}},{key:"hold_1",value:function(){this.aiming=!0}},{key:"release_1",value:function(){this.aiming=!1}},{key:"effect",value:function(t){f(g(y.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.Bubbles=d}),require.register("actor/Bumper.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bumper=void 0;var o=e("./PointActor"),i=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.PointActor);var e,r,n,u=c(f);function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=u.call.apply(u,[this].concat(i)),e=l(t),n=-1,(r="float")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="actor-item actor-bumper",t.args.width=16,t.args.height=16,t.ignores=new Map,t}return e=f,(r=[{key:"collideA",value:function(t){var e=this;if(!(t.static||t.isRegion||this.ignores.has(t)||t.noClip)){if(this.args.type="actor-item actor-bumper actor-bumper-active",this.viewport.onFrameOut(3,function(){return e.args.type="actor-item actor-bumper"}),t.args.falling){i.Sfx.play("BUMPER_BOUNCE");var r=this.x-t.x,n=this.y-t.y,o=Math.max(12,Math.sqrt(Math.pow(t.args.xSpeed,2),Math.pow(t.args.ySpeed,2))),a=Math.atan2(n,r);t.args.width;t.args.x=this.x,t.args.y=this.y,t.args.xSpeed=-o*Math.cos(a),t.args.ySpeed=-o*Math.sin(a)}else t.args.gSpeed*=-1,Math.abs(t.args.gSpeed)<7&&(t.args.gSpeed=7*Math.sign(t.args.gSpeed));this.ignores.set(t,8),this.viewport.settings.rumble&&t&&t.controller&&t.controller.rumble&&(t.controller.rumble({duration:120,strongMagnitude:1,weakMagnitude:1}),this.onTimeout(120,function(){t.controller.rumble({duration:120,strongMagnitude:0,weakMagnitude:1})}))}}},{key:"canStick",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}},{key:"solid",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Bumper=f}),require.register("actor/BuzzBomber.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BuzzBomber=void 0;e("./Flickie");var o=e("curvature/base/Mixin"),i=e("curvature/base/Tag"),a=e("./PointActor"),s=e("../behavior/SkidDust"),c=e("../mixin/CanPop"),l=(e("../actor/Explosion"),e("../actor/Projectile"));function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(y,o.Mixin.from(a.PointActor,c.CanPop));var e,r,n,d=h(y);function y(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=d.call.apply(d,[this].concat(r))).behaviors.add(new s.SkidDust),t.args.type="actor-item actor-buzz-bomber",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=2,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=32,t.args.height=16,t.willStick=!1,t.stayStuck=!1,t.args.float=-1,t.aiming=!1,t}return e=y,(r=[{key:"onRendered",value:function(){if(f(g(y.prototype),"onRendered",this).call(this),this.flame=new i.Tag('<div class = "buzz-bomber-flame">'),this.wings=new i.Tag('<div class = "buzz-bomber-wings">'),this.sprite.appendChild(this.flame.node),this.sprite.appendChild(this.wings.node),this.aiming)this.box.setAttribute("data-animation","aiming");else{var t=this.args.direction;Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?this.box.setAttribute("data-animation","skidding"):this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")}}},{key:"update",value:function(){var t=this;this.args.ySpeed=this.yAxis,this.flame,0===this.args.xSpeed&&this.viewport&&this.viewport.onFrameOut(10,function(){t.attack()}),this.args.falling=!0,this.args.flying=!0,f(g(y.prototype),"update",this).call(this)}},{key:"command_1",value:function(){this.aiming=!this.aiming}},{key:"command_2",value:function(){if(this.aiming&&this.viewport){var t=[0,-24],e=new l.Projectile({direction:this.args.direction,x:this.args.x+t[0]+(this.args.xSpeed||this.args.gSpeed),y:this.args.y+t[1],owner:this,xSpeed:this.args.xSpeed||this.args.gSpeed,YSpeed:this.args.YSpeed});e.impulse(6,1.57+Math.PI/4*1),this.viewport.auras.add(e),this.viewport.spawn.add({object:e})}}},{key:"effect",value:function(t){f(g(y.prototype),"effect",this).call(this,t)}},{key:"wakeUp",value:function(){if(this.viewport){this.viewport;this.sleeping=!1,this.attack()}}},{key:"attack",value:function(){var t=this;if(!this.sleeping&&!this.attacking&&this.viewport){var e=this.viewport;this.args.direction=-1,this.args.facing="left",this.args.xSpeed=-10,this.aiming=!1,this.attacking=!0,e.onFrameOut(5,function(){t.aiming=!0,e.onFrameOut(5,function(){var r=2,n=e.onFrameInterval(5,function(){t.command_2(),r--||n()})})}),e.onFrameOut(50,function(){var r=t.args.xSpeed;t.args.xSpeed=.5*-r,e.onFrameOut(100,function(){t.aiming=!1,t.attacking=!1,t.args.xSpeed=0,t.args.ySpeed=0})})}}},{key:"sleep",value:function(){var t=this;this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.onNextFrame(function(){t.viewport&&(t.args.x=t.def.get("x"),t.args.y=t.def.get("y"),t.viewport.setColCell(t),t.args.xSpeed=0,t.args.ySpeed=0,t.args.pushed=0,t.args.float=0,t.attacking=!1,t.sleeping=!0)})}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.BuzzBomber=d}),require.register("actor/CautionSign.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CautionSign=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.width=20,t.args.height=60,t.args.type="actor-item actor-caution-sign",t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.CautionSign=l}),require.register("actor/Chalmers.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Chalmers=void 0;var o=e("./PointActor"),i=(e("curvature/base/Tag"),e("../behavior/SkidDust"));function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).behaviors.add(new i.SkidDust),t.args.type="actor-item actor-chalmers",t.args.normalHeight=45,t.args.rollingHeight=23,t.args.accel=.25,t.args.decel=.4,t.args.gSpeedMax=18,t.args.jumpForce=11,t.args.gravity=.5,t.args.width=18,t.args.height=32,t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div")}},{key:"update",value:function(){var t=this.args.falling;if(this.box){if(t)this.args.standingOn&&this.args.standingOn.isVehicle?this.box.setAttribute("data-animation","standing"):this.args.jumping&&this.box.setAttribute("data-animation","jumping");else{this.yAxis>0?this.args.crouching=!0:this.args.crouching=!1;var e=this.args.direction,r=this.args.gSpeed,n=Math.abs(r),o=this.args.gSpeedMax;this.args.rolling?this.box.setAttribute("data-animation","rolling"):Math.sign(this.args.gSpeed)!==e&&Math.abs(this.args.gSpeed-e)>5?this.box.setAttribute("data-animation","standing"):n>.25*o?this.box.setAttribute("data-animation","running"):this.args.moving&&r?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")}s(u(p.prototype),"update",this).call(this)}else s(u(p.prototype),"update",this).call(this)}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!0}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Chalmers=f}),require.register("actor/Chao.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Chao=void 0;var o=e("../sprite/Png"),i=e("./PointActor"),a=e("./Coconut"),s=e("./Mushroom");function c(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=u(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=b(t);if(e){var i=b(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}(this,r)}}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(f,i.PointActor);var e,r,n,u=d(f);function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=u.call.apply(u,[this].concat(a)),e=y(t),r="png",n=new o.Png("/DBurraki/chao-normal.png"),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="actor-item actor-chao",t.args.particleScale=.75,t.args.spriteSheet=t.spriteSheet="/DBurraki/chao-normal.png",t.args.width=14,t.args.height=18,t.xHold=8,t.yHold=0,t.maxFlight=180,t.emotes=["normal","alert","inquire","like","love","angry"],t.emoteIndex=0,t.args.animation="standing",t.bindTo("carriedBy",function(e){if(t.cX&&(t.cX(),t.cX=null),t.cY&&(t.cY(),t.cY=null),e)t.cX=e.args.bindTo("x",function(r){return t.args.x=r+8*e.args.direction}),t.cY=e.args.bindTo("y",function(e){return t.args.y=e+-16}),e.carrying.add(y(t)),t.args.float=-1,t.args.groundAngle=0;else if(t.carriedBy){var r=t.carriedBy;t.carriedBy=null,t.args.xSpeed=r.args.xSpeed,t.args.ySpeed=r.args.ySpeed,t.args.xSpeed+=4*Math.sign(r.args.gSpeed||r.args.xSpeed),t.args.ySpeed-=4,r.carrying.delete(y(t)),t.args.falling=!0,t.args.float=0}}),t.args.direction=1,t.args.currentState=t.args.currentState||"sitting",t.args.bindTo("currentState",function(){t.args.stateTime=0}),t.stats={intelligence:0,stamina:0,luck:0,run:0,swim:0,fly:0,power:0},t.traits={appetite:0,sociable:0},t.mood={attitude:0,hunger:0,health:100,social:0},t.defaultColors=["addef8","2ebee9","0e6d89","ecde2f","dcb936","985000","f8b0c0","f85080","e4e0e4","e0e0e0","f8f820","606080"],t.customColors=[null,null,null,null,null,null,null,null,null,null,null,null],t.customColors.bindTo(function(){var e={};for(var r in t.defaultColors){var n;e[t.defaultColors[r]]=null!==(n=t.customColors[r])&&void 0!==n?n:t.defaultColors[r]}t.png.ready.then(function(){var r=t.png.recolor(e).toUrl();t.args.spriteSheet=r,console.log("!!!")})},{wait:0}),t}return e=f,(r=[{key:"onRendered",value:function(t){var e=this;h(b(f.prototype),"onRendered",this).call(this,t),this.listening||(this.box.addEventListener("click",function(t){return e.onClick(t)}),this.box.addEventListener("contextmenu",function(t){return e.onRightClick(t)}),this.listening=!0),this.setAutoAttr("currentState","data-current-state"),this.setAutoAttr("alignment","data-alignment"),this.setAutoAttr("direction","data-direction"),this.setAutoAttr("emote","data-emote"),this.viewport.onInterval(1500,function(){e.emoteIndex>=e.emotes.length&&(e.emoteIndex=0),e.args.emote=e.emotes[e.emoteIndex],e.emoteIndex++,e.viewport.onTimeout(500,function(){e.args.emote="normal"})});var r={addef8:"e4e0e4","2ebee9":"c0bde4","0e6d89":"9c99c0",ecde2f:"addef8",dcb936:"2ebee9",985000:"0e6d89",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"cdeef8",f8f820:"9c99c0"},n={addef8:"485070","2ebee9":"303058","0e6d89":"202020",ecde2f:"b70000",dcb936:"770000",985000:"420000",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",f8f820:"bf999c",606080:"202020"},o={addef8:"ff7575","2ebee9":"e00000","0e6d89":"800000",ecde2f:"b70000",dcb936:"770000",985000:"420000",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",606080:"202020"},i={addef8:"e08000","2ebee9":"b76900","0e6d89":"7d4800",ecde2f:"b44800",dcb936:"844221",985000:"630000",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",606080:"202020"},a={addef8:"80e000","2ebee9":"69b700","0e6d89":"487d00",ecde2f:"48b400",dcb936:"428421",985000:"006300",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",606080:"202020"},s={addef8:"485070","2ebee9":"303058","0e6d89":"202020",ecde2f:"c0bde4",dcb936:"9c99c0",985000:"606080",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",f8f820:"9c99c0",606080:"202020"},c={addef8:"c0bde4","2ebee9":"9c99c0","0e6d89":"606080",ecde2f:"485070",dcb936:"303058",985000:"202020",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",f8f820:"9c99c0",606080:"202020"},l={addef8:"c0bde4","2ebee9":"9c99c0","0e6d89":"606080",ecde2f:"e4e0e4",dcb936:"c0bde4",985000:"9c99c0",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",f8f820:"9c99c0",606080:"202020"},u={addef8:"80e000","2ebee9":"69b700","0e6d89":"487d00",ecde2f:"b70000",dcb936:"770000",985000:"420000",ffa3b1:"ffa3b1",fa6379:"fa6379",e4e0e4:"e4e0e4",606080:"202020"};this.png.ready.then(function(){e.heroSheet=e.png.recolor(r).toUrl(),e.darkSheet=e.png.recolor(n).toUrl(),e.rubySheet=e.png.recolor(o).toUrl(),e.tangySheet=e.png.recolor(i).toUrl(),e.limeSheet=e.png.recolor(a).toUrl(),e.coalSheet=e.png.recolor(s).toUrl(),e.mimeSheet=e.png.recolor(c).toUrl(),e.whiteSheet=e.png.recolor(l).toUrl(),e.limeRubySheet=e.png.recolor(u).toUrl()})}},{key:"lift",value:function(t){if(this.carriedBy===t)return this.carriedBy=null,void(this.args.currentState="standing");this.carriedBy=t,this.args.currentState="held"}},{key:"solid",get:function(){return!1}},{key:"update",value:function(){var t=!1,e=l(this.regions).filter(function(t){return t.args.density>=1});if(e.length){if("flying"!==this.args.currentState||this.args.ySpeed>0){var r=e[0].args.y-e[0].args.height+6;"walking"!==this.args.currentState&&(this.args.xSpeed=.95*this.args.xSpeed),this.args.y>r?(this.args.falling=!0,this.args.ySpeed+=-.25,this.args.float=-1,this.args.ySpeed>3&&(this.args.ySpeed=3),this.args.ySpeed<-3&&(this.args.ySpeed=-3)):(this.args.ySpeed>0&&Math.abs(this.args.y-r)<3&&(this.args.y=r),this.args.ySpeed=0,this.args.float=1),this.args.groundAngle=0}t=!0}else"flying"!==this.args.currentState&&(this.args.float=0);var n,o=new Set,i=c(this.carrying);try{for(i.s();!(n=i.n()).done;){var u=n.value;(u instanceof a.Coconut||u instanceof s.Mushroom)&&(this.args.currentState="eating",o.add(u))}}catch(t){i.e(t)}finally{i.f()}switch(this.args.currentState){case"eating":if(this.args.falling||(this.args.ySpeed=0),this.carriedBy?this.args.float=-1:this.args.float=0,this.args.xSpeed=0,this.args.animation="eating",this.args.emote="love",this.args.stateTime&&this.args.stateTime%75==0){var p,g=c(o);try{for(g.s();!(p=g.n()).done;){var d=p.value;d.args.size--,d.args.size||(this.carriedBy?this.args.currentState="held":this.args.currentState="thinking",d.lift(this),this.viewport.actors.remove(d))}}catch(t){g.e(t)}finally{g.f()}}break;case"held":this.args.falling=!1,this.args.stateTime<15?this.args.emote="like":this.args.stateTime<60?(this.args.emote="love",this.args.animation="walking"):61===this.args.stateTime&&(this.args.emote="normal",this.args.animation="searching");break;case"standing":this.args.animation="standing",this.args.falling||(this.args.xSpeed=0,this.args.ySpeed=0),this.args.stateTime>120&&(this.args.currentState="thinking");break;case"thinking":this.args.falling||(this.args.xSpeed=0,this.args.ySpeed=0),this.args.animation="thinking",this.args.stateTime>60?this.args.currentState="searching":0==this.args.stateTime&&(this.args.emote="inquire");break;case"searching":this.args.animation="searching",this.args.emote="inquire",this.args.stateTime>90?this.args.emote="alert":this.args.emote="inquire",this.args.stateTime>120&&(this.args.direction=Math.sign(Math.random()-.5),this.getMapSolidAt(this.args.x+8*this.args.direction,this.args.y)&&(this.args.direction*=-1),Math.random()>.15?this.args.groundAngle||t?this.args.currentState="walking":this.args.currentState="sitting":this.args.currentState="walking");break;case"walking":this.args.animation=t?"flying":"walking",this.args.stateTime<15?this.args.emote="alert":16===this.args.stateTime&&(this.args.emote="normal"),t?this.args.xSpeed=1*this.args.direction:this.args.gSpeed=.01*this.args.direction,this.args.stateTime>40&&(!t&&Math.random()>.9&&(this.args.currentState="tripping"),Math.random()>.95&&(this.args.currentState="flying"),Math.random()>.98&&(this.args.currentState="searching"));break;case"tripping":this.args.animation="tripping",this.args.stateTime>10?this.args.gSpeed=0:this.args.gSpeed=1*this.args.direction,this.args.stateTime>20?this.args.stateTime<30&&Math.random()>.6&&(this.args.emote="angry"):this.args.emote="alert",this.args.stateTime>120&&(this.args.currentState="sitting");break;case"flying":this.args.animation="flying",1===this.args.stateTime&&(this.flightTime=this.maxFlight/2+Math.round(this.maxFlight/2*Math.random())),this.args.stateTime>60&&this.args.ySpeed<0&&(this.args.ySpeed*=.1),this.args.stateTime<this.flightTime?(this.args.groundAngle=0,this.args.ySpeed&&this.args.falling?this.args.ySpeed>=0&&(this.args.currentState="flying"):(this.args.xSpeed||this.args.gSpeed||(this.args.direction=Math.sign(Math.random()-.5)),this.args.falling=!0,this.args.ySpeed=-Math.sin(this.args.stateTime/.05),this.args.xSpeed=1.25*this.args.direction,this.args.float=-1),this.getMapSolidAt(this.args.x+8*this.args.direction,this.args.y)&&(this.args.direction*=-1,this.args.xSpeed*=-1)):this.args.currentState="thinking";break;case"hatching":case"sitting":this.args.xSpeed=0,this.args.animation=t?"standing":"sitting",this.args.stateTime>120&&(Math.random()>.35?this.args.currentState="walking":this.args.currentState="thinking")}h(b(f.prototype),"update",this).call(this),this.args.stateTime++}},{key:"collideA",value:function(t,e){h(b(f.prototype),"collideA",this).call(this,t,e),t.carriedBy||this.carrying.size||(t instanceof a.Coconut||t instanceof s.Mushroom)&&t.args.size&&t.lift(this)}},{key:"stateStanding",value:function(){}},{key:"stateThinking",value:function(){}},{key:"stateWalking",value:function(){}},{key:"stateFlying",value:function(){}},{key:"stateSitting",value:function(){}},{key:"stateSwimming",value:function(){}},{key:"stateFlyingLooking",value:function(){}},{key:"store",value:function(){return{name:this.args.name,colors:this.customColors,align:this.args.alignment,garden:null,position:[this.args.x,this.args.y],stats:this.stats,mood:this.mood}}},{key:"load",value:function(t){var e;"string"==typeof t&&(t=JSON.parse(t)),this.args.name=null!==(e=t.name)&&void 0!==e?e:"",t.position&&(this.args.x=t.position[0],this.args.y=t.position[1]),t.colors&&Object.assign(this.customColors,t.colors),t.stats&&Object.assign(this.stats,t.stats),t.mood&&Object.assign(this.mood,t.mood)}}])&&p(e.prototype,r),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Chao=v}),require.register("actor/ChaoCrate.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChaoCrate=void 0;var o=e("./BreakableBlock"),i=e("./Egg");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.BreakableBlock);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="actor-item actor-breakable-block actor-chao-crate",t.args.width=60,t.args.height=60,t.args.static=!1,t.args.spriteSheet="/Sonic/chao-crate.png",t}return e=p,(r=[{key:"setTile",value:function(){}},{key:"collideA",value:function(t,e){return!(0!==e||!t.controllable)||(t.spindashCharge?(this.break(),!0):-1!==e||t.args.gSpeed||t.args.falling||!t.controllable?1!==e&&3!==e||t.y<=this.y-this.args.height||(t.args.rolling||2===e?(this.break(),!1):!!this.viewport&&(-1!==e&&!t.args.rolling||s(u(p.prototype),"collideA",this).call(this,t,e))):(this.break(),!1))}},{key:"break",value:function(){var t=this;if(!this.broken)for(var e=0;e<5;e++){var r=new i.Egg({x:this.x,y:this.y-3});this.viewport.spawn.add({object:r}),r.args.falling=!0,r.args.xSpeed=6*(-.5+Math.random()),r.args.ySpeed=-7}s(u(p.prototype),"break",this).call(this),this.viewport.onTimeout(1e3,function(){t.viewport&&t.viewport.actors.remove(t)})}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.ChaoCrate=f}),require.register("actor/Cinematic.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Cinematic=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,o.PointActor);var e,r,n,p=c(h);function h(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),f(l(r=p.call(this,t,e)),"noClip",!0),f(l(r),"panSpeed",9),r.args.float=-1,r.target=null,r.targets=[[250,6500],[5900,6600],[250,6500],[7700,7800],[6800,4200],[6800,4200],[8e3,4300],[1450,1800]],r}return e=h,(r=[{key:"setCameraMode",value:function(){this.args.cameraMode="cinematic"}},{key:"update",value:function(){if(a(u(h.prototype),"update",this).call(this),this.args.selected){if(!this.target||this.x===this.target[0]&&this.y===this.target[1])return this.targets.length||this.remove(),void(this.target=this.targets.shift());var t=this.target;if(this.x!==t[0]){var e=t[0]-this.x;this.args.x+=Math.sign(e)*this.panSpeed,Math.abs(e)<this.panSpeed&&(this.args.x=t[0])}if(this.y!==t[1]){var r=t[1]-this.y;this.args.y+=Math.sign(r)*this.panSpeed,Math.abs(r)<this.panSpeed&&(this.args.y=t[1])}}}},{key:"isGhost",get:function(){return!0}},{key:"controllable",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Cinematic=p}),require.register("actor/Coconut.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Coconut=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.PointActor);var e,r,n,f=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="actor-item actor-coconut",t.args.width=12,t.args.height=13,t.args.size=4,t.bindTo("carriedBy",function(e){if(t.cX&&(t.cX(),t.cX=null),t.cY&&(t.cY(),t.cY=null),t.carriedBy){var r=t.carriedBy;t.carriedBy=null,t.args.xSpeed=r.args.xSpeed,t.args.ySpeed=r.args.falling?r.args.ySpeed:0,t.args.xSpeed+=4*Math.sign(r.args.gSpeed||r.args.xSpeed),t.args.ySpeed-=4,r.carrying.delete(l(t)),t.args.falling=!0,t.args.float=0}e&&(t.cX=e.args.bindTo("x",function(r){return t.args.x=r+e.args.direction*e.xHold}),t.cY=e.args.bindTo("y",function(r){return t.args.y=r+-e.yHold}),t.args.xSpeed=0,t.args.ySpeed=0,e.carrying.add(l(t)),t.args.float=-1)}),t}return e=p,(r=[{key:"onRendered",value:function(t){a(u(p.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--size"]="size"}},{key:"lift",value:function(t){this.carriedBy!==t?this.carriedBy=t:this.carriedBy=null}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}},{key:"sleep",value:function(){this.viewport&&this.viewport.actors.remove(this)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Coconut=f}),require.register("actor/Coin.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Coin=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.PointActor);var e,r,n,f=c(p);function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=f.call.apply(f,[this].concat(i)),e=l(t),n=-1,(r="float")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="actor-item actor-coin",t.args.width=32,t.args.height=32,t.args.gone=!1,t}return e=p,(r=[{key:"update",value:function(){a(u(p.prototype),"update",this).call(this),this.viewport.args.audio&&!this.sample&&(this.sample=new Audio("/mario/smw_coin.wav"),this.sample.volume=1)}},{key:"collideA",value:function(t){var e=this;if(a(u(p.prototype),"collideA",this).call(this,t),!this.args.gone){if(this.args.type="actor-item actor-coin collected",!this.args.gone){this.viewport.args.audio&&this.sample&&this.sample.play(),this.viewport.onFrameOut(40,function(){e.args.type="actor-item actor-coin collected gone"}),this.viewport.onFrameOut(80,function(){e.viewport.actors.remove(e),e.remove()});this.x,this.y;t.args.owner?t.args.owner.args.coins+=1:t.occupant?t.occupant.args.coins+=1:t.args.coins+=1}this.args.gone=!0}}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Coin=f}),require.register("actor/CompanionBlock.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CompanionBlock=void 0;var o=e("./MarbleBlock"),i=e("../region/LavaRegion"),a=e("../audio/Sfx");function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(g,o.MarbleBlock);var e,r,n,c=p(g);function g(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),(t=c.call(this,e)).args.type="actor-item actor-marble-companion-block",t.args.density=t.args.density||9.5,t.played=!1,t}return e=g,(r=[{key:"collideA",value:function(t,e){return!(this.args.falling&&t.y>8+this.y+-this.args.height)&&(this.args.falling&&t.y>this.y-this.args.height?t.args.y=this.y-this.args.height:this.args.falling&&t.args.modeTime<3&&(t.args.gSpeed=0),u(h(g.prototype),"collideA",this).call(this,t,e))}},{key:"update",value:function(){var t,e=this,r=!1,n=s(this.regions);try{for(n.s();!(t=n.n()).done;){t.value instanceof i.LavaRegion&&(r=!0,this.args.height>16&&(this.args.height-=.5),this.played||(this.args.type="actor-item actor-marble-companion-block actor-marble-companion-block-dying",this.viewport.onFrameOut(80,function(){e.args.type="actor-item actor-marble-companion-block actor-marble-companion-block-dead",a.Sfx.play("PLAYER_DAMAGED")}),"function"==typeof ga&&ga("send","event",{eventCategory:"companion-block",eventAction:"pushed",eventLabel:"".concat(this.viewport.args.actName,"::").concat(this.args.id)}),this.played=!0))}}catch(t){n.e(t)}finally{n.f()}var o=this.args.x;(u(h(g.prototype),"update",this).call(this),this.args.pushed)&&(r&&(this.viewport.tileMap.getSolid(this.x+this.args.width/2*(this.args.pushed||0),this.y)?this.args.pushed=0:this.args.x=o+this.args.pushed));r||(this.args.height=32)}},{key:"sleep",value:function(){var t=this;this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.onNextFrame(function(){t.args.x=t.def.get("x"),t.args.y=t.def.get("y"),t.viewport.setColCell(t),t.args.xSpeed=0,t.args.ySpeed=0,t.args.pushed=0,t.args.float=0})}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.CompanionBlock=g}),require.register("actor/Cone.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Cone=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.width=16,t.args.height=32,t.args.type="actor-item actor-cone",t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Cone=l}),require.register("actor/CrabMeat.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CrabMeat=void 0;e("./Flickie");var o=e("curvature/base/Mixin"),i=(e("curvature/base/Tag"),e("./PointActor")),a=e("../behavior/SkidDust"),s=e("../behavior/Patrol"),c=e("../mixin/CanPop"),l=(e("../actor/Explosion"),e("../actor/Projectile"));function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(y,o.Mixin.from(i.PointActor,c.CanPop));var e,r,n,d=h(y);function y(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=d.call.apply(d,[this].concat(r))).behaviors.add(new a.SkidDust),t.behaviors.add(new s.Patrol),t.args.type="actor-item actor-crabmeat",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=32,t.args.height=32,t.willStick=!1,t.stayStuck=!1,t.args.patrolBeat=t.args.patrolBeat||90,t.args.patrolPause=t.args.patrolPause||25,t.args.patrolSpeed=t.args.patrolSpeed||.25,t.args.shotTelegraph=t.args.shotTelegraph||65,t.age=0,t}return e=y,(r=[{key:"update",value:function(){var t=this.args.direction;f(g(y.prototype),"update",this).call(this);var e=this.args.shotTelegraph,r=this.args.patrolBeat;if(this.box&&(Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?this.box.setAttribute("data-animation","skidding"):this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.age%r<e||this.age%r>r-15?this.box.setAttribute("data-animation","shooting"):this.box.setAttribute("data-animation","standing")),this.age%r==r-3){var n=this.x+19,o=this.x+-19,i=this.y+-19,a=new l.Projectile({x:n,y:i,z:-1,owner:this}),s=new l.Projectile({x:o,y:i,z:-1,owner:this});this.viewport.onFrameOut(3,function(){Object.assign(a.args,{xSpeed:1.5,ySpeed:-3}),Object.assign(s.args,{xSpeed:-1.5,ySpeed:-3})}),this.viewport.spawn.add({object:a}),this.viewport.spawn.add({object:s})}this.age++}},{key:"effect",value:function(t){f(g(y.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.CrabMeat=d}),require.register("actor/Cursor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Cursor=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"update",value:function(){}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Cursor=l}),require.register("actor/CutScene.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CutScene=void 0;var o=e("./PointActor");function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(u,o.PointActor);var e,r,n,a=l(u);function u(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),r=a.call(this,t,e),t.src?r.fetcher=fetch(t.src).then(function(t){return t.json()}):t.frames&&(r.fetcher=Promise.resolve(t.frames)),r.args.hidden=!0,r}return e=u,(r=[{key:"playSample",value:function(t){this.viewport.args.audio&&new Audio(t.source).play()}},{key:"activate",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.controllable&&(!t.args.falling||n)&&"Sonic"===t.args.canonical){var o=this.viewport;o&&!this.args.running&&(this.args.running=!0,t.args.gSpeed=0,o.args.cutScene=!0,t.controller.zero(),this.fetcher.then(function(e){var n,a=0,s=i(e);try{var c=function(){var e=n.value,i=function(){switch(e.event){case"dialog":o.showDialog(e.lines,e.classes);break;case"audio":r.playSample(e);break;case"face":t.args.direction=e.direction,t.args.facing=e.direction>0?"right":"left";break;case"input":e.axes&&t.controller.replay({axes:e.axes}),e.buttons&&t.controller.replay({buttons:e.buttons}),t.readInput();break;case"superdrop":t.dropDashCharge=30;break;case"clearAct":o.clearAct(e.message);break;case"clear":o.clearDialog();break;case"message":o.showCenterMessage(e.message);break;case"hide":o.hideCenterMessage(),o.hideDialog();break;case"wait":o.args.cutScene=!1,o.hideCenterMessage(),o.hideDialog()}};a?o.onFrameOut(a,i):i(),a+=e.time||0};for(s.s();!(n=s.n()).done;)c()}catch(t){s.e(t)}finally{s.f()}}))}}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.CutScene=f}),require.register("actor/Dish.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Dish=void 0;var o=e("./PointActor"),i=e("curvature/base/Mixin"),a=e("../mixin/CanPop");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,i.Mixin.from(o.PointActor,a.CanPop));var e,r,n,p=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call.apply(p,[this].concat(r))).args.width=46,t.args.height=50,t.args.type="actor-item actor-dish",t}return e=h,n=[{key:"fromDef",value:function(t){var e=u(f(h),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e}}],(r=[{key:"solid",get:function(){return!1}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Dish=p}),require.register("actor/Door.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Door=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call.apply(u,[this].concat(r))).behaviors.clear(),t.args.type="actor-item actor-door",t.args.width=32,t.args.height=64,t.args.opened=!1,t.args.opening=!1,t}return e=f,(r=[{key:"onRendered",value:function(){a(l(f.prototype),"onRendered",this).call(this,event),this.setAutoAttr("opening","data-opening"),this.setAutoAttr("opened","data-opened")}},{key:"open",value:function(t){var e=this;this.args.opening=!0,this.viewport.onFrameOut(15,function(){return e.args.opened=!0})}},{key:"collideA",value:function(t,e){return this.args.opening?!this.args.opened:(this.open(t),!this.args.opened)}},{key:"sleep",value:function(){this.viewport&&(this.args.opening=this.args.opened=!1)}},{key:"solid",get:function(){return!this.args.opened}},{key:"rotateLock",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Door=u}),require.register("actor/DrainFly.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DrainFly=void 0;var o=e("./PointActor"),i=e("../behavior/Platformer"),a=e("curvature/base/Mixin"),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,a.Mixin.from(o.PointActor,s.CanPop));var e,r,n,h=f(g);function g(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),(r=h.call(this,t,e)).args.type="actor-item actor-drainfly",r.args.width=16,r.args.height=16,r.args.float=-1,r.args.gravity=0,r.args.phase="idle",r}return e=g,(r=[{key:"update",value:function(){if(this.viewport&&this.viewport.actorIsOnScreen(this)){var t=this.viewport;l(p(g.prototype),"update",this).call(this);var e=t.controlActor;if(e){switch(this.args.phase){case"idle":this.args.alertTo=this.y-64,e.x+-this.x>-128&&(this.args.phase="alert");break;case"alert":this.y>this.args.alertTo?this.args.ySpeed--:(this.args.phase="attacking",this.args.y=this.args.alertTo,this.args.ySpeed=0);break;case"attacking":var r=Math.sign(e.x+-this.x),n=Math.sign(e.y+-this.y+-24);this.args.xSpeed+=.2*r-Math.random()/10,this.args.ySpeed+=.5*n-Math.random()/10,Math.abs(this.args.xSpeed)>6&&(this.args.xSpeed=4*r),Math.abs(this.args.ySpeed)>8&&(this.args.ySpeed=4*n),this.bMap("checkBelow",this.x,this.y).get(i.Platformer)&&(this.args.falling=!0,this.args.ySpeed=-1,this.args.y-=1)}this.args.facing=this.args.xSpeed>0?"left":"right",this.args.float=-1}else this.args.phase="idle"}}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.DrainFly=h}),require.register("actor/DrillCar.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DrillCar=void 0;var o=e("./Vehicle"),i=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,o.Vehicle);var e,r,n,p=l(h);function h(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=p.call.apply(p,[this].concat(i)),e=u(t),n=["Jump ","Fly +"],(r="instructions")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="actor-item actor-drill-car",t.args.width=38,t.args.height=48,t.removeTimer=null,t.args.gSpeedMax=26,t.args.decel=.3,t.args.accel=.75,t.args.seatHeight=34,t.args.skidTraction=.95,t.dustCount=0,t.args.particleScale=2,t}return e=h,(r=[{key:"onRendered",value:function(t){s(f(h.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite"),this.backSprite=new i.Tag('<div class = "sprite-back sprite">'),this.drill=new i.Tag('<div class = "drill-car-drill">'),this.seat=new i.Tag('<div class = "drill-car-seat">'),this.windsheild=new i.Tag('<div class = "drill-car-windsheild">'),this.copterCap=new i.Tag('<div class = "drill-car-copter-cap">'),this.copterBladeA=new i.Tag('<div class = "drill-car-copter-blade-a">'),this.copterBladeB=new i.Tag('<div class = "drill-car-copter-blade-b">'),this.frontWheelA=new i.Tag('<div class = "drill-car-tire drill-car-tire-front-a">'),this.frontWheelB=new i.Tag('<div class = "drill-car-tire drill-car-tire-front-b">'),this.backWheelA=new i.Tag('<div class = "drill-car-tire drill-car-tire-back-a">'),this.backWheelB=new i.Tag('<div class = "drill-car-tire drill-car-tire-back-b">'),this.sprite.appendChild(this.drill.node),this.backSprite.appendChild(this.copterCap.node),this.backSprite.appendChild(this.copterBladeA.node),this.backSprite.appendChild(this.copterBladeB.node),this.sprite.appendChild(this.windsheild.node),this.backSprite.appendChild(this.seat.node),this.sprite.appendChild(this.frontWheelA.node),this.backSprite.appendChild(this.frontWheelB.node),this.sprite.appendChild(this.backWheelA.node),this.backSprite.appendChild(this.backWheelB.node),this.box.appendChild(this.backSprite.node)}},{key:"update",value:function(){var t=this.args.falling;if(this.viewport.args.audio&&!this.flyingSound&&(this.flyingSound=new Audio("/Sonic/drill-car-copter.wav"),this.flyingSound.volume=.35+-.2*Math.random(),this.flyingSound.loop=!0),this.flyingSound&&(this.flyingSound.paused||(this.flyingSound.volume=.25+-.2*Math.random()),this.flyingSound.currentTime>.2&&(this.flyingSound.currentTime=0)),this.box){if(t)this.args.flying?this.box.setAttribute("data-animation","flying"):this.args.falling&&(this.flyingSound&&this.flyingSound.pause(),this.box.setAttribute("data-animation","jumping"));else{this.flyingSound&&this.flyingSound.pause();var e=this.args.direction,r=this.args.gSpeed,n=Math.abs(r),o=this.args.gSpeedMax;if(this.dustCount>0&&this.dustCount--,Math.sign(this.args.gSpeed)!==e&&Math.abs(this.args.gSpeed-e)>5){this.box.setAttribute("data-animation","skidding");var a=this.viewport,c=new i.Tag('<div class = "particle-dust">'),l=this.rotatePoint(this.args.gSpeed,0);c.style({"--x":l[0]+this.x,"--y":l[1]+this.y,"z-index":0,opacity:2*Math.random()});var u=new i.Tag('<div class = "particle-dust">'),p=this.rotatePoint(this.args.gSpeed+40*this.args.direction,0);u.style({"--x":p[0]+this.x,"--y":p[1]+this.y,"z-index":0,opacity:2*Math.random()}),a.particles.add(c),a.particles.add(u),setTimeout(function(){a.particles.remove(c),a.particles.remove(u)},350)}else this.args.moving&&n>.75*o?this.box.setAttribute("data-animation","running"):this.args.moving&&n?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")}0==this.args.copterCoolDown?this.args.ySpeed>5&&(this.flyingSound&&this.flyingSound.pause(),this.args.flying=!1):this.args.copterCoolDown>0&&this.args.copterCoolDown--,s(f(h.prototype),"update",this).call(this)}else s(f(h.prototype),"update",this).call(this)}},{key:"command_0",value:function(){if(!this.args.falling)return this.args.copterCoolDown=15,void s(f(h.prototype),"command_0",this).call(this);this.args.copterCoolDown>0||this.args.ySpeed>-16&&(this.args.flying||this.flyingSound&&this.flyingSound.play(),this.args.flying=!0,0==this.args.copterCoolDown&&(this.args.copterCoolDown=7),this.args.ySpeed=-1,this.args.ySpeed=-4,this.args.float=8)}},{key:"sleep",value:function(){this.flyingSound&&this.flyingSound.pause()}},{key:"solid",get:function(){return!this.occupant}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.DrillCar=p}),require.register("actor/DropCage.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DropCage=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.width=48,t.args.height=40,t.args.type="actor-item actor-drop-cage",t.args.float=-1,t}return e=l,(r=[{key:"collideA",value:function(t,e){return!!t.controllable&&(-1!==e&&e%2!=0||(t.args.y>=this.y-16&&t.args.y<this.y-6&&(t.args.xSpeed=0,t.args.x=this.x,t.args.ySpeed=0,t.args.float=-1,t.args.ignore=-1,t.args.y=this.y-6,this.dropDelay(t).then(function(){t.args.float=0,t.args.ignore=5})),!1))}},{key:"dropDelay",value:function(t){var e=this,r=!1;return this.args.waitFor&&(r=this.viewport.actorsById[this.args.waitFor]),r?r.dropDelay(t):new Promise(function(t){return e.viewport.onFrameOut(30,function(){return t()})})}},{key:"solid",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.DropCage=l}),require.register("actor/Egg.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Egg=void 0;var o=e("../sprite/Png"),i=e("./PointActor"),a=(e("curvature/base/Bindable"),e("./EggShellTop")),s=e("./Chao");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}(this,r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(d,i.PointActor);var e,r,n,g=f(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];(t=g.call.apply(g,[this].concat(r))).args.type="actor-item actor-egg",t.args.shell="normal",t.args.bindTo("shell",function(e){switch(e){case"flat":case"normal":t.args.spriteSheet="/DBurraki/chao-egg-".concat(e,".png");break;default:t.args.spriteSheet="/DBurraki/chao-egg-normal.png"}t.png=new o.Png(t.args.spriteSheet)}),t.args.width=15,t.args.height=20,t.broken=!1,t.customChaoColors=[null,null,null,null,null,null,null,null,null,null,null,null,null];var i=[12,0,1,2];t.defaultColors=["e2e0e2","addef8","2ebee9","0e6d89"],t.customColors=[null,null,null,null],t.customColors.bindTo(function(){var e={};for(var r in t.defaultColors){var n;e[t.defaultColors[r]]=null!==(n=t.customColors[r])&&void 0!==n?n:t.defaultColors[r]}t.png.ready.then(function(){var r=t.png.recolor(e).toUrl();t.args.spriteSheet=r})},{wait:0}),t.customChaoColors.bindTo(function(e,r){if(r=Number(r),i.includes(r)){var n=i.indexOf(r);t.customColors[n]=e,null!==e&&(t.args.shell="flat")}});var a=[[null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,"80e000","69b700","487d00",null,null,null,null,null,null,null],["485070","303058","202020",null,null,null,null,null,null,null,null,"202020","5f6994"],["e4e0e4","c0bde4","9c99c0",null,null,null,null,null,null,null,null,null,"e4e0e4"],["e4e0e4","c0bde4","9c99c0","addef8","2ebee9","0e6d89",null,null,null,null,null,null,"e4e0e4"],["485070","303058","202020","b70000","770000","420000",null,null,null,null,"bf999c","202020","5f6994"],["ff7575","e00000","800000","b70000","770000","420000",null,null,null,null,null,"202020","ffaeae"],["ffc20e","dd8604","ad4d05","b44800","844221","630000",null,null,null,null,null,"202020","fae3af"],["80e000","69b700","487d00","48b400","428421","006300",null,null,null,null,null,"202020","cef00f"],["485070","303058","202020","c0bde4","9c99c0","606080",null,null,null,null,"9c99c0","202020","5f6994"],["c0bde4","9c99c0","606080","485070","303058","202020",null,null,null,null,"9c99c0","202020","e4e0e4"],["c0bde4","9c99c0","606080","e4e0e4","c0bde4","9c99c0",null,null,null,null,"9c99c0","202020","e4e0e4"]];return Object.assign(t.customChaoColors,a[Math.trunc(Math.random()*(-1+a.length))]),t.args.bindTo("falling",function(e){var r=t.ySpeedLast;e||t.broken||r<12||t.hatch()}),t.bindTo("carriedBy",function(e){if(t.cX&&(t.cX(),t.cX=null),t.cY&&(t.cY(),t.cY=null),e)t.cX=e.args.bindTo("x",function(r){return t.args.x=r+12*e.args.direction}),t.cY=e.args.bindTo("y",function(e){return t.args.y=e+-12}),e.carrying.add(p(t)),t.args.float=-1,t.args.groundAngle=0;else if(t.carriedBy){var r=t.carriedBy;t.carriedBy=null,t.args.xSpeed=r.args.xSpeed,t.args.ySpeed=r.args.ySpeed,t.args.xSpeed+=4*Math.sign(r.args.gSpeed||r.args.xSpeed),t.args.ySpeed-=4,t.args.xSpeed+=2*r.xAxis,r.carrying.delete(p(t)),t.args.falling=!0,t.args.float=0,t.args.groundAngle=0}}),t}return e=d,(r=[{key:"onRendered",value:function(t){l(h(d.prototype),"onRendered",this).call(this,t),this.setAutoAttr("shell","data-shell")}},{key:"lift",value:function(t){this.carriedBy!==t?this.carriedBy=t:this.carriedBy=null}},{key:"sleep",value:function(){this.broken&&this.viewport.actors.remove(this)}},{key:"hatch",value:function(){var t=this.ySpeedLast;this.args.type="actor-item actor-egg actor-egg-shell-bottom";var e=new a.EggShellTop({spriteSheet:this.args.spriteSheet,xSpeed:.6*this.xSpeedLast,ySpeed:.4*-t,x:this.x,y:this.y-10}),r=new s.Chao({currentState:"hatching",xSpeed:.4*this.xSpeedLast,ySpeed:.4*-t,x:this.x,y:this.y-10});this.args.gSpeed=.2*this.xSpeedLast,this.viewport.spawn.add({object:e}),this.viewport.spawn.add({object:r}),Object.assign(r.customColors,this.customChaoColors),this.broken=!0}},{key:"rotateLock",get:function(){return!0}},{key:"solid",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.Egg=g}),require.register("actor/EggMobile.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EggMobile=void 0;var o=e("./Vehicle"),i=e("../behavior/Platformer");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Vehicle);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="actor-item actor-vehicle actor-eggmobile",t.args.accel=.15,t.args.decel=.8,t.args.gSpeedMax=15,t.args.xSpeedMax=45,t.args.ySpeedMax=45,t.args.jumpForce=12,t.args.gravity=.6,t.args.width=28,t.args.height=20,t.args.yMargin=42,t.args.falling=!0,t.args.flying=!0,t.args.float=-1,t}return e=p,(r=[{key:"update",value:function(){if(this.bMap("checkBelow",this.x,this.y).get(i.Platformer)&&this.args.y--,Math.abs(this.yAxis)>.5){if(Math.abs(this.args.ySpeed)<this.args.ySpeedMax){var t=this.args.ySpeed;Math.sign(this.yAxis)===Math.sign(this.args.ySpeed)?t+=this.yAxis*this.args.accel*3:t+=this.yAxis*this.args.accel*6,t=t>0?Math.floor(1e3*t)/1e3:Math.ceil(1e3*t)/1e3,this.args.ySpeed=t}}else this.args.ySpeed=this.args.ySpeed*this.args.decel;this.xAxis||(Math.abs(this.args.xSpeed)<=1&&(this.args.xSpeed=0),this.args.xSpeed>0?this.args.xSpeed=Math.floor(this.args.xSpeed*this.args.decel):this.args.xSpeed=Math.ceil(this.args.xSpeed*this.args.decel)),this.occupant||(this.args.xSpeed=0,this.args.ySpeed=0),this.args.falling=!0,this.args.flying=!0,this.args.mode=0,this.args.cameraMode="aerial",s(u(p.prototype),"update",this).call(this)}},{key:"solid",get:function(){return!this.occupant}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.EggMobile=f}),require.register("actor/EggShellBottom.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EggShellBottom=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,o.PointActor);var e,r,n,l=s(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=l.call.apply(l,[this].concat(r))).args.type="actor-item actor-egg-shell-bottom",t.args.width=15,t.args.height=20,t.bindTo("carriedBy",function(e){if(t.cX&&(t.cX(),t.cX=null),t.cY&&(t.cY(),t.cY=null),e)t.cX=e.args.bindTo("x",function(r){return t.args.x=r+12*e.args.direction}),t.cY=e.args.bindTo("y",function(e){return t.args.y=e+-12}),e.carrying.add(c(t)),t.args.float=-1;else if(t.carriedBy){var r=t.carriedBy;t.carriedBy=null,t.args.xSpeed=r.args.xSpeed,t.args.ySpeed=r.args.ySpeed,t.args.xSpeed+=4*Math.sign(r.args.gSpeed||r.args.xSpeed),t.args.ySpeed-=4,r.carrying.delete(c(t)),t.args.falling=!0,t.args.float=0}}),t}return e=u,(r=[{key:"lift",value:function(t){this.carriedBy!==t?this.carriedBy=t:this.carriedBy=null}},{key:"solid",get:function(){return!1}},{key:"sleep",value:function(){this.viewport.actors.remove(this),console.log(this)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.EggShellBottom=u}),require.register("actor/EggShellTop.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EggShellTop=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,o.PointActor);var e,r,n,l=s(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=l.call.apply(l,[this].concat(r))).args.type="actor-item actor-egg-shell-top",t.args.width=15,t.args.height=20,t.bindTo("carriedBy",function(e){if(t.cX&&(t.cX(),t.cX=null),t.cY&&(t.cY(),t.cY=null),e)t.cX=e.args.bindTo("x",function(r){return t.args.x=r+12*e.args.direction}),t.cY=e.args.bindTo("y",function(e){return t.args.y=e+-12}),e.carrying.add(c(t)),t.args.float=-1;else if(t.carriedBy){var r=t.carriedBy;t.carriedBy=null,t.args.xSpeed=r.args.xSpeed,t.args.ySpeed=r.args.ySpeed,t.args.xSpeed+=4*Math.sign(r.args.gSpeed||r.args.xSpeed),t.args.ySpeed-=4,r.carrying.delete(c(t)),t.args.falling=!0,t.args.float=0}}),t}return e=u,(r=[{key:"lift",value:function(t){this.carriedBy!==t?this.carriedBy=t:this.carriedBy=null}},{key:"solid",get:function(){return!1}},{key:"sleep",value:function(){this.viewport.actors.remove(this),console.log(this)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.EggShellTop=u}),require.register("actor/EggShuttle.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EggShuttle=void 0;var o=e("curvature/base/Tag"),i=e("./Vehicle");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Vehicle);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="actor-item actor-vehicle actor-egg-shuttle",t.args.accel=.15,t.args.decel=.8,t.args.gSpeedMax=15,t.args.xSpeedMax=15,t.args.ySpeedMax=15,t.args.jumpForce=3,t.args.gravity=.6,t.args.width=96,t.args.height=308,t.args.yMargin=42,t.args.falling=!0,t.args.flying=!0,t.args.float=-1,t.args.seatHeight=t.args.height-40,t.args.seatForward=-16,t.args.seatAngle=Math.PI/2,t.args.thrustAngle=-Math.PI/2,t.args.bindTo("boosting",function(e){t.boost&&t.boost.setAttribute("data-active",!!e)}),t.args.crashAngle=0,t.args.bindTo("falling",function(e){Math.abs(t.args.groundAngle)<Math.PI/4||(t.args.crashAngle=t.args.groundAngle)}),t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--crash-angle"]="crashAngle"}},{key:"updateStart",value:function(){s(u(p.prototype),"updateStart",this).call(this),this.args.falling&&(this.args.groundAngle=-(this.args.thrustAngle+Math.PI/2))}},{key:"updateEnd",value:function(){if(s(u(p.prototype),"updateEnd",this).call(this),this.args.falling||(this.args.groundAngle=0),this.args.crashAngle&&(this.args.groundAngle=this.args.crashAngle,this.occupant)){var t=this.occupant;t.args.standingOn=!1,t.args.falling=!0,t.args.xSpeed=2*Math.sign(this.xSpeedLast),t.args.ySpeed=-12,t.args.y+=-12}}},{key:"update",value:function(){this.sprite&&!this.windshield&&(this.windshield=new o.Tag('<div class = "shuttle-windshield">'),this.boost=new o.Tag('<div class = "shuttle-boost">'),this.sprite.appendChild(this.windshield.node),this.sprite.appendChild(this.boost.node)),this.occupant?(this.args.type="actor-item actor-vehicle actor-egg-shuttle actor-egg-shuttle-occupied",this.args.float=1):(this.args.type="actor-item actor-vehicle actor-egg-shuttle",this.args.float=0),this.args.gSpeed=0,this.args.facing="right",s(u(p.prototype),"update",this).call(this),this.args.falling?(this.args.cameraMode="rocket",this.args.thrustAngle+=.02*this.xAxis,this.args.thrustAngle<7*-Math.PI/8&&(this.args.thrustAngle=7*-Math.PI/8),this.args.thrustAngle>1*-Math.PI/8&&(this.args.thrustAngle=1*-Math.PI/8)):(this.args.cameraMode="normal",this.args.cameraBias=0,this.args.boosting=!1,this.args.thrustAngle=-Math.PI/2)}},{key:"processInputDirect",value:function(){}},{key:"command_0",value:function(t){}},{key:"release_0",value:function(t){this.args.boosting=!1}},{key:"hold_0",value:function(t){if(this.args.x+=this.viewport.args.frameId%2?-1:1,this.args.falling||!(t.time<60)){this.args.falling=!0;var e=this.args.gravity*(1+.002*Math.min(-60+t.time,150));this.args.xSpeed+=e*Math.cos(this.args.thrustAngle),this.args.ySpeed+=e*Math.sin(this.args.thrustAngle),Math.abs(this.args.xSpeed)>this.args.xSpeedMax&&(this.args.xSpeed=this.args.xSpeedMax*Math.sign(this.args.xSpeed)),Math.abs(this.args.ySpeed)>this.args.ySpeedMax&&(this.args.ySpeed=this.args.ySpeedMax*Math.sign(this.args.ySpeed)),this.args.boosting=!0}}},{key:"collideA",value:function(t,e){if(this.args.crashAngle)return!1;s(u(p.prototype),"collideA",this).call(this,t,e)}},{key:"solid",get:function(){return!this.args.crashAngle&&!this.occupant}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.EggShuttle=f}),require.register("actor/EggWalker.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EggWalker=void 0;var o=e("./Vehicle"),i=e("../behavior/Platformer"),a=e("./Projectile"),s=e("curvature/base/Tag");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}(this,r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(d,o.Vehicle);var e,r,n,g=f(d);function d(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=g.call.apply(g,[this].concat(i)),e=p(t),n=[],(r="instructions")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="actor-item actor-egg-walker",t.args.width=32,t.args.height=64,t.args.weight=1500,t.removeTimer=null,t.args.gSpeedMax=2.5,t.args.decel=.05,t.args.accel=.1,t.args.seatHeight=48,t.args.jumpForce=12,t.args.skidTraction=.9,t.dustCount=0,t.args.particleScale=2,t.args.bindTo("falling",function(e){e||!t.crouching||t.ySpeedLast<8||(t.viewport.args.shakeY=7)}),t}return e=d,(r=[{key:"onRendered",value:function(t){l(h(d.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite"),this.backSprite=new s.Tag('<div class = "sprite-back sprite">'),this.body=new s.Tag('<div class = "egg-walker-body">'),this.sprite.appendChild(this.body.node),this.punch=new s.Tag('<div class = "egg-walker-punch">'),this.sprite.appendChild(this.punch.node),this.legFront=new s.Tag('<div class = "egg-walker-leg">'),this.sprite.appendChild(this.legFront.node),this.boostFront=new s.Tag('<div class = "egg-boost">'),this.legFront.appendChild(this.boostFront.node),this.legBack=new s.Tag('<div class = "egg-walker-leg egg-walker-leg-back">'),this.backSprite.appendChild(this.legBack.node),this.boostBack=new s.Tag('<div class = "egg-boost">'),this.legBack.appendChild(this.boostBack.node),this.chair=new s.Tag('<div class = "egg-walker-chair">'),this.backSprite.appendChild(this.chair.node),this.gun=new s.Tag('<div class = "egg-walker-gun">'),this.backSprite.appendChild(this.gun.node),this.box.appendChild(this.backSprite.node)}},{key:"update",value:function(){l(h(d.prototype),"update",this).call(this),this.boosting?(this.args.type="actor-item actor-egg-walker egg-walker-boosting",this.args.ySpeed>0&&(this.args.ySpeed-=(Math.sin(this.viewport.args.frameId/10)+.9)/2*1.25+.5)):this.args.type="actor-item actor-egg-walker",this.boosting=!1,this.yAxis>.55&&(!this.xAxis||this.falling&&this.args.ySpeed>0)?(this.crouching&&(this.args.y+=.001,this.args.y-=.001),this.args.falling&&!this.crouching&&(this.args.ySpeed+=4),this.args.gSpeed=0,this.args.animation="crouching",this.crouching=!0,this.args.seatHeight=30,this.args.height=48):(this.crouching||(this.args.y+=.001,this.args.y-=.001),this.crouching=!1,this.args.seatHeight=48,this.args.height=64,this.args.falling?this.args.animation="falling":Math.sign(this.args.gSpeed)===this.args.direction?this.args.animation="walking":this.args.animation="standing")}},{key:"hold_0",value:function(){var t=this.bMap("checkBelow",this.x,this.y+1).get(i.Platformer);!this.args.falling&&this.args.ySpeed<0||t||this.yAxis>.55||(this.boosting=!0)}},{key:"hold_2",value:function(){var t=this;if(!this.shooting){var e,r,n,o=Math.sign(this.args.direction),i=this.args.groundAngle;switch(this.args.mode){case 0:n=-i-Math.PI/2+Math.PI/4*o,r=-i;break;case 1:n=-i+Math.PI/4*o,r=-i+Math.PI/2;break;case 2:n=-i+Math.PI/2+Math.PI/4*o,r=-i-Math.PI;break;case 3:n=-i-Math.PI+Math.PI/4*o,r=-i-Math.PI/2}e=[32*Math.cos(n),120*Math.sin(n)];var s=new a.Projectile({direction:this.args.direction,x:this.args.x+e[0]+(this.args.xSpeed||this.args.gSpeed),y:this.args.y+e[1]-(this.crouching?-20:0),owner:this,xSpeed:this.args.xSpeed||this.args.gSpeed||this.args.direction,float:10,strength:2});s.impulse(8,r+(o<0?Math.PI:0),!0),this.viewport.spawn.add({object:s}),this.viewport.auras.add(s),s.update(),this.box.setAttribute("data-shoot","true"),this.shooting=!0,this.viewport.onFrameOut(1,function(){t.box.setAttribute("data-shoot","false")}),this.viewport.onFrameOut(6,function(){t.shooting=!1})}}},{key:"command_0",value:function(){this.crouching||l(h(d.prototype),"command_0",this).call(this)}},{key:"command_1",value:function(){var t=this;this.punching||(this.box.setAttribute("data-punch","true"),this.punching=!0,this.viewport.onFrameOut(12,function(){t.box.setAttribute("data-punch","false")}),this.viewport.onFrameOut(25,function(){t.punching=!1}))}},{key:"solid",get:function(){return!this.occupant}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.EggWalker=g}),require.register("actor/Eggman.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Eggman=void 0;var o=e("./PointActor"),i=(e("curvature/base/Tag"),e("../behavior/SkidDust"));function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.PointActor);var e,r,n,f=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).behaviors.add(new i.SkidDust),t.args.type="actor-item actor-eggman",t.accelNormal=.15,t.accelSuper=.3,t.args.weight=200,t.args.accel=.15,t.args.decel=.3,t.args.normalHeight=40,t.args.rollingHeight=28,t.gSpeedMaxNormal=18,t.gSpeedMaxSuper=28,t.args.gSpeedMax=t.gSpeedMaxNormal,t.args.normalHeight=57,t.args.rollingHeight=29,t.jumpForceNormal=11,t.jumpForceSuper=18,t.args.jumpForce=t.jumpForceNormal,t.args.gravity=.5,t.args.width=18,t.args.height=57,t.args.lookingUp=!1,t.args.spriteSheet=t.spriteSheet="/Sonic/eggman.png",t.superSpriteSheet="/Sonic/eggman-super.png",t}return e=p,n=[{key:"fromDef",value:function(t){var e=l(u(p),"fromDef",this).call(this,t);return e.args.name="Robotnik",e}}],(r=[{key:"onRendered",value:function(t){l(u(p.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div")}},{key:"updateStart",value:function(){this.args.grinding&&this.args.falling&&this.args.ySpeed>0&&(this.args.animation="airdash",this.args.grinding=!1),l(u(p.prototype),"updateStart",this).call(this),this.args.dead&&(this.args.animation="dead")}},{key:"update",value:function(){var t=this.args.falling;if(this.box){this.yAxis>.5&&!this.args.ignore?(this.args.crouching=!0,this.args.lookTime--,this.args.lookTime<-45&&(this.args.cameraBias=-.5)):this.yAxis<-.5&&!this.args.ignore?(this.args.lookingUp=!0,this.args.lookTime++,this.args.lookTime>45&&(this.args.cameraBias=.25)):this.args.lookingUp=this.args.crouching=!1;var e=this.args.direction,r=this.args.gSpeed,n=Math.abs(r),o=this.args.gSpeedMax;t?(this.args.jumping&&(this.args.animation="jumping"),this.args.height=this.args.rollingHeight):this.args.rolling?(this.args.height=this.args.rollingHeight,this.args.direction!==Math.sign(this.args.gSpeed)&&(this.args.direction=Math.sign(this.args.gSpeed),this.args.direction<0?this.args.facing="left":this.args.facing="right"),this.args.animation="rolling"):(this.args.height=this.args.normalHeight,Math.sign(this.args.gSpeed)!==e&&Math.abs(this.args.gSpeed-e)>5?this.args.animation="skidding":n>o/2?this.args.animation="running":this.args.moving&&r?this.args.animation="walking":this.args.lookingUp?this.args.animation="lookingUp":this.args.crouching||this.args.standingOn&&this.args.standingOn.isVehicle?this.args.animation="crouching":this.args.animation="standing"),this.args.hangingFrom&&(this.args.animation="hanging"),this.args.grinding&&(this.args.rolling=!1,this.yAxis>.5?this.args.animation="grinding-crouching":this.args.animation="grinding"),l(u(p.prototype),"update",this).call(this)}else l(u(p.prototype),"update",this).call(this)}},{key:"command_3",value:function(){var t=this;this.isSuper=!this.isSuper,this.onTimeout(150,function(){0===t.args.rings&&t.setProfile()}),this.setProfile()}},{key:"setProfile",value:function(){this.isSuper?(this.args.spriteSheet=this.superSpriteSheet,this.args.gSpeedMax=this.gSpeedMaxSuper,this.args.jumpForce=this.jumpForceSuper,this.args.accel=this.accelSuper):(this.args.spriteSheet=this.spriteSheet,this.args.gSpeedMax=this.gSpeedMaxNormal,this.args.jumpForce=this.jumpForceNormal,this.args.accel=this.accelNormal)}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!0}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Eggman=f}),require.register("actor/Eggrobo.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Eggrobo=void 0;var o=e("./PointActor"),i=e("./Projectile"),a=e("curvature/base/Tag"),s=e("../behavior/SkidDust"),c=e("../audio/Sfx");function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,o.PointActor);var e,r,n,g=p(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=g.call.apply(g,[this].concat(r))).behaviors.add(new s.SkidDust),t.args.type="actor-item actor-eggrobo",t.args.accel=.125,t.args.decel=.3,t.args.gSpeedMax=14,t.args.jumpForce=11,t.args.gravity=.5,t.args.width=18,t.args.height=57,t}return e=d,(r=[{key:"onRendered",value:function(t){u(h(d.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite"),this.flame=new a.Tag('<div class = "eggrobo-flame">'),this.muzzleFlash=new a.Tag('<div class = "eggrobo-muzzle-flash">'),this.sprite.appendChild(this.flame.node),this.sprite.appendChild(this.muzzleFlash.node)}},{key:"update",value:function(){var t=this.args.falling;if(this.viewport.args.audio&&!this.shootingSample&&(this.thrusterSound=new Audio("/Sonic/mecha-sonic-thruster.wav"),this.thrusterSound.loop=!0),this.thrusterSound&&(this.thrusterSound.currentTime>.4+Math.random()/10&&(this.thrusterSound.currentTime=.05),this.thrusterSound.volume=.2+-.05*Math.random()),this.box){if(t)this.args.crouching=!1,this.args.jumping&&this.box.setAttribute("data-animation","jumping");else{this.yAxis>0?this.args.crouching=!0:this.args.crouching=!1;var e=this.args.direction,r=this.args.gSpeed,n=Math.abs(r),o=this.args.gSpeedMax;Math.sign(this.args.gSpeed)!==e&&Math.abs(this.args.gSpeed-e)>5?(this.thrusterSound&&this.thrusterSound.pause(),this.box.setAttribute("data-animation","skidding")):n>o/2?(this.thrusterSound&&this.thrusterSound.pause(),this.box.setAttribute("data-animation","running")):this.args.moving&&r?this.box.setAttribute("data-animation","walking"):this.args.crouching||this.standingOn&&this.standingOn.isVehicle?this.box.setAttribute("data-animation","crouching"):this.box.setAttribute("data-animation","standing")}this.args.falling||(this.args.flying=!1),this.args.flying?this.box.setAttribute("data-animation","flying"):this.args.falling&&this.box.setAttribute("data-animation","jumping"),this.args.shotCoolDown>0&&this.args.shotCoolDown--,0==this.args.rocketCoolDown&&this.thrusterSound&&this.thrusterSound.pause(),this.args.rocketCoolDown>0&&this.args.rocketCoolDown--,0==this.args.rocketCoolDown&&(this.args.flying=!1),u(h(d.prototype),"update",this).call(this)}else u(h(d.prototype),"update",this).call(this)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}},{key:"hold_0",value:function(){this.args.falling?(this.args.ySpeed>1||this.args.flying)&&(this.args.flying=!0,this.args.rocketCoolDown<=1&&(this.thrusterSound&&this.thrusterSound.play(),this.args.rocketCoolDown=3),this.args.ySpeed=.999*this.args.ySpeed,this.args.float=3):this.args.rocketCoolDown=5}},{key:"hold_2",value:function(){var t=this;if(!(this.args.shotCoolDown>0)){var e,r,n,o=Math.sign(this.args.direction),a=this.args.groundAngle;switch(this.args.mode){case 0:n=-a-Math.PI/2+Math.PI/4*o,r=-a;break;case 1:n=-a+Math.PI/4*o,r=-a+Math.PI/2;break;case 2:n=-a+Math.PI/2+Math.PI/4*o,r=-a-Math.PI;break;case 3:n=-a-Math.PI+Math.PI/4*o,r=-a-Math.PI/2}e=[50*Math.cos(n),50*Math.sin(n)],(this.args.falling||this.args.crouching)&&(r=0,e=[26*o,-26]);var s=new i.Projectile({direction:this.args.direction,x:this.args.x+e[0]+(this.args.xSpeed||this.args.gSpeed),y:this.args.y+e[1],owner:this,xSpeed:this.args.xSpeed||this.args.gSpeed,YSpeed:this.args.YSpeed});s.impulse(20,r+(o<0?Math.PI:0),!0),s.update(),this.viewport.auras.add(s),this.viewport.spawn.add({object:s}),this.box.setAttribute("data-shooting","true"),this.onTimeout(140,function(){t.box.setAttribute("data-shooting","false")}),c.Sfx.play("SHOT_FIRED"),this.args.shotCoolDown=4}}},{key:"canFly",get:function(){return!0}},{key:"controllable",get:function(){return!0}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.Eggrobo=g}),require.register("actor/Emblem.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Emblem=void 0;var o=e("./PointActor"),i=e("curvature/base/Tag"),a=e("../audio/Sfx");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.PointActor);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call.apply(p,[this].concat(r))).args.width=32,t.args.height=32,t.args.type="actor-item actor-emblem",t.args.float=-1,t.collected=!1,t}return e=h,(r=[{key:"onRendered",value:function(t){return this.viewport.getZoneState().emblems.includes(this.args.id)&&(this.args.type="actor-item actor-emblem actor-emblem-collected",this.collected=!0),c(f(h.prototype),"onRendered",this).call(this,t)}},{key:"collideA",value:function(t){var e=this;if(t.controllable&&!this.gone){var r=this.viewport,n=r.getZoneState();t.args.emblemsCurrent.push(this),this.collected?this.args.type="actor-item actor-emblem actor-emblem-gone actor-emblem-collected":(t.args.emblems.push(this),n.emblems.push(this.args.id),this.args.type="actor-item actor-emblem actor-emblem-gone");var o=document.createElement("div");o.classList.add("particle-score");var s,c=new i.Tag(o);switch(c.style({"--x":this.args.x,"--y":this.args.y-16}),t.args.emblemsCurrent&&t.args.emblemsCurrent.length){case 1:o.classList.add("score-100"),s=100;break;case 2:o.classList.add("score-200"),s=200;break;case 3:o.classList.add("score-500"),s=500;break;case 4:o.classList.add("score-1000"),s=1e3;break;case 5:o.classList.add("score-10000"),s=1e4}r.particles.add(c),setTimeout(function(){return r.particles.remove(c)},768),t.args.score+=s,this.gone=!0,r.onFrameOut(20,function(){r.actors.remove(e)}),r.currentSave.save(),this.viewport.args.audio&&a.Sfx.play("EMBLEM_COLLECTED")}}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Emblem=p}),require.register("actor/Emerald.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Emerald=void 0;var o=e("./PointActor"),i=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="actor-item actor-emerald emerald-"+(t.args.color||"white"),t.args.width=12,t.args.height=12,t}return e=p,(r=[{key:"update",value:function(){s(u(p.prototype),"update",this).call(this);this.viewport}},{key:"collideA",value:function(t){s(u(p.prototype),"collideA",this).call(this,t),this.args.gone||(this.args.type="actor-item actor-emerald collected emerald-"+(this.args.color||"white"),this.args.gone||(i.Sfx.play("EMERALD_COLLECTED"),this.args.type="actor-item actor-emerald collected gone emerald-"+(this.args.color||"white"),t.args.owner?t.args.owner.args.emeralds+=1:t.occupant?t.occupant.args.emeralds+=1:t.args.emeralds+=1,this.viewport.args.emeralds.includes(this.args.color)||this.viewport.args.emeralds.push(this.args.color),this.viewport.actors.remove(this),this.remove()),this.args.gone=!0)}},{key:"solid",get:function(){return!1}},{key:"effect",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Emerald=f}),require.register("actor/Explosion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Explosion=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.PointActor);var e,r,n,f=c(p);function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=f.call.apply(f,[this].concat(i)),e=l(t),n=-1,(r="float")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="actor-item actor-explosion",t.args.width=48,t.args.height=48,t.removeTimer=null,t}return e=p,(r=[{key:"update",value:function(){if(a(u(p.prototype),"update",this).call(this),!this.removeTimer){this.viewport;this.removeTimer=this.onTimeout(360,function(){})}}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Explosion=f}),require.register("actor/FakeEmerald.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FakeEmerald=void 0;var o=e("./BreakableBlock");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.BreakableBlock);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call.apply(u,[this].concat(r))).args.width=64,t.args.height=34,t.args.type="actor-item actor-breakable-block actor-fake-emerald",t.args.z=128,t.args.float=-1,t.breakable=!1,t}return e=f,(r=[{key:"updateStart",value:function(){}},{key:"update",value:function(){a(l(f.prototype),"update",this).call(this),this.switch&&this.switch.args.active&&(this.breakable=!0)}},{key:"collideA",value:function(t,e){return!!this.breakable&&a(l(f.prototype),"collideA",this).call(this,t,e)}},{key:"solid",get:function(){return this.breakable}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.FakeEmerald=u}),require.register("actor/Flickie.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Flickie=void 0;var o=e("./Follower");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Follower);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.type="actor-item actor-flickie",r.args.palletShift=Math.floor(8*Math.random()),r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Flickie=l}),require.register("actor/Flipper.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Flipper=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(t,e){var r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=c.call(this,t,e)).args.width=64,n.args.height=48,n.noClip=!0,n.args.float=-1,n.args.direction=n.args.direction||1,n.args.power=null!==(r=n.args.power)&&void 0!==r?r:12,n.args.type="actor-item actor-flipper",n.args.bindTo("direction",function(t){return n.args.type=t<0?"actor-item actor-flipper actor-flipper-right":"actor-item actor-flipper actor-flipper-left"}),n.flipped=new WeakSet,n}return e=l,(r=[{key:"collideA",value:function(t,e){var r=this;if(!(t.y<=this.y-this.args.height||this.flipped.has(t))){var n=this.x-this.args.direction*this.args.width;if(t.args.rolling=!0,t.willJump=!1,t.buttons[0]&&1===t.buttons[0].time){var o=this.roundAngle(-t.args.groundAngle+-Math.PI/2,16,!0);this.args.animation="flipping",t.args.xSpeed=0,t.args.ySpeed=0,t.args.gSpeed=0;var i=(t.x-n)/this.args.width*.5*this.args.direction;return t.impulse(this.args.power*i,o,!0),this.viewport.onFrameOut(3,function(){return r.args.animation="unflipping"}),t.args.jumping=!1,t.args.falling=!0,this.flipped.add(t),this.viewport.onFrameOut(1,function(){return t.willJump=!1}),this.viewport.onFrameOut(3,function(){return t.args.jumping=!1}),void this.viewport.onFrameOut(5,function(){return r.flipped.delete(t)})}Math.abs(t.args.gSpeed)<3?t.args.gSpeed=Math.min(2,Math.abs(t.args.gSpeed)||1)*Math.sign(t.args.gSpeed||this.args.direction):t.args.gSpeed*=.5}}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Flipper=l}),require.register("actor/Follower.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Follower=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.PointActor);var e,r,n,f=c(p);function p(t,e){var r,n,o,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),r=f.call(this,t,e),n=l(r),i=1,(o="noClip")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,r.args.type="actor-item actor-follower",r.args.float=-1,r.args.width=16,r.args.height=16,r.stopSwapZ=0,r.args.z=-1,r}return e=p,(r=[{key:"update",value:function(){a(u(p.prototype),"update",this).call(this),this.stopSwapZ>0&&this.stopSwapZ--,this.args.standingOn=!1;var t=this.viewport.controlActor;if(t){this.args.falling=!0,this.args.float=-1;var e=Math.random(),r=Math.random(),n=t.x+-this.x,o=t.y+-this.y,i=Math.atan2(o,n),s=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)),c=1.1*Math.max(Math.abs(t.args.gSpeed),Math.abs(t.args.xSpeed),Math.abs(t.args.ySpeed),1),l=this.args.xSpeed-(t.args.xSpeed||t.args.gSpeed),f=c+3,h=null;s<64?(Math.abs(this.args.xSpeed)<1&&(this.args.xSpeed=1*Math.sign(-.5+Math.random())),Math.abs(this.args.ySpeed)<1&&(this.args.ySpeed=1*Math.sign(-.5+Math.random()))):s>=256&&(this.args.x=Math.floor(t.x-256*Math.cos(i)),this.args.y=Math.floor(t.y-256*Math.sin(i)),this.args.xSpeed=n/60+(t.args.xSpeed||t.args.gSpeed),this.args.ySpeed=0,this.viewport.setColCell(this),h=this.x>t.x?"left":"right",f*=4);var g=Math.sign(n),d=Math.sign(o),y=Math.sign(this.args.xSpeed)===g,b=this.args.ySpeed&&Math.sign(this.args.ySpeed)===d,v=.35*Math.max(e)*(y?.85:.55),m=.1*Math.max(e)*(y?.75:1.5);if(!y||Math.abs(this.args.xSpeed)<f){var w=v*g*r,S=this.args.xSpeed+w;if(Math.abs(this.args.xSpeed)>f&&(S=f*Math.sign(this.args.xSpeed)),this.args.xSpeed=S,s>=256){var O=t.args.xSpeed||t.args.gSpeed,k=t.args.ySpeed;h&&(this.args.xSpeed=n/90+O,this.args.ySpeed=o/90+k)}}if(!h&&this.args.xSpeed<0?h="left":h||(h="right"),!b||Math.abs(this.args.ySpeed)<f){var x=this.args.ySpeed+m*d;Math.abs(this.args.ySpeed)>f&&(x=f*Math.sign(this.args.ySpeed)),this.args.ySpeed=x}if(Math.sign(l)&&Math.sign(t.args.xSpeed||t.args.gSpeed)!==Math.sign(l)&&0===this.stopSwapZ&&(Math.abs(this.x-t.x)>64||Math.abs(this.y-t.y)>64)&&(this.args.z=this.args.z>-1e3?-1e5:1e5,this.stopSwapZ=30),h&&(this.args.facing=h),this.args.ySpeed>0){if(this.args.ySpeed<=0||c<1.5)return;this.box&&(this.box.classList.add("decending"),this.box.classList.remove("ascending"))}else this.box&&(this.box.classList.remove("decending"),this.box.classList.add("ascending"))}}},{key:"solid",get:function(){return!1}},{key:"isGhost",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Follower=f}),require.register("actor/Fountain.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Fountain=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.width=72,t.args.height=120,t.args.float=-1,t.args.type="actor-item actor-fountain",t}return e=l,(r=[{key:"collideA",value:function(t){t.controllable&&t.args.falling&&(t.y>this.y+.5*-this.args.height&&(t.args.x=this.x),t.args.ySpeed>0&&(t.args.ySpeed*=.75),t.args.ySpeed>-20&&Math.abs(this.x-t.x)<8&&(t.args.ySpeed-=.6))}},{key:"solid",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Fountain=l}),require.register("actor/GohlaBall.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GohlaBall=void 0;e("./Flickie");var o=e("curvature/base/Mixin"),i=(e("curvature/base/Tag"),e("./PointActor")),a=e("../behavior/SkidDust"),s=e("../mixin/CanPop");e("../actor/Explosion"),e("../actor/Projectile");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(p,o.Mixin.from(i.PointActor,s.CanPop));var e,r,n,f=u(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).behaviors.add(new a.SkidDust),t.args.type="actor-item actor-gohla-ball",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=16,t.args.height=16,t.willStick=!1,t.stayStuck=!1,t}return e=p,(r=[{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.GohlaBall=p}),require.register("actor/GrapplePoint.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GrapplePoint=void 0;var o=e("./PointActor"),i=(e("curvature/base/Tag"),e("./Spring")),a=e("curvature/base/Mixin"),s=e("../mixin/Constrainable");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,a.Mixin.from(o.PointActor,s.Constrainable));var e,r,n,h=f(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=h.call.apply(h,[this].concat(r))).args.width=22,t.args.height=32,t.args.type="actor-item actor-grapple-point",t.ignoreOthers=new Set,t.args.gravity=.6,t.noClip=!0,t[i.Spring.WontSpring]=!0,t}return e=g,(r=[{key:"updateEnd",value:function(){l(p(g.prototype),"update",this).call(this);var t=this.args._tiedTo;t?this.setPos():this.noClip=!0,t||this.unhook(),this.args.falling=!0,this.hooked&&(this.hooked.xAxis&&this.args.ySpeed>0&&(Math.sign(this.args.xSpeed)||Math.sign(this.args.xSpeed)===Math.sign(this.hooked.xAxis))&&(this.y>t.y?this.args.xSpeed+=.25*this.hooked.xAxis:this.args.xSpeed-=.25*this.hooked.xAxis),this.hooked.args.x=this.x,this.hooked.args.y=this.y+this.hooked.args.height+-5,this.hooked.args.xSpeed=0,this.hooked.args.ySpeed=0,this.hooked.args.groundAngle=0,this.hooked.xAxis>0?(this.hooked.args.facing="right",this.hooked.args.direction=1):this.hooked.xAxis<0&&(this.hooked.args.facing="left",this.hooked.args.direction=-1),this.hooked.args.cameraMode="hooked"),l(p(g.prototype),"updateEnd",this).call(this)}},{key:"update",value:function(){this.args.tiedTo&&(this.args._tiedTo||(this.args._tiedTo=this.viewport.actorsById[this.args.tiedTo]))}},{key:"collideB",value:function(t){var e=this,r=this.args._tiedTo;if(!r||r.noClip)return!1;if(!t.args.hangingFrom&&!this.ignoreOthers.has(t)){if(this.args.ignore)return!1;if(!(t.args.falling&&Math.abs(t.args.y-this.args.y)>8||!t.controllable||this.hooked)&&(t.args.falling=!0,t.swing=!0,this.hooked=t,this.viewport.auras.add(this),this.args.xSpeed=t.args.xSpeed||t.args.gSpeed,this.args.ySpeed=t.args.ySpeed,t.args.xSpeed=0,t.args.ySpeed=0,t.args.gSpeed=0,t.args.ignore=-4,t.args.float=-1,t.xLast=t.args.x,t.yLast=t.args.y,t.args.x=this.args.x,t.args.y=this.args.y+t.args.height,t.args.hangingFrom=this,t.args.jumping=!1,this.args._tiedTo)){var n=this.args._tiedTo;n.dispatchEvent(new CustomEvent("hooked"),{detail:{hook:this,subject:t}}),n.activate&&n.activate();var o=function(){e.viewport&&e.hooked&&(e.unhook(),n.explode&&(e.hooked&&(e.hooked.args.gSpeed=0),n.explode(),e.args.x=e.def.get("x"),e.args.y=e.def.get("y"),e.viewport.setColCell(e)))};n.args.flightTime&&this.viewport.onFrameOut(n.args.flightTime,o),n.onRemove(o),n.addEventListener("exploded",o)}}}},{key:"unhook",value:function(){var t=this,e=this.hooked;if(this.hooked=null,e){var r=this.args._tiedTo;e.args.ignore=e.args.float=0,e.args.y++,e.args.xSpeed+=r.xSpeedLast||this.xSpeedLast||0,e.args.ySpeed+=r.ySpeedLast||this.ySpeedLast||0,e.args.groundAngle=0,e.args.hangingFrom=null,this.ignoreOthers.add(e),e.args.falling=!0,e.args.jumping=!0;var n=this.viewport;n.onFrameOut(15,function(){t.ignoreOthers.delete(e),n.auras.delete(t)})}}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.GrapplePoint=h}),require.register("actor/Grounder.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Grounder=void 0;e("./Flickie");var o=e("curvature/base/Mixin"),i=e("./PointActor"),a=e("../behavior/Patrol"),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,o.Mixin.from(i.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(n=h.call.apply(h,[this].concat(i))).behaviors.add(new a.Patrol),n.args.type="actor-item actor-grounder",n.args.animation="standing",n.args.accel=.1,n.args.decel=.5,n.args.gSpeedMax=5,n.args.jumpForce=5,n.args.gravity=.5,n.args.width=24,n.args.height=32,n.willStick=!1,n.stayStuck=!1,n.args.patrolPause=null!==(t=n.args.patrolPause)&&void 0!==t?t:20,n.args.patrolBeat=null!==(e=n.args.patrolBeat)&&void 0!==e?e:120,n.args.patrolSpeed=null!==(r=n.args.patrolSpeed)&&void 0!==r?r:1,n.age=0,n}return e=g,(r=[{key:"update",value:function(){this.args.direction,this.args.shotTelegraph,this.args.patrolBeat;this.box&&(this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")),l(p(g.prototype),"update",this).call(this),this.args.direction=Math.sign(this.args.gSpeed),this.age++}},{key:"effect",value:function(t){l(p(g.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Grounder=h}),require.register("actor/GuardBot.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GuardBot=void 0;e("./Flickie");var o=e("curvature/base/Mixin"),i=(e("curvature/base/Tag"),e("./PointActor")),a=e("../behavior/SkidDust"),s=e("../mixin/CanPop");e("../actor/Explosion"),e("../actor/Projectile");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(p,o.Mixin.from(i.PointActor,s.CanPop));var e,r,n,f=u(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).behaviors.add(new a.SkidDust),t.args.type="actor-item actor-guard-bot",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=24,t.args.height=24,t.args.static=!0,t.willStick=!1,t.stayStuck=!1,t}return e=p,(r=[{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.GuardBot=p}),require.register("actor/HeavyDutySwitch.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HeavyDutySwitch=void 0;var o=e("./Switch");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Switch);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.type="actor-item actor-switch actor-heavy-duty-switch",t.args.height=t.height=19,t}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.HeavyDutySwitch=l}),require.register("actor/HtmlFrame.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlFrame=void 0;var o=e("./PointActor"),i=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.PointActor);var e,r,n,f=c(p);function p(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=f.call(this,r,n)).args.yForce=0,e.args.yLean=0,e.args.type="actor-item actor-html-frame",e.args.width=r.width||32,e.args.height=r.height||32,e.originalX=e.args.x,e.originalY=e.args.y,e.args.z=-1e3,e.args.static=!0,e.args.gravity=.5,e.args.collapse=null!==(t=r.collapse)&&void 0!==t&&t,e.args.url="https://www.youtube.com/embed/pxIofYrt0kE?controls=0&autoplay=1",e}return e=p,n=[{key:"fromDef",value:function(t){var e=l(u(p),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e.args.tileId=t.gid,e.args.y=e.originalY=t.y,e}}],(r=[{key:"onRendered",value:function(t){var e=this;l(u(p.prototype),"onRendered",this).call(this,t),this.droop(0),this.screen||(this.screen=new i.Tag('<iframe width="560" height="315" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'),this.sprite.appendChild(this.screen.node),this.screen.style({"pointer-events":"initial"}),this.args.spriteSheet=this.args.spriteSheet||"/Sonic/marble-zone-block.png",this.args.bindTo("url",function(t){return e.screen.src=t}),this.args.bindTo("html",function(t){return e.screen.srcDoc=t}))}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.HtmlFrame=f}),require.register("actor/Jawz.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Jawz=void 0;e("./Flickie");var o=e("./Spring"),i=e("curvature/base/Mixin"),a=(e("curvature/base/Tag"),e("./PointActor")),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,i.Mixin.from(a.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=h.call.apply(h,[this].concat(r))).args.type="actor-item actor-jawz",t[o.Spring.WontSpring]=!0,t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=56,t.args.height=16,t.willStick=!1,t.stayStuck=!1,t.args.float=-1,t.noClip=!0,t}return e=g,(r=[{key:"onRendered",value:function(){l(p(g.prototype),"onRendered",this).call(this),this.box.setAttribute("data-animation","standing")}},{key:"update",value:function(){this.args.facing="left",this.args.xSpeed>-4&&(this.args.xSpeed-=.2),this.args.ySpeed=0,this.args.falling=!0,this.args.flying=!0,l(p(g.prototype),"update",this).call(this)}},{key:"effect",value:function(t){l(p(g.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Jawz=h}),require.register("actor/Knuckles.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Knuckles=void 0;var o=e("./PointActor"),i=e("../behavior/Platformer"),a=e("curvature/base/Tag"),s=e("./KnuxBomb"),c=e("./Spring"),l=e("../behavior/SkidDust");function u(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=b(t);if(e){var i=b(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}(this,r)}}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(v,o.PointActor);var e,r,n,f=d(v);function v(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),(r=f.call(this,t,e)).args.canonical="Knuckles",window.knuckles=y(r),r.behaviors.add(new l.SkidDust),r.args.type="actor-item actor-knuckles",r.jumpForceNormal=9.5,r.jumpForceSuper=10,r.accelNormal=.15,r.accelSuper=.22,r.args.accel=r.accelNormal,r.args.decel=.4,r.args.weight=150,r.args.gSpeedMax=18,r.args.jumpForce=r.jumpForceNormal,r.args.gravity=.5,r.args.punchCharge=0,r.args.width=15,r.args.height=41,r.args.normalHeight=41,r.args.rollingHeight=28,r.punchTime=0,r.punched=0,r.beforePunch="standing",r.bombsDropped=0,r.sparks=new Set,r.args.bindTo("falling",function(t){!t&&r.args.flying&&(1!==r.args.mode&&2!==r.args.mode&&3!==r.args.mode||(r.args.climbing=!0,r.args.gSpeed=0,r.args.xSpeed=0,r.args.ySpeed=0))}),r}return e=v,(r=[{key:"onRendered",value:function(t){var e=this;h(b(v.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.punchAura=new a.Tag('<div class = "punch-aura">'),this.punchAura.style({display:"none"}),this.sprite.appendChild(this.punchAura.node),this.args.bindTo("animation",function(t){return e.box.setAttribute("data-animation",t)}),this.addEventListener("jump",function(t){e.willPunch&&(e.punchTime=Date.now(),e.punched++)})}},{key:"update",value:function(){var t=this,e=this.args.falling,r=this.args.gSpeed;if(this.box){if(this.throwing&&Date.now()-this.throwing>320){this.throwing=!1,this.holdBomb=!1;var n=new s.KnuxBomb({x:this.args.x,y:this.args.y-16,owner:this,xSpeed:10*this.args.direction+(2*Math.random()-1),ySpeed:-2*Math.random()});this.viewport.spawn.add({object:n})}if(this.readying=!1,!this.args.falling&&this.punchTime&&Date.now()-this.punchTime>(this.willPunch?1536:384)&&(this.punchMomentum=0,this.punchTime=!1,this.willPunch=!1,this.punching=!1,this.punched=0),this.punchTime&&Date.now()-this.punchTime>256&&(this.readying=!0),this.punchTime&&Date.now()-this.punchTime>128&&(this.punching=!0),this.punching&&(this.args.rolling=!1),this.punched&&Math.abs(this.args.gSpeed)>5&&!this.auraVisible&&(this.punched>=3||Math.abs(this.args.gSpeed)>15)&&(this.auraVisible=!0,this.viewport.onFrameOut(6,function(){t.punchAura.style({display:"none"}),t.auraVisible=!1}),this.punchAura.style({display:"initial"})),this.willPunch?(this.args.punchCharge<10&&(this.args.punchCharge+=1),this.punchMomentum=Math.sign(this.punchMomentum)*Math.max(Math.abs(this.punchMomentum),this.args.punchCharge*(.3*Math.min(this.punched,3)))):!this.punched&&this.args.punchCharge>4?this.args.punchCharge-=4:!this.punched&&this.args.punchCharge>0&&(this.args.punchCharge=0),this.willStick=!1,this.stayStuck=!1,e)this.springing&&(this.args.groundAngle=0),this.args.flying?this.args.animation="flying":this.args.jumping&&(this.willPunch||this.punching?(this.args.animation="uppercut",this.punched++,this.punchAura.style({display:"initial"}),this.auraVisible=!0,this.viewport.onFrameOut(15,function(){t.punchAura.style({display:"none"}),t.auraVisible=!1})):this.punched||(this.args.animation="jumping")),this.args.climbing&&!this.args.jumping&&(this.args.ySpeed=0,this.args.xSpeed=0,this.args.ignore=10,this.args.falling=!1,this.args.animation="walking",this.args.groundAngle=0,1===this.args.mode?this.args.x+=-4:3===this.args.mode&&(this.args.x+=4),this.args.mode=0);else{this.bombsDropped=0,this.springing=!1;var o=this.args.direction,c=this.args.gSpeed,l=Math.abs(c),f=this.args.gSpeedMax;this.args.flying&&(this.args.flying=!1,this.args.float=0),this.args.knucklesFlyCoolDown=15,this.args.flying=!1,this.args.rolling?this.args.animation="rolling":this.args.climbing?this.args.modeTime<2||0===this.yAxis?(this.args.animation="climbing",this.args.gSpeed=0):this.yAxis<0?(this.args.animation="climbing-up",Math.abs(this.args.gSpeed)<4&&(this.args.direction=1===this.args.mode?1:-1,this.args.gSpeed+=-this.args.direction)):this.yAxis>0&&(this.args.animation="climbing-down",Math.abs(this.args.gSpeed)<4&&(this.args.direction=1===this.args.mode?1:-1,this.args.gSpeed+=this.args.direction)):Math.sign(this.args.gSpeed)!==o&&Math.abs(this.args.gSpeed-o)>5?this.args.animation="skidding":this.holdBomb?this.args.animation="hold-bomb":this.throwing?this.args.animation="throw-bomb":this.readying||this.willPunch?this.args.animation="readying":!this.readying&&this.punched?this.punched%2?this.args.animation="jabbing":this.args.animation="punching":l>.75*f?this.args.animation="running":this.args.moving&&this.args.gSpeed?this.args.animation="walking":this.args.animation="standing",this.args.grinding&&(this.args.rolling=!1,this.args.animation="grinding")}if(this.args.flying){if(this.yAxis>0||this.bMap("checkBelow",this.x,this.y).get(i.Platformer))return void(this.args.flying=!1);this.args.ySpeed>0&&(this.args.ySpeed=0),this.args.ySpeed<1&&(this.args.ySpeed+=1),this.args.ySpeed>1&&(this.args.ySpeed-=1),this.xAxis&&(this.args.flyDirection=Math.sign(this.xAxis)),this.args.direction=Math.sign(this.args.xSpeed),this.args.direction<0?this.args.facing="left":this.args.facing="right",this.args.flyDirection&&Math.abs(this.args.xSpeed)<16&&(this.args.flyDirection!==Math.sign(this.args.xSpeed)?this.args.xSpeed+=.15625*Math.sign(this.args.flyDirection)*4:this.args.xSpeed+=.15625*Math.sign(this.args.flyDirection)),Math.abs(this.args.xSpeed)>18&&(this.args.xSpeed=18*Math.sign(this.args.xSpeed)),this.args.float=3,this.willStick=!0,this.stayStuck=!0,this.args.groundAngle=0}else(this.args.mode%2==0||this.args.groundAngle)&&(this.args.flyDirection=0);if(this.args.knucklesFlyCoolDown>0&&this.args.knucklesFlyCoolDown--,h(b(v.prototype),"update",this).call(this),this.willPunch&&!r&&(this.args.gSpeed=0),0!==this.args.mode&&2!==this.args.mode||(this.args.climbing=!1),this.args.grinding&&!this.args.falling&&this.args.gSpeed){var p=new a.Tag('<div class = "particle-sparks">'),g=new a.Tag('<div class = "envelope-sparks">');g.appendChild(p.node);var d=this.rotatePoint(1.75*-this.args.gSpeed*this.args.direction,8),y=Math.sign(this.args.gSpeed);g.style({"--x":d[0]+this.x,"--y":d[1]+this.y+-3*Math.random,"z-index":0,"animation-delay":.25*-Math.random()+"s","--xMomentum":Math.max(Math.abs(this.args.gSpeed),4)*y,"--flip":y,"--angle":this.realAngle,opacity:2*Math.random()}),g.particle=p,this.viewport.particles.add(g),this.sparks.add(g),this.viewport.onFrameOut(30,function(){t.viewport.particles.remove(g),t.sparks.delete(g)})}if(this.args.grinding&&(this.args.rolling=!1,this.args.animation="grinding"),this.args.hangingFrom&&(this.args.animation="hanging"),this.args.falling&&this.springing&&this.args.ySpeed>=0?this.args.animation="dropping":this.args.falling&&this.springing&&(this.args.animation="springdash"),this.args.standingOn&&this.args.standingOn.isVehicle&&(this.args.animation=this.args.standingOn.ridingAnimation||"standing"),this.sparks.size){var m,w=u(this.sparks);try{for(w.s();!(m=w.n()).done;){var S=m.value,O=this.rotatePoint(1.75*this.args.direction,8);S.style({opacity:2*Math.random(),"--x":O[0]+this.x,"--y":O[1]+this.y})}}catch(t){w.e(t)}finally{w.f()}}this.args.dead&&(this.args.animation="dead"),this.box.style({"--punchCharge":this.args.punchCharge})}else h(b(v.prototype),"update",this).call(this)}},{key:"startle",value:function(){var t=this;h(b(v.prototype),"startle",this).call(this),this.onNextFrame(function(){return t.args.animation="startle"})}},{key:"dropBomb",value:function(){this.args.falling&&(this.args.ySpeed=-8);var t=new s.KnuxBomb({x:this.args.x,y:this.args.y-16,owner:this,xSpeed:this.args.xSpeed,ySpeed:-3});this.viewport.spawn.add({object:t})}},{key:"release_0",value:function(){h(b(v.prototype),"release_0",this).call(this)}},{key:"command_0",value:function(){this.args.hangingFrom?h(b(v.prototype),"command_0",this).call(this):(h(b(v.prototype),"command_0",this).call(this),this.args.jumping&&!this.willPunch&&this.args.falling&&(this.args.flying=!0,this.args.xSpeed=9*this.args.direction,this.args.willJump=!1))}},{key:"readyStart",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!(this.args.flying||this.args.climbing||this.args.falling)){if(this.readyButton=e,this.punchTime&&Date.now()-this.punchTime<108)return this.punchMomentum=0,this.args.ignore=16,this.willPunch=!1,this.punchTime=!1,void(this.punched=0);this.willPunch=!0;var r=Math.sign(this.xAxis||t||this.args.direction);if(this.args.direction=Math.sign(r||this.punchMomentum),this.args.facing=r<0?"left":"right",this.punchTime)return this.args.ignore=15,this.args.gSpeed=0,void(this.punchTime=!1);this.punchMomentum=Math.abs(this.punchMomentum||this.args.gSpeed||4)*Math.sign(r||this.xAxis),this.args.ignore=15,this.args.gSpeed=0}}},{key:"readyStop",value:function(t,e){if(this.readyButton===e&&!(this.args.flying||this.args.climbing||this.args.falling)){if(this.punchTime&&Date.now()-this.punchTime<64)return this.willPunch=!1,this.punchMomentum=0,void(this.punched=0);var r=Math.sign(this.xAxis||t||this.args.direction);if(r&&Math.sign(r)!==Math.sign(this.punchMomentum)?r&&(this.punchMomentum=Math.abs(this.punchMomentum)*r,this.args.gSpeed=1*(r?Math.abs(this.punchMomentum)*r:this.punchMomentum)):this.args.gSpeed=r?Math.abs(this.punchMomentum)*r:this.punchMomentum,this.args.direction=Math.sign(r||this.punchMomentum),this.args.facing=r<0?"left":"right",this.punchTime=Date.now(),this.willPunch=!1,!this.args.falling&&this.args.gSpeed){var n=new a.Tag('<div class = "particle-dust">'),o=Math.sign(this.args.gSpeed)*this.dustDist||0,i=this.rotatePoint(this.args.gSpeed,0);n.style({"--x":i[0]+o+this.x,"--y":i[1]+this.y,"z-index":0,opacity:.5*Math.pow(Math.random(),2)+.5}),viewport.particles.add(n),viewport.onFrameOut(20,function(){viewport.particles.remove(n)})}this.throwing||this.args.climbing||this.punched++}}},{key:"command_1",value:function(){this.readyStart(0,1)}},{key:"release_1",value:function(){this.readyStop(0,1)}},{key:"command_4",value:function(){this.readyStart(-1,4)}},{key:"release_4",value:function(){this.readyStop(-1,4)}},{key:"command_5",value:function(){this.readyStart(1,5)}},{key:"release_5",value:function(){this.readyStop(1,5)}},{key:"command_2",value:function(){if(!this.args.ignore&&this.args.falling&&!this.args.flying&&this.bombsDropped<3)return this.dropBomb(),void this.bombsDropped++;this.args.falling||this.args.climbing||Math.abs(this.args.gSpeed)>3||this.punchTime||this.throwing||(this.holdBomb=Date.now(),this.args.ignore=-1,this.args.gSpeed=0)}},{key:"release_2",value:function(){this.args.falling||this.args.climbing||Math.abs(this.args.gSpeed)>3||this.holdBomb&&(this.args.ignore=4,this.holdBomb=!1,this.throwing=Date.now())}},{key:"setCameraMode",value:function(){this.args.climbing?this.args.cameraMode="aerial":h(b(v.prototype),"setCameraMode",this).call(this)}},{key:"collideA",value:function(t){var e=this;t instanceof c.Spring&&this.onNextFrame(function(){e.args.falling&&(e.springing=!0,e.args.animation="springdash")})}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!this.args.climbing}},{key:"canFly",get:function(){return!0}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!this.args.npc}}])&&p(e.prototype,r),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),v}();t.Knuckles=v}),require.register("actor/KnuxBomb.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.KnuxBomb=void 0;var o=e("./PointActor"),i=(e("../actor/Explosion"),e("curvature/base/Tag"));e("../region/Region"),e("./Spring");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="actor-item actor-knux-bomb",t.args.width=16,t.args.height=16,t.removeTimer=null,t}return e=p,(r=[{key:"update",value:function(){var t=this;this.removed||(s(u(p.prototype),"update",this).call(this),this.args.xSpeed||this.args.ySpeed||this.args.gSpeed||(this.removeTimer=this.onTimeout(250,function(){return t.explode()})),this.removeTimer||(this.removeTimer=this.onTimeout(1500,function(){return t.explode()})))}},{key:"explode",value:function(){var t=this.viewport;if(t){var e=new i.Tag('<div class = "particle-explosion">');e.style({"--x":this.x,"--y":this.y}),t.particles.add(e),setTimeout(function(){return t.particles.remove(e)},350),this.viewport.actors.remove(this),this.remove()}}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!1}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.KnuxBomb=f}),require.register("actor/LayerController.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LayerController=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(t,e){var r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(o=c.call(this,t,e)).args.activated=!1,o.args.xLayer=0,o.args.yLayer=0,o.args.xLayerSpeed=0,o.args.yLayerSpeed=0,o.args.yLayerSpeedMax=o.args.yLayerSpeedMax||9,o.args.fall=null===(r=o.args.fall)||void 0===r||r,o.args.xLayerLimit=o.args.xLayerLimit||null,o.args.yLayerLimit=o.args.yLayerLimit||null,o.args.yQuake=null!==(n=o.args.yQuake)&&void 0!==n?n:5,o.args.static=!0,o.args.hidden=!0,o}return e=l,(r=[{key:"updateStart",value:function(){if(this.viewport){this.args.activated&&this.args.fall&&(this.args.yLayerSpeed+=.25),this.args.activated&&this.args.swim&&(this.args.xLayerSpeed+=1),this.args.yLayerSpeed>this.args.yLayerSpeedMax&&this.args.yLayerSpeedMax>0&&(this.args.yLayerSpeed=this.args.yLayerSpeedMax),this.args.xLayerSpeed>this.args.xLayerSpeedMax&&this.args.xLayerSpeedMax>0&&(this.args.xLayerSpeed=this.args.xLayerSpeedMax),this.args.yLayerSpeed&&(this.args.yLayer=Math.round(this.args.yLayer+this.args.yLayerSpeed||0)),this.args.xLayerSpeed&&(this.args.xLayer=Math.round(this.args.xLayer+this.args.xLayerSpeed||0));var t=this.viewport.tileMap.mapData.tileheight,e=this.viewport.tileMap.mapData.width,r=this.viewport.tileMap.mapData.height,n=this.viewport.tileMap.meta.wrapX?1/0:e*t,o=this.viewport.tileMap.meta.wrapY?1/0:r*t;if(this.args.yLayerLimit>0&&this.args.yLayer>o&&this.args.yLayer>this.args.yLayerLimit){if(this.args.yLayerSpeed=0,this.args.yLayer=this.args.yLayerLimit,this.args.target){var i=this.viewport.actorsById[this.args.target];this.viewport.auras.delete(i)}this.viewport.auras.delete(this)}if(this.args.xLayerLimit>0&&(this.args.xLayer>n||this.args.xLayer>this.args.xLayerLimit)){if(this.args.xLayerSpeed=0,this.args.xLayer=this.args.xLayerLimit,this.args.target){var a=this.viewport.actorsById[this.args.target];this.viewport.auras.delete(a)}this.viewport.auras.delete(this)}}}},{key:"activate",value:function(t,e){var r,n=this;if(!this.args.activated&&(this.args.x=t.x,this.args.y=t.y,this.viewport.auras.add(this),this.viewport.args.shakeY=this.args.yQuake,this.viewport.onFrameOut(90,function(){n.args.activated=!0}),this.args.yLayerLimit=null!==(r=this.args.yLayerLimit)&&void 0!==r?r:4096,this.args.target&&this.viewport.actorsById[this.args.target])){var o=this.viewport.actorsById[this.args.target];this.viewport.auras.add(o),o.activate(t,this)}}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.LayerController=l}),require.register("actor/LayerSwitch.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LayerSwitch=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,o.PointActor);var e,r,n,f=s(p);function p(){var t,e,r,n,o,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=f.call.apply(f,[this].concat(s)),n=c(r),i=-1,(o="float")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,r.args.type="actor-item actor-layer-switch",r.args.width=32,r.args.height=32,r.static=!0,r.args.fromLayer=null!==(t=r.args.fromLayer)&&void 0!==t?t:1,r.args.toLayer=null!==(e=r.args.toLayer)&&void 0!==e?e:2,r}return e=p,n=[{key:"fromDef",value:function(t){var e=l(u(p),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e}}],(r=[{key:"onAttach",value:function(t){return t&&t.preventDefault(),!1}},{key:"collideA",value:function(t,e){var r=this,n=t.args.gSpeed||t.args.xSpeed||t.args.direction||t.xAxis,o=!!Number(this.args.back),i=!!Number(this.args.roll),a=(2===t.args.mode||t.args.mode,this.args.width/2);if(!(t.x<this.x+-a+0||t.x>this.x+a+-0||t.y<this.y+-this.args.height||t.y>this.y)){if(i&&(!t.args.rolling||t.args.height>28))return t.args.layer=s===this.args.fromLayer?this.args.toLayer:this.args.fromLayer,!1;o&&t.args.falling&&(n=t.args.xSpeed||t.args.direction,o=!o);var s=t.args.layer;n>0&&(s=o?this.args.fromLayer:this.args.toLayer),n<0&&(s=o?this.args.toLayer:this.args.fromLayer),this.viewport.tileMap.getSolid(t.x,t.y,s)?this.viewport.onFrameOut(1,function(){r.viewport.tileMap.getSolid(t.x,t.y,s)||(t.args.layer=s)}):t.args.layer=s}}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.LayerSwitch=f}),require.register("actor/Magnet.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Magnet=void 0;var o=e("./PointActor"),i=e("curvature/base/Mixin"),a=e("../mixin/Constrainable");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.Mixin.from(o.PointActor,a.Constrainable));var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call.apply(p,[this].concat(r))).args.gravity=.8,t.args.width=48,t.args.height=28,t.args.type="actor-item actor-magnet",t}return e=h,(r=[{key:"collideA",value:function(t,e){}},{key:"collideB",value:function(t){t.controllable}},{key:"update",value:function(){c(f(h.prototype),"update",this).call(this),this.setPos()}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Magnet=p}),require.register("actor/MarbleBlock.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MarbleBlock=void 0;var o=e("./PointActor"),i=e("../behavior/Platformer");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="actor-item actor-block-marble",t.args.width=32,t.args.height=32,t.args.spriteSheet=t.args.spriteSheet||"/Sonic/marble-zone-block.png",t}return e=p,(r=[{key:"collideA",value:function(t,e){if(s(u(p.prototype),"collideA",this).call(this,t,e),t.isEffect)return!1;if(!this.isPushable)return!0;var r=Math.ceil(Math.abs(t.args.gSpeed||t.args.xSpeed))*Math.sign(t.args.gSpeed||t.args.xSpeed);if(!this.args.falling&&1===e&&r<=0)return!1;if(!this.args.falling&&3===e&&r>=0)return!1;var n=this.y-this.args.height;if((1===e||3===e)&&(t.y>=this.y||t.y>n)){if(!r)return!0;if(this.args.pushed=Math.sign(t.args.gSpeed)||this.args.pushed,this.args.pushed<0&&this.getMapSolidAt(this.x-Math.ceil(this.args.width/2)-1,this.y+-1))return!0;if(this.args.pushed>0&&this.getMapSolidAt(this.x+Math.ceil(this.args.width/2)+1,this.y+-1))return!0;var o=this.viewport.tileMap,a=1===e?1:3===e&&-1,c=this.scanBottomEdge(a);if(o.getSolid(this.x+Math.ceil(this.args.width/2)*a,this.y))return!0;var l=this.args.width/2;if(a>0&&0===c)this.args.falling=!0,t.args.ignore=t.args.ignore||1,t.args.gSpeed=0;else if(a<0&&0===c)this.args.falling=!0,t.args.ignore=t.args.ignore||1,t.args.gSpeed=0;else if(!this.args.falling||c>0){var f=this.bMap("findNextStep",a).get(i.Platformer),h=this.bMap("findNextStep",a+l*Math.sign(a)).get(i.Platformer);if((!f[1]||f[2])&&!h[3]){var g=t.args.width/2,d=this.args.width/2;if(Math.abs(this.x-t.x)<=g+d){this.args.x=t.args.x+a*(d+g);var y=Math.sign(t.args.gSpeed);Math.sign(this.x-t.x)===y&&(t.args.pushing=y);var b=this.args.weight/t.args.weight;t.args.gSpeed-=.005*b*Math.sign(t.args.gSpeed)}return 0===c}return!0}}return!(t.args.ySpeed<0)}},{key:"onAttach",value:function(){this.args.spriteSheet=this.args.spriteSheet||"/Sonic/marble-zone-block.png",this.setTile()}},{key:"isPushable",get:function(){return!0}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!0}},{key:"rotateLock",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.MarbleBlock=f}),require.register("actor/Marker.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.type="actor-item actor-marker",t.args.width=64,t.args.height=64,t.args.float=-1,t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Marker=l}),require.register("actor/MechaFroggy.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MechaFroggy=void 0;var o=e("./PointActor"),i=e("curvature/base/Tag"),a=e("../behavior/SkidDust");e("../actor/Explosion"),e("../actor/Projectile");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.PointActor);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call.apply(p,[this].concat(r))).behaviors.add(new a.SkidDust),t.args.type="actor-item actor-mecha-froggy",t.args.animation="standing",t.args.accel=.7,t.args.decel=.5,t.args.gSpeedMax=10,t.args.jumpForce=15,t.args.gravity=.5,t.args.width=15,t.args.height=32,t.willStick=!1,t.stayStuck=!1,t}return e=h,(r=[{key:"update",value:function(){var t=this.args.direction;this.flame||(this.flame=new i.Tag('<div class = "mecha-froggy-flame">'),this.sprite.appendChild(this.flame.node)),this.args.jumping&&!this.args.falling||(Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?this.box.setAttribute("data-animation","skidding"):this.args.moving&&this.args.gSpeed&&Math.abs(this.args.gSpeed)>=10?this.box.setAttribute("data-animation","running"):this.args.moving&&this.args.gSpeed&&Math.abs(this.args.gSpeed)?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")),this.args.jumping&&this.box.setAttribute("data-animation","jumping"),c(f(h.prototype),"update",this).call(this)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!0}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.MechaFroggy=p}),require.register("actor/MechaSonic.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MechaSonic=void 0;var o=e("./PointActor"),i=e("../behavior/Platformer"),a=(e("./Vehicle"),e("curvature/base/Tag")),s=e("../audio/Sfx"),c=e("../behavior/SkidDust");function l(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=d(t);if(e){var i=d(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(y,o.PointActor);var e,r,n,u=g(y);function y(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call.apply(u,[this].concat(r))).behaviors.add(new c.SkidDust("particle-sparks")),t.args.type="actor-item actor-mecha-sonic",t.args.accel=.1,t.args.decel=.3,t.args.skidTraction=2,t.args.gSpeedMax=18,t.args.jumpForce=11,t.args.gravity=.5,t.args.takeoffPlayed=!1,t.args.rollingHeight=28,t.args.normalHeight=44,t.args.width=18,t.args.height=t.args.normalHeight,t.args.bindTo("falling",function(e){e||t.landSound()}),t}return e=y,(r=[{key:"onRendered",value:function(t){p(d(y.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite")}},{key:"update",value:function(){var t=this;if(this.sprite){var e=this.args.falling;this.args.accel=.1;var r=this.args.direction,n=this.args.gSpeed,o=Math.abs(n),i=.5*this.args.gSpeedMax;this.flame||(this.sparks=new a.Tag('<div class = "mecha-sonic-sparks">'),this.flame=new a.Tag('<div class = "mecha-sonic-flame">'),this.sprite.appendChild(this.sparks.node),this.sprite.appendChild(this.flame.node)),this.viewport.args.audio&&!this.thrusterSound&&(this.thrusterSound=new Audio("/Sonic/mecha-sonic-thruster.wav"),this.scrapeSound=new Audio("/Sonic/mecha-sonic-scrape.wav"),this.scrapeSound.volume=.1,this.thrusterSound.loop=!0,this.scrapeSound.loop=!0),this.thrusterSound&&(this.thrusterSound.volume=.15+-.05*Math.random(),this.thrusterSound.currentTime>1.5&&(this.thrusterSound.currentTime=.5),this.scrapeSound.currentTime>1.5&&(this.scrapeSound.currentTime=.5)),e||(this.dashed=!1),this.args.rolling||e?this.args.rolling?(this.scrapeSound&&this.scrapeSound.pause(),"curling"!==this.args.animation&&"uncurling"!==this.args.animation&&"rolling"!==this.args.animation&&"jumping"!==this.args.animation&&(this.args.animation="crouching",this.onTimeout(200,function(){t.args.rolling&&(t.args.animation="rolling",t.closeThruster())}))):(this.scrapeSound&&this.scrapeSound.pause(),this.dashed?this.args.animation="running2":"rolling"!==this.args.animation&&"jumping"!==this.args.animation&&"uncurling"!==this.args.animation&&"curling"!==this.args.animation&&"crouching"!==this.args.animation?(this.args.animation="curling",this.onTimeout(200,function(){s.Sfx.play("MECHASONIC_SLAP"),t.args.falling&&(t.dashed?t.args.animation="running2":t.args.jumping&&(t.args.animation="jumping"),t.closeThruster())})):this.args.jumping||(this.args.animation="crouching")):(this.yAxis>0?this.args.crouching=!0:this.args.crouching=!1,Math.sign(this.args.gSpeed)!==r&&Math.abs(this.args.gSpeed-r)>5?(this.scrapeSound&&this.scrapeSound.play(),this.args.animation="skidding"):o>=i?(this.scrapeSound&&this.scrapeSound.pause(),this.args.animation="running2",this.thrusterSound&&this.thrusterSound.play(),this.args.takeoffPlayed||(this.args.takeoffPlayed=!0,s.Sfx.play("MECHASONIC_TAKEOFF")),this.args.accel=.75,o>75&&(this.args.accel=.03)):o>=10?(this.scrapeSound&&this.scrapeSound.play(),this.args.animation="running"):this.args.moving&&n?(this.scrapeSound&&this.scrapeSound.play(),"curling"===this.args.animation||"jumping"===this.args.animation||"rolling"===this.args.animation?(this.args.animation="uncurling",this.onTimeout(128,function(){t.args.animation="walking"})):"standing"!==this.args.animation&&"running"!==this.args.animation&&"running2"!==this.args.animation||(this.args.animation="walking")):this.args.crouching||this.standingOn&&this.standingOn.isVehicle?this.args.animation="crouching":(this.scrapeSound&&this.scrapeSound.pause(),"curling"===this.args.animation||"jumping"===this.args.animation||"rolling"===this.args.animation?(this.args.animation="uncurling",this.onTimeout(128,function(){t.args.animation="standing"})):"walking"!==this.args.animation&&"running"!==this.args.animation&&"running2"!==this.args.animation&&"skidding"!==this.args.animation&&"crouching"!==this.args.animation&&"rolling"!==this.args.animation||(this.args.animation="standing")),o<i&&this.closeThruster()),p(d(y.prototype),"update",this).call(this)}}},{key:"closeThruster",value:function(){this.args.takeoffPlayed&&this.landSound(),this.args.takeoffPlayed=!1,this.thrusterSound&&this.thrusterSound.pause()}},{key:"landSound",value:function(){s.Sfx.play("MECHASONIC_SLAP")}},{key:"sleep",value:function(){this.thrusterSound&&this.thrusterSound.pause(),this.scrapeSound&&this.scrapeSound.pause()}},{key:"command_5",value:function(){this.args.falling&&this.airDash(1)}},{key:"command_4",value:function(){this.args.falling&&this.airDash(-1)}},{key:"airDash",value:function(t){var e=this;if(!(this.dashed||this.args.ignore&&-2!==this.args.ignore)){t<0?(this.args.direction=-1,this.args.facing="left"):(this.args.direction=1,this.args.facing="right");var r=7*t;this.args.float=3,this.args.mode=0,this.args.float=2,this.args.rolling=!1,this.args.height=this.args.normalHeight,this.args.xSpeed&&Math.sign(this.args.xSpeed)!==Math.sign(t)&&(r=11*t,this.args.float=6,this.args.xSpeed=0),this.args.falling=!0;var n=this.args.xSpeed+r,o=this.bMap("scanForward",r,.5).get(i.Platformer);o&&Math.abs(n)>Math.abs(o)&&(r=o*Math.sign(n));var a=this.castRay(n,n>0?0:Math.PI,function(t,r){if(e.getMapSolidAt.apply(e,l(r).concat([e.args.layer])))return t});!1!==a&&(r=a*Math.sign(r)),this.args.xSpeed=n,this.args.ySpeed=0,this.dashTimer=0,this.dashed=!0,this.args.mode=0,this.args.groundAngle=0,this.args.takeoffPlayed=!0,this.takeoffSound&&s.Sfx.play("MECHASONIC_TAKEOFF")}}},{key:"canRoll",get:function(){return!0}},{key:"controllable",get:function(){return!0}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.MechaSonic=y}),require.register("actor/MegaMace.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MegaMace=void 0;var o=e("./PointActor"),i=e("curvature/base/Mixin"),a=e("../mixin/Constrainable");e("../behavior/SkidDust");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.Mixin.from(o.PointActor,a.Constrainable));var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call.apply(p,[this].concat(r))).args.width=64,t.args.height=52,t.args.type="actor-item actor-mega-mace",t.args.ropeLength=t.args._tiedTo?t.args.ropeLength:8,t.args.gravity=.8,t}return e=h,(r=[{key:"update",value:function(){this.args.tiedTo||c(f(h.prototype),"update",this).call(this)}},{key:"updateEnd",value:function(){this.viewport&&!this.viewport.auras.has(this)&&this.viewport.auras.add(this),this.args.tiedTo&&(c(f(h.prototype),"update",this).call(this),this.args._tiedTo||(this.args._tiedTo=this.viewport.actorsById[this.args.tiedTo]),this.args.tiedTo&&this.args._tiedTo.args.hitPoints?this.setPos():this.noClip=!0),c(f(h.prototype),"updateEnd",this).call(this)}},{key:"collideA",value:function(t){if(this.args._tiedTo&&!this.args._tiedTo===t)return!1}},{key:"collideB",value:function(t){if(this.args._tiedTo&&!this.args._tiedTo===t)return!1;this.args.tiedTo&&!this.args._tiedTo.args.hitPoints||(t.controllable||t.damage)&&t.damage()}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.MegaMace=p}),require.register("actor/MiniBoss.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MiniBoss=void 0;var o=e("curvature/base/Tag"),i=e("../behavior/Platformer"),a=e("./PointActor"),s=e("curvature/base/Mixin"),c=(e("../mixin/CanPop"),e("./CutScene"),e("../audio/Sfx"));function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,s.Mixin.from(a.PointActor));var e,r,n,g=p(d);function d(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(r=g.call(this,t,e)).args.type="actor-item actor-mini-boss",r.args.width=48,r.args.height=48,r.args.float=-1,r.args.damagers=new Map,r.args.phase="idle",r.args.hitPoints=8,r.args.noseAngle=Math.PI/2*3,r.args.drillPush=0,r.args.phaseFrameId=0,r.args.frameId=0,r.args.direction=-1,r.args.facing="left",r.args.bindTo("phase",function(t){return r.args.phaseFrameId=0}),r}return e=d,(r=[{key:"onRendered",value:function(t){u(h(d.prototype),"onRendered",this).call(this,t),this.autoAttr.get(this.box)["data-phase"]="phase",this.attractor=null}},{key:"update",value:function(){if(this.args.phaseFrameId++,this.args.frameId++,this.viewport){var t=this.viewport;if(t.auras.add(this),this.viewport.controlActor){this.attractor||(this.attractor={},this.attractor.x=this.x,this.attractor.y=this.y);Math.abs(this.x-this.attractor.x),Math.abs(this.y-this.attractor.y),Math.sign(this.x-this.attractor.x),Math.sign(this.y-this.attractor.y);switch(this.args.phase){case"damaged":this.args.hitPoints>0?this.args.phaseFrameId>20&&(this.args.phase="stalking"):this.args.phaseFrameId>6&&(this.args.phase="dead");break;case"dead":this.args.float=0;break;case"exploding":if(90===this.args.phaseFrameId&&(this.args.falling=!0,this.args.ySpeed=-14,this.args.xSpeed=0,this.args.gSpeed=0,this.noClip=!0,this.viewport.auras.delete(this),this.args.phase="exploded",c.Sfx.play("OBJECT_DESTROYED")),this.args.phaseFrameId>90)return;if(t&&t.args.frameId%3==0){var e=new o.Tag('<div class = "particle-explosion">');c.Sfx.play("BOSS_DAMAGED");var r=this.args.width*Math.random()-this.args.width/2,n=this.args.height*Math.random()-this.args.height/2;e.style({"--x":this.x+r,"--y":this.y+n+-16}),t.particles.add(e),setTimeout(function(){return t.particles.remove(e)},512)}}"knocked"!==this.args.phase&&this.args.ySpeed<0&&!this.pointIsSafe(this.x,this.y+-this.args.height+this.args.ySpeed+-1)&&(this.args.ySpeed=0),u(h(d.prototype),"update",this).call(this)}}}},{key:"updateEnd",value:function(){if(u(h(d.prototype),"updateEnd",this).call(this),this.viewport){var t=this.viewport.controlActor;if(t){Math.abs(this.x-t.x),Math.abs(this.y-t.y),Math.sign(this.x-t.x),Math.sign(this.y-t.y);switch(this.args.xSpeed<0?this.args.facing="left":this.args.xSpeed>0&&(this.args.facing="right"),this.args.groundAngle=0,this.args.phase){case"attacking":case"swooping":case"stalking":case"ready":this.bMap("checkBelow",this.x,this.y+1).get(i.Platformer)&&(this.args.falling=!0,this.args.ySpeed=-4,this.args.y--)}}}}},{key:"collideA",value:function(t,e){var r=this,n=Math.sign(this.x-t.x);Math.sign(this.y-t.y),Math.max(Math.abs(t.args.xSpeed),5),Math.sign(t.args.xSpeed);if("dead"===this.args.phase){if(t.args.rolling&&(t.args.gSpeed=-n*Math.abs(t.args.gSpeed)),!(t.args.jumping||t.args.rolling||t.dashed))return!0;this.args.explodeFrame=this.viewport.args.frameId,this.args.phase="exploding"}if(1!==e&&3!==e||(this.onNextFrame(function(){t.args.xSpeed=-n*Math.max(5,Math.abs(t.xSpeedLast))}),t.args.falling?this.ignores.set(t,15):(t.args.gSpeed=4*-Math.sign(this.x-t.x),t.args.rolling&&this.onNextFrame(function(){t.args.gSpeed=-Math.sign(r.x-t.x),t.args.rolling=!0,t.args.direction=Math.sign(t.args.gSpeed)})),this.args.ySpeed=Math.min(0,this.args.ySpeed),this.damage(t)),2===e&&(this.viewport.args.audio&&c.Sfx.play("BOSS_DUDHIT"),t.args.falling&&(this.hitPoints<=0&&(this.args.ySpeed=2.5*-Math.abs(t.args.ySpeed)),t.controllable&&(t.args.ySpeed=Math.max(7,Math.abs(t.args.ySpeed)))),this.args.xSpeed=0,this.args.hitPoints>0&&(this.args.phase="knocked"),this.ignores.set(t,15)),0===e){if(t.args.falling&&this.ignores.set(t,15),t.controllable){t.args.y=this.y-this.args.height;t.args.animation;var o=t.args.ySpeed;this.onNextFrame(function(){t.args.ySpeed=-Math.floor(Math.abs(o))||-4})}this.args.xSpeed=0,this.damage(t)}return t.args.ignore=1,this.args.hitPoints||(t.args.ignore=-2),!0}},{key:"damage",value:function(t){var e=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(this.args.hitPoints<=0)){var r=this.args.damagers.get(t);this.args.frameId-r<5||(this.args.hitPoints--,this.args.damagers.set(t,this.args.frameId),this.onNextFrame(function(){return e.args.phase="damaged"}),c.Sfx.play("BOSS_DAMAGED"))}}},{key:"pointIsSafe",value:function(t,e){return!this.viewport.actorsAtPoint(t,e).filter(function(t){return t.hazard}).length}},{key:"solid",get:function(){return this.args.hitPoints>0}},{key:"rotateLock",get:function(){return!0}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.MiniBoss=g}),require.register("actor/MiniMace.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MiniMace=void 0;var o=e("./PointActor"),i=e("curvature/base/Mixin"),a=e("../mixin/Constrainable");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.Mixin.from(o.PointActor,a.Constrainable));var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call.apply(p,[this].concat(r))).args.width=32,t.args.height=32,t.args.type="actor-item actor-mini-mace",t.args.ropeLength=t.args._tiedTo?t.args.ropeLength:8,t.args.gravity=.6,t}return e=h,(r=[{key:"update",value:function(){this.args.tiedTo||c(f(h.prototype),"update",this).call(this)}},{key:"updateEnd",value:function(){this.viewport&&!this.viewport.auras.has(this)&&this.viewport.auras.add(this),this.args.tiedTo&&(c(f(h.prototype),"update",this).call(this),this.args._tiedTo||(this.args._tiedTo=this.viewport.actorsById[this.args.tiedTo]),this.args.tiedTo&&this.args._tiedTo.args.hitPoints?this.setPos():this.noClip=!0),c(f(h.prototype),"updateEnd",this).call(this)}},{key:"collideA",value:function(t){if(this.args._tiedTo&&!this.args._tiedTo===t)return!1}},{key:"collideB",value:function(t){if(this.args._tiedTo&&!this.args._tiedTo===t)return!1;this.args.tiedTo&&!this.args._tiedTo.args.hitPoints||t.controllable&&t.damage()}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.MiniMace=p}),require.register("actor/Monitor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Monitor=void 0;var o=e("./PointActor"),i=e("curvature/base/Tag"),a=(e("../actor/Explosion"),e("../actor/Projectile")),s=(e("../actor/BrokenMonitor"),e("../actor/Block")),c=e("../actor/Marker"),l=e("../audio/Sfx");function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(y,o.PointActor);var e,r,n,d=h(y);function y(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=d.call.apply(d,[this].concat(r))).args.type="actor-item actor-monitor",t.args.width=30,t.args.height=32,t.args.decel=.25,t.args.gone=!1,t}return e=y,(r=[{key:"onRendered",value:function(t){f(g(y.prototype),"onRendered",this).call(this,t),!this.screen&&this.sprite&&(this.screen=new i.Tag('<div class = "monitor-screen">'),this.sprite.appendChild(this.screen.node))}},{key:"update",value:function(){f(g(y.prototype),"update",this).call(this),this.viewport}},{key:"collideA",value:function(t,e){return!!t.args.static||!(!t.args.moving&&!t.args.falling)&&(!(t instanceof s.Block)&&(t instanceof c.Marker&&(t=t.owner),f(g(y.prototype),"collideA",this).call(this,t,e),t.passPop&&t.occupant&&!t.args.dead?(t=t.occupant,void this.pop(t)):2===e&&this.args.float&&t.controllable?(t.args.ySpeed*=-1,this.args.ySpeed=-4,this.args.float=0,this.ignores.set(t,15),!0):2===e||!(t.args.ySpeed>0&&t.y<this.y||t.args.rolling)||this.args.falling&&-1!==this.args.float||this.args.gone||!this.viewport||!t.args.spinning?1!==e&&3!==e||!(t.args.rolling||t instanceof a.Projectile)||this.args.gone||!this.viewport?void 0:(this.pop(t),!1):void this.pop(t)))}},{key:"pop",value:function(t){var e=this,r=this.viewport;if(r&&!this.args.gone){var n=new i.Tag('<div class = "particle-explosion">');t&&(t.args.popCombo+=1,t.args.score+=100),n.style({"--x":this.x,"--y":this.y-16});var o=document.createElement("div");o.classList.add("particle-score"),o.classList.add("score-100");var a=new i.Tag(o);if(a.style({"--x":this.args.x,"--y":this.args.y-16}),r.particles.add(a),r.particles.add(n),setTimeout(function(){return r.particles.remove(n)},512),setTimeout(function(){return r.particles.remove(a)},768),setTimeout(function(){return e.screen&&e.screen.remove()},1024),this.args.gone=!0,this.box&&this.box.setAttribute("data-animation","broken"),t&&(t.occupant&&(t=t.occupant),t.args.owner&&(t=t.args.owner),t.controllable&&this.effect(t)),l.Sfx.play("OBJECT_DESTROYED"),"function"==typeof ga&&ga("send","event",{eventCategory:"monitor",eventAction:"popped",eventLabel:"".concat(this.viewport.args.actName,"::").concat(this.args.id)}),t){var s=t.args.ySpeed;t.args.falling&&this.onNextFrame(function(){t.args.ySpeed=-s,t.args.falling=!0}),this.args.falling&&t.args.falling}t&&this.viewport.settings.rumble&&t.controller&&t.controller.rumble&&(t.controller.rumble({duration:40,strongMagnitude:0,weakMagnitude:1}),this.viewport.onTimeout(40,function(){t.controller.rumble({duration:110,strongMagnitude:.75,weakMagnitude:1})}))}}},{key:"effect",value:function(){}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!1}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.Monitor=d}),require.register("actor/Motobug.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Motobug=void 0;var o=e("curvature/base/Mixin"),i=e("./PointActor"),a=e("../behavior/Patrol"),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,o.Mixin.from(i.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(n=h.call.apply(h,[this].concat(i))).behaviors.add(new a.Patrol),n.args.type="actor-item actor-motobug",n.args.animation="standing",n.args.accel=.1,n.args.decel=.5,n.args.gSpeedMax=3,n.args.gravity=.5,n.args.width=24,n.args.height=32,n.willStick=!1,n.stayStuck=!1,n.args.patrolPause=null!==(t=n.args.patrolPause)&&void 0!==t?t:10,n.args.patrolBeat=null!==(e=n.args.patrolBeat)&&void 0!==e?e:120,n.args.patrolSpeed=null!==(r=n.args.patrolSpeed)&&void 0!==r?r:1,n.age=0,n}return e=g,(r=[{key:"update",value:function(){l(p(g.prototype),"update",this).call(this),this.args.moving&&this.args.gSpeed?this.args.animation="walking":this.args.animation="standing",this.args.direction=Math.sign(this.args.gSpeed),this.age++}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Motobug=h}),require.register("actor/Mushroom.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Mushroom=void 0;var o=e("./PointActor"),i=e("../behavior/Liftable");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="actor-item actor-mushroom",t.args.width=24,t.args.height=24,t.args.size=4,t.behaviors.add(new i.Liftable),t}return e=p,(r=[{key:"onRendered",value:function(t){var e=this;s(u(p.prototype),"onRendered",this).call(this,t);var r=this.viewport;this.onRemove(function(){return r.spawnFromDef(e.objDef)}),this.autoStyle.get(this.box)["--size"]="size"}},{key:"lift",value:function(t){this.carriedBy!==t?this.carriedBy=t:this.carriedBy=null}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}},{key:"sleep",value:function(){this.viewport&&this.viewport.actors.remove(this)}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Mushroom=f}),require.register("actor/NeverBetter.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NeverBetter=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.type="actor-item actor-never-better-sign",r.args.width=84,r.args.height=78,r}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.NeverBetter=l}),require.register("actor/NuclearSuperball.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NuclearSuperball=void 0;var o=e("./PointActor");e("curvature/base/Tag");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.gSpeedMax=150,t.args.accel=2,t.args.jumpForce=20,t.willStick=!0,t.stayStuck=!0,t}return e=l,(r=[{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.NuclearSuperball=l}),require.register("actor/Orb.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Orb=void 0;var o=e("./PointActor"),i=e("curvature/base/Mixin");e("../mixin/Pushable");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Mixin.from(o.PointActor));var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="actor-item actor-orb",t.args.width=18,t.args.height=48,t.args.rolled=0,t.args.accel=.2,t.args.decel=0,t.args.bindTo("x",function(e,r,n,o,i){return t.args.rolled+=.5*Number(e-i||0)}),t.args.gravity=1.35,t.args.maxFollow=t.args.maxFollow||null,t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--rolled"]="rolled"}},{key:"update",value:function(){var t=this;if(this.viewport&&this.viewport.controlActor){this.args.falling?this.viewport.onFrameOut(10,function(){t.args.falling&&t.viewport.auras.delete(t)}):this.viewport.auras.add(this);var e=this.viewport.controlActor,r=e.args.gSpeed,n=Math.sign(this.args.gSpeed||this.gSpeedLast||e.args.gSpeed);if(!this.args.maxFollow||this.x<this.args.maxFollow){var o=this.x-e.x;o<0&&(n&&this.args.mode===e.args.mode?(o>=-96&&(this.args.gSpeed=r*n*.75),o<-96&&(this.args.gSpeed=r*n),o<-128&&!this.args.mode&&!e.args.mode&&(this.args.x-=o+128,this.args.gSpeed=r*n)):this.args.mode!==e.args.mode&&(this.args.gSpeed=Math.max(r*n*.85,.95*this.args.gSpeed)))}s(u(p.prototype),"update",this).call(this)}}},{key:"collideA",value:function(t){t.isHyper||t.isSuper||t.controllable&&t.loseRings(),t.controllable&&t.die()}},{key:"controllable",get:function(){return!1}},{key:"solid",get:function(){return!1}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Orb=f}),require.register("actor/Panel.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Panel=void 0;var o=e("./PointActor");e("curvature/base/Bindable");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.type="actor-item actor-panel",r.args.width=64,r.args.height=8,r.args.float=-1,r.leaving=new Set,r.holding=new Set,r.cancels=new Map,r}return e=l,(r=[{key:"collideA",value:function(t,e){var r=this;if(t.canFly)return!1;if(this.leaving.has(t))return this.holding.has(t)&&(t.stayStuck=!1,t.willStick=!1,t.willJump=!1,t.args.gSpeed=0,this.holding.delete(t)),this.cancels.has(t)&&(this.cancels.get(t)(),this.cancels.delete(t)),this.cancels.set(t,this.viewport.onFrameOut(25,function(){r.holding.delete(t),r.leaving.delete(t)})),!1;if(!t.args.jumping&&!this.holding.has(t))return!1;if(this.holding.has(t)){if(t.args.mode=0,t.args.groundAngle=this.args.groundAngle,t.lastAngles.length=0,t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=0,t.args.falling=!1,this.args.next&&this.holding.has(t)&&t.willJump){var n=this.viewport.actorsById[this.args.next];if(t.args.falling=!0,n){t.stayStuck=!0,t.willStick=!0;var o=n.rotatePoint(0,0),i=t.angleTo({x:o[0]+n.x,y:o[1]+n.y});t.args.gSpeed=0,t.args.x-=16*Math.cos(i),t.args.y-=16*Math.sin(i),t.args.xSpeed=34*-Math.cos(i),t.args.ySpeed=34*-Math.sin(i),t.args.falling=!0,t.args.jumping=!0,t.args.float=45,this.leaving.add(t),this.holding.delete(t),t.args.ignore=45}else this.leaving.add(t),this.holding.delete(t),t.stayStuck=!1,t.willStick=!1,t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=0,t.args.falling=!0,t.args.ignore=15;return!1}var a=this.rotatePoint(0,8);return t.args.x=this.x+a[0],t.args.y=this.y+a[1],t.args.ignore=0,!1}return!this.args.next||!this.viewport.actorsById[this.args.next]||(this.holding.add(t),t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=0,t.args.ignore=10,this.cancels.has(t)&&(this.cancels.get(t)(),this.cancels.delete(t)),this.cancels.set(t,this.viewport.onFrameOut(20,function(){r.holding.has(t)&&(r.holding.delete(t),r.leaving.add(t))})),!1)}},{key:"sleep",value:function(){this.leaving.clear(),this.holding.clear()}},{key:"solid",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Panel=l}),require.register("actor/Platformer.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Platformer=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"controllable",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Platformer=l}),require.register("actor/PogoSpring.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PogoSpring=void 0;var o=e("./Vehicle"),i=e("../audio/Sfx");e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,o.Vehicle);var e,r,n,h=l(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(u(t=h.call.apply(h,[this].concat(r))),"quickDrop",!0),p(u(t),"passPop",!0),t.args.type="actor-item actor-pogo-spring",t.args.width=32,t.args.height=32,t.removeTimer=null,t.args.gSpeedMax=20,t.args.decel=.45,t.args.accel=.45,t.args.gravity=.6,t.args.seatHeight=16,t.args.seatForward=-2,t.args.skidTraction=.05,t.args.jumpForce=8,t.dustCount=0,t.args.particleScale=2,t.args.started=!1,t.args.cameraMode="locked",t.args.bound=0,t.bindTo("occupant",function(e,r,n,o,i){i&&!e&&(t.args.dead=!0,t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=0)}),t}return e=g,(r=[{key:"onRendered",value:function(t){s(f(g.prototype),"onRendered",this).call(this,t),this.autoStyle.get(this.box)["--bound"]="bound"}},{key:"update",value:function(){var t=this;if(this.args.falling||this.occupant||(this.args.dead=!1),!this.occupant||this.frameout||this.args.falling)this.occupant||(this.args.gSpeed=0,this.args.xSpeed=0);else{this.args.height=16+this.occupant.args.height,this.args.bound=-Math.floor(this.ySpeedLast),this.frameout=this.viewport.onFrameOut(1,function(){t.args.falling=!0,t.frameout=!1,t.args.ySpeed=t.args.bound,t.args.ySpeed>-3&&(t.args.ySpeed-=3),t.args.ySpeed>-13&&(t.args.ySpeed-=3),t.args.ySpeed<-24&&(t.args.ySpeed=-24)}),this.args.xSpeed*=.3;var e=this.xAxis||this.xSpeedLast;this.args.direction=Math.sign(e),this.args.facing=Math.sign(e)<0?"left":"right",i.Sfx.play("POGO_BOUNCE")}this.occupant||(this.args.height=32,this.args.bound=-4),this.noClip=this.args.dead,s(f(g.prototype),"update",this).call(this)}},{key:"collideA",value:function(t,e){t instanceof g||(t.args.falling&&t.args.ySpeed>0&&(this.args.bound=-t.args.ySpeed),s(f(g.prototype),"collideA",this).call(this,t,e))}},{key:"sleep",value:function(){this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.viewport.setColCell(this),this.args.dead=!1,this.args.gSpeed=0,this.args.xSpeed=0,this.args.ySpeed=0,this.args.bound=0,s(f(g.prototype),"sleep",this).call(this),this.args.facing="right"}},{key:"solid",get:function(){return!this.occupant}},{key:"rotateLock",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.PogoSpring=h}),require.register("actor/PointActor.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointActor=void 0;var n=e("curvature/base/Bindable"),o=e("curvature/base/View"),i=e("curvature/base/Tag"),a=e("../effects/Twist"),s=e("../effects/Droop"),c=e("../effects/Pinch"),l=e("../ui/CharacterString"),u=e("../Classifier"),f=e("../controller/Controller"),p=e("../powerups/Sheild"),h=e("../powerups/FireSheild"),g=e("../powerups/SuperSheild"),d=e("../powerups/BubbleSheild"),y=e("../powerups/NormalSheild"),b=e("../powerups/ElectricSheild"),v=e("../powerups/StarSheild"),m=(e("./LayerSwitch"),e("../viewport/Layer"),e("../behavior/Platformer"));function w(t){"@babel/helpers - typeof";return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||x(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||x(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=x(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function x(t,e){if(t){if("string"==typeof t)return j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(t,e):void 0}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(t,e){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=E(t);if(e){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return M(this,r)}}function M(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return T(t)}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var C=0,B=100,D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(E,o.View);var e,r,x,j=R(E);function E(){var t,e,r,o,i,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,E),s[n.Bindable.NoGetters]=!0,A(T(a=j.call(this,s,c)),"template",'<div class  = "point-actor [[type]]">\n\t\t<div class = "sprite" cv-ref = "sprite"></div>\n\t</div>'),A(T(a),"profiles",{normal:{height:1,width:1,decel:.85,accel:.2,gravity:.65,airAccel:.3,jumpForce:14,gSpeedMax:100}}),a[n.Bindable.NoGetters]=!0,Object.defineProperty(a.nodes,n.Bindable.NoGetters,{value:!0}),a.defaultDisplay="initial",a.springing=!1,a.stepCache={},a.fallTime=0,a.locked=0,a.xHold=12,a.yHold=12,a.args.weight=null!==(t=a.args.weight)&&void 0!==t?t:100,a.args.score=0,a.args.rings=0,a.args.mercy=!1,a.args.popCombo=0,a.args.opacity=null!==(e=a.args.opacity)&&void 0!==e?e:1,a.args.pushing=!1,a.autoStyle=new Map,a.autoAttr=new Map,a.hanging=new Map,a.ignores=new Map,a.regions=new Set,a.powerups=new Set,a.behaviors=new Set,a.behaviors.add(new m.Platformer),a.lastPointA=[],a.lastPointB=[],a.carrying=new Set,a.inventory=new u.Classifier([p.Sheild,h.FireSheild,d.BubbleSheild,b.ElectricSheild,y.NormalSheild]),a.noClip=!1,a.sheild=null,a.inventory.addEventListener("adding",function(t){var e=t.detail.object;if(a.inventory.has(e.constructor))t.preventDefault();else{if(a.powerups.add(e),a.controllable){var r="has".concat(e.type[0].toUpperCase()+e.type.substr(1));a.viewport.args[r]=r}e.acquire&&e.acquire(T(a)),a.args.currentSheild instanceof v.StarSheild||(a.args.currentSheild=e,e.equip&&e.equip(T(a)))}}),a.inventory.addEventListener("removing",function(t){var e=t.detail.object;if(a.powerups.delete(e),a.controllable){var r="has".concat(e.type[0].toUpperCase()+e.type.substr(1));a.viewport.args[r]=null}n.Bindable.make(e)===a.args.currentSheild&&(a.args.currentSheild=null)}),a.args.bindTo("currentSheild",function(t,e,r,n,o){o&&o.unequip&&o.unequip(T(a));var i,s=k(a.inventory.get(p.Sheild));try{for(s.s();!(i=s.n()).done;){var c=i.value;c instanceof g.SuperSheild||c.detach()}}catch(t){s.e(t)}finally{s.f()}t&&t.equip&&t.equip(T(a)),t&&t.render(a.sprite)}),a.args.type="actor-generic",a.args.modeTime=0,a.args.charStrings=[],a.args.charStrings.bindTo(function(t){return console.log(t)}),a.args.display=a.args.display||"initial",a.args.rings=0,a.args.coins=0,a.args.emeralds=0,a.args.emblems=[],a.args.emblemsCurrent=[],a.args.dead=!1,a.args.respawning=!1,a.ringSet=new Set,a.ringDoc=new DocumentFragment,a.args.yMargin=0,a.args.cameraMode="normal",a.args.cameraBias=0,a.args.layer=null!==(r=a.args.layer)&&void 0!==r?r:1,a.args.active=null!==(o=a.args.active)&&void 0!==o&&o,a.args.moving=!1,a.args.flySpeedMax=40,a.args.x=a.args.x||1280,a.args.y=a.args.y||32,a.args.z=a.args.z||0,a.args.xOff=0,a.args.yOff=0,a.args.width=a.args.width||1,a.args.height=a.args.height||1,a.args.direction=Number(a.args.direction)||1,a.args.heading=0,a.args.xSpeed=a.args.xSpeed||0,a.args.ySpeed=a.args.ySpeed||0,a.args.gSpeed=a.args.gSpeed||0,a.args.hSpeed=0,a.args.xSpeed=a.args.xSpeed||0,a.args.ySpeed=a.args.ySpeed||0,a.args.angle=a.args.angle||0,a.args.groundAngle=a.args.groundAngle||0,a.args.displayAngle=0,a.args.airAngle=0;var w=[];Object.defineProperty(w,n.Bindable.NoGetters,{value:!0}),a.lastAngles=w,a.angleAvg=16,a.args.xSpeedMax=512,a.args.ySpeedMax=512,a.args.gSpeedMax=B,a.args.rollSpeedMax=23,a.args.gravity=.65,a.args.decel=.85,a.args.accel=.2,a.args.airAccel=.3,a.args.jumpForce=14,a.args.airTimeTotal=0,a.args.groundTimeTotal=0,a.args.jumping=!1,a.args.jumpedAt=null,a.args.deepJump=!1,a.args.highJump=!1,a.maxStep=8,a.backStep=0,a.frontStep=0,a.args.rolling=!1,a.args.skidTraction=2.25,a.args.skidTraction=5,a.args.fgFilter="none",a.args.bgFilter="none",a.args.falling=!0,a.args.running=!1,a.args.crawling=!1,a.args.climbing=!1,a.args.rotateFixed=!1,a.args.mode=a.args.mode||C,a.xAxis=0,a.yAxis=0,a.aAxis=0,a.bAxis=0,a.lAxis=0,a.rAxis=0,a.buttons={},a.willStick=!1,a.stayStuck=!1,a.args.startled=a.args.startled||0,a.args.halted=a.args.halted||0,a.args.ignore=a.args.ignore||0,a.args.float=a.args.float||0,a.colliding=!1,a.args.flyAngle=0,a.args.bindTo(["x","y"],function(t,e,r){isNaN(t)&&console.trace(e,t),a.stepCache={},a.args.idleTime=0}),a.args.bindTo(["xSpeed","ySpeed"],function(t,e,r){isNaN(t)&&console.trace(e,t)}),a.args.bindTo("gSpeed",function(t){a.gSpeedLast=t||a.gSpeedLast}),a.args.bindTo("xSpeed",function(t){a.airAngle=a.args.airAngle=Math.atan2(a.args.ySpeed,t),a.xSpeedLast=t||a.xSpeedLast}),a.args.bindTo("ySpeed",function(t){a.airAngle=a.args.airAngle=Math.atan2(t,a.args.xSpeed),a.ySpeedLast=t||a.ySpeedLast}),a.impulseMag=null,a.impulseDir=null,a.args.stopped=0,a.args.particleScale=1,a.dropDashCharge=0;var S,x=n.Bindable.make(T(a));(a.debindGroundX=null,a.debindGroundY=null,a.debindGroundA=null,a.debindGroundL=null,a.args.name=null!==(i=a.args.name)&&void 0!==i?i:"",a.controllable)&&(a.controller=new f.Controller({deadZone:.2}),a.args.charStrings=[new l.CharacterString({value:null!==(S=a.args.name)&&void 0!==S?S:""})],a.controller.zero());return a.debindGroundX=new Set,a.debindGroundY=new Set,a.debindGroundA=new Set,a.debindGroundL=new Set,a.args.bindTo(["mode","falling"],function(){a.args.modeTime=0}),a.args.bindTo("standingOn",function(t,e,r,n){if(!a.isGhost&&a.args.standingOn!==t){var o,i=k(a.debindGroundX);try{for(i.s();!(o=i.n()).done;){var s=o.value;a.debindGroundX.delete(s),s()}}catch(t){i.e(t)}finally{i.f()}var c,l=k(a.debindGroundY);try{for(l.s();!(c=l.n()).done;){var u=c.value;a.debindGroundY.delete(u),u()}}catch(t){l.e(t)}finally{l.f()}var f,p=k(a.debindGroundA);try{for(p.s();!(f=p.n()).done;){var h=f.value;a.debindGroundA.delete(h),h()}}catch(t){p.e(t)}finally{p.f()}var g,d=k(a.debindGroundL);try{for(d.s();!(g=d.n()).done;){var y=g.value;a.debindGroundL.delete(y),y()}}catch(t){d.e(t)}finally{d.f()}var b=r[e];b&&b.isVehicle&&(b.occupant=null,b.stayStuck=!1,b.willStick=!1,b.xAxis=0,b.yAxis=0,b.args.active=!1);var v=a.viewport.objectPalette.switch;if(a.controllable&&(!b||b instanceof v||(b.args.active=!1,a.viewport.auras.delete(b)),!t||t instanceof v||(t.args.active=!0)),t){if(a.controllable&&t.isVehicle&&!t.dead){a.args.pushing=!1,t.args.active=!0;var m=t.args.bindTo("x",function(e,r){var n=t.args.direction*t.args.seatForward||0,o=t.args.seatHeight||t.args.height||0,i=O(t.rotatePoint(n,o),2),s=i[0],c=i[1];a.args.x=s+e,a.args.y=c+t.y,a.args.direction=t.args.direction}),w=t.args.bindTo("y",function(e,r){if(!a.args.jumping){var n=t.args.direction*t.args.seatForward||0,o=t.args.seatHeight||t.args.height||0,i=O(t.rotatePoint(n,o),2),s=i[0],c=i[1];a.args.x=s+t.x,a.args.y=c+e}}),S=t.args.bindTo("layer",function(t,e){a.args.layer=t});a.debindGroundX.add(m),a.debindGroundY.add(w),a.debindGroundL.add(S);var x=t.occupant;t.args.yMargin=a.args.height,x&&x!==T(a)&&(x.args.standingOn=null,x.args.y-=32,x.args.gSpeed=0,x.args.xSpeed=-5*a.args.direction,x.args.ySpeed=-8,x.args.falling=!0),a.args.gSpeed=0,a.args.xSpeed=0,a.args.ySpeed=0,a.args.falling=!1,t.occupant=T(a)}else if(!t.isVehicle&&a.args.y<=a.args.height+t.args.y-t.args.height){var j=t.args.bindTo("x",function(e,r){t.getMapSolidAt(a.args.x+e+-t.args.x,a.args.y)||(a.args.x+=e+-t.args.x)}),P=t.args.bindTo("y",function(e,r){var n=e+-t.args.height+(a.controllable||a.isPushable,0);t.getMapSolidAt(a.args.x,n)||(a.args.y=n)}),_=t.args.bindTo("layer",function(t,e){a.args.layer=t});a.debindGroundX.add(j),a.debindGroundY.add(P),a.debindGroundL.add(_)}b&&b.isVehicle&&(b.occupant===T(a)&&(b.occupant=null,b.stayStuck=!1,b.willStick=!1),b.xAxis=0,b.yAxis=0),t.standBelow(T(a))}else a.viewport.auras.delete(a.args.standingOn)}}),M(a,x)}return e=E,x=[{key:"fromDef",value:function(t){var e,r={x:t.x+Math.floor(t.width/2),y:t.y-1,visible:t.visible,name:t.name,id:t.id},n=new Map;for(var o in r)"object"!==w(r[o])&&n.set(o,r[o]);for(var i in t.properties){var a=t.properties[i];r[a.name]=a.value,n.set(a.name,a.value)}r.tileId=t.gid;var s=new this(Object.assign({},r));return s.def=n,s.objDef=t,s.args.float=null!==(e=s.float)&&void 0!==e?e:s.args.float,s}}],(r=[{key:"onRendered",value:function(){var t=this;if(!this.init&&this.viewport){var e=this.viewport.objectPalette["base-region"];if(this.isRegion=this instanceof e,this.box=this.findTag("div"),this.autoStyle.set(this.box,{display:"display","--animation-bias":"animationBias","--bg-filter":"bgFilter","--sprite-sheet":"spriteSheetUrl","--direction":"direction","--sprite-x":"spriteX","--sprite-y":"spriteY","--angle":"angle","--palletShift":"palletShift","--fly-angle":"flyAngle","--display-angle":"groundAngle","--ground-angle":"groundAngle","--air-angle":"airAngle","--opacity":"opacity","--height":"height","--width":"width","--x":"x","--y":"y","--z":"z"}),this.autoAttr.set(this.box,{"data-camera-mode":"cameraMode","data-colliding":"colliding","data-direction":"direction","data-respawning":"respawning","data-heading":"heading","data-mercy":"mercy","data-selected":"selected","data-following":"following","data-carrying":"carrying","data-falling":"falling","data-moving":"moving","data-pushing":"pushing","data-facing":"facing","data-filter":"filter","data-angle":"angleDeg","data-driving":"driving","data-active":"active","data-layer":"layer","data-dead":"dead","data-mode":"mode","data-netplayer":"netplayer","data-id":"id"}),this.args.bindTo("spriteSheet",function(e){t.args.spriteSheetUrl=void 0!==e?t.urlWrap(e):void 0}),this.args.bindTo("angle",function(e){return t.args.angleDeg=t.rad2deg(e)}),this.sprite=this.findTag("div.sprite"),this.controllable){var r=new g.SuperSheild;r.equip(this),this.inventory.add(r)}this.init=!0,this.args.bindTo("animation",function(e){return t.box.setAttribute("data-animation",e)}),this.bindTo("isSuper",function(e){return t.box.setAttribute("data-super",e)}),this.bindTo("isHyper",function(e){return t.box.setAttribute("data-hyper",e)}),this.controllable&&this.sprite.parentNode.classList.add("controllable");var o,i=k(this.behaviors);try{for(i.s();!(o=i.n()).done;){var a=o.value;a.rendered&&a.rendered(n.Bindable.make(this))}}catch(t){i.e(t)}finally{i.f()}}}},{key:"updateStart",value:function(){this.args.dead&&(this.args.xSpeed=0);var t,e=k(this.behaviors);try{for(e.s();!(t=e.n()).done;){var r=t.value;r.updateStart&&r.updateStart(this)}}catch(t){e.e(t)}finally{e.f()}}},{key:"updateEnd",value:function(){var t,e=k(this.behaviors);try{for(e.s();!(t=e.n()).done;){var r=t.value;r.updateEnd&&r.updateEnd(this)}}catch(t){e.e(t)}finally{e.f()}if(!this.viewport||this.viewport.args.frameId%this.viewport.settings.frameSkip==0){var n=this.focused;this.args.falling||(this.focused=!1);var o,i=k(this.regions);try{for(i.s();!(o=i.n()).done;){var a=o.value;a.focus&&(this.viewport.auras.add(a.focus),this.focused=a.focus)}}catch(t){i.e(t)}finally{i.f()}n!==this&&n!==this.focused&&this.viewport&&this.viewport.auras.delete(n);var s,c=k(this.autoStyle);try{for(c.s();!(s=c.n()).done;){for(var l=O(s.value,2),u=l[0],f=l[1],p={},h=0,g=Object.entries(f);h<g.length;h++){var d=O(g[h],2),y=d[0],b=d[1];b in this.args&&(p[y]=this.args[b])}u.style(p)}}catch(t){c.e(t)}finally{c.f()}var v,m=k(this.autoAttr);try{for(m.s();!(v=m.n()).done;){for(var w=O(v.value,2),S=w[0],x=w[1],j={},P=0,_=Object.entries(x);P<_.length;P++){var R=O(_[P],2),M=R[0],T=R[1];T in this.args&&(j[M]=this.args[T])}S.attr(j)}}catch(t){m.e(t)}finally{m.f()}}}},{key:"update",value:function(){this.locked>0&&this.locked--;var t,e=k(this.ignores);try{for(e.s();!(t=e.n()).done;){var r=O(t.value,2),n=r[0],o=r[1];o<=0?this.ignores.delete(n):this.ignores.set(n,-1+o)}}catch(t){e.e(t)}finally{e.f()}var i,a=k(this.behaviors);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.update&&s.update(this)}}catch(t){a.e(t)}finally{a.f()}}},{key:"getLocalDrag",value:function(){var t,e=1,r=k(this.regions);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.skimmers.has(this)||o.skimmers.has(n.Bindable.make(this))||(o.args.drag||0===o.args.drag)&&o.args.drag<e&&(e=o.args.drag)}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"getLocalFriction",value:function(){var t,e=1,r=k(this.regions);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.skimmers.has(this)||o.skimmers.has(n.Bindable.make(this))||(o.args.friction||0===o.args.friction)&&o.args.friction<e&&(e=o.args.friction)}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"setCameraMode",value:function(){var t=this;if(this.viewport)if(this.focused)this.args.cameraMode="panning";else if(this.viewport.args.cutScene)this.args.cameraMode="cutScene";else if(this.args.bossMode)this.args.cameraMode="boss";else if(this.args.standingOn&&this.args.standingOn.isVehicle)this.args.cameraMode=this.args.standingOn.args.cameraMode;else if(this.args.localCameraMode)this.args.cameraMode=this.args.localCameraMode;else if(this.controllable)if(this.args.mode&&!this.args.falling&&this.args.rolling&&this.args.jumpBlocked)this.args.cameraMode="tube";else if(!this.args.falling||this.getMapSolidAt(this.args.x,this.args.y+24)){var e=this.getMapSolidAt(this.args.x+32*this.args.direction,this.args.y+24),r=this.getMapSolidAt(this.args.x+32*this.args.direction,this.args.y+96),n=this.getMapSolidAt(this.args.x+0*this.args.direction,this.args.y+48);this.args.mode===C&&0===this.args.groundAngle&&Math.abs(this.args.groundAngle)<Math.PI/4?n||!e||this.args.grinding||this.args.skimming?e||r||this.args.grinding||this.args.skimming?this.args.cameraMode="normal":this.args.cameraMode="cliff":this.args.cameraMode="bridge":this.args.cameraMode="normal"}else this.getMapSolidAt(this.args.x+0*this.args.direction,this.args.y+64)?this.args.cameraMode="normal":this.fallTime>15&&(this.args.cameraMode="aerial"),this.viewport.onFrameOut(45,function(){"airplane"!==t.args.cameraMode&&t.args.falling&&Math.abs(t.args.xSpeed>25)&&!t.getMapSolidAt(t.args.x,t.args.y+480)&&(t.args.cameraMode="airplane")})}},{key:"callCollideHandler",value:function(t){if(this.ignores.has(t))return!1;if(t.ignores.has(this))return!1;if(!this.args.dead&&!t.args.dead){if(t===this.args.hangingFrom)return!1;var e;if(!this.isGhost&&!t.isGhost)if(t.args.y<=this.args.y-this.args.height?(this.args.collType="collision-top",e=0):t.args.x<this.args.x-Math.floor(this.args.width/2)?(this.args.collType="collision-left",e=1):t.args.x>=this.args.x+Math.floor(this.args.width/2)?(this.args.collType="collision-right",e=3):t.args.y>=this.args.y?(this.args.collType="collision-bottom",e=2):(this.args.collType="collision-intersect",e=-1),this.viewport){this.viewport.collisions.has(this)||this.viewport.collisions.set(this,new Map),this.viewport.collisions.has(t)||this.viewport.collisions.set(t,new Map);var r=e>-1?(e+2)%4:e,n=this.viewport.collisions.get(this,e),o=this.viewport.collisions.get(t,r);n.set(t,e),o.set(this,r),this.viewport.collisions.set(t,o),this.collideB(t,e),t.collideB(this,r);var i=this.collideA(t,e),a=t.collideA(this,r),s=i||a;return this.args.colliding=this.colliding=this.colliding||s||!1,s}}}},{key:"processInput",value:function(){if(this.controllable&&this.args.standingOn&&this.args.standingOn.isVehicle&&this===n.Bindable.make(this.args.standingOn.occupant)){if(this.args.modeTime<5)return;this.viewport.auras.add(this.args.standingOn);var t=this.args.standingOn;t.xAxis=this.xAxis,t.yAxis=this.yAxis,t.stayStuck=this.stayStuck,t.willStick=this.willStick,this.processInputVehicle(),this.args.direction=t.args.direction,this.args.facing=t.args.facing,this.args.layer=t.args.layer,this.args.mode=t.args.mode,this.args.angle=t.args.angle}else this.controllable&&this.processInputDirect()}},{key:"processInputDirect",value:function(){var t=this.xAxis,e=this.yAxis,r=this.args.gSpeedMax;this.running?r=1/0:this.crawling&&(r=1);var n=this.getLocalDrag();if(this.noClip)this.args.ignore||(this.args.xSpeed+=t*this.args.airAccel*n,this.args.ySpeed+=e*this.args.airAccel*n,t||(this.args.xSpeed=0),e||(this.args.ySpeed=0));else if(this.args.falling)this.args.falling&&t&&Math.abs(this.args.xSpeed)<this.args.xSpeedMax&&Math.abs(this.args.xSpeed)<this.args.gSpeedMax&&!this.args.ignore&&(this.args.xSpeed+=t*this.args.airAccel*n);else if(!this.args.rolling&&!this.yAxis&&!this.spindashCharge){var o=Math.sign(t),i=Math.sign(s),a=this.getLocalFriction(),s=this.args.gSpeed;if(this.args.rolling||this.args.climbing||this.args.ignore||this.args.wallSticking||(o!==i&&i?this.args.ignore||(s+=t*a*this.args.accel*n*this.args.skidTraction):(s+=t*a*this.args.accel*n,2===Math.abs(o-i)&&(this.args.ignore=10))),Math.sign(this.args.gSpeed)&&Math.sign(this.args.gSpeed)!==Math.sign(s))return void(this.args.gSpeed=0);this.args.pushing&&Math.sign(t)!==Math.sign(this.args.pushing)?this.args.gSpeed=0:(!t||Math.abs(s)<r||Math.sign(s)!==Math.sign(t))&&(this.args.gSpeed=s)}t<0&&this.args.gSpeed&&!this.args.ignore&&(this.args.climbing||(this.args.facing="left"),(!this.args.grinding||Math.abs(this.args.gSpeed)<3)&&(this.args.direction=-1)),t>0&&this.args.gSpeed&&!this.args.ignore&&(this.args.climbing||(this.args.facing="right"),(!this.args.grinding||Math.abs(this.args.gSpeed)<3)&&(this.args.direction=1)),this.args.currentSheild instanceof v.StarSheild||(this.aAxis<-.75&&(this.inventory.has(b.ElectricSheild)?this.args.currentSheild=S(this.inventory.get(b.ElectricSheild))[0]:this.args.currentSheild=""),this.aAxis>.75&&(this.inventory.has(h.FireSheild)?this.args.currentSheild=S(this.inventory.get(h.FireSheild))[0]:this.args.currentSheild=""),this.bAxis<-.75&&(this.inventory.has(d.BubbleSheild)?this.args.currentSheild=S(this.inventory.get(d.BubbleSheild))[0]:this.args.currentSheild=""),this.bAxis>.75&&(this.inventory.has(y.NormalSheild)?this.args.currentSheild=S(this.inventory.get(y.NormalSheild))[0]:this.args.currentSheild=""))}},{key:"processInputVehicle",value:function(){this.args.standingOn.processInputDirect()}},{key:"collideA",value:function(t,e){return this.solid}},{key:"collideB",value:function(t){}},{key:"castRay",value:function(){for(var t=1,e=function(){},r=Math.PI/2,n=[0,0],o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];switch(i.length){case 2:t=i[0],e=i[1];break;case 3:t=i[0],r=i[1],e=i[2];break;case 4:t=i[0],r=i[1],n=i[2],e=i[3]}for(var s=0;s<Math.floor(t);s++){var c=e(s,[this.args.x+n[0]+s*Math.cos(r),this.args.y+n[1]+s*Math.sin(r)],this);if(void 0!==c)return c}return!1}},{key:"impulse",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.impulseMag=t,this.impulseDir=e,this.impulseFal=r}},{key:"rad2deg",value:function(t){var e=180/Math.PI*t;return e>0?Math.round(Math.floor(10*e)/10):Math.round(Math.ceil(10*e)/10)}},{key:"roundAngle",value:function(t,e){return e/=2,Math.round(t/(Math.PI/e))*Math.PI/e}},{key:"findNearestActor",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r=this.viewport;if(r){var n,o=null,i=1/0,a=k(r.getNearbyColCells(this.args.x,this.args.y));try{for(a.s();!(n=a.n()).done;){var s,c=k(n.value);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(l!==this&&(!l.args.gone&&t(l))){var u=this.distanceFrom(l);Math.abs(u)>e||u<i&&(o=l,i=u)}}}catch(t){c.e(t)}finally{c.f()}}}catch(t){a.e(t)}finally{a.f()}return o}}},{key:"immune",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",r=this.args.currentSheild;return!!(r&&r.immune&&r.immune(this,t,e))}},{key:"damage",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";if(!this.args.mercy){this.dashed=this.args.jumping=this.args.spinning=!1;var n=new CustomEvent("damage",{cancelable:!0,detail:{other:t,type:r}});if(!this.isHyper)return this.isSuper?(this.onNextFrame(function(){return e.startle(t)}),void(this.args.mercy=30)):void(this.immune(t,r)||(this.dispatchEvent(n)?this.args.rings?(this.loseRings(),this.args.rings=0,this.onNextFrame(function(){return e.startle(t)}),this.args.mercy=180,this.viewport.settings.rumble&&(this.controller.rumble({duration:350,strongMagnitude:1,weakMagnitude:1}),this.onTimeout(350,function(){e.controller.rumble({duration:150,strongMagnitude:.5,weakMagnitude:1})}))):this.controllable&&(this.die(),this.viewport.settings.rumble&&this.controller.rumble({duration:450,strongMagnitude:1,weakMagnitude:1})):n.detail.immune||(this.args.y-=8,this.onNextFrame(function(){return e.startle(t)}),this.args.mercy=180,this.viewport.settings.rumble&&this.controller.rumble({duration:350,strongMagnitude:1,weakMagnitude:1}))))}}},{key:"startle",value:function(t){if(!(this.noClip||this.args.startled>30)){var e=Math.sign(this.x-this.xLast||this.args.xSpeed||this.args.gSpeed||t&&(t.args.xSpeed||this.args.x-t.args.x)||this.args.direction);this.args.jumping=!1,this.args.falling=!0,this.args.startled=180,this.args.ignore=30,this.args.float=1,this.args.xSpeed=-2.25*e,this.args.ySpeed=-8,this.args.flying=!1,this.args.dashed=!1,this.args.lightDashed=!1,this.args.lightDashing=!1,this.args.gSpeed=0,this.args.standingOn=!1,2===this.args.mode?(this.args.xSpeed*=-1,this.args.ySpeed=0):this.args.y-=4}}},{key:"checkSolidActors",value:function(t){return t.args!==this.args&&(!!t.solid&&(!t.args.platform&&!t.isVehicle||this.args.y<=t.args.y+-t.args.height&&this.args.ySpeed>=0))}},{key:"findSolid",value:function(t,e,r){if(r.viewport){var n,o=r.viewport,i=o.tileMap,a=k(o.actorsAtPoint(e[0],e[1]));try{for(a.s();!(n=a.n()).done;){var s=n.value;if(r.checkSolidActors(s))return t}}catch(t){a.e(t)}finally{a.f()}var c=i.getSolid(e[0],e[1],r.args.layer);return r.upScan&&(r.lastLayer=c),c?t:void 0}}},{key:"findSolidTile",value:function(t,e,r){var n=tileMap.getSolid(e[0],e[1],r.args.layer);if(this.upScan&&(r.lastLayer=n),n)return t}},{key:"scanBottomEdge",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=this.viewport.tileMap,n=this.args.width/2,o=r.getSolid(this.x-n,this.y-1,this.args.layer),i=r.getSolid(this.x+n,this.y-1,this.args.layer);if(!o||!i)return this.castRay(this.args.width,e<0?Math.PI:0,[-e*n,0],function(e,n){if(!t.viewport.actorsAtPoint(n[0],n[1]).filter(function(e){return e.args!==t.args}).length&&!r.getSolid(n[0],n[1]+1,t.args.layer))return e})}},{key:"scanVerticalEdge",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=this.viewport.tileMap;return this.castRay(this.args.height+1,Math.PI/2,[e*this.args.width/2,-this.args.height],function(e,n){if(t.viewport.actorsAtPoint(n[0],n[1]).filter(function(e){return e.args!==t.args}).length||r.getSolid(n[0],n[1],t.args.layer))return e})}},{key:"realAngle",get:function(){if(!this.args.falling&&this.args.standingOn)return this.args.standingOn.realAngle;var t,e=Number(this.args.groundAngle);if(this.args.falling)return-e-Math.PI;switch(this.args.mode){case 0:t=-e-Math.PI;break;case 1:t=-e-Math.PI/2;break;case 2:t=-e;break;case 3:t=-e+Math.PI/2}return t}},{key:"downAngle",get:function(){switch(this.args.mode){case C:return Math.PI/2;case 3:return 0;case 2:return-Math.PI/2;case 1:return Math.PI}}},{key:"upAngle",get:function(){switch(this.args.mode){case C:return-Math.PI/2;case 3:return Math.PI;case 2:return Math.PI/2;case 1:return 0}}},{key:"leftAngle",get:function(){switch(this.args.mode){case C:return Math.PI;case 3:return-Math.PI/2;case 2:return 0;case 1:return Math.PI/2}}},{key:"rightAngle",get:function(){switch(this.args.mode){case C:return 0;case 3:return Math.PI/2;case 2:return Math.PI;case 1:return-Math.PI/2}}},{key:"groundPoint",get:function(){switch(this.args.mode){case C:return[this.args.x+0,this.args.y+1];case 3:return[this.args.x+1,this.args.y+0];case 2:return[this.args.x+0,this.args.y-1];case 1:return[this.args.x-1,this.args.y+0]}}},{key:"rotatePoint",value:function(t,e){return[t*Math.cos(this.realAngle)-e*Math.sin(this.realAngle),e*Math.cos(this.realAngle)+t*Math.sin(this.realAngle)]}},{key:"standBelow",value:function(t){}},{key:"filterSolidActors",value:function(t){return t.args!==this.args&&(!!t.solid&&(!t.args.platform&&!t.isVehicle||this.args.y<=t.args.y+-t.args.height&&this.args.ySpeed>=0))}},{key:"getMapSolidAt",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.viewport){if(r){var n=this.viewport.actorsAtPoint(t,e).filter(this.filterSolidActors.bind(this));if(n.length>0)return n}return this.viewport.tileMap.getSolid(t,e,this.args.layer)}}},{key:"canRoll",get:function(){return!1}},{key:"canFly",get:function(){return!1}},{key:"canStick",get:function(){return!1}},{key:"canSpindash",get:function(){return!1}},{key:"isEffect",get:function(){return!1}},{key:"isGhost",get:function(){return!1}},{key:"isPushable",get:function(){return!1}},{key:"isVehicle",get:function(){return!1}},{key:"solid",get:function(){return!1}},{key:"x",get:function(){return this.args.x}},{key:"y",get:function(){return this.args.y}},{key:"point",get:function(){return[this.args.x,this.args.y]}},{key:"rotateLock",get:function(){return!1}},{key:"controllable",get:function(){return!1}},{key:"skidding",get:function(){return Math.abs(this.args.gSpeed)&&!this.args.grinding&&Math.sign(this.args.gSpeed)!==this.args.direction}},{key:"effect",value:function(t){}},{key:"readInput",value:function(){if(this.controller){var t=this.controller;if(this.xAxis=0,this.yAxis=0,t.axes){t.axes[0]&&(this.xAxis=t.axes[0].magnitude),t.axes[1]&&(this.yAxis=t.axes[1].magnitude),t.axes[2]&&(this.aAxis=t.axes[2].magnitude),t.axes[3]&&(this.bAxis=t.axes[3].magnitude);var e=t.buttons;for(var r in this.buttons=e,e){var n=e[r],o="release_".concat(r),i="command_".concat(r),a="hold_".concat(r);if(0==r&&1===n.delta||!this.args.standingOn||!this.args.standingOn.isVehicle)1===n.delta?(this.args.currentSheild&&i in this.args.currentSheild&&this.args.currentSheild[i](this,n),this[i]&&this[i](n)):-1===n.delta?(this.args.currentSheild&&o in this.args.currentSheild&&this.args.currentSheild[o](this,n),this[o]&&this[o](n)):n.active&&(this.args.currentSheild&&a in this.args.currentSheild&&this.args.currentSheild[a](this,n),this[a]&&this[a](n));else if(this.args.standingOn&&this.args.standingOn.isVehicle){this.args.jumping=!1,this.args.flying=!1;var s=this.args.standingOn;1===n.delta?s[i]&&s[i](n):-1===n.delta?s[o]&&s[o](n):n.active&&s[a]&&s[a](n)}}}}}},{key:"command_0",value:function(){if(this.args.hangingFrom&&this.args.hangingFrom.unhook){var t=this.getLocalDrag();return this.args.ySpeed=-this.args.jumpForce*t*.75,this.args.hangingFrom.unhook(),void(this.swing=!1)}if((this.args.falling||this.willJump||this.args.dontJump)&&this.args.standingOn&&!this.args.standingOn.isVehicle){if(this.args.ignore&&-4!==this.args.ignore)return;return this.viewport.auras.delete(this.args.standingOn),void(this.willJump=!0)}this.willJump||((this.yAxis<0||this.args.standingOn&&this.args.standingOn.quickDrop)&&(this.ignores.set(this.args.standingOn,15),this.args.ignore=0),this.willJump=!0)}},{key:"command_1",value:function(){this.canRoll&&this.args.gSpeed&&(this.args.rolling=!0)}},{key:"release_0",value:function(){this.args.float||(this.args.jumping&&!this.lightDashed&&!this.dashed&&this.args.ySpeed<-8?this.args.ySpeed*=.5:this.args.jumping&&!this.lightDashed&&!this.dashed&&this.args.ySpeed<-4&&(this.args.ySpeed=-4))}},{key:"distanceFrom",value:function(t){var e=t.x,r=t.y,n=Math.pow(this.x-e,2)+Math.pow(this.y-r,2);return n?Math.sqrt(n):0}},{key:"twist",value:function(t){var e=this;if(!this.twister){var r=this.viewport.tags.bgFilters;this.twistFilter=new i.Tag('<div class = "point-actor-filter twist-filter">'),r.appendChild(this.twistFilter.node),this.twister=new a.Twist({id:"twist-"+this.args.id,scale:60}),this.twister.args.bindTo(["x","y","width","height","xOff","yOff"],function(t,r){var n;e.twistFilter.style((A(n={},"--".concat(r),t),A(n,"filter","url(#twist-".concat(e.args.id,")")),n))}),this.twister.args.yOff=16,this.twister.render(this.twistFilter.node),this.onRemove(function(){return e.twistFilter.remove()})}this.twister.args.scale=t}},{key:"pinch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.pincherBg){var r=this.viewport.tags.bgFilters;this.args.type.split(" ").shift();this.pinchFilterBg=new i.Tag('<div class = "point-actor-filter pinch-filter">'),r.appendChild(this.pinchFilterBg.node),this.pincherBg=new c.Pinch({id:"pinch-"+this.args.id,scale:60}),this.pincherBg.args.bindTo(["x","y","width","height","xOff","yOff"],function(e,r){var n;t.pinchFilterBg.style((A(n={},"--".concat(r),e),A(n,"filter","url(#pinch-".concat(t.args.id,")")),n))}),this.pincherBg.render(this.pinchFilterBg),this.onRemove(function(){return t.pinchFilterBg.remove()})}this.pincherBg.args.scale=e}},{key:"droop",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.args.width/2;if(!this.drooperFg)return this.drooperFg=new s.Droop({id:"droop-"+this.args.id,width:3*this.args.width,height:3*this.args.height,scale:64}),this.args.bindTo(["x","y"],function(e,r){t.drooperFg.args[r]=Number(e)}),this.onNextFrame(function(){t.drooperFg.args.scale=Number(2*e),t.sprite.style({transform:"translate(-50%, calc(".concat(e,"px + calc(-100% + 1px)))"),filter:"url(#droop-".concat(t.args.id,")")}),t.drooperFg.args.dx=-r}),void this.drooperFg.render(this.sprite);this.drooperFg.args.scale=Number(2*e),this.sprite.style({transform:"translate(-50%, calc(".concat(e,"px + calc(-100% + 1px)))"),filter:"url(#droop-".concat(this.args.id,")")});var o=1-r/n;this.args.width;this.drooperFg.args.droopWidthLeft="".concat(51*o+1,"%"),this.drooperFg.args.droopRightStart="".concat(51*o,"%"),this.drooperFg.args.droopWidthRight="".concat(102+-51*o,"%")}},{key:"crossRegionBoundary",value:function(t){if(t&&!this.args.static&&this.viewport){var e=this.viewport;if(!this.args.gone&&t.entryParticle){var r=new i.Tag(t.entryParticle);r.node&&(r.style({"--x":this.args.x+this.args.xSpeed,"--y":t.args.y+-t.args.height+-8,"z-index":5,opacity:Math.random,"--particleScale":this.args.particleScale,"--time":320}),e.particles.add(r),setTimeout(function(){return r.node&&e.particles.remove(r)},320))}}}},{key:"die",value:function(){var t=this;this.args.dead||(this.args.groundAngle=0,this.args.ySpeed=0,this.args.xSpeed=0,this.args.jumping=!1,this.args.falling=!0,this.args.ignore=-1,this.args.float=0,this.args.rings=0,this.args.standingLayer=null,this.args.standingOn=null,this.lastLayer=null,this.args.dead=!0,this.noClip=!0,this.args.ySpeed=-14,this.y>this.viewport.meta.deathLine&&(this.args.ySpeed=-16),this.args.xSpeed=0,this.viewport.onFrameOut(120,function(){t.args.dead&&t.respawn()}))}},{key:"respawn",value:function(){this.viewport&&(this.args.xSpeed=0,this.args.ySpeed=0,this.args.gSpeed=0,this.args.respawning=!0,this.args.display="none",this.args.x=-this.viewport.args.x,this.args.y=-this.viewport.args.y,this.args.standingLayer=null,this.args.standingOn=null,this.lastLayer=null)}},{key:"sleep",value:function(){}},{key:"wakeUp",value:function(){}},{key:"urlWrap",value:function(t){return"url(".concat(t,")")}},{key:"facePoint",get:function(){return this.rotatePoint(-5*this.args.direction,-14+this.args.height)}},{key:"registerDebug",value:function(t){window[t]=this}},{key:"loseRings",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.viewport.objectPalette.ring;this.spawnRings=this.spawnRings||0;var o=e||Math.min(this.args.rings,16),i=0;this.spawnRings,Math.floor(o/8);this.viewport.onFrameOut(4,function(){for(var e=function(){var e=new n,o=Math.ceil(i/8),a=i%8*(Math.PI/4),s=Math.cos(a),c=Math.sin(a);e.args.x=t.x-s*(8*o),e.args.y=t.y-c*(8*o)-t.args.height/4,e.args.xSpeed=0,e.args.ySpeed=0,e.noClip=!0,e.args.static=!1,e.args.float=18,e.args.ignore=30,e.args.width=16,e.args.height=16,e.dropped=!0,t.viewport.onFrameOut(2*(1+o),function(){t.viewport.spawn.add({object:e})}),t.spawnRings++,i++,t.viewport.onFrameOut(2*o+6,function(){e.args.xSpeed+=-s*o*3,e.args.ySpeed+=-c*o*3}),i%3==2?(e.args.decoration=!0,e.noClip=!0,t.viewport.onFrameOut(100,function(){t.viewport.actors.remove(e),t.spawnRings>0&&t.spawnRings--})):(e.args.decoration=!1,e.noClip=!1,t.viewport.onFrameOut(r||360-i%5*35,function(){t.viewport.actors.remove(e),t.spawnRings>0&&t.spawnRings--}))};t.spawnRings<o;)e()})}},{key:"collect",value:function(t){t.dropped&&(this.spawnRings&&this.spawnRings--,t.dropped=!1)}},{key:"angleTo",value:function(t){return Math.atan2(this.y-t.y,this.x-t.x)}},{key:"distanceTo",value:function(t){return Math.sqrt(Math.pow(this.y-t.y,2)+Math.pow(this.x-t.x,2))}},{key:"setTile",value:function(){var t=this,e=this.viewport.tileMap;e.ready.then(function(r){var n=e.getTile(t.args.tileId-1);n&&(t.args.spriteX=n[0],t.args.spriteY=n[1],t.args.spriteSheet=n[2]||t.args.spriteSheet)})}},{key:"halt",value:function(t){var e=this,r=this.args.hSpeed=this.args.gSpeed;this.args.gSpeed=0,this.viewport.onFrameOut(t,function(){e.args.gSpeed=r,e.args.hSpeed=0})}},{key:"setAutoAttr",value:function(t,e){this.autoAttr.get(this.box)[e]=t}},{key:"invoke",value:function(t){for(var e=this,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.behaviors.forEach(function(r){"function"==typeof r[t]&&r[t].apply(r,[e].concat(n))})}},{key:"bMap",value:function(t){for(var e=new Map,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var i,a=k(this.behaviors);try{for(a.s();!(i=a.n()).done;){var s=i.value;"function"==typeof s[t]&&e.set(s.constructor,s[t].apply(s,[this].concat(n)))}}catch(t){a.e(t)}finally{a.f()}return e}}])&&P(e.prototype,r),x&&P(e,x),Object.defineProperty(e,"prototype",{writable:!1}),E}();t.PointActor=D,A(D,"lastClick",0)}),require.register("actor/PowerupGlow.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PowerupGlow=void 0;var o=e("./PointActor"),i=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="actor-item actor-powerup-glow",t.args.width=64,t.args.height=64,t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.autoAttr.get(this.box)["data-closed"]="closed",this.icon=new i.Tag('<div class = "powerup-icon">'),this.halo=new i.Tag('<div class = "powerup-halo">'),this.tags.sprite.appendChild(this.icon.node),this.box.appendChild(this.halo.node)}},{key:"collideA",value:function(t){var e=this;s(u(p.prototype),"collideA",this).call(this,t),t.controllable&&(this.onTimeout(125,function(){return e.args.closed="closed"}),this.onTimeout(4500,function(){return e.args.closed=""}))}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.PowerupGlow=f}),require.register("actor/Projectile.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Projectile=void 0;var o=e("./PointActor"),i=e("../behavior/Platformer"),a=(e("../actor/Explosion"),e("curvature/base/Tag")),s=e("../region/Region"),c=e("./Spring"),l=e("./BreakableBlock");e("./Block");function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(y,o.PointActor);var e,r,n,d=h(y);function y(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=d.call.apply(d,[this].concat(r))).args.type="actor-item actor-projectile",t.behaviors.add(new i.Platformer),t.args.width=8,t.args.height=8,t.args.strength=t.args.strength||1,t.args.gravity=.15,t.removeTimer=null,t.noClip=!0,t.deflected=!1,t}return e=y,(r=[{key:"update",value:function(){var t=this;!this.removed&&this.viewport&&(this.args.falling||(this.args.gSpeed=0,this.args.xSpeed=0,this.args.ySpeed=0),f(g(y.prototype),"update",this).call(this),!this.args.xSpeed&&!this.args.ySpeed&&this.age>1&&this.explode(),this.viewport&&!this.removeTimer&&(this.removeTimer=this.viewport.onFrameOut(150,function(){return t.explode()})))}},{key:"collideA",value:function(t){return!(this.args.strength<=1&&t instanceof l.BreakableBlock)&&(!(t===this.args.owner||t instanceof s.Region||t instanceof c.Spring)&&(!t.args.gone&&!this.deflected&&(t.args.currentSheild&&t.args.currentSheild.immune(t,this,"projectile")?(this.args.xSpeed*=-1,this.args.ySpeed*=-1,void(this.deflected=!0)):!(!t.solid&&!t.controllable)&&(this.args.xSpeed=0,this.args.ySpeed=0,this.args.float=-1,this.args.owner&&!this.args.owner.args.gone&&(t.controllable||t instanceof l.BreakableBlock)&&t.damage(),this.explode(),!1))))}},{key:"explode",value:function(){var t=this.viewport;if(t){var e=new a.Tag('<div class = "particle-explosion">');e.style({"--x":this.x,"--y":this.y}),t.particles.add(e),setTimeout(function(){return t.particles.remove(e)},350),this.viewport.actors.remove(this),this.remove()}}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!1}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.Projectile=d}),require.register("actor/Pulley.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Pulley=void 0;var o=e("./PointActor");e("./Ring");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.width=64,t.args.height=64,t.args.type="actor-item actor-pulley",t.args.convey=0,t.args.conveyed=0,t.args.float=-1,t.noClip=!0,t}return e=l,(r=[{key:"update",value:function(){this.match?this.args.convey=-this.match.args.convey:this.match=this.viewport.actorsById[this.args.match],this.box&&this.box.style({"--convey":Math.abs(this.args.convey)}),this.box&&this.box.style({"--conveyDir":Math.sign(this.args.convey)}),this.args.conveyed+=this.match.args.convey,this.box&&this.box.style({"--conveyed":this.args.conveyed})}},{key:"isEffect",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Pulley=l}),require.register("actor/PulleySmall.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PulleySmall=void 0;var o=e("./Pulley");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Pulley);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.width=32,t.args.height=32,t.args.type="actor-item actor-pulley-small",t.args.convey=0,t.args.float=-1,t.noClip=!0,t}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.PulleySmall=l}),require.register("actor/QuestionBlock.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.QuestionBlock=void 0;var o=e("./PointActor"),i=(e("./monitor/RingMonitor"),e("./monitor/SheildWaterMonitor"));function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(g,o.PointActor);var e,r,n,h=c(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(l(t=h.call.apply(h,[this].concat(r))),"maxBounce",4),p(l(t),"float",-1),p(l(t),"template",'<div\n\t\tclass = "point-actor [[type]] [[collType]]"\n\t\tstyle = "\n\t\t\tdisplay:[[display]];\n\t\t\t--angle:[[angle]];\n\t\t\t--airAngle:[[airAngle]];\n\t\t\t--display-angle:[[_angle]];\n\t\t\t--height:[[height]];\n\t\t\t--width:[[width]];\n\t\t\t--x:[[x]];\n\t\t\t--y:[[y]];\n\t\t"\n\t\tdata-colliding = "[[colliding]]"\n\t\tdata-falling   = "[[falling]]"\n\t\tdata-facing    = "[[facing]]"\n\t\tdata-angle     = "[[angle|rad2deg]]"\n\t\tdata-mode      = "[[mode]]"\n\t\tdata-empty     = "[[empty]]"\n\t\tcv-ref = "box"\n\t><div cv-ref = "sprite" class = "sprite"></div></div>'),t.args.type="actor-question-block actor-item",t.args.width=32,t.args.height=32,t.initY=null,t.empty=!1,t}return e=g,n=[{key:"fromDef",value:function(t){var e=u(f(g),"fromDef",this).call(this,t);return e.args.x=e.originalX=t.x+Math.floor(t.width/2),e.args.y=e.originalY=t.y,e}}],(r=[{key:"collideA",value:function(t,e){var r=this;if(u(f(g.prototype),"collideA",this).call(this,t),null===this.initY&&(this.initY=this.y),2===e){var n=Math.abs(t.args.ySpeed);if(t.args.falling=!0,t.args.ySpeed>0?t.args.ySpeed+=this.args.ySpeed:(this.args.y-=n,t.args.y+=n),this.args.ySpeed>0&&this.args.ySpeed>t.args.ySpeed&&(t.args.ySpeed=Math.abs(t.args.ySpeed),t.args.y+=this.args.ySpeed),this.args.ySpeed<0&&(this.args.ySpeed=-Math.abs(this.args.ySpeed)),this.args.ySpeed)return!0;var o=this.maxBounce,a=2===e?-Math.abs(t.args.ySpeed):t.args.ySpeed;Math.abs(a)>o&&(a=o*Math.sign(a)),this.args.ySpeed=a,t.args.ySpeed=-t.args.ySpeed}if(2===e&&!this.args.empty&&!this.args.empty){var s=new i.SheildWaterMonitor({x:this.x,y:this.y-96});this.viewport.spawn.add({object:s}),s.onRemove(function(){return r.args.empty=!1}),this.args.empty=!0}return!0}},{key:"update",value:function(){null!==this.initY&&(this.initY>this.y?this.args.ySpeed+=.75:this.initY<this.y&&(this.args.ySpeed-=.75),Math.abs(this.args.y-this.initY)<1&&Math.abs(this.args.ySpeed)<1&&(this.args.ySpeed=0,this.args.y=this.initY)),this.args.ySpeed*=.9,this.args.ySpeed=Math.floor(100*this.args.ySpeed)/100,this.args.y=Math.round(this.args.y);var t=this.maxBounce;Math.abs(this.args.ySpeed)>t&&(this.args.ySpeed=t*Math.sign(this.args.ySpeed)),u(f(g.prototype),"update",this).call(this)}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.QuestionBlock=h}),require.register("actor/RailCar.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RailCar=void 0;var o=e("./Vehicle"),i=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Vehicle);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="actor-item actor-rail-car",t.args.width=32,t.args.height=48,t.removeTimer=null,t.args.cartSpeed=t.args.cartSpeed||15,t.args.gSpeedMax=20,t.args.decel=0,t.args.accel=.75,t.args.gravity=1,t.args.seatHeight=44,t.args.skidTraction=.05,t.args.jumpForce=12,t.dustCount=0,t.args.particleScale=2,t.args.started=!1,t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite"),this.frontWheel=new i.Tag('<div class = "rail-car-wheel rail-car-wheel-front">'),this.backWheel=new i.Tag('<div class = "rail-car-wheel rail-car-wheel-back">'),this.frontFrag=new i.Tag('<div class = "rail-car-frag rail-car-frag-front">'),this.backFrag=new i.Tag('<div class = "rail-car-frag rail-car-frag-back">'),this.sprite.appendChild(this.frontWheel.node),this.sprite.appendChild(this.backWheel.node),this.sprite.appendChild(this.frontFrag.node),this.sprite.appendChild(this.backFrag.node)}},{key:"update",value:function(){this.originalSpeed=this.args.gSpeed||this.args.xSpeed;var t=this.x;if(s(u(p.prototype),"update",this).call(this),this.sprite){var e=this.x;if(0===this.args.gSpeed&&0===this.args.hSpeed&&0===this.args.xSpeed||(this.sprite.classList.add("moving"),this.args.started=!0),e===t&&!this.args.broken&&!this.args.hSpeed&&(this.sprite.classList.remove("moving"),this.args.started)){this.viewport;!this.args.falling||this.args.xSpeed||this.args.ySpeed?!this.args.falling&&this.args.pushing&&this.breakApart():this.breakApart()}if(this.occupant&&!this.args.falling){var r=this.args.hSpeed||this.args.gSpeed;(Math.abs(r)<Math.abs(this.args.cartSpeed)||Math.sign(r)!==Math.sign(this.args.cartSpeed))&&(this.args.hSpeed?this.args.hSpeed+=.125*Math.sign(this.args.cartSpeed):this.args.gSpeed+=.125*Math.sign(this.args.cartSpeed),Math.abs(this.args.gSpeed)<1&&(this.args.gSpeed=Math.sign(this.args.gSpeed))),this.args.direction=Math.sign(this.args.hSpeed||this.args.gSpeed)}else this.args.hSpeed?this.args.hSpeed=this.args.xSpeed:this.args.xSpeed&&(this.args.gSpeed=this.args.xSpeed)}}},{key:"breakApart",value:function(){if(!this.args.broken){this.viewport;this.occupant&&this.occupant.startle(),this.sprite.classList.add("breaking"),this.args.broken=!0,this.args.groundAngle=0,this.args.mode=0,this.args.dead=!0}}},{key:"sleep",value:function(){this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.args.dead=!1,this.args.groundAngle=0,this.args.gSpeed=0,this.args.xSpeed=0,this.args.ySpeed=0,this.sprite.classList.remove("breaking"),this.sprite.classList.remove("broken"),this.args.broken=!1,this.args.started=!1,s(u(p.prototype),"sleep",this).call(this)}},{key:"processInputDirect",value:function(){}},{key:"solid",get:function(){return!this.args.broken&&!this.occupant}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.RailCar=f}),require.register("actor/Red.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Red=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).behaviors.add(new SkidDust),t.args.type="actor-item actor-red",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.width=16,t.args.height=16,t.args.float=-1,t}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Red=l}),require.register("actor/RedEyeJet.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RedEyeJet=void 0;var o=e("curvature/base/Tag"),i=e("../audio/Bgm"),a=e("../audio/Sfx"),s=e("./PointActor"),c=e("./Projectile"),l=e("./MiniMace"),u=e("./MegaMace");function f(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=b(t);if(e){var i=b(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(v,s.PointActor);var e,r,n,p=y(v);function v(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),(r=p.call(this,t,e)).args.gravity=.4,r.args.width=96,r.args.height=32,r.args.type="actor-item actor-red-eye-jet",r.args.float=-1,r.args.phase="idle",r.args.hitPoints=r.args.hitPoints||8,r.args.maxSpeed=9,r.args.bindTo("phase",function(t){return r.args.phaseFrameId=0}),r}return e=v,(r=[{key:"collideA",value:function(t,e){var r,n=this;if(this.hanging.has(t))return!1;if(this.hanging.has(l.MiniMace)?r="MINI-MACE":this.hanging.has(u.MegaMace)&&(r="MEGA-MACE"),t.controllable||t instanceof c.Projectile){if(c.Projectile,this.args.hitPoints>0&&!(t.args.jumping||t.args.rolling||t.dashed||t instanceof c.Projectile))return t.damage(),!0;if(!this.args.falling&&"exploding"!==this.args.phase){if(!(t.args.jumping||t.args.rolling||t.dashed))return!0;this.box.setAttribute("data-phase","exploding"),this.args.phase="exploding",this.viewport.clearCheckpoints(t.args.id);var o=this.viewport;o.onFrameOut(80,function(){n.box.setAttribute("data-phase","exploded"),n.args.falling=!0,n.args.ySpeed=-12,n.noClip=!0,a.Sfx.play("OBJECT_DESTROYED")}),o.onFrameOut(100,function(){o.clearAct("".concat(t.args.name," BEAT THE ").concat(r))}),o.onFrameOut(100,function(){n.viewport.args.cutScene=!0}),o.onFrameOut(150,function(){n.viewport.controlActor.controller.replay({axes:[1,0,0,1]}),n.viewport.controlActor.readInput()}),o.onFrameOut(210,function(){n.viewport.controlActor.controller.replay({buttons:[1]}),n.viewport.controlActor.readInput()}),o.onFrameOut(211,function(){n.viewport.controlActor.dropDashCharge=30}),o.onFrameOut(285,function(){n.viewport.controlActor.controller.replay({buttons:[0,0,0,0,0,0]}),n.viewport.controlActor.readInput(),n.args.phase="done"}),o.onFrameOut(500,function(){n.args.xSpeed=0,n.args.ySpeed=0,n.args.y=-1024})}this.ignores.set(t,15),2===e&&(a.Sfx.play("BOSS_DUDHIT"),t.args.ySpeed=Math.max(7,Math.abs(t.args.ySpeed)));var s=Math.max(Math.abs(t.args.xSpeed),Math.abs(this.args.xSpeed));this.args.hitPoints>1&&this.args.falling?this.args.xSpeed=t.args.xSpeed:this.args.xSpeed=0;var f=!1;if(1===e&&(a.Sfx.play("BOSS_DAMAGED"),f=!0,this.args.hitPoints>0?(t.args.xSpeed=1.25*-s,t.args.xSpeed=Math.min(-7,-this.args.xSpeed),this.args.hitPoints--):(t.args.xSpeed=-2,t.args.ignore=-2)),3===e&&(a.Sfx.play("BOSS_DAMAGED"),f=!0,this.args.hitPoints>0?(t.args.xSpeed=1.25*s,t.args.xSpeed=Math.max(7,-this.args.xSpeed),this.args.hitPoints--):(t.args.xSpeed=2,t.args.ignore=-2)),f&&t&&t.controller&&t.controller.rumble&&this.viewport.settings.rumble&&(t.controller.rumble({duration:120,strongMagnitude:1,weakMagnitude:1}),this.onTimeout(100,function(){t.controller.rumble({duration:100,strongMagnitude:0,weakMagnitude:.5})})),t instanceof c.Projectile||1===e||3===e||0===e){if(["dead","exploding","damaged","done"].includes(this.args.phase)||(this.args.phase="damaged",this.args.animation="",this.args.animation="damaged",0===this.args.hitPoints&&"exploding"!==this.args.phase&&(this.box.setAttribute("data-phase","dead"),this.args.animation="",this.args.phase="dead","function"==typeof ga&&ga("send","event",{eventCategory:"boss",eventAction:"defeated",eventLabel:"".concat(this.viewport.args.actName,"::").concat(this.args.id)})),this.viewport.onFrameOut(20,function(){"intro"!==n.args.phase&&(n.args.hitPoints>0?(n.args.animation="attacking",n.args.phase="attacking"):["dead","exploding","done"].includes(n.args.phase)||(n.box.setAttribute("data-phase","dead"),n.args.animation="dead",n.args.phase="dead",n.args.xSpeed=0,t.args.score+=2e4))})),0===e){t.args.y=this.y-this.args.height;var p=t.args.animation,h=t.args.ySpeed;this.onNextFrame(function(){t.args.animation=p,t.args.falling=!0,t.args.xSpeed=-4*Math.sign(n.x-t.x),t.args.ySpeed=-Math.floor(Math.abs(h))||-4}),a.Sfx.play("BOSS_DAMAGED")}var g=t.args.gSpeed;t.args.gSpeed=-g,t.args.rolling&&this.onNextFrame(function(){t.args.gSpeed=-g,t.args.rolling=!0,t.args.direction,Math.sign(g)})}return t.args.ignore=1,this.args.hitPoints||(i.Bgm.stop("ZONE-BOSS"),i.Bgm.stop("ACT-BOSS"),t.args.ignore=-2),!0}}},{key:"update",value:function(){var t=this;if("idle"!==this.args.phase&&this.viewport){if(this.args.phaseFrameId++,this.args.frameId++,"intro"===this.args.phase){if(this.hanging.has(l.MiniMace)){var e,r=f(this.hanging.get(l.MiniMace));try{for(r.s();!(e=r.n()).done;){e.value.args.ropeLength=80}}catch(t){r.e(t)}finally{r.f()}i.Bgm.play("ACT-BOSS",!0)}if(this.hanging.has(u.MegaMace)){var n,s=f(this.hanging.get(u.MegaMace));try{for(s.s();!(n=s.n()).done;){n.value.args.ropeLength=96}}catch(t){s.e(t)}finally{s.f()}i.Bgm.play("ZONE-BOSS",!0)}this.args.maxSpeed=12,this.args.phaseFrameId>240&&(this.args.phase="attacking")}else this.hanging.has(l.MiniMace)?this.viewport.onFrameOut(45,function(){var e,r=f(t.hanging.get(l.MiniMace));try{for(r.s();!(e=r.n()).done;){e.value.args.ropeLength=128}}catch(t){r.e(t)}finally{r.f()}}):this.hanging.has(u.MegaMace)&&this.viewport.onFrameOut(45,function(){var e,r=f(t.hanging.get(u.MegaMace));try{for(r.s();!(e=r.n()).done;){e.value.args.ropeLength=176}}catch(t){r.e(t)}finally{r.f()}});if("attacking"===this.args.phase){if(this.args.maxSpeed=9,this.hanging.has(l.MiniMace)){var c,p=f(this.hanging.get(l.MiniMace));try{for(p.s();!(c=p.n()).done;){c.value.args.float=0}}catch(t){p.e(t)}finally{p.f()}}if(this.hanging.has(u.MegaMace)){var h,d=f(this.hanging.get(u.MegaMace));try{for(d.s();!(h=d.n()).done;){h.value.args.float=0}}catch(t){d.e(t)}finally{d.f()}}Math.abs(this.viewport.controlActor.x-this.x)>255&&(this.args.phase="chasing")}if("chasing"===this.args.phase&&Math.abs(this.viewport.controlActor.x-this.x)<8&&this.y<this.viewport.controlActor.y&&(this.args.phase="attacking"),"exploding"!==this.args.phase)"damaged"===this.args.phase&&(this.args.xSpeed*=.999),this.box&&(this.x-this.viewport.controlActor.x>0?Math.abs(this.x-this.viewport.controlActor.x)>128?this.box.setAttribute("data-looking","far-left"):-1===this.viewport.controlActor.args.direction?this.box.setAttribute("data-looking","far-left"):this.box.setAttribute("data-looking","left"):this.x-this.viewport.controlActor.x<0&&(this.box.setAttribute("data-looking","far-right"),Math.abs(this.x-this.viewport.controlActor.x)>128?this.box.setAttribute("data-looking","far-right"):1===this.viewport.controlActor.args.direction?this.box.setAttribute("data-looking","far-right"):this.box.setAttribute("data-looking","right")),32>this.y-this.viewport.controlActor.y?this.box.setAttribute("data-ducking","true"):this.box.setAttribute("data-ducking","false")),this.args.hitPoints&&["attacking","intro","chasing"].includes(this.args.phase)&&(Math.abs(this.x-this.viewport.controlActor.x)>384&&(this.args.x=this.viewport.controlActor.x+384*Math.sign(this.x-this.viewport.controlActor.x)),this.args.xSpeed+=.35*-Math.sign(this.x-this.viewport.controlActor.x)),this.args.hitPoints?(this.args.falling=!0,this.args.float=-1):this.args.float=0,"intro"!==this.args.phase&&"attacking"!==this.args.phase||(this.args.maxSpeed=11),"chasing"===this.args.phase?Math.abs(this.x-this.viewport.controlActor.x)<128&&(this.args.maxSpeed=Math.max(this.args.maxSpeed,this.viewport.controlActor.args.xSpeed)):Math.abs(this.args.xSpeed)>this.args.maxSpeed&&(this.args.xSpeed=Math.sign(this.args.xSpeed)*this.args.maxSpeed),g(b(v.prototype),"update",this).call(this);else{var y=this.viewport;if(y&&y.args.frameId%3==0){var m=new o.Tag('<div class = "particle-explosion">');a.Sfx.play("BOSS_DAMAGED");var w=this.args.width*Math.random()-this.args.width/2,S=this.args.height*Math.random()-this.args.height/2;m.style({"--x":this.x+w,"--y":this.y+S+-16}),y.particles.add(m),setTimeout(function(){return y.particles.remove(m)},512)}g(b(v.prototype),"update",this).call(this)}}}},{key:"onRendered",value:function(t){g(b(v.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite"),this.body=new o.Tag('<div class = "body-center">'),this.bodyL=new o.Tag('<div class = "body-left">'),this.bodyR=new o.Tag('<div class = "body-right">'),this.fireA=new o.Tag('<div class = "boost-fire boost-fire-left">'),this.fireB=new o.Tag('<div class = "boost-fire boost-fire-right">'),this.eye=new o.Tag('<div class = "orange-eye">'),this.box.appendChild(this.body.node),this.box.appendChild(this.bodyL.node),this.box.appendChild(this.bodyR.node),this.box.appendChild(this.fireA.node),this.box.appendChild(this.fireB.node),this.box.appendChild(this.eye.node)}},{key:"solid",get:function(){return!1}}])&&h(e.prototype,r),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),v}();t.RedEyeJet=v}),require.register("actor/Redz.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Redz=void 0;e("./Flickie");var o=e("curvature/base/Mixin"),i=(e("curvature/base/Tag"),e("./PointActor")),a=e("../behavior/SkidDust"),s=e("../behavior/Patrol"),c=e("../mixin/CanPop"),l=(e("../actor/Explosion"),e("../actor/SpitFire"));function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(y,o.Mixin.from(i.PointActor,c.CanPop));var e,r,n,d=h(y);function y(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=d.call.apply(d,[this].concat(r))).behaviors.add(new a.SkidDust),t.behaviors.add(new s.Patrol),t.args.type="actor-item actor-redz",t.args.animation="standing",t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=18,t.args.height=32,t.willStick=!1,t.stayStuck=!1,t.args.patrolBeat=t.args.patrolBeat||160,t.args.patrolPause=t.args.patrolPause||60,t.args.patrolSpeed=t.args.patrolSpeed||.25,t.age=0,t}return e=y,(r=[{key:"update",value:function(){f(g(y.prototype),"update",this).call(this);var t=this.args.direction=Math.sign(this.args.gSpeed)||this.args.direction;if(this.box&&(Math.sign(this.args.gSpeed)!==t&&Math.abs(this.args.gSpeed-t)>5?this.box.setAttribute("data-animation","skidding"):this.args.moving&&this.args.gSpeed?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","shooting")),this.age%this.args.patrolBeat==this.args.patrolBeat-this.args.patrolPause){var e=new l.SpitFire({owner:this,direction:t,x:this.x+59*t,y:this.y-3,z:this.z+1});this.viewport.spawn.add({object:e})}this.age++}},{key:"effect",value:function(t){f(g(y.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.Redz=d}),require.register("actor/Ring.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Ring=void 0;var o=e("./PointActor"),i=e("./Spring"),a=e("../audio/Sfx");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(d,o.PointActor);var e,r,n,g=u(d);function d(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return h(f(n=g.call.apply(g,[this].concat(a))),"template",'<div class  = "point-actor [[type]]">\n\t\t<div class = "sprite" cv-ref = "sprite"></div>\n\t</div>'),h(f(n),"float",-1),n[i.Spring.WontSpring]=!0,n.args.type="actor-item actor-ring",n.args.width=32,n.args.height=32,n.args.static=null===(t=n.args.static)||void 0===t||t,n.args.dropped=null===(e=n.args.dropped)||void 0===e||e,n.args.gone=!1,n.args.gravity=.4,n.args.delay=null!==(r=n.args.delay)&&void 0!==r?r:48,n}return e=d,(r=[{key:"update",value:function(){var t=this;if(this.viewport){var e=this.viewport.args.frameId-this.startFrame;this.args.noClip?this.noClip=!0:this.args.decoration?this.noClip=!0:this.args.ySpeed<0||e<15?this.noClip=!0:this.attract||(this.noClip=!1),this.args.decoration&&(this.args.type="actor-item actor-ring decoration",this.args.gravity=.36),this.dropped&&(this.args.type="actor-item actor-ring dropped",this.args.height=14);var r=this.viewport;this.dropped&&this.viewport&&!this.viewport.actorIsOnScreen(this,256)&&r.onFrameOut(15,function(){r.actors.remove(t)}),this.args.reward&&this.args.gone&&r.onFrameOut(15,function(){r.actors.remove(t)}),(this.args.reward||this.dropped||this.attract)&&c(p(d.prototype),"update",this).call(this),this.args.reward||(this.dropped&&!this.attract&&this.getMapSolidAt(this.args.x,this.args.y+-this.args.height)&&!this.getMapSolidAt(this.args.x,this.args.y)?(this.args.y+=this.args.height+1,this.args.ySpeed=Math.abs(this.args.ySpeed)||8):this.dropped&&!this.attract&&this.getMapSolidAt(this.args.x+this.args.xSpeed*this.args.direction,this.args.y+-8,!1)&&(this.args.xSpeed*=-1),!this.dropped&&!this.scattered||this.args.falling&&this.args.ySpeed||(this.args.xSpeed=this.args.xSpeed||this.xSpeedLast||Math.random()-.5,this.args.ySpeed=Math.min(.75*-Math.abs(this.args.ySpeed||this.ySpeedLast||0),e>6?-2:0),this.args.gSpeed=0,this.args.x+=this.args.xSpeed,this.args.y+=this.args.ySpeed,this.args.falling=!0,this.args.groundAngle=0))}}},{key:"callCollideHandler",value:function(t){return!(t instanceof d)&&c(p(d.prototype),"callCollideHandler",this).call(this,t)}},{key:"collideA",value:function(t){var e=this;if(!(t instanceof this.constructor)){if(!this.viewport||this.args.gone||this.args.ignore)return!1;var r=this.viewport.args.frameId-this.startFrame;if(this.dropped&&r<this.args.delay)return!1;if(t.args.owner&&(t=t.args.owner),t.occupant&&(t=t.occupant),!t.controllable&&!t.occupant&&!t.args.owner)return!1;c(p(d.prototype),"collideA",this).call(this,t),t.controllable&&(t.args.rings+=1),this.args.gone=!0,this.viewport.auras.delete(this),this.args.static=!0,this.args.float=-1,this.args.type="actor-item actor-ring collected",this.args.xSpeed=0,this.args.ySpeed=0,this.viewport.args.audio&&a.Sfx.play("RING_COLLECTED"),this.viewport.onFrameOut(5,function(){e.args.type="actor-item actor-ring collected gone"});this.args.x,this.args.y,this.viewport;this.viewport.onFrameOut(4200,function(){e.restore=!0}),t.collect&&("function"==typeof ga&&ga("send","event",{eventCategory:"ring",eventAction:"collected",eventLabel:"".concat(this.viewport.args.actName,"::").concat(this.args.id)}),this.viewport.onFrameOut(1,function(){t.collect(e)}))}}},{key:"wakeUp",value:function(){this.def&&this.restore&&(this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.args.gone=this.restore=!1,this.args.type="actor-item actor-ring")}},{key:"solid",get:function(){return!1}},{key:"rotateLock",get:function(){return!0}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.Ring=g}),require.register("actor/RoadBarrier.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RoadBarrier=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.width=t.args.width||64,t.args.height=t.args.height||32,t.args.type="actor-item actor-road-barrier",t.args.z=0,t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.RoadBarrier=l}),require.register("actor/Rocket.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Rocket=void 0;var o=e("./PointActor"),i=e("curvature/base/Tag"),a=e("../audio/Sfx");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.PointActor);var e,r,n,p=u(h);function h(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(r=p.call.apply(p,[this].concat(o))).args.width=64,r.args.height=16,r.args.xMax=null!==(t=r.args.xMax)&&void 0!==t?t:24,r.args.yMax=null!==(e=r.args.yMax)&&void 0!==e?e:24,r.args.type="actor-item actor-rocket",r.args.launched=!1,r.args.bindTo(["xSpeed","ySpeed"],function(t){!t&&r.args.launched&&r.explode()}),r}return e=h,(r=[{key:"update",value:function(){this.viewport&&(c(f(h.prototype),"update",this).call(this),this.args.launched&&Math.abs(this.args.xSpeed)<Math.abs(this.args.xMax)&&(this.args.xSpeed+=.5*Math.sign(this.args.xMax)),this.args.launched&&Math.abs(this.args.ySpeed)<Math.abs(this.args.yMax)&&(this.args.ySpeed-=.5*Math.sign(this.args.yMax)),this.args.launched&&0===this.args.xSpeed&&0===this.args.ySpeed&&this.explode())}},{key:"activate",value:function(){this.viewport.auras.add(this),this.args.launched=!0,this.args.xMax&&(this.args.xSpeed+=.5),this.args.yMax&&(this.args.ySpeed-=.5)}},{key:"sleep",value:function(){this.args.launched&&this.explode()}},{key:"wakeUp",value:function(){}},{key:"explode",value:function(){var t=this.viewport;if(t){var e=new i.Tag('<div class = "particle-explosion">');e.style({"--x":this.x,"--y":this.y-8}),t.particles.add(e),setTimeout(function(){return t.particles.remove(e)},512),a.Sfx.play("OBJECT_DESTROYED"),this.args.xSpeed=0,this.args.ySpeed=0,this.args.opacity=0,this.args.launched=!1,this.viewport.setColCell(this),this.viewport.onFrameOut(60,function(){});var r=new CustomEvent("exploded",{detail:{actor:this}});this.dispatchEvent(r),this.args.launched=!1,this.args.opacity=1,this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.viewport.setColCell(this),this.viewport.auras.delete(this)}}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Rocket=p}),require.register("actor/Rocks.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Rocks=void 0;var o=e("./PointActor"),i=e("../actor/Projectile"),a=e("curvature/base/Tag"),s=e("../audio/Sfx");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,o.PointActor);var e,r,n,h=f(g);function g(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),(r=h.call(this,t,e)).args.type="actor-item actor-rocks-tall",r.args.width=48,r.args.height=80,r.gone=!1,r.particleA=new a.Tag('<div class = "particle-rock">'),r.particleB=new a.Tag('<div class = "particle-rock">'),r.particleC=new a.Tag('<div class = "particle-rock">'),r.particleD=new a.Tag('<div class = "particle-rock">'),r.particleE=new a.Tag('<div class = "particle-rock">'),r.particleF=new a.Tag('<div class = "particle-rock">'),r.particleG=new a.Tag('<div class = "particle-rock">'),r.particleH=new a.Tag('<div class = "particle-rock">'),r}return e=g,(r=[{key:"onRendered",value:function(t){l(p(g.prototype),"onRendered",this).call(this,t);var e=-1,r=this.particleA,n=this.particleB,o=this.particleC,i=this.particleD,a=this.particleE,s=this.particleF,c=this.particleG,u=this.particleH;r.style({"--x":this.x-8,"--y":this.y-8,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":40,"z-index":0}),e*=-1,n.style({"--x":this.x+8,"--y":this.y-0,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":40,"z-index":0}),e*=-1,o.style({"--x":this.x,"--y":this.y-18,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":44,"z-index":0}),e*=-1,i.style({"--x":this.x+8,"--y":this.y-10,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":44,"z-index":0}),e*=-1,a.style({"--x":this.x-8,"--y":this.y-28,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":48,"z-index":0}),e*=-1,s.style({"--x":this.x+8,"--y":this.y-20,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":48,"z-index":0}),e*=-1,c.style({"--x":this.x-8,"--y":this.y-30,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":48,"z-index":0}),e*=-1,u.style({"--x":this.x+8,"--y":this.y-30,"--fallSpeed":1550+20*Math.random(),"--xMomentum":60*e+20*Math.random(),"--yMomentum":65,"z-index":0})}},{key:"collideA",value:function(t,e){return!this.args.gone&&(l(p(g.prototype),"collideA",this).call(this,t,e),t.occupant||t.args.rolling||t.punching?(this.pop(t),!1):2!==e&&(!this.args.falling||-1===this.args.float)&&t.args.ySpeed>0&&t.y<this.y&&this.viewport&&!this.args.gone?(this.args.falling&&Math.abs(t.args.ySpeed)>0&&(t.args.xSpeed*=-1),this.pop(t),!1):!((1===e||3===e)&&t instanceof i.Projectile&&this.viewport&&!this.args.gone)||(this.pop(t),!1))}},{key:"pop",value:function(t){var e=this;this.args.gone=!0;var r=this.viewport;if(r){s.Sfx.play("ROCKS_DESTROYED");var n=this.particleA,o=this.particleB,i=this.particleC,a=this.particleD,c=this.particleE,l=this.particleF,u=this.particleG,f=this.particleH;r.particles.add(n),r.particles.add(o),r.particles.add(i),r.particles.add(a),r.particles.add(c),r.particles.add(l),r.particles.add(u),r.particles.add(f),setTimeout(function(){r.particles.remove(n),r.particles.remove(o),r.particles.remove(i),r.particles.remove(a),r.particles.remove(c),r.particles.remove(l),r.particles.remove(u),r.particles.remove(f)},2500),this.onNextFrame(function(){return r.actors.remove(e)})}}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!this.args.gone}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Rocks=h}),require.register("actor/RollingSign.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RollingSign=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.PointActor);var e,r,n,u=s(f);function f(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=u.call.apply(u,[this].concat(n))).args.width=20,e.args.height=null!==(t=e.args.height)&&void 0!==t?t:80,e.args.type="actor-item actor-rolling-sign",e}return e=f,n=[{key:"fromDef",value:function(t){var e=c(l(f),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e}}],(r=[{key:"solid",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.RollingSign=u}),require.register("actor/Sean.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Sean=void 0;var o=e("./PointActor"),i=(e("curvature/base/Tag"),e("../behavior/SkidDust"));function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.PointActor);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).behaviors.add(new i.SkidDust),t.args.type="actor-item actor-sean",t.args.normalHeight=35,t.args.rollingHeight=28,t.args.accel=.25,t.args.decel=.4,t.args.gSpeedMax=18,t.args.jumpForce=11,t.args.gravity=.5,t.args.width=18,t.args.height=35,t}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div")}},{key:"update",value:function(){var t=this.args.falling;if(this.box){if(t)this.args.jumping&&this.box.setAttribute("data-animation","jumping");else{this.yAxis>0?this.args.crouching=!0:this.args.crouching=!1;var e=this.args.direction,r=this.args.gSpeed,n=Math.abs(r),o=this.args.gSpeedMax;this.args.rolling?this.box.setAttribute("data-animation","rolling"):Math.sign(this.args.gSpeed)!==e&&Math.abs(this.args.gSpeed-e)>5?this.box.setAttribute("data-animation","standing"):n>.25*o?this.box.setAttribute("data-animation","running"):this.args.moving&&r?this.box.setAttribute("data-animation","walking"):this.box.setAttribute("data-animation","standing")}s(u(p.prototype),"update",this).call(this)}else s(u(p.prototype),"update",this).call(this)}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!0}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Sean=f}),require.register("actor/SeeSaw.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SeeSaw=void 0;var o=e("./PointActor"),i=e("./Ring"),a=e("curvature/base/Tag");function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Symbol("Side");var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(g,o.PointActor);var e,r,n,c=p(g);function g(t,e){var r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),(o=c.call(this,t,e)).args.width=96,o.args.height=32,o.noClip=!0,o.args.float=-1,o.args.power=null!==(r=o.args.power)&&void 0!==r?r:20,o.tiltTime=0,o.args.power=null!==(n=o.args.power)&&void 0!==n?n:12,o.args.type="actor-item actor-see-saw",o.args.bindTo("tilt",function(t){o.args.type="actor-item actor-see-saw ".concat(t),o.tiltTime=0}),o}return e=g,(r=[{key:"onRendered",value:function(t){u(h(g.prototype),"onRendered",this).call(this,t),this.hub||(this.hub=new a.Tag('<div class = "see-saw-hub">'),this.box.appendChild(this.hub.node))}},{key:"collideA",value:function(t,e){if(!(t instanceof i.Ring)){if(t.args.groundAngle=0,!t.args.falling||t.args.ySpeed<=0)return!1;if(Math.abs(t.x-this.x)>4){var r=Math.sign(t.x-this.x);this.reflectImpulse(t,r*t.args.weight*Math.abs(t.args.ySpeed)),t.x<this.x?(this.tiltClass="tilt-left",this.tilt=-1):t.x>this.x&&(this.tiltClass="tilt-right",this.tilt=1),this.args.tilt=this.tiltClass}}}},{key:"reflectImpulse",value:function(t,e){this.reflectObject&&this.reflectObject.args.falling&&!t.args.falling||this.tilt!==Math.sign(e)&&(this.reflectObject=t,this.reflectForce=e)}},{key:"update",value:function(){this.tiltTime++,u(h(g.prototype),"update",this).call(this)}},{key:"updateEnd",value:function(){u(h(g.prototype),"updateEnd",this).call(this);var t=this.viewport.collisions.get(this);if(!t)return this.reflectObject=null,void(this.reflectForce=0);var e,r=s(t.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;n.args.groundAngle=0;var o=n.x-this.x,i=Math.abs(o/(this.args.width/2)),a=Math.sign(o);if(this.reflectForce&&a!==Math.sign(this.reflectForce)&&!(Math.abs(o)<4)){var c=Math.abs(this.reflectForce/n.args.weight),l=Math.min(1,Math.ceil(3*i)/3);n.args.gSpeed=0,n.args.xSpeed=0,n.args.ySpeed=Math.min(-5,-c*l*1.2),n.args.y-=16,n.args.falling=!0}}}catch(t){r.e(t)}finally{r.f()}this.reflectObject=null,this.reflectForce=0}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.SeeSaw=g}),require.register("actor/Seymour.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Seymour=void 0;var o=e("./PointActor"),i=(e("curvature/base/Tag"),e("./Spring")),a=e("../behavior/SkidDust");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.PointActor);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call.apply(p,[this].concat(r))).behaviors.add(new a.SkidDust),t.args.type="actor-item actor-seymour",t.args.spriteSheet=t.spriteSheet="/secret/seymour-color-corrected.png",t.superSpriteSheet="/secret/super-seymour.png",t.args.normalHeight=44,t.args.rollingHeight=23,t.args.accel=.25,t.args.decel=.4,t.args.gSpeedMax=18,t.args.jumpForce=11,t.args.gravity=.5,t.args.width=18,t.args.height=32,t}return e=h,(r=[{key:"onRendered",value:function(t){c(f(h.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div")}},{key:"update",value:function(){var t=this.args.falling;if(this.box){if(t)this.args.jumping&&(this.args.animation="jumping");else{this.springing=!1,this.yAxis>0?this.args.crouching=!0:this.args.crouching=!1;var e=this.args.direction,r=this.args.gSpeed,n=Math.abs(r),o=this.args.gSpeedMax;this.args.rolling?this.args.animation="rolling":Math.sign(this.args.gSpeed)!==e&&Math.abs(this.args.gSpeed-e)>5?this.args.animation="standing":n>.5*o?this.args.animation="running":this.args.moving&&r?this.args.animation="walking":this.args.animation="standing"}this.args.falling&&this.springing&&(this.args.groundAngle=0,this.args.animation="springing"),c(f(h.prototype),"update",this).call(this)}else c(f(h.prototype),"update",this).call(this)}},{key:"command_3",value:function(){var t=this;this.isSuper=!this.isSuper,this.onTimeout(150,function(){0===t.args.rings&&t.setProfile()}),this.setProfile()}},{key:"setProfile",value:function(){this.isSuper?this.args.spriteSheet=this.superSpriteSheet:this.args.spriteSheet=this.spriteSheet}},{key:"collideA",value:function(t){var e=this;t instanceof i.Spring&&this.onNextFrame(function(){e.args.falling&&(e.springing=!0,e.args.animation="springing")})}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!0}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!0}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Seymour=p}),require.register("actor/Signpost.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Signpost=void 0;var o=e("../ui/CharacterString"),i=e("./PointActor"),a=e("curvature/base/Tag");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.PointActor);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call.apply(p,[this].concat(r))).args.type="actor-item actor-signpost",t.args.width=48,t.args.height=256,t.args.active=!1,t.args.follow=!1,t}return e=h,(r=[{key:"collideA",value:function(t){var e=this;if(t.controllable&&!this.args.active){this.viewport.onFrameOut(120,function(){return e.box.setAttribute("data-cleared-by",t.args.name)}),this.viewport.onFrameOut(30,function(){return t.args.rolling=!1}),this.viewport.onFrameOut(180,function(){return e.viewport.clearAct("".concat(t.args.name," GOT THROUGH ").concat(e.viewport.args.actName))}),this.viewport.onFrameOut(540,function(){e.args.charStrings=[],t.args.ignore=0,e.args.follow=!1,e.args.boss}),this.viewport.onFrameOut(30,function(){t.args.ignore=-1}),this.viewport.onFrameOut(600,function(){var r=e.viewport.actorsById[e.args.boss];e.viewport.auras.add(r),r.args.x=e.x+(e.x<125e3?768:-768),r.args.y=e.y-144,e.viewport.controlActor&&e.viewport.controlActor.args.jumpForce<10.5&&(r.args.y+=48),r.args.phase="intro",t.args.clearSpeed=0});var r=(this.viewport.args.frameId-this.viewport.args.startFrameId)/60,n=String(Math.floor(Math.abs(r)/60)).padStart(2,"0");String(Math.trunc(Math.abs(r)%60)).padStart(2,"0");(r<0?"-":"")&&(n=Number(n));var i=60*((t.args.gSpeed||t.args.xSpeed)/32)*3;t.args.clearSpeed=Math.abs(i),this.args.charStrings=[new o.CharacterString({value:"Speed: ".concat(i.toFixed(2)," ft/sec")})],this.following=t,this.args.falling=!0,this.args.active=!0,this.args.follow=!0,this.args.xSpeed=1.1*(t.args.gSpeed||t.args.xSpeed),this.args.ySpeed=-7,this.args.y--}}},{key:"update",value:function(){var t=this;if(this.args.follow){var e=this.following;!e.skidding||e.args.rolling||e.args.falling||(this.args.xStart||(this.skidLabel=new o.CharacterString({value:"Skid: 0"}),this.args.xStart=this.x,this.args.charStrings.push(this.skidLabel)),this.args.dragged=Math.trunc(Math.abs(this.args.xStart-this.x)),this.skidLabel.args.value="Skid: ".concat(this.args.dragged),e.args.dragBonus=this.args.dragged);var r=Math.max(this.x,this.viewport.controlActor.x+-160);if(r!==this.x){if(!this.args.falling){var n=new a.Tag('<div class = "particle-dust">'),i=this.rotatePoint(this.args.gSpeed,0);n.style({"--x":i[0]+this.x+-4,"--y":i[1]+this.y,"z-index":0,opacity:2*Math.random()}),this.viewport.particles.add(n),this.viewport.onFrameOut(30,function(){return t.viewport.particles.remove(n)})}this.args.x=r}}c(f(h.prototype),"update",this).call(this)}},{key:"rotateLock",get:function(){return!0}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Signpost=p}),require.register("actor/SlotMachine.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SlotMachine=void 0;var o=e("curvature/base/Tag"),i=e("../audio/Sfx"),a=e("./PointActor"),s=e("./Ring"),c=e("./AntiRing");function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,a.PointActor);var e,r,n,g=p(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=g.call.apply(g,[this].concat(r))).args.width=96,t.args.height=32,t.args.type="actor-item actor-slot-machine",t.args.float=-1,t}return e=d,(r=[{key:"onRendered",value:function(t){var e=this;u(h(d.prototype),"onRendered",this).call(this,t),this.boxes||(this.boxes=[new o.Tag('<div class = "slot-panel slot-panel-a">'),new o.Tag('<div class = "slot-panel slot-panel-b">'),new o.Tag('<div class = "slot-panel slot-panel-c">')],this.boxes.forEach(function(t){return e.box.appendChild(t.node)}))}},{key:"dropDelay",value:function(t){var e=this;if(t.controllable){this.args.type="actor-item actor-slot-machine actor-slot-machine-rolling";var r=Symbol,n=Array(8).fill(0);return this.boxes.map(function(t){t[r]=t[r]||0;var e=32+t[r]+Math.floor(8*Math.random());return t.style({"--scrollTo":32*e+"px"}),t[r]=e,t[r]%8}).forEach(function(t){return n[t]++}),new Promise(function(r){e.viewport.onFrameOut(85,function(){return e.args.type="actor-item actor-slot-machine",1===n[0]?(e.onTimeout(30,function(){return i.Sfx.play("FAIL")}),t.args.rings>50?e.punish(t,10).then(r):r()):2===n[0]?e.punish(t,50).then(r):3===n[0]?t.args.rings>0?(t.args.rings=0,r()):e.punish(t,100).then(r):2===n[5]?e.reward(t,25).then(r):3===n[5]?e.reward(t,100).then(r):2===n[6]?e.reward(t,50).then(r):3===n[6]?e.reward(t,75).then(r):2===n[7]?e.reward(t,15).then(r):3===n[7]?e.reward(t,20).then(r):3===n[2]||3===n[3]||3===n[4]?e.reward(t,50).then(r):1===n[1]?e.reward(t,2).then(r):2===n[1]?e.reward(t,30).then(r):3===n[1]?e.reward(t,60).then(r):void r()})})}}},{key:"reward",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=this.viewport,n=-1.57,o=0;o<e;o++){var i=Math.cos(n),a=Math.sin(n),c=new s.Ring({x:t.x+288*i,y:t.y+288*a,xSpeed:7*-i,ySpeed:7*-a,static:!1,reward:!0,noClip:!0,float:-1});r.spawn.add({object:c,frame:3*o+r.args.frameId}),n+=Math.PI+(o%2?.3:0)}return new Promise(function(t){return r.onFrameOut(3*(16+e),function(){return t()})})}},{key:"punish",value:function(t,e){i.Sfx.play("FAIL");for(var r=this.viewport,n=-1.57,o=0;o<e;o++){var a=Math.cos(n),s=Math.sin(n),l=new c.AntiRing({x:t.x+288*a,y:t.y+288*s,xSpeed:7*-a,ySpeed:7*-s,static:!1,reward:!0,noClip:!0,float:-1});r.spawn.add({object:l,frame:3*o+r.args.frameId}),n-=Math.PI+(o%2?.3:0)}return new Promise(function(t){return r.onFrameOut(3*(16+e),function(){return t()})})}},{key:"solid",get:function(){return!1}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.SlotMachine=g}),require.register("actor/SnailBot.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SnailBot=void 0;var o=e("curvature/base/Mixin"),i=e("./PointActor"),a=e("../behavior/Patrol"),s=e("../mixin/CanPop");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,o.Mixin.from(i.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(n=h.call.apply(h,[this].concat(i))).behaviors.add(new a.Patrol),n.args.type="actor-item actor-snailbot",n.args.animation="standing",n.args.accel=.1,n.args.decel=.5,n.args.gSpeedMax=5,n.args.gravity=.5,n.args.width=24,n.args.height=32,n.willStick=!1,n.stayStuck=!1,n.args.patrolPause=null!==(t=n.args.patrolPause)&&void 0!==t?t:10,n.args.patrolBeat=null!==(e=n.args.patrolBeat)&&void 0!==e?e:200,n.args.patrolSpeed=null!==(r=n.args.patrolSpeed)&&void 0!==r?r:1,n.age=0,n}return e=g,(r=[{key:"update",value:function(){l(p(g.prototype),"update",this).call(this),this.args.moving&&this.args.gSpeed?this.args.animation="walking":this.args.animation="standing",this.args.direction=Math.sign(this.args.gSpeed),this.age++}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.SnailBot=h}),require.register("actor/SnowBoard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SnowBoard=void 0;var o=e("./Vehicle"),i=(e("curvature/base/Tag"),e("../behavior/SkidDust"));function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Vehicle);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).behaviors.add(new i.SkidDust("particle-dust")),t.args.type="actor-item actor-snow-board",t.args.width=24,t.args.height=32,t.removeTimer=null,t.args.gSpeedMax=15,t.args.decel=.25,t.args.accel=.75,t.args.gravity=.75,t.args.seatHeight=1,t.args.skidTraction=.5,t.args.jumpForce=9.5,t.dustCount=0,t.args.particleScale=2,t.args.started=!1,t.ridingAnimation="grinding",t.dustDist=-16,t.dustFreq=1,t.broad=!0,t.slowSpin=!0,t.addEventListener("jump",function(e){t.args.groundAngle+=.125*Math.PI*Math.sign(t.args.gSpeed||t.args.direction)}),t}return e=p,(r=[{key:"update",value:function(){this.originalSpeed=this.args.gSpeed||this.args.xSpeed,s(u(p.prototype),"update",this).call(this),this.occupant&&(this.args.z=this.occupant.args.z-1),0===this.args.gSpeed&&0===this.args.xSpeed||(this.sprite.classList.add("moving"),this.args.started=!0)}},{key:"solid",get:function(){return!this.occupant}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.SnowBoard=f}),require.register("actor/Sonic.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Sonic=void 0;var o=e("./PointActor"),i=e("../behavior/Platformer"),a=e("../audio/Sfx"),s=e("curvature/base/Tag"),c=e("curvature/base/View"),l=(e("../effects/Twist"),e("../effects/Pinch"),e("../sprite/Png")),u=e("./Ring"),f=e("./Spring"),p=(e("../powerups/FireSheild"),e("../powerups/BubbleSheild"),e("../powerups/ElectricSheild"),e("../region/GrindingRegion")),h=e("./Marker"),g=e("../behavior/SkidDust");function d(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=b(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function y(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){if(t){if("string"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function w(){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function S(t,e){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=x(t);if(e){var i=x(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return k(t)}(this,r)}}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(j,o.PointActor);var r,n,b,v=O(j);function j(){var t,r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,j);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=v.call.apply(v,[this].concat(a)),r=k(t),n="png",o=new l.Png("/Sonic/sonic.png"),n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,window.sonic=k(t),t.behaviors.add(new g.SkidDust),t.args.canonical="Sonic",t.args.type="actor-sonic actor-item",t.accelNormal=.15,t.accelSuper=.22,t.markers=new Set,t.springing=!1,t.args.boltCount=0,t.args.accel=t.accelNormal,t.args.decel=.4,t.gSpeedMaxNormal=18,t.gSpeedMaxSuper=20,t.gSpeedMaxHyper=23,t.jumpForceNormal=11,t.jumpForceSuper=13,t.jumpForceHyper=15,t.args.gSpeedMax=t.gSpeedMaxNormal,t.args.jumpForce=t.jumpForceNormal,t.args.gravity=.5,t.args.width=16,t.args.height=40,t.args.lookTime=0,t.args.normalHeight=40,t.args.rollingHeight=28,t.sparks=new Set,t.spindashCharge=0,t.dropDashCharge=0,t.willStick=!1,t.stayStuck=!1,t.lightDashed=!0,t.dashed=!1,t.airControlCard=c.View.from(e("../cards/sonic-air-controls.html")),t.controlCard=c.View.from(e("../cards/sonic-controls.html")),t.moveCard=c.View.from(e("../cards/basic-moves.html")),t.args.spriteSheet=t.spriteSheet="/Sonic/sonic.png",t.hyperSheet=0,t.args.bindTo("falling",function(e){e||(!t.willStick||1!==t.args.mode&&3!==t.args.mode?t.onNextFrame(function(){t.args.wallSticking=!1}):(t.args.wallSticking=!0,t.onNextFrame(function(){t.dashed=!1})))}),t}return r=j,(n=[{key:"onRendered",value:function(t){var e=this;w(x(j.prototype),"onRendered",this).call(this,t);var r={"8080e0":"e0e080","6060c0":"e0e000","4040a0":"e0e001",202080:"a0a000"},n={"8080e0":"fcfcfc","6060c0":"fcfcfc","4040a0":"fcd8d8",202080:"fcb4b4"},o={"8080e0":"fcfcfc","6060c0":"fcfcfc","4040a0":"fcd8fc",202080:"d8b4d8"},i={"8080e0":"d8fcfc","6060c0":"fcfcfc","4040a0":"b4d8fc",202080:"90b4fc"},a={"8080e0":"d8d8ff","6060c0":"b4b4d8","4040a0":"a4a4d8",202080:"6c6cb4"},c={"8080e0":"d8fcfc","6060c0":"d8fcd8","4040a0":"b4fcb4",202080:"00fc24"},l={"8080e0":"d8fcfc","6060c0":"d8fcb4","4040a0":"d8fc48",202080:"d8d800"},u={"8080e0":"ffffff","6060c0":"fcfcfc","4040a0":"d8d8d8",202080:"b4b4b4"};this.superSpriteSheet||this.png.ready.then(function(){var t=e.png.recolor(r);e.superSpriteSheet=t.toUrl()}),this.hyperSpriteSheets||this.png.ready.then(function(){return e.hyperSpriteSheets=[e.png.recolor(n).toUrl(),e.png.recolor(i).toUrl(),e.png.recolor(o).toUrl(),e.png.recolor(u).toUrl(),e.png.recolor(c).toUrl(),e.png.recolor(a).toUrl(),e.png.recolor(l).toUrl()]}),this.arm||(this.arm=new s.Tag('<div class = "rear-arm">'),this.box.appendChild(this.arm.node))}},{key:"updateStart",value:function(){this.args.grinding&&this.args.falling&&this.args.ySpeed>0&&(this.args.animation="airdash",this.args.grinding=!1),w(x(j.prototype),"updateStart",this).call(this),this.args.dead&&(this.args.animation="dead")}},{key:"updateEnd",value:function(){w(x(j.prototype),"updateEnd",this).call(this)}},{key:"update",value:function(){var t=this;if(this.args.falling&&this.isHyper&&this.dashed&&this.yAxis<-.5&&(this.args.ySpeed-=.6),this.args.dead)return this.args.animation="dead",void w(x(j.prototype),"update",this).call(this);this.isSuper&&this.viewport.args.frameId%60==0&&(this.args.rings<2&&(this.isHyper=!1,this.setProfile()),this.args.rings>0?(this.args.rings--,this.isHyper&&this.args.rings--):(this.isSuper=!1,this.isHyper=!1,this.setProfile())),this.isHyper&&this.viewport.args.frameId%45==0&&(this.args.spriteSheet=this.hyperSpriteSheets[this.hyperSheet++],this.hyperSheet>=this.hyperSpriteSheets.length&&(this.hyperSheet=0)),this.args.falling?(this.args.wallSticking&&!this.dashed&&(1===this.args.mode?(this.args.direction=-1,this.args.facing="left"):3===this.args.mode&&(this.args.direction=1,this.args.facing="right"),this.args.animation="wall-dropping-start",this.onTimeout(150,function(){t.args.falling&&t.args.wallDropping&&(t.args.animation="wall-dropping")}),this.args.wallDropping=!0,this.args.groundAngle=0,this.args.ignore=30),this.args.wallDropping&&(this.args.groundAngle=0),this.args.wallSticking=!1):(this.swing=!1,this.springing&&(this.args.groundAngle=0),this.springing=!1,this.doubleSpin=this.dashed=!1,this.args.mode%2==0&&(this.args.wallSticking=!1),this.args.wallSticking||(this.willStick=!1)),this.lightDashingCoolDown>0&&this.lightDashingCoolDown--,this.dashTimer>0&&this.dashTimer--;var e=this.args.falling;if(e&&(this.args.cameraBias=0),this.args.wallSticking){this.args.animation="wall-stick";var r=3;this.yAxis<0?(this.args.animation="wall-stick-brake",this.stayStuck=!0,r=0):this.yAxis>0&&(r=6),this.args.modeTime<15&&(r=0),1===this.args.mode?(this.args.facing="left",this.args.direction=1,Math.abs(this.args.gSpeed)<r?this.args.gSpeed+=1:this.args.gSpeed=r):3===this.args.mode&&(this.args.facing="right",this.args.direction=-1,Math.abs(this.args.gSpeed)<r?this.args.gSpeed-=1:this.args.gSpeed=-r);var n=Math.ceil(this.args.width/2),o=Math.sign(this.args.gSpeed),a=this.rotatePoint(n*-o,this.args.height);this.getMapSolidAt(this.x+a[0],this.y+a[1])&&this.bMap("doJump",0)}else if(this.lightDashing){var c=Math.sign(this.args.xSpeed)||Math.sign(this.args.gSpeed);c<0?this.args.animation="lightdash-back":c>0&&(this.args.animation="lightdash"),e&&(this.args.direction=Math.sign(this.args.xSpeed)||this.args.direction,this.args.mode=0)}else if(e)this.dashed?e&&!this.args.jumping&&this.isSuper&&this.args.ySpeed>0&&(this.args.animation="dropping",this.onTimeout(150,function(){t.args.falling&&(t.args.animation="dropping")})):(this.args.height=this.args.rollingHeight,this.args.jumping?this.args.animation="jumping":!this.args.xSpeed&&this.args.ySpeed);else{var l=this.gSpeedMaxNormal/(this.isSuper?2:1),u=this.getLocalFriction(),f=this.args.direction,p=this.args.gSpeed,h=Math.abs(p)/Math.pow(u,2);this.args.gSpeedMax;if(this.dashed=!1,this.lightDashed=!1,this.args.height=this.args.normalHeight,this.spindashCharge)if(this.spindashCharge<1)this.spindashCharge=0;else{this.args.animation="spindash",this.spindashCharge-=.2,this.dashDust&&this.dashDust.style({"--dashCharge":this.spindashCharge});var g=this.spindashCharge/20;g>1&&(g=1),this.twist(120*g*this.args.direction)}else if(!this.args.rolling)if(this.args.crouching=!1,u>.5&&Math.sign(f)&&Math.sign(p)&&Math.sign(p)!==Math.sign(f))this.args.animation="skidding";else if(this.args.moving&&h>.75*l)this.xAxis||u>=.5?this.isSuper&&this.args.moving&&h>1.85*l?this.args.animation="dash":this.args.moving&&h>2.25*l?this.args.animation="running-4":this.args.moving&&h>1.75*l?this.args.animation="running-3":this.args.moving&&h>1.25*l?this.args.animation="running-2":this.args.animation="running":this.args.animation="sliding";else if(this.args.moving&&this.args.gSpeed)this.xAxis||u>.5?this.args.animation="walking":this.args.animation="sliding";else if(this.xAxis&&0===u)this.args.animation="running",this.args.facing=-1===this.xAxis?"left":"right";else if(this.args.moving&&this.args.gSpeed)this.args.pushing=Math.sign(this.args.gSpeed);else if(this.yAxis>.5&&!this.args.ignore&&!this.carrying.size)this.args.animation="crouching",this.args.crouching=!0,this.args.lookTime--,this.args.lookTime<-45&&(this.args.cameraBias=-.5);else if(this.yAxis&&this.yAxis<-.5&&!this.args.ignore)this.args.animation="looking-up",this.args.lookTime++,this.args.lookTime>45&&(this.args.cameraBias=.25);else{var b=this.viewport.meta.fieldType;"garden"===b||"adventure"===b?this.args.animation="standing":this.args.idleTime>18e3?this.args.animation="idle-3":this.args.idleTime>250?this.args.animation="idle-2":this.args.idleTime>200?this.args.animation="idle":this.args.animation="standing",this.args.cameraBias=0,this.args.lookTime=0}!this.spindashCharge&&this.dashDust&&(this.dashDust.remove(),this.dashDust=null),this.dropDashCharge&&(this.args.animation="spindash",this.args.rolling=!0)}if(e&&"standing"===this.args.animation&&(this.args.animation="walking"),this.args.hangingFrom?this.args.animation="hanging":this.swing&&(this.args.animation="jumping"),this.args.rolling&&("spindash"!==this.args.animation?this.args.animation="rolling":(this.viewport.onFrameOut(14,function(){return t.args.animation="rolling"}),this.args.animation="spindash")),!this.skidding||this.args.rolling||this.args.falling||this.spindashCharge)this.spindashCharge||this.twister&&(this.twister.args.scale=0);else{this.args.xOff=8*-this.args.direction,this.args.yOff=32;var v=22*-this.args.gSpeed;Math.abs(v)>256&&(v=256*Math.sign(v)),this.twist(v)}if(this.args.standingOn&&this.args.standingOn.isVehicle&&(this.args.animation=this.args.standingOn.ridingAnimation||"standing"),this.viewport.args.frameId%this.viewport.settings.frameSkip==0&&this.args.grinding&&!this.args.falling){var m=document.createElement("div");m.classList.add("particle-sparks");var S=new s.Tag(m),O=document.createElement("div");O.classList.add("envelope-sparks");var k=new s.Tag(O);k.appendChild(S.node);var P=this.rotatePoint(1.75*-this.args.gSpeed*this.args.direction,8),_=Math.sign(this.args.gSpeed);k.style({"--x":P[0]+this.x,"--y":P[1]+this.y+-3*Math.random,"z-index":0,"animation-delay":.25*-Math.random()+"s","--xMomentum":Math.max(Math.abs(this.args.gSpeed),4)*_,"--flip":_,"--angle":this.realAngle,opacity:2*Math.random()}),k.particle=S,this.viewport.particles.add(k),this.sparks.add(k),this.viewport.onFrameOut(30,function(){t.viewport.particles.remove(k),t.sparks.delete(k)})}if(this.pincherBg&&(this.pincherBg.args.scale*=.85,Math.abs(this.pincherBg.args.scale)),this.twister||this.twist(0),this.args.grinding&&(this.args.rolling=!1,this.yAxis>.5?this.args.animation="grinding-crouching":this.args.animation="grinding"),w(x(j.prototype),"update",this).call(this),!this.yAxis&&this.spindashCharge&&this.spindash(),this.args.falling&&this.springing&&this.args.ySpeed>=0&&(this.args.groundAngle=0,this.args.animation="dropping-start",this.springing=!1,this.onTimeout(150,function(){t.args.falling&&"dropping-start"===t.args.animation&&(t.args.animation="dropping")})),this.args.boltDash){this.dimmer=this.dimmer||new s.Tag('<div class = "particle particle-dimmer">');var R=new s.Tag('<div class = "particle particle-bolt">'),M=this.args.falling?this.args.airSpeed:this.args.gSpeed,T=this.rotatePoint(M<0?8:-8,this.args.falling?this.dashed?M<0?28:32:14:28);this.dimmer.style({"--x":this.args.x+T[0],"--y":this.args.y+T[1]}),this.args.boltCount++;var E=Math.sign(this.args.gSpeed||this.args.xSpeed);R.attr({"data-direction":E}),R.style({"--x":this.args.x+T[0],"--y":this.args.y+T[1],"--index":this.args.boltCount,"--direction":E,"--mod":this.viewport.args.frameId%4,"--wipe":Math.abs(M),"--angle":this.args.falling?this.args.airAngle:this.realAngle,"--dashCharge":0}),this.viewport.particles.add(R),Math.abs(M)<20&&this.args.falling&&(this.args.boltDash=!1),this.viewport.particles.add(this.dimmer),this.viewport.onFrameOut(30,function(){t.viewport.particles.remove(R)})}if(y(this.regions).filter(function(t){return t.isWater}).length&&!this.bMap("checkBelow",this.args.x,this.args.y+16).get(i.Platformer)&&this.args.falling&&this.dashed&&(this.yAxis<0&&(this.args.xSpeed=.95*this.args.xSpeed,this.args.ySpeed-=.05*Math.abs(this.args.xSpeed)),this.yAxis>0&&(this.args.xSpeed+=.05*Math.abs(this.args.ySpeed)*Math.sign(this.args.xSpeed),this.args.ySpeed=.95*this.args.ySpeed)),this.viewport.args.frameId%this.viewport.settings.frameSkip==0&&this.args.grinding&&!this.args.falling&&this.args.gSpeed){var A,C=d(this.sparks);try{for(C.s();!(A=C.n()).done;){var B=A.value,D=this.rotatePoint(1.75*this.args.direction,8);B.style({opacity:2*Math.random(),"--x":D[0]+this.x,"--y":D[1]+this.y})}}catch(t){C.e(t)}finally{C.f()}}}},{key:"readInput",value:function(){this.lightDashing||w(x(j.prototype),"readInput",this).call(this)}},{key:"airDash",value:function(t){var e=this;if(!this.carrying.size&&!(this.dashed||this.args.ignore&&-2!==this.args.ignore)){var r=t*(this.isSuper||this.isHyper?13:8);this.args.wallSticking&&(this.args.x+=r,r=t*(this.isSuper||this.isHyper?18:9)),this.args.mode=0,this.args.float=2,this.args.rolling=!1,this.args.height=this.args.normalHeight,this.args.xSpeed&&Math.sign(this.args.xSpeed)!==Math.sign(t)&&(r=t*Math.abs(r),this.args.float=4,this.args.xSpeed=0),this.args.falling=!0,this.args.mercy&&(r*=.75);var n=this.args.xSpeed+r;this.args.animation="rolling",this.viewport.onFrameOut(3,function(){return e.args.animation="airdash"}),this.args.xSpeed=n,this.args.ySpeed=0,this.args.gSpeed=0,this.dashTimer=0,this.dashed=!0,this.args.mode=0,this.args.groundAngle=0}}},{key:"command_0",value:function(){var t=this;if(this.args.crouching&&!this.args.rolling&&this.yAxis){this.spindashCharge+=10;var e=this.spindashCharge/20;return e>1&&(e=1),this.args.xOff=5*-this.args.direction,this.args.yOff=32,this.twist(120*e*this.args.direction),void(this.dashDust?this.dashDust&&this.dashDust.style({"--dashCharge":this.spindashCharge}):this.showDashDust())}if(this.dropDashCharge=0,this.args.jumping&&!this.dashed&&!this.doubleSpin){if(this.carrying.size)return;this.args.mercy<120&&(this.args.mercy=0),this.doubleSpin=!0,this.args.xOff=0,this.args.yOff=32,this.pinch(-600,50);var r=new h.Marker({x:this.args.x,y:this.args.y});r.owner=this,this.markers.add(r),this.viewport.spawn.add({object:r});var n=this.args.bindTo("x",function(t,e){return r.args[e]=t}),o=this.args.bindTo("y",function(t,e){return r.args[e]=t+18});this.viewport.onFrameOut(25,function(){t.viewport.actors.remove(r),n(),o()})}w(x(j.prototype),"command_0",this).call(this)}},{key:"command_4",value:function(){this.args.ignore||this.args.falling&&(this.airDash(-1),this.willStick=2,this.stayStuck=!0)}},{key:"hold_4",value:function(t){this.args.ignore||(this.args.jumping||this.dashed)&&(this.dropDashCharge=0,this.willStick=2,this.stayStuck=!0)}},{key:"release_4",value:function(){var t=this;if(this.onNextFrame(function(){t.willStick=!1,t.stayStuck=!1}),this.args.wallSticking&&!this.dashed){this.args.falling=!0,this.args.ySpeed>128||(this.args.ySpeed=0);var e=this.args.mode;this.airDash(1===e?1:-1),this.args.facing=1===e?"left":"right",this.args.mode=0,this.dashed=!0}}},{key:"command_5",value:function(){this.args.ignore||this.args.falling&&(this.airDash(1),this.willStick=2,this.stayStuck=!0)}},{key:"hold_5",value:function(t){this.args.ignore||(this.args.jumping||this.dashed&&2!==this.args.mode)&&(this.dropDashCharge=0,this.willStick=2,this.stayStuck=!0)}},{key:"release_5",value:function(){var t=this;if(this.onNextFrame(function(){t.willStick=!1,t.stayStuck=!1}),this.args.wallSticking&&!this.dashed){this.args.falling=!0,this.args.ySpeed=0;var e=this.args.mode;this.airDash(1===e?1:-1),this.args.facing=1===e?"left":"right",this.args.mode=0,this.dashed=!0}}},{key:"command_1",value:function(){var t=this;if(!this.args.ignore&&(this.args.wallSticking&&(this.args.x+=this.args.width/2*(1===this.args.mode?1:-1),this.bMap("doJump",0)),this.args.gSpeed&&!this.args.falling&&!this.args.rolling&&Math.sign(this.args.gSpeed)===this.args.direction)){this.args.rolling=!0;this.viewport.onFrameOut(20,function e(){var r=[t.args.width/2,t.args.height+4];if(t.getMapSolidAt(t.x-r[0],t.y-r[1]))return t.viewport.onFrameOut(10,e),t.args.gSpeed=t.args.gSpeed||4*t.args.direction||4,void(t.args.rolling=!0);t.args.rolling=!1})}}},{key:"release_1",value:function(){this.dropDashCharge=0,this.spindashCharge&&(this.yAxis||(this.args.crouching=!1))}},{key:"spindash",value:function(){this.spindashCharge<5&&(this.args.modeTime<45||this.args.skidding)&&(this.spindashCharge=15);var t=this.args.direction,e=this.spindashCharge/40;e>1&&(e=1),this.args.rolling=!0;var r=32*e;Math.sign(t)!==Math.sign(this.args.gSpeed)?this.args.gSpeed=r*Math.sign(t):this.args.gSpeed+=r*Math.sign(t),this.args.ignore=1,this.args.rolling=!0,this.spindashCharge=0,this.dashDust&&this.dashDust.remove()}},{key:"hold_1",value:function(t){if(!(this.args.mercy||this.carrying.size||(this.yAxis=1,this.args.ignore||this.args.rolling)))if(this.args.jumping&&this.dropDashCharge<15)this.dropDashCharge++;else if(0!==this.args.modeTime&&!this.dropDashCharge)if(this.args.falling||this.willJump||this.args.gSpeed&&!this.skidding)this.skidding||(this.spindashCharge=0);else if(this.spindashCharge||!(t.time>6)){this.args.ignore=1;var e=this.spindashCharge/20;e>1&&(e=1),this.spindashCharge=this.spindashCharge||1,this.yAxis>.5&&(this.spindashCharge=this.spindashCharge||10),this.args.crouching=!0,this.dashDust?this.dashDust&&this.dashDust.style({"--dashCharge":this.spindashCharge}):this.showDashDust(),this.spindashCharge++,this.args.xOff=5*-this.args.direction,this.args.yOff=32,this.twist(120*e*this.args.direction),this.args.animation="spindash",this.args.direction<0?this.args.facing="left":this.args.direction>0&&(this.args.facing="right")}}},{key:"showDashDust",value:function(){var t=this.viewport,e=new s.Tag('<div class = "particle-spindash-dust">'),r=this.rotatePoint(0,0);e.style({"--x":r[0]+this.args.x,"--y":r[1]+this.args.y,"--direction":this.args.direction,"--dashCharge":this.spindashCharge}),e.setAttribute("data-facing",this.args.facing),t.particles.add(e),this.dashDust=e}},{key:"hold_2",value:function(){if(this.args.falling&&!(this.lightDashing||this.lightDashingCoolDown>0)){var t=this.findDashableRing(48);return t?(this.lightDash(t),void(this.lightDashingCoolDown=9)):void 0}}},{key:"command_2",value:function(){var t=this;if(this.viewport.collisions.has(this)){var e,r=d(this.viewport.collisions.get(this).keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.carrying.size&&!this.carrying.has(n)||"function"==typeof n.lift&&n.lift(this)}}catch(t){r.e(t)}finally{r.f()}}this.onNextFrame(function(){var e=t.args.falling?t.args.airSpeed:t.args.gSpeed;if(t.isSuper&&!t.lightDashing&&!t.args.boltDash&&Math.abs(e)>6){var r=t.args.xSpeed,n=t.args.ySpeed,o=t.args.gSpeed;t.args.falling?(t.args.xSpeed=Math.max(-64,Math.min(t.args.xSpeed,64)),t.args.ySpeed=Math.max(-64,Math.min(t.args.ySpeed,64)),t.args.float=5,t.args.xSpeed*=5,t.args.ySpeed*=5):(t.args.gSpeed*=3,t.args.gSpeed=Math.max(-128,Math.min(t.args.gSpeed,128))),t.args.boltCount=0,t.args.boltDash=!0,a.Sfx.play("LIGTNING_STRIKE"),t.args.opacity=0,t.viewport.onFrameOut(35,function(){t.args.opacity=1,t.args.boltDash=!1,t.args.xSpeed=t.args.xSpeed?r:0,t.args.ySpeed=t.args.ySpeed?n:0,t.args.gSpeed=t.args.gSpeed?o:0,t.dimmer&&t.viewport.particles.remove(t.dimmer),t.dimmer=!1})}})}},{key:"release_2",value:function(){this.args.boltDash&&(this.args.opacity=1,this.args.boltDash=!1,this.args.xSpeed/=2,this.args.ySpeed/=2,this.args.gSpeed/=3,this.dimmer&&this.viewport.particles.remove(this.dimmer),this.dimmer=!1)}},{key:"command_3",value:function(){var t=this;if(!this.args.ignore||this.isSuper){if(this.isHyper)return this.isHyper=!1,this.isSuper=!1,void this.setProfile();this.isSuper?this.isHyper=!this.isHyper:this.isSuper=!this.isSuper,this.onTimeout(150,function(){0===t.args.rings&&(t.isSuper=!1,t.isHyper=!1,t.setProfile())}),this.setProfile()}}},{key:"setProfile",value:function(){this.isHyper?(this.args.spriteSheet=this.superSpriteSheet,this.args.gSpeedMax=this.gSpeedMaxHyper,this.args.jumpForce=this.jumpForceHyper,this.args.accel=this.accelSuper):this.isSuper?(this.args.spriteSheet=this.superSpriteSheet,this.args.gSpeedMax=this.gSpeedMaxSuper,this.args.jumpForce=this.jumpForceSuper,this.args.accel=this.accelSuper):(this.args.spriteSheet=this.spriteSheet,this.args.gSpeedMax=this.gSpeedMaxNormal,this.args.jumpForce=this.jumpForceNormal,this.args.accel=this.accelNormal)}},{key:"findNearestRing",value:function(){return this.findDashableRing(64)}},{key:"findDashableRing",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,r=function(e){if(!(e instanceof u.Ring))return!1;var r=Math.sign(t.args.xSpeed);return!(r>0&&e.x<t.x)&&!(r<0&&e.x>t.x)},n=this.findNearestActor(r,e);if(n){var o=n.findNearestActor(r,e);if(o){var i=Math.atan2(this.y-n.y,this.x-n.x),a=Math.atan2(n.y-o.y,n.x-o.x);if(!(Math.abs(i-a)>Math.PI/2))return n}}}},{key:"lightDash",value:function(t){if(!this.args.falling)return this.lightDashing=!1,!1;var e;this.lightDashed=!0,this.spindashCharge=0;var r=Math.atan2(t.y-this.y+8,t.x-this.x);e=this.args.groundAngle;var n=Math.abs(e-r),o=4*this.distanceFrom(t)*(Math.PI/2/n);o>55&&(o=55);var a=this.bMap("scanForward",o,.5).get(i.Platformer);a&&o>a&&(o=a);Math.sign(this.args.xSpeed)||Math.sign(this.args.gSpeed);this.args.direction<0?this.args.animation="lightdash-back":this.args.direction>0&&(this.args.animation="lightdash");Math.PI;this.args.airAngle=r,this.lightDashing=!0,this.args.xSpeed=o*Math.cos(r)*.5,this.args.ySpeed=o*Math.sin(r)*.5,this.lightDashTimeout()}},{key:"collect",value:function(t){if(w(x(j.prototype),"collect",this).call(this,t),t instanceof u.Ring&&this.lightDashing){var e=this.findNearestActor(function(t){return t instanceof u.Ring},128);e?this.lightDash(e):(this.lightDashing=!1,this.args.float=0)}}},{key:"lightDashTimeout",value:function(){var t=this;this.clearLightDash&&(this.clearLightDash(),this.clearLightDash=!1),this.clearLightDash=this.viewport.onFrameOut(9,function(){t.lightDashing=!1,t.args.float=0})}},{key:"setCameraMode",value:function(){this.args.boltDash?this.args.cameraMode="draggable":this.args.wallSticking?this.args.cameraMode="aerial":w(x(j.prototype),"setCameraMode",this).call(this)}},{key:"startle",value:function(){var t=this;w(x(j.prototype),"startle",this).call(this),this.onNextFrame(function(){return t.args.animation="startle"})}},{key:"die",value:function(){var t=this;w(x(j.prototype),"die",this).call(this),this.onNextFrame(function(){return t.args.animation="dead"})}},{key:"loseRings",value:function(t,e){w(x(j.prototype),"loseRings",this).call(this,t,e),a.Sfx.play("RINGS_SCATTERED")}},{key:"collideA",value:function(t){var e=this;t instanceof f.Spring&&this.onNextFrame(function(){e.args.falling&&(e.springing=!0,e.args.animation="springdash")})}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!this.args.wallSticking}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!this.args.npc}},{key:"facePoint",get:function(){return this.args.wallSticking?this.rotatePoint(0,-5):w(x(j.prototype),"facePoint",this)}},{key:"crossRegionBoundary",value:function(t,e){t instanceof p.GrindingRegion&&(e||(this.args.falling?this.args.animation="springdash":this.args.grinding=!1)),w(x(j.prototype),"crossRegionBoundary",this).call(this,t,e)}}])&&m(r.prototype,n),b&&m(r,b),Object.defineProperty(r,"prototype",{writable:!1}),j}();t.Sonic=j}),require.register("actor/Spawner.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Spawner=void 0;var o=e("./PointActor"),i=e("../ObjectPalette");function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(p,o.PointActor);var e,r,n,c=f(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.width=16,t.args.height=32,t.args.type="actor-item actor-spawner",t}return e=p,(r=[{key:"activate",value:function(){if(this.args.spawn&&this.args.point){var t=this.viewport.objDefs.get(this.args.point),e=i.ObjectPalette[this.args.spawn];if(t&&e){var r,n=new e({x:t.x,y:t.y}),o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=s(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this.def);try{for(o.s();!(r=o.n()).done;){var c=a(r.value,2),l=c[0],u=c[1];"point"!==l&&"type"!==l&&(n.args[l]=u)}}catch(t){o.e(t)}finally{o.f()}n.args[name]=this.args.spawn,this.viewport.spawn.add({object:n})}}}},{key:"solid",get:function(){return!1}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Spawner=h}),require.register("actor/Spikes.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Spikes=void 0;var o=e("./PointActor"),i=e("../audio/Sfx");function a(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.PointActor);var e,r,n,s=u(h);function h(t,e){var r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(n=s.call(this,t,e)).args.type="actor-item actor-spikes",n.args.width=t.width||32,n.args.height=t.height||32,n.args.pointing=n.args.pointing||0,n.args.beat=n.args.beat||90,n.args.retractible=null!==(r=n.args.retractible)&&void 0!==r&&r,n.args.retracted=!1,n.hazard=!0,n.age=0,n}return e=h,n=[{key:"fromDef",value:function(t){var e=f(p(h),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e.args.x=e.originalX=t.x+Math.floor(t.width/2),e}}],(r=[{key:"updateStart",value:function(){if(this.args.retractible){if(this.args.wasRetracted=this.args.retracted,this.args.retracted=!!(Math.floor(this.age/this.args.beat)%2),!this.args.retracted&&this.args.wasRetracted){i.Sfx.play("SPIKES_OUT");var t,e=a(this.viewport.actorsAtPoint(this.args.x,this.args.y,this.args.width,this.args.height));try{for(e.s();!(t=e.n()).done;){var r=t.value;if(r!==this)switch(this.args.pointing){case 0:r.args.y=this.args.y+-this.args.height+-4;break;case 1:r.args.x=this.args.x+-this.args.width/2+-r.args.width/2+-4,r.damage(this);break;case 2:r.args.y=this.args.y+this.args.height/2;break;case 3:r.args.x=this.args.y+this.args.width/2+r.args.width/2+4,r.damage(this)}}}catch(t){e.e(t)}finally{e.f()}}this.args.retracted&&!this.args.wasRetracted&&i.Sfx.play("SPIKES_IN")}f(p(h.prototype),"updateStart",this).call(this),this.age++}},{key:"onRendered",value:function(t){f(p(h.prototype),"onRendered",this).call(this,t),this.autoAttr.get(this.box)["data-pointing"]="pointing",this.autoAttr.get(this.box)["data-retracted"]="retracted"}},{key:"startle",value:function(){}},{key:"damage",value:function(){}},{key:"collideA",value:function(t,e){if(this.args.retracted)return!1;if(!t.isRegion){if(!this.args.falling||this.args.float){if(e===this.args.pointing)if(3===this.args.pointing)(t.args.xSpeed||t.args.gSpeed*(2===t.args.mode?-1:1))<=0&&(this.args.wasRetracted&&(t.args.x=this.args.x+this.args.width/2+t.args.width/2+4),t.damage(this));else if(1===this.args.pointing){(t.args.xSpeed||t.args.gSpeed*(2===t.args.mode?-1:1))>=0&&(this.args.wasRetracted&&(t.args.x=this.args.x+-this.args.width/2+-t.args.width/2+-4),t.damage(this))}else if(2===this.args.pointing){(t.args.ySpeed||t.args.gSpeed*(1===t.args.mode?-1:1))<=0&&(this.args.wasRetracted&&(t.args.y=this.args.y+t.args.height),t.damage(this))}else if(0===this.args.pointing){(t.args.ySpeed||t.args.gSpeed*(3===t.args.mode?-1:1))>=0&&(this.args.wasRetracted&&(t.args.y=this.args.y+-this.args.height),t.damage(this))}return!0}t.damage(!1)}}},{key:"solid",get:function(){return!this.args.wasRetracted}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Spikes=h}),require.register("actor/SpikesSmall.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SpikesSmall=void 0;var o=e("curvature/base/Tag"),i=e("../audio/Sfx"),a=(e("./PointActor"),e("./Spikes"));function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,a.Spikes);var e,r,n,p=l(h);function h(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(r=p.call(this,t,e)).args.type="actor-item actor-spikes actor-spikes-small",r.args.width=t.width||32,r.args.height=10,r.args.pointing=r.args.pointing||0,r.hazard=!0,r.args.width<16&&(r.args.narrow=!0),r}return e=h,n=[{key:"fromDef",value:function(t){var e=u(f(h),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=10,e.args.x=e.originalX=t.x+Math.floor(t.width/2),e}}],(r=[{key:"update",value:function(){u(f(h.prototype),"update",this).call(this);this.sprite&&!this.graphic&&(this.graphic=new o.Tag('<svg style  = "--breakSplit: '.concat(4,';" data-narrow = "').concat(this.args.narrow,'">\n\t\t\t\t<defs>\n\t\t\t\t\t<pattern\n\t\t\t\t\t\tid     = "spikes-').concat(this._id,'"\n\t\t\t\t\t\twidth  = "').concat(16/this.args.width,'"\n\t\t\t\t\t\theight = "1"\n\t\t\t\t\t\tx      = "0"\n\t\t\t\t\t\ty      = "0"\n\t\t\t\t\t>\n\t\t\t\t\t\t<image href = "/Sonic/spikes-small-single.png">\n\t\t\t\t\t</pattern>\n\t\t\t\t</defs>\n\t\t\t\t<rect fill = "url(#spikes-').concat(this._id,')"></rect>\n\t\t\t\t<rect fill = "url(#spikes-').concat(this._id,')"></rect>\n\t\t\t</svg>')),this.sprite.appendChild(this.graphic.node))}},{key:"collideA",value:function(t,e){var r=this;if(this.args.broken||t instanceof a.Spikes||t.args.static)return!1;if(t.isVehicle){this.args.broken=!0,this.args.gravity=.4,t.halt(10);var n=8+(t.args.width+this.args.width)/2;return t.args.x=this.x+-n*Math.sign(this.x-t.x),this.args.type="actor-item actor-spikes actor-spikes-small actor-spikes-breaking",this.viewport.onFrameOut(7,function(){r.args.falling=!0,r.args.xSpeed=.25*t.args.hSpeed+1*Math.pow(Math.random(),2),r.args.ySpeed=-5*Math.pow(Math.random(),2)-5,r.args.type="actor-item actor-spikes actor-spikes-small actor-spikes-broken",i.Sfx.play("BLOCK_DESTROYED")}),this.args.float=8,this.noClip=!0,!1}return u(f(h.prototype),"collideA",this).call(this,t,e)}},{key:"activate",value:function(){this.args.float=0,this.noClip=!0}},{key:"solid",get:function(){return!this.args.broken&&!this.noClip}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.SpikesSmall=p}),require.register("actor/Sping.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Sping=void 0;e("./Flickie");var o=e("curvature/base/Mixin"),i=(e("curvature/base/Tag"),e("./PointActor")),a=e("../behavior/SkidDust"),s=e("../mixin/CanPop"),c=(e("../actor/Explosion"),e("../actor/Projectile"));function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,o.Mixin.from(i.PointActor,s.CanPop));var e,r,n,g=p(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=g.call.apply(g,[this].concat(r))).behaviors.add(new a.SkidDust),t.args.type="actor-item actor-sping",t.args.animation="standing",t.args.accel=.1,t.args.decel=.5,t.args.gSpeedMax=5,t.args.jumpForce=5,t.args.gravity=.5,t.args.width=48,t.args.height=22,t.willStick=!1,t.stayStuck=!1,t.age=0,t}return e=d,(r=[{key:"update",value:function(){this.args.direction;if(this.age%90<65&&(Math.floor(this.age/90)%2?this.args.gSpeed=-.125:this.args.gSpeed=.125),this.box&&(this.box.setAttribute("data-animation","walking"),(this.age%90<15||this.age%90>85)&&this.box.setAttribute("data-animation","shooting")),u(h(d.prototype),"update",this).call(this),this.age%90==87){var t=this.x-2,e=this.y-12,r=-1.5*Math.sign(this.gSpeedLast),n=new c.Projectile({x:t,y:e,z:-1,owner:this});this.viewport.onFrameOut(2,function(){Object.assign(n.args,{xSpeed:r,ySpeed:-3})}),this.viewport.spawn.add({object:n})}this.age++}},{key:"effect",value:function(t){u(h(d.prototype),"effect",this).call(this,t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.Sping=g}),require.register("actor/Spinner.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Spinner=void 0;var o=e("./PointActor"),i=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=Symbol("Boosted"),p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,o.PointActor);var e,r,n,p=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call.apply(p,[this].concat(r))).args.type="actor-item actor-spinner",t.args.width=64,t.args.height=24,t.args.direction=t.args.direction||1,t.args.static=!0,t}return e=h,(r=[{key:"update",value:function(){s(u(h.prototype),"update",this).call(this)}},{key:"collideB",value:function(t){if(!(t instanceof h||(t.args.gSpeed,t.args.falling||t[f]))){this.viewport.onFrameOut(10,function(){return delete t[f]}),t[f]=this;var e=this.args.toSpeed||40;t.args.ignore=2,t.args.direction=this.args.direction,t.args.facing=this.args.direction>0?"right":"left",t.args.gSpeed=Math.abs(t.args.gSpeed)>e?Math.abs(t.args.gSpeed)*this.args.direction:e*this.args.direction,i.Sfx.play("SPEEDPAD_HIT")}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Spinner=p}),require.register("actor/SpitFire.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SpitFire=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call.apply(u,[this].concat(r))).args.type="actor-item actor-spitfire",t.args.width=99,t.args.height=32,t.args.float=-1,t.age=0,t}return e=f,(r=[{key:"update",value:function(){if(this.age>45)return this.viewport.actors.remove(this),void this.remove();this.age++,a(l(f.prototype),"update",this).call(this)}},{key:"collideA",value:function(t){this.age<10||this.args.owner&&!this.args.owner.args.gone&&t.controllable&&t.damage(this,"fire")}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.SpitFire=u}),require.register("actor/Spring.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Spring=void 0;var o=e("./LayerSwitch"),i=e("./PointActor"),a=e("../region/Region"),s=e("../audio/Sfx");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=Symbol("WillSpring"),y=Symbol("WontSpring"),b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(v,i.PointActor);var e,r,n,b=u(v);function v(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return g(f(t=b.call.apply(b,[this].concat(r))),"float",-1),g(f(t),"template",'<div\n\t\tclass = "point-actor actor-item [[type]] [[collType]] [[active]]"\n\t\tstyle = "\n\t\t\tdisplay:[[display]];\n\t\t\t--angle:[[angle]];\n\t\t\t--airAngle:[[airAngle]];\n\t\t\t--ground-angle:[[groundAngle]];\n\t\t\t--height:[[height]];\n\t\t\t--width:[[width]];\n\t\t\t--x:[[x]];\n\t\t\t--y:[[y]];\n\t\t"\n\t\tdata-colliding = "[[colliding]]"\n\t\tdata-diagonal  = "[[diagonal]]"\n\t\tdata-falling   = "[[falling]]"\n\t\tdata-facing    = "[[facing]]"\n\t\tdata-angle     = "[[angle|rad2deg]]"\n\t\tdata-mode      = "[[mode]]"\n\t>\n\t\t<div\n\t\t\tdata-color = "[[color]]"\n\t\t\tdata-type  = "[[base]]"\n\t\t\tclass      = "spring-pad"\n\t\t\tstyle = "--color:[[color]]deg"\n\t\t></div>\n\t\t<div class = "sprite"></div>\n\t</div>'),t.args.type="actor-item actor-spring",t.args.width=t.args.width||32,t.args.height=t.args.height||32,t.args.color=t.args.color||0,t.args.static=!0,t.args.actingOn=new Set,t}return e=v,n=[{key:"fromDef",value:function(t){var e=p(h(v),"fromDef",this).call(this,t);return e.args.angle=Number(e.args.angle),e.args.width=t.width||32,e.args.height=t.height||32,e}}],(r=[{key:"collideA",value:function(t){var e=this;if(t.carriedBy)return!1;if(t.args.hangingFrom&&t.args.hangingFrom.unhook(),t[y])return!1;if(t.args.static)return!1;if(t instanceof this.constructor)return!1;if(t instanceof o.LayerSwitch)return!1;if(p(h(v.prototype),"collideA",this).call(this,t),this.args.actingOn.has(t))return!1;if(t.args.platform)return!1;if(t instanceof a.Region)return!1;if(s.Sfx.play("SPRING_HIT"),t[d])return!1;if(this.args.actingOn.add(t),this.viewport.onFrameOut(1,function(){e.args.active=!0}),this.viewport.onFrameOut(5,function(){delete t[d],e.args.active=!1,e.args.actingOn.delete(t)}),t.noClip)return!1;t[d]=!0,t.args.mercy=0,t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=0;var r=this.roundAngle(this.args.angle,8,!0);this.viewport.settings.rumble&&t.controller&&t.controller.rumble&&(t.controller.rumble({duration:120,strongMagnitude:1,weakMagnitude:1}),this.onTimeout(100,function(){t.controller.rumble({duration:500,strongMagnitude:0,weakMagnitude:.25})})),t.args.x=this.args.x+4*Math.cos(r),t.args.y=this.args.y+4*Math.sin(r),t.locked=2,t.args.jumping=!1,t.args.ignore=t.args.ignore||(t.args.falling?12:2),t.args.float=2,this.viewport.onFrameOut(1,function(){t.args.float=2,t.args.direction=Math.sign(n),t.impulse(e.args.power,r,![0,Math.PI].includes(e.args.angle)&&Math.abs(Math.PI-e.args.angle)>.01)});var n=Number(Number(1*Math.cos(r)).toFixed(3)),i=Number(Number(1*Math.sin(r)).toFixed(3)),c=t.args.rolling;return![0,Math.PI].includes(this.args.angle)&&Math.abs(Math.PI-this.args.angle)>.01||t.args.falling||0!==t.args.mode?(t.args.falling=!0,t.args.mode=0):this.viewport.onFrameOut(1,function(){return t.args.rolling=c}),Math.abs(t.args.xSpeed)<3||Math.sign(t.args.xSpeed)!==Math.sign(n)?t.args.xSpeed=n:t.args.xSpeed+=n,Math.abs(t.args.ySpeed)<3||Math.sign(t.args.ySpeed)!==Math.sign(i)?t.args.ySpeed=i:t.args.ySpeed+=i,t.args.airAngle=this.args.angle,t.args.displayAngle=0,t.args.groundAngle=0,t.args.airAngle=-Math.PI/2,!1}},{key:"sleep",value:function(){this.args.actingOn.clear(),this.args.active=!1}},{key:"canStick",get:function(){return!1}},{key:"solid",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),v}();t.Spring=b,g(b,"WontSpring",y)}),require.register("actor/SpringTurtle.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SpringTurtle=void 0;var o=e("curvature/base/Mixin"),i=e("./PointActor"),a=e("../behavior/Patrol"),s=e("../mixin/CanPop");e("./Ring");function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,o.Mixin.from(i.PointActor,s.CanPop));var e,r,n,h=f(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(n=h.call.apply(h,[this].concat(i))).behaviors.add(new a.Patrol),n.args.type="actor-item actor-spring-turtle",n.args.animation="standing",n.args.accel=.1,n.args.decel=.5,n.args.gSpeedMax=3,n.args.gravity=.5,n.args.width=24,n.args.height=32,n.willStick=!1,n.stayStuck=!1,n.args.patrolPause=null!==(t=n.args.patrolPause)&&void 0!==t?t:10,n.args.patrolBeat=null!==(e=n.args.patrolBeat)&&void 0!==e?e:120,n.args.patrolSpeed=null!==(r=n.args.patrolSpeed)&&void 0!==r?r:1,n.args.lastSpring=0,n.age=0,n}return e=g,(r=[{key:"onRendered",value:function(t){l(p(g.prototype),"onRendered",this).call(this,t),this.autoAttr.get(this.box)["data-spring"]="springing"}},{key:"collideA",value:function(t,e){if(!t.args.static)return 0===e||t.args.falling?(this.ignores.set(t,15),t.args.ySpeed=-20,t.args.xSpeed=0,void(this.args.lastSpring=10)):l(p(g.prototype),"collideA",this).call(this,t,e)}},{key:"update",value:function(){l(p(g.prototype),"update",this).call(this),this.args.lastSpring>0&&this.args.lastSpring--,this.args.springing=!!this.args.lastSpring,this.args.moving&&this.args.gSpeed?this.args.animation="walking":this.args.animation="standing",this.args.direction=Math.sign(this.args.gSpeed),this.age++}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!1}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.SpringTurtle=h}),require.register("actor/Springboard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Springboard=void 0;var o=e("./PointActor"),i=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,o.PointActor);var e,r,n,l=c(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=l.call.apply(l,[this].concat(r))).args.type="actor-item actor-springboard",t.args.width=56,t.args.height=16,t.args.animation="idle",t}return e=u,(r=[{key:"collideA",value:function(t,e){var r=this;if(t.controllable&&!this.args.ignore){var n=Math.min(1,Math.max(0,1+(-this.x-26+t.x)/56));if(n<.5&&(n*=.5),this.args.animation="depressed",t.args.jumping&&"idle"!==this.args.animation&&t.args.ySpeed<0){this.args.ignore=6,this.args.animation="idle";var o=Math.max(t.args.gSpeed/2,t.args.xSpeed);this.onNextFrame(function(){t.args.xSpeed=o,t.args.ySpeed+=-12*n}),i.Sfx.play("SPRING_HIT")}if(-this.x+t.x<=-26&&(this.args.animation="idle"),(-this.x+t.x>=26||Math.abs(t.args.gSpeed)>13)&&0===t.args.mode){this.args.ignore=6;var a=Math.max(t.args.gSpeed/2,t.args.xSpeed);this.onNextFrame(function(){t.args.falling=!0,t.args.xSpeed=a,t.args.ySpeed=-8}),this.viewport.onFrameOut(5,function(){return r.args.animation="idle"}),i.Sfx.play("SPRING_HIT")}t.args.ySpeed<0&&(this.args.animation="idle")}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.Springboard=u}),require.register("actor/StarBalloon.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StarBalloon=void 0;var o=e("./Balloon"),i=e("./Spring");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Balloon);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="actor-item actor-balloon actor-star-balloon",t.args.target=t.args.target||0,t.args.gravity=.475,t[i.Spring.WontSpring]=!0,t}return e=p,(r=[{key:"update",value:function(){if(s(u(p.prototype),"update",this).call(this),!this.popped)if(this.launched){var t=this.args.target-this.y;this.args.ySpeed=Math.min(8,Math.abs(t))*Math.sign(t)}else this.args.ySpeed=0;this.args.groundAngle=0}},{key:"activate",value:function(){this.launched=!0}},{key:"collideA",value:function(t){return!(!t.controllable||t.args.hangingFrom)&&(!this.popped&&void((t.args.ySpeed>=0||t.args.spinning)&&(t.args.ySpeed=-14,this.pop())))}},{key:"sleep",value:function(){this.tags.sprite&&this.tags.sprite.classList.remove("popped"),this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.args.xSpeed=0,this.args.ySpeed=0,this.args.float=-1,this.popped=this.launched=!1,this.args.falling=!0,this.viewport.setColCell(this),this.noClip=!1}},{key:"damage",value:function(){this.pop()}},{key:"pop",value:function(){var t=new CustomEvent("exploded",{detail:{actor:this}});this.dispatchEvent(t),this.tags.sprite.classList.add("popped"),this.popped=!0,this.args.float=0,this.noClip=!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.StarBalloon=f}),require.register("actor/StarPost.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StarPost=void 0;e("../ui/CharacterString");var o=e("./PointActor"),i=e("curvature/base/Tag"),a=e("../audio/Sfx"),s=(e("./Monitor"),e("./monitor/RingMonitor")),c=e("./monitor/SheildElectricMonitor"),l=e("./monitor/SheildWaterMonitor"),u=e("./monitor/SheildFireMonitor");function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=d(t);if(e){var i=d(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(b,o.PointActor);var e,r,n,y=g(b);function b(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=y.call.apply(y,[this].concat(n))).args.type="actor-item actor-star-post",e.args.width=16,e.args.height=48,e.args.active=null!==(t=e.args.active)&&void 0!==t&&t,e.args.static=!0,e.spinning=!1,e}return e=b,(r=[{key:"update",value:function(){var t=this;if(p(d(b.prototype),"update",this).call(this),this.args.wasActive){var e=new s.RingMonitor({direction:0,ySpeed:-4,x:this.x-10,y:this.y-48});this.viewport.onFrameOut(12,function(){t.viewport.spawn.add({object:e})}),this.args.wasActive=!1}}},{key:"onRendered",value:function(){p(d(b.prototype),"onRendered",this).call(this),this.sprite=this.findTag("div.sprite"),this.box=this.findTag("div"),this.headBox=new i.Tag('<div class = "star-post-head-box">'),this.head=new i.Tag('<div class = "star-post-head">'),this.headBox.appendChild(this.head.node),this.box.appendChild(this.headBox.node)}},{key:"collideA",value:function(t){var e=this;if(p(d(b.prototype),"collideA",this).call(this,t),t.args.owner&&(t=t.args.owner),(t.controllable||t.occupant)&&this.box&&!this.args.active){this.args.active=!0,this.box.setAttribute("data-direction",t.args.direction),this.box.setAttribute("data-active","true"),this.box.setAttribute("data-spin","true"),a.Sfx.play("STARPOST_HIT");var r=t.args.gSpeed||t.args.xSpeed;Math.abs(r)>8&&(r=8*Math.sign(r));var n=t.args.rings>50?[s.RingMonitor,u.SheildFireMonitor,l.SheildWaterMonitor,c.SheildElectricMonitor]:[s.RingMonitor],o=new(0,n[Math.floor(Math.random()*n.length)])({direction:t.args.direction,xSpeed:r,ySpeed:-5,x:this.x-10,y:this.y-48});this.viewport.storeCheckpoint(t.args.canonical,this.args.id),this.viewport.spawn.add({object:o}),this.spinning=!0,this.viewport.onFrameOut(36,function(){e.spinning=!1}),"function"==typeof ga&&ga("send","event",{eventCategory:"starpost",eventAction:"activated",eventLabel:"".concat(this.viewport.args.actName,"::").concat(this.args.id)})}}},{key:"solid",get:function(){return!1}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),b}();t.StarPost=y}),require.register("actor/SteelCrate.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SteelCrate=void 0;var o=e("./Block"),i=e("./BreakableBlock"),a=e("./Projectile");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,i.BreakableBlock);var e,r,n,p=u(h);function h(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=p.call.apply(p,[this].concat(n))).args.type="actor-item actor-breakable-block actor-steel-crate",e.args.width=64,e.args.height=64,e.args.static=null!==(t=e.args.static)&&void 0!==t&&t,e}return e=h,(r=[{key:"collideA",value:function(t,e){return t instanceof o.Block||(t instanceof a.Projectile&&!this.broken?(this.break(),!0):t.args.bouncing&&!this.broken?(this.break(),!0):t.punching&&!this.broken?(this.break(),!1):!(!t.args.rolling||this.broken)||(!(0!==e||!t.controllable)||(1!==e&&3!==e||t.y<=this.y-this.args.height||!!this.viewport&&(-1!==e&&!t.args.rolling||c(f(h.prototype),"collideA",this).call(this,t,e)))))}},{key:"setTile",value:function(){this.args.spriteSheet="/custom/steel-crate.png"}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.SteelCrate=p}),require.register("actor/Stopper.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Stopper=void 0;var o=e("./BreakableBlock");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.BreakableBlock);var e,r,n,u=c(f);function f(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(t=u.call(this,e,r)).args.type="actor-item actor-breakable-block actor-stopper",t.args.height=16,t.args.float=-1,t}return e=f,(r=[{key:"collideA",value:function(t,e){var r=this;return!!t.isVehicle||!this.broken&&(!this.broken&&2===e||Math.abs(t.args.ySpeed)>20&&0===e?!(t.args.ySpeed>0||t.ySpeedLast>0)||(t.args.groundAngle=0,t.args.x=this.args.x,t.args.xSpeed=0,t.args.ySpeed=Math.abs(t.args.gSpeed),t.args.falling=!0,t.args.bouncing=!1,t.args.jumping=!1,t.args.mode=0,this.break(),!1):!(t.args.jumping&&t.args.ySpeed>0||t.args.rolling)||(t.args.x=this.args.x,t.args.y=this.args.y,this.viewport.onFrameOut(1,function(){t.args.groundAngle=0,t.args.falling=!0,t.args.animation="rolling",t.args.x=r.args.x,t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=Math.abs(t.args.gSpeed)}),t.args.jumping&&(t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=0,t.args.ignore=30,t.args.float=30,this.viewport.onFrameOut(30,function(){t.args.xSpeed=0,t.args.ySpeed=10})),a(l(f.prototype),"collideA",this).call(this,t,e)))}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Stopper=u}),require.register("actor/SuperRing.js",function(t,e,r){"use strict"}),require.register("actor/Switch.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Switch=void 0;var o=e("./PointActor"),i=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.PointActor);var e,r,n,f=l(p);function p(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=f.call.apply(f,[this].concat(n))).args.type="actor-item actor-switch",e.args.width=32,e.args.height=e.height=16,e.removeTimer=null,e.args.active=!1,e.args.latch=e.args.latch||!1,e.activator=null,e.args.bindTo("active",function(t){e.box&&e.box.setAttribute("data-active",t?"true":"false")}),e.args.threshold=null!==(t=e.args.threshold)&&void 0!==t?t:100,e.ignore=0,e}return e=p,(r=[{key:"update",value:function(){s(u(p.prototype),"update",this).call(this),this.ignore>0?this.ignore--:this.args.latch||this.activator&&this.activator.args.standingOn===this&&this.activator.y!==this.args.y||(this.args.active=!1,this.activator=null)}},{key:"updateEnd",value:function(){s(u(p.prototype),"updateEnd",this).call(this),this.args.active?this.args.height=this.height+-6:this.args.height=this.height}},{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div")}},{key:"collideA",value:function(t,e){var r=this;return this.activator===t&&t.y>this.y?(this.ignore=8,!0):t.args.ySpeed<0?0===t.args.ySpeed&&t.y>this.y:!!(this.args.active&&t.y<this.y)||(t.isEffect||t.isRegion?void 0:!(t.y>this.y-this.args.height+0)&&(!!(this.args.threshold&&t.args.weight<this.args.threshold)||(t.onRemove(function(){return r.activator=null}),t.y<=this.y-this.args.height&&(this.args.active||this.activate(t),this.ignore=8,this.args.active=!0,this.activator=t,!0))))}},{key:"activate",value:function(t){(this.beep(),this.args.target&&this.viewport.actorsById[this.args.target])&&this.viewport.actorsById[this.args.target].activate(t,this);if(this.args.destroyLayer){var e=this.args.destroyLayer,r=this.viewport.args.layers[e];r&&(r.args.destroyed=!0)}if(this.args.water){var n,o,i=this.viewport.actorsById[this.args.water],a=this.viewport.objDefs.get(this.args.setPoint);i.target=Number(i.y||0)-Number(a.y||0),i.args.fillSpeed=null!==(n=this.args.fillSpeed)&&void 0!==n?n:i.args.fillSpeed,i.args.drainSpeed=null!==(o=this.args.drainSpeed)&&void 0!==o?o:i.args.drainSpeed}var s=this.viewport.objDefs.get(this.args.point),c=this.viewport.objectPalette[this.args.spawn];c&&s&&this.viewport.spawn.add({object:new c({x:s.x,y:s.y})}),this.args.active=!0}},{key:"beep",value:function(){this.viewport&&(this.args.silent||i.Sfx.play("SWITCH_HIT"))}},{key:"sleep",value:function(){var t=this;this.viewport&&(this.args.x=this.def.get("x"),this.args.y=this.def.get("y"),this.onNextFrame(function(){t.args.x=t.def.get("x"),t.args.y=t.def.get("y"),t.viewport.setColCell(t),t.args.xSpeed=0,t.args.ySpeed=0,t.args.pushed=0,t.args.float=0}))}},{key:"solid",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Switch=f}),require.register("actor/Tails.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Tails=void 0;var o=e("./PointActor"),i=e("curvature/base/Tag"),a=(e("./Spring"),e("../behavior/SkidDust"));function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(g,o.PointActor);var e,r,n,c=p(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.canonical="Tails",t.behaviors.add(new a.SkidDust),t.args.type="actor-item actor-tails",t.jumpForceNormal=11,t.jumpForceSuper=16,t.accelNormal=.15,t.accelSuper=.22,t.args.accel=t.accelNormal,t.args.decel=.4,t.args.flySpeedMax=25,t.args.gSpeedMax=18,t.args.jumpForce=t.jumpForceNormal,t.args.weight=80,t.args.gravity=.5,t.args.width=16,t.args.height=34,t.args.normalHeight=32,t.args.rollingHeight=28,t.willStick=!1,t.stayStuck=!1,t.sparks=new Set,t}return e=g,(r=[{key:"onRendered",value:function(t){u(h(g.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite"),this.tails=new i.Tag('<div class = "tails-tails">'),this.sprite.appendChild(this.tails.node),this.flyingSound=new Audio("/Sonic/tails-flying.wav"),this.flyingSound.volume=.35+-.3*Math.random(),this.flyingSound.loop=!0}},{key:"startle",value:function(){var t=this;u(h(g.prototype),"startle",this).call(this),this.args.animation="startle",this.onNextFrame(function(){return t.args.animation="startle"})}},{key:"updateStart",value:function(){u(h(g.prototype),"updateStart",this).call(this),this.args.dead&&(this.args.animation="dead")}},{key:"update",value:function(){var t=this,e=this.args.falling;if(this.viewport)if(this.viewport.args.audio&&this.flyingSound&&(this.flyingSound.paused||(this.flyingSound.volume=.35+-.3*Math.random()),this.flyingSound.currentTime>.2&&(this.flyingSound.currentTime=0)),this.box){if(this.args.tailFlyCoolDown>0&&this.args.tailFlyCoolDown--,this.args.tailFlyCoolDown<0&&this.args.tailFlyCoolDown++,0===this.args.tailFlyCoolDown&&(this.flyingSound.pause(),this.args.flying=!1),e)this.args.flying&&!this.args.startled?this.yAxis>0?(this.args.animation="jumping",this.args.ySpeed=this.args.ySpeed>this.args.jumpForce?this.args.ySpeed:this.args.jumpForce):this.args.animation="flying":this.args.jumping&&(this.flyingSound.pause(),this.args.animation="jumping");else{this.args.tailFlyCoolDown=0,this.flyingSound.pause();var r=this.args.direction,n=this.args.gSpeed,o=Math.abs(n),a=this.args.gSpeedMax;this.args.grinding?(this.args.animation="grinding",this.args.rolling=!1):this.args.rolling?this.args.animation="rolling":Math.sign(this.args.gSpeed)!==r&&Math.abs(this.args.gSpeed-r)>5?this.args.animation="skidding":o>a/2?this.args.animation="running":this.args.moving&&this.args.gSpeed?this.args.animation="walking":this.args.animation="standing"}if(this.args.startled&&(this.flyingSound.pause(),this.args.flying=!1),u(h(g.prototype),"update",this).call(this),this.args.hangingFrom&&(this.args.animation="hanging"),this.args.grinding&&!this.args.falling&&this.args.gSpeed){var c=new i.Tag('<div class = "particle-sparks">'),l=new i.Tag('<div class = "envelope-sparks">');l.appendChild(c.node);var f=this.rotatePoint(1.75*-this.args.gSpeed*this.args.direction,8),p=Math.sign(this.args.gSpeed);l.style({"--x":f[0]+this.x,"--y":f[1]+this.y+-3*Math.random,"z-index":0,"animation-delay":.25*-Math.random()+"s","--xMomentum":Math.max(Math.abs(this.args.gSpeed),4)*p,"--flip":p,"--angle":this.realAngle,opacity:2*Math.random()}),l.particle=c,this.viewport.particles.add(l),this.sparks.add(l),this.viewport.onFrameOut(30,function(){t.viewport.particles.remove(l),t.sparks.delete(l)})}if(this.sparks.size){var d,y=s(this.sparks);try{for(y.s();!(d=y.n()).done;){var b=d.value,v=this.rotatePoint(1.75*this.args.direction,8);b.style({opacity:2*Math.random(),"--x":v[0]+this.x,"--y":v[1]+this.y})}}catch(t){y.e(t)}finally{y.f()}}}else u(h(g.prototype),"update",this).call(this)}},{key:"command_0",value:function(t){this.args.hangingFrom?u(h(g.prototype),"command_0",this).call(this):(u(h(g.prototype),"command_0",this).call(this,t),this.args.jumping&&(this.args.falling?0!==this.args.tailFlyCoolDown?(this.args.ySpeed>0&&(this.args.ySpeed=0),this.args.tailFlyCoolDown=80,this.args.flying=!0,this.flyingSound.volume=.35+-.3*Math.random(),this.viewport.args.audio&&this.flyingSound.paused&&this.flyingSound.play()):this.args.tailFlyCoolDown=80:this.args.tailFlyCoolDown=-80))}},{key:"hold_0",value:function(t){this.args.flying?(this.args.ySpeed>0&&(this.args.ySpeed=0),Math.random()>.8&&(this.flyingSound.volume=.35+-.3*Math.random()),this.args.tailFlyCoolDown=80,this.args.ySpeed-=Math.min(3,t.time/9),this.args.ySpeed=Math.max(-5,this.args.ySpeed)):this.args.flying=!0}},{key:"sleep",value:function(){this.flyingSound&&this.flyingSound.pause()}},{key:"solid",get:function(){return!1}},{key:"canRoll",get:function(){return!0}},{key:"canFly",get:function(){return!0}},{key:"isEffect",get:function(){return!1}},{key:"controllable",get:function(){return!this.args.npc}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.Tails=g}),require.register("actor/Tester.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Tester=void 0;var o=e("./PointActor"),i=(e("./Cursor"),e("../ObjectPalette"));function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}window.testRuns=[];var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.PointActor);var e,r,n,u=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return f(l(t=u.call.apply(u,[this].concat(r))),"count",0),f(l(t),"char",null),t}return e=p,(r=[{key:"update",value:function(){var t=this;if(this.char){var e=this.char.controller;5===this.char.age&&e.press(4,1),6===this.char.age&&e.press(4,0),this.char.readInput()}else{var r=i.ObjectPalette.sonic,n=this.count;this.char=new r({name:"Test #".concat(n),x:this.x+-n%160+80,y:this.y});var o=this.char.args.bindTo("falling",function(){var e=t.char.x;t.viewport.onFrameOut(5,function(){console.log({count:n,landed:e,groundAngle:t.char.args.groundAngle,gSpeed:t.char.args.gSpeed})}),o()},{now:!1,frame:1});window.testRuns[n]=this.char,this.count++,this.viewport.spawn.add({object:this.char})}if(this.char.args.dead){var a=this.char;this.char=null,this.viewport.onFrameOut(100,function(){return t.viewport.actors.remove(a)})}else this.char.age>30&&(this.char.xAxis=1)}},{key:"updateEnd",value:function(){this.char}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Tester=p}),require.register("actor/TextActor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TextActor=void 0;var o=e("./PointActor"),i=e("../ui/CharacterString");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,o.PointActor);var e,r,n,p=l(h);function h(t,e){var r,n,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),r=p.call(this,t,e),n=u(r),a=-1,(o="float")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,r.args.type="actor-item actor-text-actor",r.args.float=-1,r.text=new i.CharacterString({value:""}),r.args.bindTo("content",function(e){r.text.args.value=e,r.text.args.color=t.color,r.args.width=18*e.length,r.args.height=18}),r}return e=h,(r=[{key:"onRendered",value:function(t){s(f(h.prototype),"onRendered",this).call(this,t),this.sprite=this.findTag("div.sprite"),this.text.render(this.sprite)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.TextActor=p}),require.register("actor/TilesetSwapper.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TilesetSwapper=void 0;var o=e("./PointActor"),i=e("../effects/ScreenFire"),a=e("../BackdropPalette");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(f,o.PointActor);var e,r,n,u=l(f);function f(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(r=u.call(this,t,e)).args.hidden=!0;new Image("../Sonic/tiles/azure-lake/azure-lake-burnt.png");var n=a.BackdropPalette[r.args.backdrop];return r.args.backdrop=new n,r}return e=f,(r=[{key:"activate",value:function(t,e){var r=this;this.activated||(this.activated=!0,this.viewport.onFrameOut(15,function(){var t=new i.ScreenFire;r.viewport.args.screenEffects.add(t),r.viewport.onFrameOut(300,function(){r.viewport.args.screenEffects.remove(t),t.remove()}),r.viewport.onFrameOut(90,function(){r.viewport.tileMap.replacements.set("/map/../Sonic/tiles/azure-lake/azure-lake.png","/map/../Sonic/tiles/azure-lake/azure-lake-burnt.png"),r.viewport.args.backdrop=r.args.backdrop,r.viewport.tileMap.replacements.set("/map/../Sonic/tiles/azure-lake/azure-lake-shapes.png","/map/../Sonic/tiles/azure-lake/azure-lake-burnt-shapes.png"),r.viewport.tileMap.replacements.set("/map/../Sonic/tiles/azure-lake/rolling.png","/map/../Sonic/tiles/azure-lake/rolling-burnt.png"),r.viewport.tileMap.replacements.set("/map/../Sonic/tiles/azure-lake/giant-loop.png","/map/../Sonic/tiles/azure-lake/giant-loop-burnt.png"),r.viewport.tileMap.replacements.set("/map/../Sonic/azure-lake-platform.png","/map/../Sonic/azure-lake-platform-burnt.png")})}))}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.TilesetSwapper=f}),require.register("actor/Torch.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Torch=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.PointActor);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.width=16,t.args.height=32,t.args.type="actor-item actor-torch",t.args.float=-1,t}return e=l,(r=[{key:"solid",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Torch=l}),require.register("actor/Tornado.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Tornado=void 0;var o=e("./Vehicle"),i=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Vehicle);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="actor-item actor-tornado",t.args.width=96,t.args.height=48,t.removeTimer=null,t.args.xSpeedMaxThrusting=64,t.args.xSpeedMaxOriginal=32,t.args.xSpeedMax=t.args.xSpeedMaxOriginal,t.args.gSpeedMax=5,t.args.decel=.15,t.args.accel=.5,t.args.seatHeight=14,t.args.seatForward=-32,t.args.skidTraction=.95,t.dustCount=0,t.args.flyAngle=-.25,t.args.particleScale=2,t.args.float=-1,t.args.thrusting=!1,t.args.landingGear=!0,t.args.jumpForce=8,t.args.fuelLevel=100,t.args.thrusterFill=0,t.args.noThrust=0,t.plane=new i.Tag('<div class = "plane">'),t.fuselage=new i.Tag('<div class = "fuselage">'),t.propeller=new i.Tag('<div class = "propeller">'),t.thruster=new i.Tag('<div class = "thruster">'),t.fuelMeter=new i.Tag('<div class = "fuel-meter">'),t.frontGear=new i.Tag('<div class = "front-landing-gear">'),t.rearGear=new i.Tag('<div class = "rear-landing-gear">'),t}return e=p,(r=[{key:"onRendered",value:function(t){var e=this;s(u(p.prototype),"onRendered",this).call(this,t),this.box=this.findTag("div"),this.sprite=this.findTag("div.sprite"),this.sprite.appendChild(this.plane.node),this.thruster.appendChild(this.fuelMeter.node),this.plane.appendChild(this.thruster.node),this.plane.appendChild(this.propeller.node),this.plane.appendChild(this.frontGear.node),this.plane.appendChild(this.rearGear.node),this.plane.appendChild(this.fuselage.node),this.args.bindTo("landingGear",function(t){e.plane&&e.plane.setAttribute("data-landing-gear",t)}),this.args.bindTo("thrusting",function(t){e.plane&&e.plane.setAttribute("data-thrusting",t)})}},{key:"update",value:function(){if(this.occupant&&this.args.falling||(this.args.flyAngle=this.args.falling?.26:-.26,this.args.flying=!1,this.args.float=0),!this.args.thrusting&&Math.abs(this.args.xSpeed)<8?(this.args.float=0,this.args.flying=!1):this.args.falling&&(this.args.float=-1,this.args.flying=!0),!this.args.jumping&&0===this.args.xSpeed&&this.args.falling)return this.args.flying=!1,this.args.float=0,this.args.thrusting&&(this.args.crashed=!0,this.args.thrusting=!1,this.args.noThrust=Date.now()+500),void s(u(p.prototype),"update",this).call(this);var t=this.args.xSpeedMaxThrusting;if(this.args.thrusting&&this.args.fuelLevel<=0&&(this.args.thrusting=!1,this.args.noThrust=Date.now()+500,this.args.thrusterFill=Date.now()+500),this.args.thrusting?(this.args.xSpeedMax=this.args.xSpeedMaxThrusting,this.args.fuelLevel>0&&(this.args.fuelLevel-=.1)):(this.args.xSpeedMax=this.args.xSpeedMaxOriginal,this.args.thrusterFill<Date.now()&&this.args.fuelLevel<100&&(this.args.fuelLevel+=.25)),this.fuelMeter.style({"--fuelLevel":this.args.fuelLevel/100}),!this.args.thrusting&&Math.abs(this.args.xSpeed)>t&&(this.args.xSpeed-=.2*Math.sign(this.args.xSpeed)),this.args.thrusting&&(Math.sign(this.args.xSpeed)!==this.args.direction||Math.abs(this.args.xSpeed)<t)&&(this.args.falling||0!==this.args.xSpeed||(this.args.flyAngle=-.26,this.args.falling=!0,this.args.flying=!0,this.args.ySpeed=-5),this.args.xSpeed+=4*Math.sign(this.args.direction)),Math.abs(this.args.xSpeed)>this.args.xSpeedMax/2&&!this.args.thrusting&&!this.xAxis&&(this.args.xSpeed*=.95),Math.abs(this.args.xSpeed)>t&&(this.args.xSpeed=t*Math.sign(this.args.direction)),this.args.flying){if(0===this.args.ySpeed&&(this.args.flyAngle=0),this.args.landingGear?!this.args.thrusting&&this.args.flyAngle<Math.PI/4?this.args.flyAngle+=.005:this.args.thrusting&&this.args.flyAngle>-Math.PI/4&&(this.args.flyAngle-=.005):Math.abs(this.args.flyAngle)>.00125?this.args.flyAngle-=.00125*Math.sign(this.args.flyAngle):this.args.flyAngle=0,!this.args.xSpeed)return void(this.args.flying=!1);var e=this.args.flyAngle+.035*Math.sign(this.yAxis);if(this.args.flyAngle>0?this.args.xSpeed*=1.025:this.args.flyAngle>0&&(this.args.xSpeed/=1.025),this.yAxis&&Math.abs(e)<Math.PI/2&&(this.args.flyAngle=e),Math.sign(this.args.xSpeed)===this.args.direction){var r=this.args.xSpeed||this.args.gSpeed;this.args.ySpeed=Math.sin(this.args.flyAngle)*r*(this.args.direction||Math.sign(r))*2}}else!this.args.thrusting&&this.args.flyAngle<Math.PI/2&&this.args.ySpeed>0&&(this.args.flyAngle+=.025);this.args.flying&&(this.args.airAngle=this.args.flyAngle,this.args.jumping=!1),this.args.falling||(this.args.landingGear=!0,this.args.flyAngle=-.26),s(u(p.prototype),"update",this).call(this),this.args.flying&&(this.args.cameraMode="airplane")}},{key:"command_1",value:function(){this.args.falling&&(this.args.landingGear=!this.args.landingGear)}},{key:"hold_2",value:function(){!this.args.thrusting&&this.args.fuelLevel<=1||this.args.fuelLevel<=0||(this.args.crashed||this.args.noThrust>Date.now()?this.args.false=!0:this.args.thrusting=!0)}},{key:"release_2",value:function(){this.args.thrusting=!1,this.args.crashed=!1}},{key:"solid",get:function(){return!this.occupant}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Tornado=f}),require.register("actor/Tree.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Tree=void 0;var o=e("./PointActor"),i=e("./Coconut"),a=e("curvature/base/Tag");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,o.PointActor);var e,r,n,p=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call.apply(p,[this].concat(r))).args.type="actor-item actor-tree",t.args.z=-1,t.args.width=80,t.args.coconutCount=4,t}return e=h,n=[{key:"fromDef",value:function(t){var e=u(f(h),"fromDef",this).call(this,t);return e.args.height=t.height,e}}],(r=[{key:"onRendered",value:function(t){u(f(h.prototype),"onRendered",this).call(this,t),this.box&&!this.top&&(this.top=new a.Tag('<div class = "tree-top">'),this.box.appendChild(this.top.node)),this.autoStyle.get(this.box)["--count"]="coconutCount"}},{key:"collideA",value:function(t,e){if(t.controllable&&!(Math.abs(t.args.x-this.args.x)>20)&&!(t.args.y>this.args.y+-this.args.height+64)&&(this.ignores.set(t,45),this.args.coconutCount)){this.args.coconutCount--;var r=new i.Coconut;r.args.x=this.args.x,r.args.y=this.args.y+-this.args.height+48,this.viewport.spawn.add({object:r}),this.viewport.onFrameOut(1,function(){return r.args.xSpeed=t.args.xSpeed||t.args.direction*Math.random()*2})}}},{key:"sleep",value:function(){this.args.coconutCount=4}},{key:"solid",get:function(){return!1}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.Tree=p}),require.register("actor/Umbrella.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Umbrella=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.PointActor);var e,r,n,u=s(f);function f(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=u.call.apply(u,[this].concat(n))).args.width=20,e.args.height=null!==(t=e.args.height)&&void 0!==t?t:80,e.args.type="actor-item actor-umbrella",e}return e=f,n=[{key:"fromDef",value:function(t){var e=c(l(f),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e}}],(r=[{key:"solid",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Umbrella=u}),require.register("actor/UnbreakableCrate.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.UnbreakableCrate=void 0;e("./PointActor");var o=e("./Block");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.Block);var e,r,n,u=c(f);function f(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(r=u.call(this,t,e)).args.type="actor-item actor-unbreakable-crate",r.args.width=64,r.args.height=64,r.args.static=!1,r}return e=f,(r=[{key:"update",value:function(){this.viewport&&this.args.gate&&(this.viewport.actorsById[this.args.gate].args.hitPoints||this.viewport.actors.remove(this));a(l(f.prototype),"update",this).call(this)}},{key:"collideA",value:function(t,e){return!0}},{key:"damage",value:function(t,e){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.UnbreakableCrate=u}),require.register("actor/Vehicle.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Vehicle=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.PointActor);var e,r,n,f=c(p);function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=f.call.apply(f,[this].concat(i)),e=l(t),n=!1,(r="dead")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=p,(r=[{key:"update",value:function(){this.occupant&&(this.running=this.occupant.running,this.crawling=this.occupant.crawling),a(u(p.prototype),"update",this).call(this)}},{key:"collideA",value:function(t,e){if(t.noClip)return!1;if(t.controllable){if(t.args.falling&&this.y+-t.y+24<=this.args.seatHeight)return!1;if(t.args.ySpeed>0&&!this.occupant){var r=this.args.seatHeight||0;return t.args.ySpeed=0,t.args.y=this.y+-r+1,t.args.x=this.x,t.args.standingOn=this,!0}return!1}return!(t.y>=this.y)&&(t.args.float||(t.args.ySpeed=-t.args.ySpeed,t.args.xSpeed=t.args.xSpeed||5*t.args.direction,t.args.ySpeed>-5&&(t.args.ySpeed=-5)),!1)}},{key:"standBelow",value:function(t){t.controllable||(t.args.ySpeed=-t.args.ySpeed,t.args.xSpeed=t.args.xSpeed||5*t.args.direction,t.args.ySpeed>-5&&(t.args.ySpeed=-5))}},{key:"isVehicle",get:function(){return!0}},{key:"sleep",value:function(){a(u(p.prototype),"sleep",this).call(this),this.dead&&this.viewport.actors.remove(this)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Vehicle=f}),require.register("actor/Voltorb.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Voltorb=void 0;var o=e("../actor/GohlaBall");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.GohlaBall);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call.apply(u,[this].concat(r))).args.type="actor-item actor-gohla-ball actor-voltorb",t}return e=f,(r=[{key:"update",value:function(){if(a(l(f.prototype),"update",this).call(this),this.viewport&&this.viewport.controlActor){var t=this.viewport.controlActor;this.direction=Math.sign(this.x-t.x),this.args.facing=this.direction<0?"left":"right",Math.abs(t.y-this.y)<=16&&Math.abs(t.x-this.x)<34?(this.args.animation="sparking",t.damage(this,"electric")):t.args.dead||t.args.mercy||(this.args.animation="standing")}}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Voltorb=u}),require.register("actor/WaterController.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WaterController=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.PointActor);var e,r,n,u=c(f);function f(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(r=u.call(this,t,e)).args.activated=!1,r.args.levelLimit=r.args.levelLimit||0,r.args.levelSpeed=r.args.levelSpeed||1,r.args.level=r.args.level||0,r.args.static=!0,r.args.hidden=!0,r}return e=f,(r=[{key:"updateStart",value:function(){a(l(f.prototype),"updateStart",this).call(this),this.args.switch&&!this.switch&&(this.switch=this.viewport.actorsById[this.args.switch]),this.switch&&this.switch.args.active>0&&this.activate(this.switch.activator,this.switch)}},{key:"update",value:function(){var t=this;if(this.args.level<this.args._levelLimit&&(this.args.level+=this.args.levelSpeed||0),this.args.level>this.args._levelLimit){this.args.levelSpeed=0,this.args.level=this.args._levelLimit;var e=this.viewport;e.onFrameOut(30,function(){if(e.auras.delete(t),void 0!==t.args.target){var r=e.actorsById[t.args.target];e.auras.delete(r)}})}}},{key:"activate",value:function(t,e){if(!this.args.activated&&(this.args._levelLimit=this.args.levelLimit||4096,this.viewport.auras.add(this),this.args.activated=!0,void 0!==this.args.target&&this.viewport.actorsById[this.args.target])){var r=this.viewport.actorsById[this.args.target];this.viewport.auras.add(r),r.activate(t,this)}}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.WaterController=u}),require.register("actor/WaterFall.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WaterFall=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,o.PointActor);var e,r,n,f=s(p);function p(){var t,e,r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=f.call.apply(f,[this].concat(a)),r=c(e),o=-1,(n="float")in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,e.args.width=e.args.width||32,e.args.height=e.args.height||64,e.args.upward=null!==(t=e.args.upward)&&void 0!==t&&t,e.args.type="actor-item actor-water-fall",e.args.active=!1,e.args.static=!0,e}return e=p,n=[{key:"fromDef",value:function(t){var e=l(u(p),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e.args.toHeight=t.toHeight||0,e.args.x=t.x+32,e.args.yOriginal=t.y,e}}],(r=[{key:"onRendered",value:function(){l(u(p.prototype),"onRendered",this).call(this),this.autoAttr.get(this.box)["data-upward"]="upward"}},{key:"wakeUp",value:function(){this.switch=this.viewport.actorsById[this.args.switch]}},{key:"update",value:function(){if(l(u(p.prototype),"update",this).call(this),this.args.toHeight!==this.args.height){var t=this.args.toHeight-this.args.height,e=32*Math.sign(t);t<=e?(this.args.height=this.args.toHeight,this.args.y=this.args.yOriginal+this.args.toHeight):(this.args.height+=e,this.args.y+=e)}this.switch&&this.switch.args.active>0&&!this.args.active&&(this.args.active=!0,this.args.toHeight=this.args.openHeight,this.args.y-=this.args.openOffset)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.WaterFall=f}),require.register("actor/WaterJet.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WaterJet=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,o.PointActor);var e,r,n,f=s(p);function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=f.call.apply(f,[this].concat(i)),e=c(t),n=-1,(r="float")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.width=t.args.width||32,t.args.height=t.args.height||64,t.args.type="actor-item actor-water-jet",t.args.active=!1,t.args.static=!0,t}return e=p,n=[{key:"fromDef",value:function(t){var e=l(u(p),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e.args.x=t.x+t.width/2,e}}],(r=[{key:"wakeUp",value:function(){this.switch=this.viewport.actorsById[this.args.switch]}},{key:"update",value:function(){var t=this;l(u(p.prototype),"update",this).call(this),this.viewport&&this.args.switch&&this.switch&&this.switch.args.active&&!this.args.active&&(this.args.active=!0,this.onNextFrame(function(){t.args.x+=.5*t.args.openWidth+-.5*t.args.width,t.args.width=t.args.openWidth}))}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.WaterJet=f}),require.register("actor/WindStone.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WindStone=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,o.PointActor);var e,r,n,l=s(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=l.call.apply(l,[this].concat(r))).args.width=8,t.args.height=24,t.args.type="actor-item actor-wind-stone",t.bindTo("carriedBy",function(e){if(t.cX&&(t.cX(),t.cX=null),t.cY&&(t.cY(),t.cY=null),e)t.cX=e.args.bindTo("x",function(r){return t.args.x=r+8*e.args.direction}),t.cY=e.args.bindTo("y",function(e){return t.args.y=e+-16}),e.carrying.add(c(t)),t.args.float=-1;else if(t.carriedBy){var r=t.carriedBy;t.carriedBy=null,t.args.xSpeed=r.args.xSpeed,t.args.ySpeed=r.args.ySpeed,t.args.xSpeed+=4*Math.sign(r.args.gSpeed||r.args.xSpeed),t.args.ySpeed-=4,r.carrying.delete(c(t)),t.args.falling=!0,t.args.float=0}}),t}return e=u,(r=[{key:"lift",value:function(t){this.carriedBy!==t?this.carriedBy=t:this.carriedBy=null}},{key:"solid",get:function(){return!1}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.WindStone=u}),require.register("actor/Window.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Window=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,o.PointActor);var e,r,n,l=s(u);function u(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=l.call.apply(l,[this].concat(i)),e=c(t),n=-1,(r="float")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="actor-item actor-window",t.args.width=64,t.args.height=160,t}return e=u,(r=[{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.Window=u}),require.register("actor/WoodenCrate.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WoodenCrate=void 0;var o=e("./BreakableBlock"),i=e("./Projectile"),a=e("./Spring");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.BreakableBlock);var e,r,n,p=u(h);function h(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=p.call.apply(p,[this].concat(n))).args.type="actor-item actor-breakable-block actor-wooden-crate",e.args.width=60,e.args.height=60,e.args.static=null!==(t=e.args.static)&&void 0!==t&&t,e[a.Spring.WontSpring]=!0,e}return e=h,(r=[{key:"updateStart",value:function(){this.args.static=!this.args.falling&&!this.args.standingOn,c(f(h.prototype),"updateStart",this).call(this)}},{key:"collideA",value:function(t,e){return!(0!==e||!t.controllable)||(t instanceof i.Projectile&&!this.broken?(this.break(t),!0):t.spindashCharge?(this.break(t),!0):-1!==e||t.args.gSpeed||t.args.falling||!t.controllable?1!==e&&3!==e||t.y<=this.y-this.args.height||(t.args.rolling||2===e?(this.break(t),!1):t.punching&&!this.broken?(this.break(t),!1):!!this.viewport&&(-1!==e&&!t.args.rolling||c(f(h.prototype),"collideA",this).call(this,t,e))):(this.break(t),!1))}},{key:"setTile",value:function(){this.args.spriteSheet="/Sonic/wooden-crate.png"}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.WoodenCrate=p}),require.register("actor/Zipline.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Zipline=void 0;var o=e("./PointActor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.PointActor);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call.apply(u,[this].concat(r))).args.width=1,t.args.height=1,t.args.type="actor-item actor-zipline",t.args.z=128,t.args.static=!1,t.breakable=!1,t.args.decel=0,t.args.accel=0,t}return e=f,(r=[{key:"activate",value:function(){this.viewport.auras.add(this),this.args.launched=!0}},{key:"update",value:function(){if(this.args.launched){this.args.gSpeed<1&&(this.args.gSpeed=1),this.args.gSpeed+=.1;this.args.gSpeed>1/0&&(this.args.gSpeed=1/0)}a(l(f.prototype),"update",this).call(this)}},{key:"collideA",value:function(t,e){return!this.breakable||a(l(f.prototype),"collideA",this).call(this,t,e)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Zipline=u}),require.register("actor/monitor/InfoMonitor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.InfoMonitor=void 0;var o=e("../Monitor");e("../../audio/Sfx");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.Monitor);var e,r,n,u=c(f);function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),u.apply(this,arguments)}return e=f,(r=[{key:"onRendered",value:function(t){a(l(f.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"info"})}},{key:"effect",value:function(t){this.args.target&&this.viewport.actorsById[this.args.target]&&(this.viewport.actorsById[this.args.target].activate(t,this,!0),t.args.xSpeed*=.25,t.dropDashCharge=0)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.InfoMonitor=u}),require.register("actor/monitor/RingMonitor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RingMonitor=void 0;var o=e("../Monitor"),i=e("../../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Monitor);var e,r,n,f=l(p);function p(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),f.apply(this,arguments)}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"ring"})}},{key:"effect",value:function(t){t.args.rings+=10,i.Sfx.play("RING_COLLECTED")}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.RingMonitor=f}),require.register("actor/monitor/SheildElectricMonitor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SheildElectricMonitor=void 0;var o=e("../Monitor"),i=e("../../powerups/ElectricSheild");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Monitor);var e,r,n,f=l(p);function p(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),f.apply(this,arguments)}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box&&this.box.attr({"data-monitor":"sheild-electric"})}},{key:"effect",value:function(t){if(t.controllable){var e=new i.ElectricSheild;t.inventory.add(e)}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.SheildElectricMonitor=f}),require.register("actor/monitor/SheildFireMonitor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SheildFireMonitor=void 0;var o=e("../Monitor"),i=e("../../powerups/FireSheild");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Monitor);var e,r,n,f=l(p);function p(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),f.apply(this,arguments)}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"sheild-fire"})}},{key:"effect",value:function(t){if(t.controllable){var e=new i.FireSheild;t.inventory.add(e)}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.SheildFireMonitor=f}),require.register("actor/monitor/SheildNormalMonitor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SheildNormalMonitor=void 0;var o=e("../Monitor"),i=e("../../powerups/NormalSheild");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Monitor);var e,r,n,f=l(p);function p(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),f.apply(this,arguments)}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box&&this.box.attr({"data-monitor":"sheild-normal"})}},{key:"effect",value:function(t){if(t.controllable){var e=new i.NormalSheild;t.inventory.add(e)}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.SheildNormalMonitor=f}),require.register("actor/monitor/SheildStarMonitor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SheildStarMonitor=void 0;var o=e("../Monitor"),i=e("../../powerups/StarSheild");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Monitor);var e,r,n,f=l(p);function p(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),f.apply(this,arguments)}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"sheild-star"})}},{key:"effect",value:function(t){if(t.controllable){var e=new i.StarSheild;t.inventory.add(e)}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.SheildStarMonitor=f}),require.register("actor/monitor/SheildWaterMonitor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SheildWaterMonitor=void 0;var o=e("../Monitor"),i=e("../../powerups/BubbleSheild");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Monitor);var e,r,n,f=l(p);function p(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),f.apply(this,arguments)}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"sheild-water"})}},{key:"effect",value:function(t){if(t.controllable){var e=new i.BubbleSheild;t.inventory.add(e)}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.SheildWaterMonitor=f}),require.register("actor/monitor/TripleRingMonitor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TripleRingMonitor=void 0;var o=e("../Monitor"),i=e("../../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Monitor);var e,r,n,f=l(p);function p(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),f.apply(this,arguments)}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"triple-ring"})}},{key:"effect",value:function(t){t.args.rings+=30,i.Sfx.play("RING_COLLECTED"),this.viewport.onFrameOut(10,function(){return i.Sfx.play("RING_COLLECTED")}),this.viewport.onFrameOut(20,function(){return i.Sfx.play("RING_COLLECTED")})}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.TripleRingMonitor=f}),require.register("actor/monitor/WebMonitor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WebMonitor=void 0;var o=e("../HtmlFrame"),i=e("../Monitor");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,i.Monitor);var e,r,n,f=l(p);function p(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),f.apply(this,arguments)}return e=p,(r=[{key:"onRendered",value:function(t){s(u(p.prototype),"onRendered",this).call(this,t),this.box.attr({"data-monitor":"web-monitor"})}},{key:"effect",value:function(t){var e=new o.HtmlFrame({x:this.x,y:this.y,width:240,height:180});this.viewport.spawn.add({object:e})}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.WebMonitor=f}),require.register("audio/AudioManager.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AudioManager=void 0;var o=e("curvature/net/Elicit"),i=e("curvature/base/Mixin"),a=e("curvature/mixin/EventTargetMixin");function s(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=l(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function l(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=d(t);if(e){var i=d(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}(this,r)}}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(u,i.Mixin["with"](a.EventTargetMixin));var e,r,n,l=h(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return y(g(t=l.call.apply(l,[this].concat(r))),"volume",1),y(g(t),"theme","/Sonic/carnival-night-zone-act-2-beta.mp3"),y(g(t),"overlay","/audio/leslie-wai/feel-the-sunshine.mp3"),y(g(t),"tracks",new Map),y(g(t),"plays",new Map),y(g(t),"tags",new Map),y(g(t),"factors",new Map),y(g(t),"stack",[]),y(g(t),"playing",null),y(g(t),"id3",new Map),y(g(t),"request",[]),t}return e=u,(r=[{key:"setVolume",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.volume=t,this.playing&&(this.playing.volume=t)}},{key:"register",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.maxConcurrent,a=void 0===i?1:i,l=n.volume,u=void 0===l?1:l,f=n.fudgeFactor,p=void 0===f?0:f,h=n.startTime,g=void 0===h?0:h,d=Array(a).fill().map(function(t){return new Audio(e)});this.tracks.set(t,d);var y,b=c(d);try{for(b.s();!(y=b.n()).done;){var v=y.value;this.factors.set(v,{volume:u,fudgeFactor:p,startTime:g})}}catch(t){b.e(t)}finally{b.f()}var m=new o.Elicit(e);"mp3"===e.substr(-3)&&this.request.push(m.buffer().then(function(t){var e=new Uint8Array(t);if("ID3"===String.fromCharCode.apply(String,s(e.slice(0,3)))){e[3],e[4],e[5];for(var n=e[6]<<21|e[7]<<14|e[8]<<7|e[9],o=10,i={};o<n;){var a=String.fromCharCode.apply(String,s(e.slice(o,o+4))),l=10+(e[o+4]<<21|e[o+5]<<14|e[o+6]<<7|e[o+7]);if(10===l)break;if(o+l>n)break;var u=String.fromCharCode.apply(String,s(e.slice(o+11,o+l)));if(!a)break;if(o+=l,!a)break;i[a]=u}var f,p=c(d);try{for(p.s();!(f=p.n()).done;){var h=f.value;r.id3.set(h,i)}}catch(t){p.e(t)}finally{p.f()}}}))}},{key:"play",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.playing||(this.playing=this.stack[this.stack.length-1]),this.tracks.has(t)){var n,o=new Map,i=null,a=c(this.tracks.get(t));try{for(a.s();!(n=a.n()).done;){var l=n.value;if(!this.plays.has(l)){i=l;break}o.set(l,this.plays.get(l))}}catch(t){a.e(t)}finally{a.f()}if(!i)i=s(o).sort(function(t,e){return Math.sign(t[1]-e[1])})[0][0];if(i){var u=this.factors.get(i),f=u.volume,p=u.fudgeFactor,h=u.startTime;i.playbackRate=1,i.currentTime=h,i.volume=Math.max(0,Math.min(1,this.volume*(f+p*(Math.random()+-.5)))),i.loop=r,this.plays.set(i,Date.now()),this.playing=i,this.stack.push(this.playing);r||this.playing.addEventListener("ended",function(t){e.stack.pop(),e.playing=e.stack[e.stack.length-1],e.play()},{once:!0}),this.tags.set(i,t);var g=new CustomEvent("play",{cancelable:!0});if(this.dispatchEvent(g))try{i.play()}catch(t){console.warn(t)}Promise.all(this.request).then(function(){})}}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===t&&this.playing&&(this.playing.pause(),this.playing=null);for(var e=0,r=Object.keys(this.stack);e<r.length;e++){var n=r[e],o=this.stack[n];if(this.tags.has(o)){if(null===t||this.tags.get(o)===t){var i=this.id3.get(this.playing),a=new CustomEvent("stop",{detail:i,cancelable:!0});this.dispatchEvent(a)&&(o.paused||o.pause(),this.stack.splice(n,1))}}else this.stack.splice(n,1)}this.playing=this.stack[this.stack.length-1],this.playing&&this.play(this.tags.get(this.playing))}},{key:"pause",value:function(){if(this.playing&&!this.playing.paused){var t=this.id3.get(this.playing),e=new CustomEvent("pause",{detail:t,cancelable:!0});this.dispatchEvent(e)&&this.playing.pause()}}},{key:"unpause",value:function(){if(this.playing&&this.playing.paused){var t=this.id3.get(this.playing),e=new CustomEvent("unpause",{detail:t,cancelable:!0});this.dispatchEvent(e)&&this.playing&&this.playing.play()}}},{key:"fadeOut",value:function(t){var e=this;return new Promise(function(r){var n,o,i,a;a=setInterval(function(){if(n=e.playing){o||(i=n.volume,o=Date.now());var s=Date.now(),c=1-Math.min(1,(s-o)/t);n.volume=c*i,c||(e.stop(e.tags.get(n)),clearInterval(a),r())}},16)})}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.AudioManager=b}),require.register("audio/Bgm.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BgmHandler=t.Bgm=void 0;var o=e("curvature/net/Elicit"),i=e("curvature/base/Mixin"),a=e("curvature/mixin/EventTargetMixin");function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=l(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=d(t);if(e){var i=d(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}(this,r)}}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(u,i.Mixin["with"](a.EventTargetMixin));var e,r,n,l=h(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return y(g(t=l.call.apply(l,[this].concat(r))),"volume",1),y(g(t),"theme","/Sonic/carnival-night-zone-act-2-beta.mp3"),y(g(t),"overlay","/audio/leslie-wai/feel-the-sunshine.mp3"),y(g(t),"tracks",new Map),y(g(t),"plays",new Map),y(g(t),"tags",new Map),y(g(t),"stack",[]),y(g(t),"playing",null),y(g(t),"id3",new Map),y(g(t),"request",[]),t}return e=u,(r=[{key:"setVolume",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.volume=t,this.playing&&(this.playing.volume=t)}},{key:"register",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=Array(n).fill().map(function(t){return new Audio(e)});this.tracks.set(t,i);var a=new o.Elicit(e);this.request.push(a.buffer().then(function(t){var e=new Uint8Array(t);if("ID3"===String.fromCharCode.apply(String,c(e.slice(0,3)))){e[3],e[4],e[5];for(var n=e[6]<<21|e[7]<<14|e[8]<<7|e[9],o=10,a={};o<n;){var l=String.fromCharCode.apply(String,c(e.slice(o,o+4))),u=10+(e[o+4]<<21|e[o+5]<<14|e[o+6]<<7|e[o+7]);if(10===u)break;if(o+u>n)break;var f=String.fromCharCode.apply(String,c(e.slice(o+11,o+u)));if(!l)break;if(o+=u,!l)break;a[l]=f}var p,h=s(i);try{for(h.s();!(p=h.n()).done;){var g=p.value;r.id3.set(g,a)}}catch(t){h.e(t)}finally{h.f()}}}))}},{key:"play",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.playing||(this.playing=this.stack[this.stack.length-1]),this.playing&&this.tags.get(this.playing)===t){if(this.playing.paused){var n=this.id3.get(this.playing),o=new CustomEvent("play",{detail:n,cancelable:!0});if(!this.dispatchEvent(o))return;return this.unpause()}}else this.playing&&this.playing.pause();if(this.tracks.has(t)){var i,a=new Map,l=null,u=s(this.tracks.get(t));try{for(u.s();!(i=u.n()).done;){var f=i.value;if(!this.plays.has(f)){l=f;break}a.set(this.plays.get(f),f)}}catch(t){u.e(t)}finally{u.f()}if(!l){var p=c(a).sort(function(t,e){return Math.sign(t[0]-e[0])});l=p[0][1]}if(l&&l!==this.playing){l.playbackRate=1,l.currentTime=0,l.volume=this.volume,l.loop=r,this.plays.set(l,Date.now()),this.playing=l,this.stack.push(this.playing);r||this.playing.addEventListener("ended",function(t){e.stack.pop(),e.playing=e.stack[e.stack.length-1],e.play()},{once:!0}),this.tags.set(l,t),Promise.all(this.request).then(function(){var t=e.id3.get(l),r=new CustomEvent("play",{detail:t,cancelable:!0});if(e.dispatchEvent(r))try{l.play()}catch(t){console.warn(t)}})}}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===t&&this.playing&&(this.playing.pause(),this.playing=null);for(var e=0,r=Object.keys(this.stack);e<r.length;e++){var n=r[e],o=this.stack[n];if(this.tags.has(o)){if(null===t||this.tags.get(o)===t){var i=this.id3.get(this.playing),a=new CustomEvent("stop",{detail:i,cancelable:!0});this.dispatchEvent(a)&&(o.paused||o.pause(),this.stack.splice(n,1))}}else this.stack.splice(n,1)}this.playing=this.stack[this.stack.length-1],this.playing&&this.play(this.tags.get(this.playing))}},{key:"pause",value:function(){if(this.playing&&!this.playing.paused){var t=this.id3.get(this.playing),e=new CustomEvent("pause",{detail:t,cancelable:!0});this.dispatchEvent(e)&&this.playing.pause()}}},{key:"unpause",value:function(){if(this.playing&&this.playing.paused){var t=this.id3.get(this.playing),e=new CustomEvent("unpause",{detail:t,cancelable:!0});this.dispatchEvent(e)&&this.playing&&this.playing.play()}}},{key:"fadeOut",value:function(t){var e=this;return new Promise(function(r){var n,o,i,a;n=e.playing;a=setInterval(function(){if(n){o||(i=n.volume,o=Date.now());var s=Date.now(),c=1-Math.min(1,(s-o)/t);n.volume=c*i,c||(e.stop(e.tags.get(n)),clearInterval(a),r())}},16)})}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.BgmHandler=b;var v=new b;t.Bgm=v}),require.register("audio/Sfx.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sfx=void 0;var n=new(e("./AudioManager").AudioManager);t.Sfx=n}),require.register("backdrop/AngelIsland.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AngelIsland=void 0;var o=e("./Backdrop");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=[{990099:"fcfcfc",770077:"0048fc",550055:"90fcfc"},{990099:"90fcfc",770077:"fcfcfc",550055:"90fcfc"},{990099:"6c90fc",770077:"90fcfc",550055:"90fcfc"},{990099:"0048fc",770077:"6c90fc",550055:"90fcfc"},{990099:"fcfcfc",770077:"0048fc",550055:"6c90fc"},{990099:"90fcfc",770077:"fcfcfc",550055:"0048fc"},{990099:"6c90fc",770077:"90fcfc",550055:"fcfcfc"},{990099:"0048fc",770077:"6c90fc",550055:"90fcfc"}],u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,o.Backdrop);var e,r,n,c=s(u);function u(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=c.call(this,t,e)).args.name="angel-island",r.args.strips=[{autoscroll:-.08,parallax:.005,url:"/Sonic/backdrop/angel-island/sky-0.png",height:196},{autoscroll:-.08,parallax:.005,url:"/Sonic/backdrop/angel-island/reflection.png",height:33},{autoscroll:0,parallax:.009,url:"/Sonic/backdrop/angel-island/water-1.png",interval:12,timeout:100,frame:0,recolor:l,height:-16},{autoscroll:0,parallax:.011,url:"/Sonic/backdrop/angel-island/water-2.png",height:8,interval:14,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.013,url:"/Sonic/backdrop/angel-island/water-3.png",height:8,interval:16,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.015,url:"/Sonic/backdrop/angel-island/water-4.png",height:16,interval:16,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.017,url:"/Sonic/backdrop/angel-island/water-5.png",height:8,interval:16,timeout:100,frame:4,recolor:l},{autoscroll:0,parallax:.019,url:"/Sonic/backdrop/angel-island/water-6.png",height:8,interval:13,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.021,url:"/Sonic/backdrop/angel-island/water-7.png",height:16,interval:11,timeout:100,frame:1,recolor:l},{autoscroll:0,parallax:.023,url:"/Sonic/backdrop/angel-island/water-8.png",height:8,interval:12,timeout:100,frame:2,recolor:l},{autoscroll:0,parallax:.025,url:"/Sonic/backdrop/angel-island/water-9.png",height:8,interval:11,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.028,url:"/Sonic/backdrop/angel-island/water-10.png",height:8,interval:13,timeout:100,frame:3,recolor:l},{autoscroll:0,parallax:.03,url:"/Sonic/backdrop/angel-island/water-11.png",height:16,interval:13,timeout:100,frame:4,recolor:l},{autoscroll:0,parallax:.033,url:"/Sonic/backdrop/angel-island/water-12.png",height:8,interval:11,timeout:100,frame:5,recolor:l},{autoscroll:0,parallax:.035,url:"/Sonic/backdrop/angel-island/water-13.png",height:7,interval:15,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.037,url:"/Sonic/backdrop/angel-island/water-14.png",height:8,interval:17,timeout:100,frame:1,recolor:l},{autoscroll:0,parallax:.039,url:"/Sonic/backdrop/angel-island/water-15.png",height:8,interval:19,timeout:100,frame:2,recolor:l},{autoscroll:0,parallax:.041,url:"/Sonic/backdrop/angel-island/water-16.png",height:6,interval:11,timeout:100,frame:3,recolor:l},{autoscroll:0,parallax:.044,url:"/Sonic/backdrop/angel-island/water-17.png",height:10,interval:13,timeout:100,frame:4,recolor:l},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/angel-island/water-18.png",height:32}],r}return e=u,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.AngelIsland=u}),require.register("backdrop/Backdrop.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Backdrop=void 0;var o=e("curvature/base/View"),i=e("../sprite/Png");function a(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(p,o.View);var e,r,n,s=u(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return h(f(t=s.call.apply(s,[this].concat(r))),"template",'<div class = "backdrop [[name]]">\n\t\t<div cv-ref = "backdrop" class = "parallax"></div>\n\t</div>'),h(f(t),"layers",[]),h(f(t),"urls",[]),h(f(t),"stacked",0),t}return e=p,(r=[{key:"onAttached",value:function(t){var e=this;if(!this.alreadyAttached){this.alreadyAttached=!0;var r=this.tags.backdrop,n=this.args.strips.reverse(),o=[],s=[],c=[],l=0,u=function(t){var e=[],r=n[t];o.push("calc(100% - calc(1px * ".concat(l,"))"));var u="calc(var(--xOffset, 0px) * 1px)";r.parallax&&(u="calc(".concat(u," + calc(1px * calc(").concat(r.parallax," * var(--xPan))))")),r.autoscroll&&(u="calc(".concat(u," + calc(1px * calc(").concat(r.autoscroll," * var(--frame) )) )")),s.push(u),c.push(n[t].url),l+=n[t].height-1,r.recolor&&function(){var t,n=new i.Png(r.url),o=a(r.recolor);try{var s=function(){var r=t.value;e.push(n.ready.then(function(){return n.recolor(r).toDataUri()}))};for(o.s();!(t=o.n()).done;)s()}catch(t){o.e(t)}finally{o.f()}Promise.all(e).then(function(t){return r.frames=t})}()};for(var f in n)u(f);this.urls=c,this.stacked=l;var p=s.join(", "),g=o.join(", "),d=this.urls.map(function(t){return"url(".concat(t,")")}).join(", ");this.args.xOffset=0,r.style({"background-position-y":g,"background-position-x":p,"background-repeat":"repeat-x","background-image":d,"--stackHeight":l}),this.args.bindTo(["x","y","xPan","yPan","bX","bY","width","height","right","xMax","yMax","frame","stacked","top","bottom","xOffset"],function(t,e){return r.style(h({},"--".concat(e),t))}),this.args.bindTo("frame",function(t,r){for(var n in e.args.strips){var o=e.args.strips[n];o.frames&&0==o.timeout--&&(o.timeout=o.interval,o.frame++,o.frame>=o.frames.length&&(o.frame=0),e.urls[n]=o.frames[o.frame],e.refreshLayers())}})}}},{key:"refreshLayers",value:function(){this.tags.backdrop.style({"background-image":this.urls.map(function(t){return"url(".concat(t,")")}).join(", ")})}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Backdrop=g}),require.register("backdrop/Industrial.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Industrial=void 0;var o=e("./Backdrop");e("curvature/base/Tag");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="industrial",r.args.sunrise=0,r.args.bindTo("sunrise",function(t){r.nodes[1]&&r.nodes[1].style.setProperty("--sunrise",t)}),r.args.strips=[{autoscroll:.7,parallax:.055,url:"/Sonic/backdrop/labrynth-industrial/0.png",height:24},{autoscroll:.65,parallax:.05,url:"/Sonic/backdrop/labrynth-industrial/1.png",height:24},{autoscroll:.5,parallax:.045,url:"/Sonic/backdrop/labrynth-industrial/0.png",height:24},{autoscroll:.45,parallax:.04,url:"/Sonic/backdrop/labrynth-industrial/1.png",height:24},{autoscroll:.4,parallax:.035,url:"/Sonic/backdrop/labrynth-industrial/0.png",height:24},{autoscroll:.35,parallax:.025,url:"/Sonic/backdrop/labrynth-industrial/1.png",height:24},{autoscroll:.31,parallax:.023,url:"/Sonic/backdrop/labrynth-industrial/0.png",height:24},{autoscroll:.28,parallax:.021,url:"/Sonic/backdrop/labrynth-industrial/1.png",height:24},{autoscroll:.25,parallax:.02,url:"/Sonic/backdrop/labrynth-industrial/2.png",height:24},{autoscroll:.23,parallax:.019,url:"/Sonic/backdrop/labrynth-industrial/3.png",height:24},{autoscroll:0,parallax:.02,url:"/Sonic/backdrop/labrynth-industrial/4-dist.png",height:70},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/labrynth-industrial/4.png",height:0},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/labrynth-industrial/flame-0.png",height:1,interval:1,timeout:0,frame:0,frames:["/Sonic/backdrop/labrynth-industrial/flame-0a.png","/Sonic/backdrop/labrynth-industrial/flame-1.png","/Sonic/backdrop/labrynth-industrial/flame-1.png","/Sonic/backdrop/labrynth-industrial/flame-2.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-2.png","/Sonic/backdrop/labrynth-industrial/flame-2.png","/Sonic/backdrop/labrynth-industrial/flame-2.png","/Sonic/backdrop/labrynth-industrial/flame-3.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-3.png","/Sonic/backdrop/labrynth-industrial/flame-3.png","/Sonic/backdrop/labrynth-industrial/flame-4.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-4.png","/Sonic/backdrop/labrynth-industrial/flame-5.png","/Sonic/backdrop/labrynth-industrial/flame-6.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-6.png","/Sonic/backdrop/labrynth-industrial/flame-6.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png","/Sonic/backdrop/labrynth-industrial/flame-0.png"]},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/labrynth-industrial/flame-0.png",height:1,interval:1,timeout:0,frame:0,frames:["/Sonic/backdrop/labrynth-industrial/flame-b-0a.png","/Sonic/backdrop/labrynth-industrial/flame-b-1.png","/Sonic/backdrop/labrynth-industrial/flame-b-1.png","/Sonic/backdrop/labrynth-industrial/flame-b-2.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-2.png","/Sonic/backdrop/labrynth-industrial/flame-b-2.png","/Sonic/backdrop/labrynth-industrial/flame-b-2.png","/Sonic/backdrop/labrynth-industrial/flame-b-3.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-3.png","/Sonic/backdrop/labrynth-industrial/flame-b-3.png","/Sonic/backdrop/labrynth-industrial/flame-b-4.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-4.png","/Sonic/backdrop/labrynth-industrial/flame-b-5.png","/Sonic/backdrop/labrynth-industrial/flame-b-6.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-6.png","/Sonic/backdrop/labrynth-industrial/flame-b-6.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png","/Sonic/backdrop/labrynth-industrial/flame-b-0.png"]},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/labrynth-industrial/flame-0.png",height:1,interval:1,timeout:0,frame:0,frames:["/Sonic/backdrop/labrynth-industrial/flame-c-0a.png","/Sonic/backdrop/labrynth-industrial/flame-c-1.png","/Sonic/backdrop/labrynth-industrial/flame-c-1.png","/Sonic/backdrop/labrynth-industrial/flame-c-2.png","/Sonic/backdrop/labrynth-industrial/flame-c-0.png","/Sonic/backdrop/labrynth-industrial/flame-c-2.png","/Sonic/backdrop/labrynth-industrial/flame-c-2.png","/Sonic/backdrop/labrynth-industrial/flame-c-2.png","/Sonic/backdrop/labrynth-industrial/flame-c-3.png","/Sonic/backdrop/labrynth-industrial/flame-c-0.png","/Sonic/backdrop/labrynth-industrial/flame-c-3.png","/Sonic/backdrop/labrynth-industrial/flame-c-3.png","/Sonic/backdrop/labrynth-industrial/flame-c-4.png","/Sonic/backdrop/labrynth-industrial/flame-c-0.png","/Sonic/backdrop/labrynth-industrial/flame-c-4.png","/Sonic/backdrop/labrynth-industrial/flame-c-5.png","/Sonic/backdrop/labrynth-industrial/flame-c-6.png","/Sonic/backdrop/labrynth-industrial/flame-c-0.png","/Sonic/backdrop/labrynth-industrial/flame-c-6.png","/Sonic/backdrop/labrynth-industrial/flame-c-6.png","/Sonic/backdrop/labrynth-industrial/flame-c-0.png"]},{autoscroll:0,parallax:.125,url:"/Sonic/backdrop/labrynth-industrial/5-bw-small.png",height:10},{autoscroll:0,parallax:.15,url:"/Sonic/backdrop/labrynth-industrial/5-bw-small.png",height:10},{autoscroll:0,parallax:.275,url:"/Sonic/backdrop/labrynth-industrial/5-dim.png",height:50},{autoscroll:0,parallax:.275,url:"/Sonic/backdrop/labrynth-industrial/5-pink-lights.png",height:1,interval:20,timeout:0,frame:0,frames:["/Sonic/backdrop/labrynth-industrial/5-lights-0.png","/Sonic/backdrop/labrynth-industrial/5-lights-0.png","/Sonic/backdrop/labrynth-industrial/5-lights-1.png","/Sonic/backdrop/labrynth-industrial/5-lights-1.png","/Sonic/backdrop/labrynth-industrial/5-lights-2.png","/Sonic/backdrop/labrynth-industrial/5-lights-2.png"]},{autoscroll:0,parallax:.275,url:"/Sonic/backdrop/labrynth-industrial/5-signals-0.png",height:1,interval:10,timeout:0,frame:0,frames:["/Sonic/backdrop/labrynth-industrial/5-signals-0.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-0.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png"]},{autoscroll:0,parallax:.35,url:"/Sonic/backdrop/labrynth-industrial/5.png",height:40},{autoscroll:0,parallax:.35,url:"/Sonic/backdrop/labrynth-industrial/5-pink-lights.png",height:1},{autoscroll:0,parallax:.35,url:"/Sonic/backdrop/labrynth-industrial/5-signals-0.png",height:1,interval:20,timeout:0,frame:0,frames:["/Sonic/backdrop/labrynth-industrial/5-signals-0.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-2.png","/Sonic/backdrop/labrynth-industrial/5-signals-0.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png","/Sonic/backdrop/labrynth-industrial/5-signals-1.png"]},{autoscroll:0,parallax:.4,url:"/Sonic/backdrop/labrynth-industrial/6-half.png",height:88}],r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Industrial=l}),require.register("backdrop/MarbleGarden.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MarbleGarden=void 0;var o=e("./Backdrop");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="marble-garden",r.args.strips=[{autoscroll:-1.25,parallax:.015,url:"/Sonic/backdrop/marble-garden/0.png",height:32},{autoscroll:-1,parallax:.015,url:"/Sonic/backdrop/marble-garden/1.png",height:24},{autoscroll:-.9,parallax:.015,url:"/Sonic/backdrop/marble-garden/2.png",height:8},{autoscroll:-.8,parallax:.015,url:"/Sonic/backdrop/marble-garden/3.png",height:24},{autoscroll:-.7,parallax:.015,url:"/Sonic/backdrop/marble-garden/4.png",height:8},{autoscroll:-.6,parallax:.0125,url:"/Sonic/backdrop/marble-garden/5.png",height:24},{autoscroll:-.5,parallax:.0125,url:"/Sonic/backdrop/marble-garden/6.png",height:16},{autoscroll:-.45,parallax:.0125,url:"/Sonic/backdrop/marble-garden/7.png",height:8},{autoscroll:-.45,parallax:.0125,url:"/Sonic/backdrop/marble-garden/8.png",height:16},{autoscroll:-.4,parallax:.0125,url:"/Sonic/backdrop/marble-garden/9.png",height:8},{autoscroll:-.35,parallax:.0125,url:"/Sonic/backdrop/marble-garden/10.png",height:16},{autoscroll:-.3,parallax:.01,url:"/Sonic/backdrop/marble-garden/11.png",height:8},{autoscroll:-.25,parallax:.0075,url:"/Sonic/backdrop/marble-garden/12.png",height:8},{autoscroll:-.2,parallax:.0075,url:"/Sonic/backdrop/marble-garden/13.png",height:8},{autoscroll:-.15,parallax:.01,url:"/Sonic/backdrop/marble-garden/14.png",height:8},{autoscroll:-.1,parallax:.01,url:"/Sonic/backdrop/marble-garden/15.png",height:5},{autoscroll:0,parallax:.1,url:"/Sonic/backdrop/marble-garden/16.png",height:30},{autoscroll:0,parallax:.125,url:"/Sonic/backdrop/marble-garden/17.png",height:12},{autoscroll:0,parallax:.125,url:"/Sonic/backdrop/marble-garden/18.png",height:6},{autoscroll:0,parallax:.15,url:"/Sonic/backdrop/marble-garden/19.png",height:6},{autoscroll:0,parallax:.175,url:"/Sonic/backdrop/marble-garden/20.png",height:8},{autoscroll:0,parallax:.2,url:"/Sonic/backdrop/marble-garden/21.png",height:8},{autoscroll:0,parallax:.225,url:"/Sonic/backdrop/marble-garden/22.png",height:24},{autoscroll:0,parallax:.25,url:"/Sonic/backdrop/marble-garden/23.png",height:344}],r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.MarbleGarden=l}),require.register("backdrop/Moon.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Moon=void 0;var o=e("./Backdrop");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="moon",r.args.strips=[{autoscroll:.035,parallax:.0019,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-0a.png",height:13},{autoscroll:.03,parallax:.0016,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-0b.png",height:13},{autoscroll:.025,parallax:.0015,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-1.png",height:12},{autoscroll:.02,parallax:.0013,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-2.png",height:12},{autoscroll:.015,parallax:.001,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-3.png",height:8},{autoscroll:.01,parallax:9e-4,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-4.png",height:5},{autoscroll:.005,parallax:7e-4,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-5.png",height:14},{autoscroll:.0025,parallax:5e-4,url:"/Sonic/backdrop/doomsday/backdrop-inverted-0-6.png",height:140},{autoscroll:0,parallax:.015,url:"/mmpr/moon/terrain-00-00.png",height:0},{autoscroll:0,parallax:.035,url:"/mmpr/moon/terrain-00-01.png",height:2},{autoscroll:0,parallax:.045,url:"/mmpr/moon/terrain-00-02.png",height:3},{autoscroll:0,parallax:.055,url:"/mmpr/moon/terrain-00-03.png",height:4},{autoscroll:0,parallax:.065,url:"/mmpr/moon/terrain-00-04.png",height:4},{autoscroll:0,parallax:.075,url:"/mmpr/moon/terrain-00-05.png",height:10},{autoscroll:0,parallax:.085,url:"/mmpr/moon/terrain-00-06.png",height:5},{autoscroll:0,parallax:.095,url:"/mmpr/moon/terrain-00-07-b.png",height:10},{autoscroll:0,parallax:.1,url:"/mmpr/moon/terrain-00-08.png",height:10},{autoscroll:0,parallax:.105,url:"/mmpr/moon/terrain-00-09.png",height:12},{autoscroll:0,parallax:.115,url:"/mmpr/moon/terrain-00-10-b.png",height:12},{autoscroll:0,parallax:.125,url:"/mmpr/moon/terrain-00-11.png",height:5},{autoscroll:0,parallax:.1325,url:"/mmpr/moon/terrain-00-09-b.png",height:12},{autoscroll:0,parallax:.1435,url:"/mmpr/moon/terrain-00-12.png",height:22}],r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Moon=l}),require.register("backdrop/MysticCave.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MysticCave=void 0;var o=e("./Backdrop");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="mystic-cave",r.args.strips=[{autoscroll:0,parallax:.27,url:"/Sonic/backdrop/mystic-cave/1.png",height:37},{autoscroll:0,parallax:.23,url:"/Sonic/backdrop/mystic-cave/2.png",height:23},{autoscroll:0,parallax:.21,url:"/Sonic/backdrop/mystic-cave/3.png",height:18},{autoscroll:0,parallax:.2,url:"/Sonic/backdrop/mystic-cave/4.png",height:7},{autoscroll:0,parallax:.19,url:"/Sonic/backdrop/mystic-cave/5.png",height:6},{autoscroll:0,parallax:.18,url:"/Sonic/backdrop/mystic-cave/6.png",height:1},{autoscroll:0,parallax:.17,url:"/Sonic/backdrop/mystic-cave/7.png",height:1},{autoscroll:0,parallax:.16,url:"/Sonic/backdrop/mystic-cave/8.png",height:1},{autoscroll:0,parallax:.15,url:"/Sonic/backdrop/mystic-cave/9.png",height:1},{autoscroll:0,parallax:.14,url:"/Sonic/backdrop/mystic-cave/10.png",height:1},{autoscroll:0,parallax:.13,url:"/Sonic/backdrop/mystic-cave/11.png",height:48},{autoscroll:0,parallax:.14,url:"/Sonic/backdrop/mystic-cave/12.png",height:13},{autoscroll:0,parallax:.15,url:"/Sonic/backdrop/mystic-cave/13.png",height:19},{autoscroll:0,parallax:.17,url:"/Sonic/backdrop/mystic-cave/14.png",height:34},{autoscroll:0,parallax:.2,url:"/Sonic/backdrop/mystic-cave/15.png",height:62},{autoscroll:0,parallax:.17,url:"/Sonic/backdrop/mystic-cave/16.png",height:32},{autoscroll:0,parallax:.14,url:"/Sonic/backdrop/mystic-cave/16.5.png",height:19},{autoscroll:0,parallax:.13,url:"/Sonic/backdrop/mystic-cave/17.png",height:13},{autoscroll:0,parallax:.12,url:"/Sonic/backdrop/mystic-cave/18.png",height:48},{autoscroll:0,parallax:.13,url:"/Sonic/backdrop/mystic-cave/19.png",height:1},{autoscroll:0,parallax:.14,url:"/Sonic/backdrop/mystic-cave/20.png",height:1},{autoscroll:0,parallax:.16,url:"/Sonic/backdrop/mystic-cave/21.png",height:1},{autoscroll:0,parallax:.18,url:"/Sonic/backdrop/mystic-cave/22.png",height:1},{autoscroll:0,parallax:.2,url:"/Sonic/backdrop/mystic-cave/23.png",height:1},{autoscroll:0,parallax:.22,url:"/Sonic/backdrop/mystic-cave/24.png",height:6},{autoscroll:0,parallax:.24,url:"/Sonic/backdrop/mystic-cave/25.png",height:7},{autoscroll:0,parallax:.28,url:"/Sonic/backdrop/mystic-cave/26.png",height:32},{autoscroll:0,parallax:.33,url:"/Sonic/backdrop/mystic-cave/27.png",height:18},{autoscroll:0,parallax:.35,url:"/Sonic/backdrop/mystic-cave/28.png",height:23},{autoscroll:0,parallax:.37,url:"/Sonic/backdrop/mystic-cave/29.png",height:37}],r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.MysticCave=l}),require.register("backdrop/ProtoLabrynth.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ProtoLabrynth=void 0;var o=e("./Backdrop");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="proto-labrynth",r.args.strips=[{autoscroll:0,parallax:.15,url:"/Sonic/backdrop/protolabrynth/0.png",height:48},{autoscroll:0,parallax:.125,url:"/Sonic/backdrop/protolabrynth/1.png",height:24},{autoscroll:0,parallax:.1,url:"/Sonic/backdrop/protolabrynth/2.png",height:8},{autoscroll:0,parallax:.075,url:"/Sonic/backdrop/protolabrynth/3.png",height:68},{autoscroll:0,parallax:.1,url:"/Sonic/backdrop/protolabrynth/4.png",height:18},{autoscroll:0,parallax:.125,url:"/Sonic/backdrop/protolabrynth/5.png",height:27},{autoscroll:0,parallax:.15,url:"/Sonic/backdrop/protolabrynth/5.png",height:27},{autoscroll:0,parallax:.175,url:"/Sonic/backdrop/protolabrynth/6.png",height:76}],r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.ProtoLabrynth=l}),require.register("backdrop/SouthRidge.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SouthRidge=void 0;var o=e("./Backdrop");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="south-ridge",r.args.strips=[{autoscroll:-.03,parallax:.11,url:"/Sonic/backdrop/south-ridge/clouds-10.png",height:10},{autoscroll:0,parallax:.1,url:"/Sonic/backdrop/south-ridge/ridge.png",height:10},{autoscroll:-.06,parallax:.12,url:"/Sonic/backdrop/south-ridge/clouds-9.png",height:0},{autoscroll:-.06,parallax:.12,url:"/Sonic/backdrop/south-ridge/clouds-9b.png",height:8},{autoscroll:-.065,parallax:.13,url:"/Sonic/backdrop/south-ridge/clouds-8.png",height:11},{autoscroll:0,parallax:.11,url:"/Sonic/backdrop/south-ridge/ridge-b.png",height:20},{autoscroll:-.07,parallax:.14,url:"/Sonic/backdrop/south-ridge/clouds-7.png",height:-9},{autoscroll:-.075,parallax:.15,url:"/Sonic/backdrop/south-ridge/clouds-6.png",height:9},{autoscroll:-.08,parallax:.16,url:"/Sonic/backdrop/south-ridge/clouds-5.png",height:8},{autoscroll:-.09,parallax:.18,url:"/Sonic/backdrop/south-ridge/clouds-4.png",height:16},{autoscroll:-.1,parallax:.2,url:"/Sonic/backdrop/south-ridge/clouds-3.png",height:13},{autoscroll:-.1125,parallax:.22,url:"/Sonic/backdrop/south-ridge/clouds-2.png",height:17},{autoscroll:-.15,parallax:.21,url:"/Sonic/backdrop/south-ridge/clouds-1.png",height:15},{autoscroll:-.175,parallax:.21,url:"/Sonic/backdrop/south-ridge/clouds-0.png",height:16},{autoscroll:-.15,parallax:.22,url:"/Sonic/backdrop/south-ridge/clouds-1.png",height:15},{autoscroll:-.175,parallax:.23,url:"/Sonic/backdrop/south-ridge/clouds-0.png",height:16}],r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.SouthRidge=l}),require.register("backdrop/Underground.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Underground=void 0;var o=e("./Backdrop");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="underground",r.args.strips=[{autoscroll:.045,parallax:.075,url:"/Sonic/backdrop/wing-fortress/sky-1b-recolor.png",height:32},{autoscroll:.043,parallax:.07,url:"/Sonic/backdrop/wing-fortress/sky-0-recolor.png",height:48},{autoscroll:.041,parallax:.065,url:"/Sonic/backdrop/wing-fortress/sky-1-recolor.png",height:32},{autoscroll:.039,parallax:.06,url:"/Sonic/backdrop/wing-fortress/sky-2-recolor.png",height:48},{autoscroll:0,parallax:.075,url:"/Sonic/backdrop/aquatic-ruin/mountains-0-recolor.png",height:0},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/aquatic-ruin/mountains-1-recolor.png",height:48},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/aquatic-ruin/mountains-1-recolor.png",height:48},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/aquatic-ruin/mountains-1-recolor.png",height:24}],r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Underground=l}),require.register("backdrop/WestSide.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WestSide=void 0;var o=e("./Backdrop");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="west-side",r.args.strips=[{autoscroll:.001,parallax:.001,url:"/Sonic/backdrop/west-side/stars-before.png",height:64},{autoscroll:.001,parallax:.001,url:"/Sonic/backdrop/west-side/stars.png",height:205},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-dark.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-0.png",height:3},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-1.png",height:3},{autoscroll:0,parallax:.004,url:"/Sonic/backdrop/west-side/water-night.png",height:144},{autoscroll:.001,parallax:.001,url:"/Sonic/backdrop/west-side/stars-reflected.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-dark-reflected.png",height:0},{autoscroll:0,parallax:.03,url:"/Sonic/backdrop/launch-base/bushes-0-night.png",height:0},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/launch-base/bushes-1-night.png",height:0},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/launch-base/bushes-2-night.png",height:48},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/launch-base/bushes-3-night.png",height:128}],r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.WestSide=l}),require.register("backdrop/WestSideCloudy.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WestSideCloudy=void 0;var o=e("./Backdrop");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="west-side-cloudy",r.args.strips=[{autoscroll:.14,parallax:.02,url:"/Sonic/backdrop/west-side/clouds--1.png",height:64},{autoscroll:.14,parallax:.02,url:"/Sonic/backdrop/west-side/clouds-0.png",height:33},{autoscroll:.13,parallax:.014,url:"/Sonic/backdrop/west-side/clouds-1.png",height:32},{autoscroll:.12,parallax:.013,url:"/Sonic/backdrop/west-side/clouds-2.png",height:24},{autoscroll:.11,parallax:.012,url:"/Sonic/backdrop/west-side/clouds-3.png",height:16},{autoscroll:.1,parallax:.011,url:"/Sonic/backdrop/west-side/clouds-4.png",height:5},{autoscroll:.09,parallax:.01,url:"/Sonic/backdrop/west-side/clouds-5.png",height:3},{autoscroll:.08,parallax:.009,url:"/Sonic/backdrop/west-side/clouds-6.png",height:8},{autoscroll:.07,parallax:.008,url:"/Sonic/backdrop/west-side/clouds-7.png",height:5},{autoscroll:.06,parallax:.007,url:"/Sonic/backdrop/west-side/clouds-8.png",height:3},{autoscroll:.05,parallax:.006,url:"/Sonic/backdrop/west-side/clouds-9.png",height:8},{autoscroll:.04,parallax:.005,url:"/Sonic/backdrop/west-side/clouds-10.png",height:8},{autoscroll:.03,parallax:.004,url:"/Sonic/backdrop/west-side/clouds-11.png",height:32},{autoscroll:.02,parallax:.003,url:"/Sonic/backdrop/west-side/clouds-12.png",height:8},{autoscroll:.015,parallax:.002,url:"/Sonic/backdrop/west-side/clouds-13.png",height:32},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-cloudy.png",height:2},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-dark-cloudy.png",height:0},{autoscroll:.015,parallax:.002,url:"/Sonic/backdrop/west-side/reflected-clouds-0.png",height:32},{autoscroll:.02,parallax:.003,url:"/Sonic/backdrop/west-side/reflected-clouds-1.png",height:8},{autoscroll:.03,parallax:.004,url:"/Sonic/backdrop/west-side/reflected-clouds-2.png",height:32},{autoscroll:.04,parallax:.005,url:"/Sonic/backdrop/west-side/reflected-clouds-3.png",height:8},{autoscroll:.05,parallax:.006,url:"/Sonic/backdrop/west-side/reflected-clouds-4.png",height:8},{autoscroll:.06,parallax:.007,url:"/Sonic/backdrop/west-side/reflected-clouds-5.png",height:3},{autoscroll:.07,parallax:.008,url:"/Sonic/backdrop/west-side/reflected-clouds-6.png",height:5},{autoscroll:.08,parallax:.009,url:"/Sonic/backdrop/west-side/reflected-clouds-7.png",height:16},{autoscroll:.09,parallax:.01,url:"/Sonic/backdrop/west-side/reflected-clouds-8.png",height:24},{autoscroll:.1,parallax:.011,url:"/Sonic/backdrop/west-side/reflected-clouds-9.png",height:20},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-dark-cloudy-reflected.png",height:0},{autoscroll:0,parallax:.004,url:"/Sonic/backdrop/west-side/water-cloudy.png",height:46},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/west-side/water-cloudy-after.png",height:128}],r.args.bindTo("frame",function(t){r.args.ligtening||Math.random()>.995&&(r.args.name="west-side-cloudy lightning",r.args.lightning=!0,r.onTimeout(1e3,function(){r.args.name="west-side-cloudy",r.args.lightning=!1}))}),r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.WestSideCloudy=l}),require.register("backdrop/WestSideDay.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WestSideDay=void 0;var o=e("./Backdrop");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=[,{e0e0e5:"afafc1"},{e0e0e5:"afafc1"},{e0e0e5:"afafc1"},{e0e0e5:"afafc1"},{e0e0e5:"afafc1"},{e0e0e5:"e0e0e5"},{e0e0e5:"afafc1"},{e0e0e5:"e0e0e5"},{e0e0e5:"e0e0e5"}],u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,o.Backdrop);var e,r,n,c=s(u);function u(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=c.call(this,t,e)).args.name="west-side-day",r.args.strips=[{autoscroll:.001,parallax:.001,url:"/Sonic/backdrop/west-side/empty.png",height:64},{autoscroll:.001,parallax:.001,url:"/Sonic/backdrop/west-side/empty.png",height:205},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-day.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-0.png",height:3},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-1.png",height:3},{autoscroll:0,parallax:.004,url:"/Sonic/backdrop/west-side/water.png",height:144},{autoscroll:0,parallax:0,url:"/Sonic/backdrop/west-side/empty.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-day-reflected.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-shine.png",height:1,interval:26,timeout:100,frame:0,recolor:l},{autoscroll:0,parallax:.03,url:"/Sonic/backdrop/launch-base/bushes-0.png",height:0},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/launch-base/bushes-1.png",height:0},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/launch-base/bushes-2.png",height:48},{autoscroll:0,parallax:.05,url:"/Sonic/backdrop/launch-base/bushes-3.png",height:128}],r}return e=u,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.WestSideDay=u}),require.register("backdrop/WestSideNight.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WestSideNight=void 0;var o=e("./Backdrop");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="west-side",r.args.strips=[{autoscroll:0,parallax:.001,url:"/Sonic/backdrop/west-side/stars.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-dark.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-0.png",height:3},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/water-shine-1.png",height:3},{autoscroll:0,parallax:4e-4,url:"/Sonic/backdrop/west-side/water-shine-2.png",height:3},{autoscroll:0,parallax:.004,url:"/Sonic/backdrop/west-side/water.png",height:142},{autoscroll:0,parallax:.001,url:"/Sonic/backdrop/west-side/stars-reflected.png",height:0},{autoscroll:0,parallax:5e-4,url:"/Sonic/backdrop/west-side/island-dark-reflected.png",height:0}],r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.WestSideNight=l}),require.register("backdrop/Wood.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Wood=void 0;var o=e("./Backdrop");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Backdrop);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.name="wood",r.args.strips=[{autoscroll:0,parallax:.1,url:"/Sonic/backdrop/wood/forest.png",height:1600}],r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Wood=l}),require.register("behavior/Behavior.js",function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Behavior=void 0;var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,(r=[{key:"update",value:function(t){}}])&&n(e.prototype,r),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.Behavior=o}),require.register("behavior/Liftable.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Liftable=void 0;var o=e("./Behavior");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=Symbol("rendered"),u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,o.Behavior);var e,r,n,c=s(u);function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return e=u,(r=[{key:"rendered",value:function(t){t[l]||(t[l]=!0,t.bindTo("carriedBy",function(e){if(t.cX&&(t.cX(),t.cX=null),t.cY&&(t.cY(),t.cY=null),t.carriedBy){var r=t.carriedBy;t.carriedBy=null,t.args.xSpeed=r.args.xSpeed,t.args.ySpeed=r.args.falling?r.args.ySpeed:0,t.args.xSpeed+=4*Math.sign(r.args.gSpeed||r.args.xSpeed),t.args.ySpeed-=4,r.carrying.delete(t),t.args.falling=!0,t.args.float=0}e&&(t.cX=e.args.bindTo("x",function(r){return t.args.x=r+e.args.direction*e.xHold}),t.cY=e.args.bindTo("y",function(r){return t.args.y=r+-e.yHold}),t.args.xSpeed=0,t.args.ySpeed=0,e.carrying.add(t),t.args.float=-1)}))}},{key:"update",value:function(t){t.carriedBy&&(t.args.float=-1)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.Liftable=u}),require.register("behavior/Patrol.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Patrol=void 0;var o=e("./Behavior");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Behavior);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"update",value:function(t){e=t.args.direction;var e,r,n,o,i=null!==(r=t.args.patrolSpeed)&&void 0!==r?r:1,a=null!==(n=t.args.patrolBeat)&&void 0!==n?n:90,s=null!==(o=t.args.patrolPause)&&void 0!==o?o:25;t.age%a<a-s&&(Math.floor(t.age/a)%2?t.args.gSpeed=-i:t.args.gSpeed=i)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Patrol=l}),require.register("behavior/Platformer.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Platformer=void 0;var n=e("curvature/base/Tag"),o=e("curvature/base/Bindable"),i=e("../actor/PointActor");function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=l(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function l(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,l;return e=t,(r=[{key:"updateStart",value:function(t){if(t.lastLayer=null,t.args.localCameraMode=null,!t.args.dead){if(t.args.standingLayer&&!t.args.static){var e,r=t.args.standingLayer.layer,n=!1,o=c(t.regions);try{for(o.s();!(e=o.n()).done;){e.value.grind&&(n=!0)}}catch(t){o.e(t)}finally{o.f()}t.controllable?r&&r.meta.grinding?(t.args.grinding=!0,t.args.direction=Math.sign(t.args.xSpeed||t.args.gSpeed)):n||(t.args.grinding=!1):t.args.grinding=!1,t.args.grinding&&t.args.falling&&(t.args.grinding=!1)}t.args.falling||(t.fallTime=0)}}},{key:"updateEnd",value:function(t){if(!t.args.static&&t.args.falling&&(t.args.standingLayer&&0===t.fallTime&&(t.args.xSpeed+=t.args.standingLayer.offsetXChanged||0,t.args.ySpeed+=t.args.standingLayer.offsetYChanged||0),t.args.standingLayer=null),t.follower){var e=t.viewport.serializePlayer(),r=t.follower;t.viewport.onFrameOut(5,function(){e.input&&(r.controller&&r.controller.replay(e.input),r.readInput()),e.args&&(Object.assign(r.args,e.args),r.viewport&&r.viewport.setColCell(t))}),t.follower.args.dead&&(t.follower.args.dead=!1,t.follower.args.x=t.x,t.follower.args.y=t.y)}t.args.falling||(t.args.popCombo=0)}},{key:"update",value:function(t){if(t.args.mercy&&(t.args.spindashCharge=0,t.args.dropDashCharge=0),"number"==typeof t.args.standingOn){var e=t.args.standingOn,r=t.viewport.actorsById[e];r&&(t.args.standingOn=r,t.args.x=r.x,t.args.y=r.y-r.args.height)}t.args.jumpBlocked=!1,t.viewport&&(t.age=t.viewport.args.frameId-t.startFrame),t.xAxis&&Math.sign(t.args.gSpeed)===t.args.pushing&&Math.sign(t.xAxis)===t.args.pushing||(t.args.pushing=!1);t.args.x,t.args.y;if(!t.noClip||t.controllable){if(!t.args.falling&&!t.args.rolling&&t.args.modeTime>=1&&(t.args.spinning=!1),(t.args.rolling||t.args.jumping||t.spindashCharge)&&(t.args.spinning=!0),t.viewport&&t.args.respawning&&!t.args.npc&&!t.viewport.args.isRecording&&!t.viewport.args.isReplaying){var n,o,l=t.viewport.getCheckpoint(t.args.canonical);if(l&&l.checkpointId){var u=t.viewport.actorsById[l.checkpointId];n=u.x,o=u.y}else if(t.def)n=t.def.get("x"),o=t.def.get("y");else if(!t.canRoll&&t.viewport.defsByName.get("wide-player-start")){var f=t.viewport.defsByName.get("wide-player-start");n=f.x,o=f.y}else if(t.viewport.defsByName.has("player-start")){var p=t.viewport.defsByName.get("player-start");n=p.x,o=p.y}t.args.animation="dropping",t.args.standingLayer=null,t.args.standingOn=null,t.lastLayer=null;var h=t.args.x-n,g=t.args.y-o,d=Math.max(Math.abs(h/8),16),y=Math.max(Math.abs(g/8),16);t.args.x-=Math.sign(h)*d,t.args.y-=Math.sign(g)*y;var b=t.viewport;return Math.abs(h)<=d&&(t.args.x=n),Math.abs(g)<=y&&(t.args.y=o),Math.abs(h)<=d&&Math.abs(g)<=y&&t.viewport.onFrameOut(60,function(){t.viewport.args.networked?(t.args.dead=!1,t.noClip=!1,t.args.respawning=!1,t.args.display="initial",t.args.ignore=4,t.args.xSpeed=0,t.args.ySpeed=-3):(b.reset(),b.startLevel(!1)),b.args.paused=!1}),void(t.viewport&&t.viewport.setColCell(t))}if(t.viewport&&t.viewport.meta.deathLine&&!t.args.dead&&t.controllable&&t.y>t.viewport.meta.deathLine)t.die();else{if(t.controllable&&!t.args.dead){t.args.width,Math.sign(t.args.xSpeed);var v=Math.max(t.args.height,0),m=t.rotatePoint(0,.75*v),w=t.getMapSolidAt(t.args.x+m[0],t.args.y+m[1]);if(Array.isArray(w)&&(w=!!w.filter(function(t){return!t.args.platform&&!t.isVehicle}).length),t.args.rolling){var S=t.rotatePoint(0,v),O=t.getMapSolidAt(t.args.x+S[0],t.args.y+S[1]);Array.isArray(O)&&(O=!!O.filter(function(t){return!t.args.platform&&!t.isVehicle}).length,t.args.jumpBlocked=!!O),t.args.jumpBlocked=!!O}if(!t.args.hangingFrom&&!t.args.falling&&this.checkBelow(t,t.args.x,t.args.y)&&w)return void t.die();if(!t.args.falling&&0===t.args.mode){var k=t.castRay(t.maxStep,t.upAngle,this.findUpSpace);k&&(t.args.y-=k)}}if(t.args.skimming=!1,t.args.falling){if(t.args.airAngle=t.airAngle,t.args.displayAngle!==t.args.groundAngle){var x=t.args.groundAngle+-t.args.displayAngle;t.args.displayAngle+=Math.sign(x)*(Math.abs(x)>1?1:Math.abs(x))*.5}}else t.args.airAngle=0,t.args.displayAngle=t.args.groundAngle;if(t.args.halted<1&&t.args.halted>0&&(t.args.halted=0),t.args.halted>0)t.args.halted--;else if(t.args.currentSheild&&"update"in t.args.currentSheild&&t.args.currentSheild.update(t),t.args.rolling?t.args.height=t.args.rollingHeight||t.args.height:t.args.jumping?t.args.height=t.args.rollingHeight||t.args.height:t.canRoll&&(t.args.height=t.args.normalHeight||t.args.height),t.args.dontJump>0&&t.args.dontJump--,t.args.dontJump<0&&(t.args.dontJump=0),t.viewport&&!t.removed){if(t.args.modeTime++,t.args.falling||(Math.abs(t.args.gSpeed)<1&&!t.impulseMag&&t.args.modeTime>3&&(t.args.rolling=!1),Math.abs(t.args.gSpeed)<.01?t.args.gSpeed=0:t.canRoll&&t.yAxis>.55&&!t.args.ignore&&!t.carrying.size&&(t.args.rolling=!0)),t.args.driving=!1,t.args.standingOn&&t.args.standingOn.isVehicle&&!t.isVehicle){var j=t.args.standingOn;if(t.args.groundTimeTotal++,t.args.falling=!0,t.args.flying=!1,t.args.jumping=!1,t.args.driving=!0,t.processInput(),t.args.cameraMode=j.args.cameraMode,t.willJump&&(t.yAxis<0||t.args.standingOn&&t.args.standingOn.quickDrop)){var P=t.args.standingOn;t.args.standingLayer=!1,t.args.standingOn=!1,t.willJump=!1,P.occupant=null,t.args.falling=!0,t.args.jumping=!0,t.args.y-=16,P&&P.quickDrop?t.args.ySpeed=-t.args.jumpForce+Math.max(P.args.ySpeed,0):(t.args.xSpeed=2*j.args.direction*-Math.sign(j.args.seatAngle||-1),t.args.ySpeed=-t.args.jumpForce),j.args.ySpeed=0}return t.args.groundAngle=(j.args.groundAngle||0)+(j.args.seatAngle||0),void(t.willJump&&t.yAxis>=0&&(t.args.standingOn.falling=!1,t.willJump=!1,t.args.standingOn.command_0()))}null!==t.impulseMag&&this.applyImpulse(t),-2===t.args.ignore&&(!1===t.args.falling||t.args.ySpeed>64)&&(t.args.ignore=0),-3===t.args.ignore&&(!t.args.falling||t.args.ySpeed>=-10)&&t.viewport.onFrameOut(1,function(){return t.args.ignore=0}),t.args.ignore<1&&t.args.ignore>0&&(t.args.ignore=0),t.args.ignore>0&&t.args.ignore--,t.args.mercy>0&&t.args.mercy--,t.args.startled>0&&t.args.startled--,t.args.float>0&&t.args.float--,t.args.standingOn instanceof i.PointActor&&t.args.standingOn.callCollideHandler(t),!t.args.float&&t.args.falling?t.args.standingOn&&t.args.standingOn.isVehicle||(t.args.standingOn=null,t.args.landed=!1,t.lastAngles.splice(0),t.args.jumping&&t.args.jumpedAt<t.args.y?t.args.deepJump=!0:t.args.jumping&&t.args.jumpedAt>t.args.y+160?t.args.highJump=!0:t.args.jumping&&(t.args.deepJump=!1,t.args.highJump=!1)):t.args.jumping&&!t.args.falling&&(t.args.jumping=!1,t.args.deepJump=!1,t.args.highJump=!1,t.args.jumpedAt=null),!t.args.falling&&t.args.standingOn&&t.args.rolling&&t.args.modeTime<3&&!t.args.dropDashCharge&&t.args.standingOn.args.convey&&(t.args.gSpeed=.8*-t.args.standingOn.args.convey);var _=t.getLocalDrag(),R=new Set;if(!t.noClip){R=t.viewport.regionsAtPoint(t.args.x,t.args.y);var M,T=c(t.regions);try{for(T.s();!(M=T.n()).done;){M.value.updateActor(t)}}catch(t){T.e(t)}finally{T.f()}}t.args.gSpeedMax;if(!t.isRegion){var E,A=c(t.regions);try{for(A.s();!(E=A.n()).done;){var C=E.value;R.has(C)||(t.regions.delete(C),t.crossRegionBoundary(C,!1),C.leave(t))}}catch(t){A.e(t)}finally{A.f()}var B,D=c(R);try{for(D.s();!(B=D.n()).done;){var I=B.value;if(t.args.density&&I.args.density&&t.args.density<I.args.density){I.args.density,t.args.density;var L=!1,F=t.getMapSolidAt(t.x,t.y-t.args.height);if(Array.isArray(F)&&(F.filter(function(t){return!s(R).includes(t)}),F.length&&(L=!0)),!L){var N=t.y-t.args.height,z=I.y-I.args.height,q=Math.min((N+-z+4)/t.args.height,1);t.args.float=1;var U=q*_;t.args.falling=!0,q>-1?(t.args.ySpeed-=U,t.args.ySpeed*=_):q<-1&&t.args.ySpeed<0&&Math.abs(q)<.25&&Math.abs(t.args.ySpeed)<1&&(t.args.ySpeed=0,t.args.y=-1+z+t.args.height)}}t.regions.has(I)||(t.regions.add(I),t.crossRegionBoundary(I,!0),I.enter(t))}}catch(t){D.e(t)}finally{D.f()}}if(!t.willJump||t.args.dontJump||t.args.falling&&!(t.falltime<2)){if(t.willJump=!1,t.viewport){if(t.noClip&&(t.args.falling=!0),!t.args.static){var W=t.groundPoint,V=t.viewport.regionsAtPoint(W[0],W[1]+1),H=t.getMapSolidAt.apply(t,s(W))||!(!t.controllable||!t.args.groundAngle)&&t.getMapSolidAt(W[0],W[1]+1);if(!t.isRegion&&0===t.args.mode&&V.size){var G,K=!H,Y=c(V);try{for(Y.s();!(G=Y.n()).done;){var J=G.value;if(t.broad||!t.args.falling&&(t.args.y===J.args.y-J.args.height||t.args.y+1===J.args.y-J.args.height)){if(Math.max(Math.abs(t.args.gSpeed),Math.abs(t.args.xSpeed))>=J.skimSpeed){var X=t.args.falling?Math.abs(t.args.xSpeed):Math.abs(t.args.gSpeed);t.args.gSpeed=X*Math.sign(t.args.gSpeed||t.args.xSpeed),t.y-16<J.y-J.args.height?(t.args.skimming=!0,t.args.y=J.y-J.args.height-1,K=!1,J.skim(t)):t.broad&&t.args.ySpeed--;break}t.args.xSpeed=t.args.gSpeed||t.args.xSpeed}}}catch(t){Y.e(t)}finally{Y.f()}t.args.standingOn=null,t.args.falling=t.args.ySpeed>=0?K:t.args.falling,t.args.falling?(t.args.xSpeed=t.args.xSpeed||t.args.gSpeed,t.args.standingLayer=null):t.args.gSpeed=t.args.gSpeed||t.args.xSpeed}else t.noClip||t.args.xSpeed||t.args.ySpeed||t.args.float||(t.args.falling=!this.checkBelow(t)||t.args.falling);if(t.noClip||!t.isRegion&&!t.isEffect&&t.args.falling&&t.viewport?(t.args.grinding&&(t.args.grinding=!1),t.args.mode=0,t.args.gSpeed=0,t.args.pushing=!1,(t.args.xSpeed||t.args.ySpeed)&&(t.args.hangingFrom?(t.args.groundTimeTotal++,t.args.flying=!1):(this.updateAirPosition(t),t.swing=!1,t.args.airTimeTotal++)),t.args.animationBias=Math.abs(t.args.airSpeed/t.args.flySpeedMax),t.args.animationBias>1&&(t.args.animationBias=1)):t.args.static||t.noClip&&!t.args.standingLayer&&(t.isRegion||t.isEffect||t.args.falling)||(t.args.xSpeed=0,t.args.ySpeed=0,t.xLast=t.args.x,t.yLast=t.args.y,t.args.grinding&&!t.args.gSpeed&&(t.args.gSpeed=Math.sign(t.args.direction||t.axis||t.xSpeedLast||t.gSpeedLast)),this.updateGroundPosition(t),t.args.groundTimeTotal++,t.args.animationBias=Math.abs((.75*t.args.hSpeed||t.args.gSpeed)/t.args.gSpeedMax),t.args.animationBias>1&&(t.args.animationBias=1)),t.args.rolling&&t.args.pushing&&(t.args.gSpeed=0),!t.viewport)return}var $=Math.ceil(t.args.width/2),Z=Math.floor(t.args.height/2);if(!t.noClip&&!t.isRegion&&t.args.pushed){var Q,tt=function(e){switch(t.args.mode){case 0:Q=t.getMapSolidAt(t.x+$*e+(-1===e?0:-1),t.y-Z);break;case 2:Q=t.getMapSolidAt(t.x+$*e+(-1===e?0:-1),t.y+Z);break;case 1:Q=t.getMapSolidAt(t.x+Z*(-1===e?0:2),t.y);break;case 3:Q=t.getMapSolidAt(t.x-Z*(-1===e?0:2),t.y)}return Q&&Array.isArray(Q)?Q.filter(function(t){return!t.isVehicle}):Q},et=tt(-1),rt=tt(1);rt&&!et&&(t.args.xSpeed>0&&(t.args.xSpeed=0),t.args.x--),et&&!rt&&(t.args.xSpeed>0&&(t.args.xSpeed=0),t.args.x++)}if(t.viewport&&!t.removed){t.viewport.objectPalette["layer-switch"];var nt=[t.viewport.objectPalette["base-region"]];if(!t.isGhost&&!t.isStatic&&!nt.some(function(e){return t instanceof e})){var ot;switch(t.args.mode){case 2:ot=viewport.actorsAtPoint(t.args.x,t.args.y+t.args.height,t.args.width,t.args.height);break;case 1:ot=viewport.actorsAtPoint(t.args.x+t.args.height/2,t.args.y+t.args.width/2,t.args.height,t.args.width);break;case 3:ot=viewport.actorsAtPoint(t.args.x-t.args.height/2,t.args.y+t.args.width/2,t.args.height,t.args.width);break;default:case 0:ot=viewport.actorsAtPoint(t.args.x,t.args.y,t.args.width,t.args.height)}ot.forEach(function(e){return e.args!==t.args&&!e.isPushable&&e.callCollideHandler(t)})}if(t.viewport){t.viewport.tileMap;if((t.args.pushing||Math.abs(t.args.gSpeed)<2)&&!t.args.falling){var it=t.stayStuck;if(t.regions.forEach(function(t){it=it||t.args.sticky}),!it&&!t.args.climbing){Math.floor(t.args.width/2);var at=t.args.mode;if(0===t.args.mode&&t.args.groundAngle<=-Math.PI/4)t.args.gSpeed=1;else if(0===t.args.mode&&t.args.groundAngle>=Math.PI/4&&t.args.groundAngle<Math.PI)t.args.gSpeed=-1;else if(1===at&&t.args.groundAngle<.15*Math.PI)t.lastAngles.splice(0),t.args.mode=0,t.args.falling=!0,t.args.groundAngle=-Math.PI/2,t.args.x+=t.args.width/2,t.args.ignore=30;else if(3===at&&t.args.groundAngle>.15*-Math.PI)t.lastAngles.splice(0),t.args.mode=0,t.args.falling=!0,t.args.groundAngle=Math.PI/2,t.args.x-=t.args.width/2,t.args.ignore=30;else if(2===at){t.lastAngles.splice(0),t.args.xSpeed=0,t.args.ignore=8,t.args.falling=!0,t.willJump=!1;var st=t.args.gSpeed;t.args.groundAngle=Math.PI,t.args.mode=0,t.viewport.onFrameOut(1,function(){t.args.mode=0,t.willJump=!1,t.args.xSpeed=-st}),t.args.rolling||(-1===Math.sign(t.xSpeedLast)?(t.args.direction=-1,t.args.facing="left",t.args.x++):1===Math.sign(t.xSpeedLast)&&(t.args.direction=1,t.args.facing="right",t.args.x--))}}}if(t.args.landed=!0,t.controllable&&(t.args.x=t.args.x,t.args.y=t.args.y),t.controllable&&t.processInput(),t.args.falling||t.args.gSpeed?t.args.stopped=0:t.args.stopped++,t.lastAngles.length>0&&(t.args.groundAngle=t.lastAngles.map(function(t){return Number(t)}).reduce(function(t,e){return t+e})/t.lastAngles.length),isNaN(t.args.groundAngle)&&console.log(t.lastAngles,t.lastAngles.length),!t.args.float&&!t.args.static){var ct=t.getMapSolidAt.apply(t,s(t.groundPoint));if(Array.isArray(ct)&&ct.length&&!t.args.float){t.args.standingLayer=!1;var lt=ct.filter(function(e){return e.args!==t.args&&e.solid&&e.callCollideHandler(t)});if(lt.length){var ut,ft=c(lt);try{for(ft.s();!(ut=ft.n()).done;){var pt=ut.value;!pt.isVehicle&&t.args.y>1+pt.args.y+-pt.args.height||(t.args.groundAngle=pt.groundAngle||0,t.args.standingOn=pt)}}catch(t){ft.e(t)}finally{ft.f()}}}else ct?(t.args.standingOn=null,"object"===a(ct)?(t.args.standingLayer=ct,t.args.modeTime<1&&ct.xLayerSpeed&&(t.args.gSpeed=0)):t.args.standingLayer=null):t.args.standingOn&&!t.args.standingOn.isVehicle&&(t.args.standingOn=null)}if(t.args.falling&&t.args.ySpeed<t.args.ySpeedMax){if(!t.args.float){var ht,gt=1,dt=c(t.regions);try{for(dt.s();!(ht=dt.n()).done;){var yt=ht.value;(yt.args.gravity||1===yt.args.gravity)&&(gt*=yt.args.gravity)}}catch(t){dt.e(t)}finally{dt.f()}t.args.ySpeed+=t.args.gravity*gt}t.args.landed=!1}t.args.falling||(this.checkDropDash(t),t.args.jumping=!1),t.twister&&(t.viewport&&t.viewport.args.frameId%t.viewport.settings.frameSkip==0&&(t.twister.args.x=t.args.x,t.twister.args.y=t.args.y),t.args.mode?t.twister.args.xOff=t.args.xOff:t.twister.args.xOff=t.args.xOff+-8*t.args.direction,t.twister.args.yOff=t.args.yOff+16,t.twister.args.width=t.args.width,t.twister.args.height=t.args.height),t.pincherBg&&(t.viewport&&t.viewport.args.frameId%t.viewport.settings.frameSkip==0&&(t.pincherBg.args.x=t.args.x,t.pincherBg.args.y=t.args.y),t.pincherBg.args.xOff=t.args.xOff,t.pincherBg.args.yOff=t.args.yOff,t.pincherBg.args.width=t.args.width,t.pincherBg.args.height=t.args.height),t.pincherFg&&(t.viewport&&t.viewport.args.frameId%t.viewport.settings.frameSkip==0&&(t.pincherFg.args.x=t.args.x,t.pincherFg.args.y=t.args.y),t.pincherFg.args.xOff=t.args.xOff,t.pincherFg.args.yOff=t.args.yOff,t.pincherFg.args.width=t.args.width,t.pincherFg.args.height=t.args.height),t.args.falling?(t.args.rolling=!1,t.fallTime++):(t.args.idleTime++,(t.yAxis||t.xAxis)&&(t.args.idleTime=0)),t.args.carrying=!!t.carrying.size,t.args.carrying&&(Math.abs(t.args.gSpeed)>8&&(t.args.gSpeed=8*Math.sign(t.args.gSpeed)),t.args.idleTime=0,t.args.rolling=!1)}}}}else{t.willJump=!1;t.viewport.tileMap;var bt=Math.max(t.args.height,32),vt=t.rotatePoint(0,bt+1),mt=t.getMapSolidAt(t.args.x+vt[0],t.args.y+vt[1]);if(Array.isArray(mt)&&(mt=!!mt.filter(function(t){return!t.args.platform&&!t.isVehicle}).length),!mt){var wt=t.args.jumpForce*_;t.running?wt*=1.5:t.crawling&&(wt*=.5),this.doJump(t,wt)}}}}}else{var St;switch(t.args.xSpeed&&(t.args.x+=t.args.xSpeed),t.args.ySpeed&&(t.args.y+=t.args.ySpeed),!t.args.float&&t.args.falling&&(t.args.ySpeed+=t.args.gravity),null!==t.impulseMag&&this.applyImpulse(t),t.args.float>0&&t.args.float--,t.args.mode){case 2:St=viewport.actorsAtPoint(t.args.x,t.args.y+t.args.height,t.args.width,t.args.height);break;case 1:St=viewport.actorsAtPoint(t.args.x-t.args.height/2,t.args.y+t.args.width/2,t.args.height,t.args.width);break;case 3:St=viewport.actorsAtPoint(t.args.x+t.args.height/2,t.args.y+t.args.width/2,t.args.height,t.args.width);break;default:case 0:St=viewport.actorsAtPoint(t.args.x,t.args.y,t.args.width,t.args.height)}if(St){var Ot,kt=c(St);try{for(kt.s();!(Ot=kt.n()).done;){var xt=Ot.value;xt.args!==t.args&&xt.callCollideHandler(t)}}catch(t){kt.e(t)}finally{kt.f()}}}}},{key:"applyImpulse",value:function(t){if(!t.args.dead){if(t.args.xSpeed+=Number(Number(Math.cos(t.impulseDir)*t.impulseMag).toFixed(3)),t.args.ySpeed+=Number(Number(Math.sin(t.impulseDir)*t.impulseMag).toFixed(3)),t.impulseFal)t.args.falling=t.impulseFal||t.args.falling;else switch(t.args.mode){case 0:t.args.gSpeed=Math.cos(t.impulseDir)*t.impulseMag;break;case 2:t.args.gSpeed=-Math.cos(t.impulseDir)*t.impulseMag;break;case 1:t.args.gSpeed=-Math.sin(t.impulseDir)*t.impulseMag;break;case 3:t.args.gSpeed=Math.sin(t.impulseDir)*t.impulseMag}t.impulseMag=null,t.impulseDir=null,t.impulseFal=null}}},{key:"updateGroundPosition",value:function(t){t.args.mercy&&Math.abs(t.args.gSpeed)>10&&(t.args.gSpeed=10*Math.sign(t.args.gSpeed));var e=t.getLocalDrag();t.args.gSpeedMax;t.running?RUNNING_SPEED:t.crawling&&CRAWLING_SPEED;var r=[0,0],n=Math.ceil(t.args.width/2),i=t.paused;if(t.args.gSpeed||t.args.rolling||t.canRoll&&t.args.crouching){Math.abs(t.args.gSpeed);var a=Math.sign(t.args.gSpeed||t.args.direction),s=Math.abs(t.args.gSpeed);t.pause(!0);var l=t.args.modeTime>10&&this.scanForward(t,t.args.gSpeed,1);if(!1===l||l>0)for(var u=0;u<s;u+=1){if(t.args.height>8&&t.args.modeTime>1){if(t.args.pushing=!1,!t.args.rolling){var f=t.rotatePoint(n*-a,t.args.height),p=t.getMapSolidAt(t.args.x+f[0],t.args.y+f[1]);if(Array.isArray(p)&&(p=p.filter(function(e){return e.args!==t.args&&e.callCollideHandler(t)&&e.solid}).length),p){2===t.args.mode&&(t.args.x+=n*Math.sign(t.args.gSpeed),t.args.y+=t.args.height,t.args.mode=0),t.args.pushing=Math.sign(t.args.gSpeed);break}}if(0===t.args.groundAngle){var h=t.rotatePoint(n*-a,.5*t.args.height),g=t.getMapSolidAt(t.args.x+h[0],t.args.y+h[1]);if(Array.isArray(g)&&(g=g.filter(function(e){return e.args!==t.args&&e.callCollideHandler(t)&&e.solid}).length),g){2===t.args.mode&&(t.args.x+=n*Math.sign(t.args.gSpeed),t.args.y+=t.args.rollingeight||t.args.height,t.args.mode=0),t.args.pushing=Math.sign(t.args.gSpeed);break}}}var d,y=c(t.behaviors);try{for(y.s();!(d=y.n()).done;){var b=d.value;b.movedGround&&b.movedGround(t)}}catch(t){y.e(t)}finally{y.f()}if(r=this.findNextStep(t,1*a),t.args.falling||t.locked)return;if(!r)break;if(r[3]){t.args.moving=!1,t.args.gSpeed=.15*Math.sign(t.args.gSpeed),1!==t.args.mode&&3!==t.args.mode||(t.args.mode=0,t.lastAngles.splice(0));break}if(!0===r[2]){var v=t.args.gSpeed,m=t.args.groundAngle;t.args.standingLayer=null;var w=void 0;switch(t.args.mode){case 0:w=t.args.width/2,Math.abs(v)<w?t.args.x+=w*Math.sign(v):t.args.x+=Math.sign(v),t.args.xSpeed=v*Math.cos(m),t.args.ySpeed=-v*Math.sin(m),t.args.float=t.args.float<0?t.args.float:1;var S=!!t.args.gSpeed;this.checkBelow(t,t.args.x,t.args.y)&&(t.args.gSpeed=v,t.args.xSpeed=0,t.args.ySpeed=0,S=!1,t.canRoll&&t.yAxis>.55&&(t.args.rolling=!0)),t.args.falling=S,t.args.ignore=2;break;case 2:t.args.y+=t.args.height,t.args.float=t.args.float<0?t.args.float:1,t.args.falling=!0,t.args.mode=0,t.args.xSpeed=-v*Math.cos(m),t.args.ySpeed=v*Math.sin(m),t.lastAngles.splice(0),t.args.direction*=-1,t.args.rolling||(t.args.facing="left"===t.args.facing?"right":"left"),t.args.ignore=3;break;case 1:w=t.args.width/2,t.args.height/2,t.args.climbing||(Math.abs(t.args.gSpeed)<2&&!t.args.rolling?t.args.gSpeed<0?(t.args.x-=t.args.direction,t.args.y-=t.args.gSpeed+-2):t.args.x+=w:(t.args.ignore=-3,t.args.x+=w),t.args.xSpeed=v*Math.sin(m),t.args.ySpeed=v*Math.cos(m)),t.args.falling=!0;break;case 3:w=t.args.width/2,t.args.height/2,t.args.climbing||(Math.abs(t.args.gSpeed)<2&&!t.args.rolling?t.args.gSpeed>0?(t.args.x-=t.args.direction,t.args.y-=t.args.gSpeed+2):t.args.x-=w:(t.args.ignore=-3,t.args.x-=w),t.args.xSpeed=-v*Math.sin(m),t.args.ySpeed=-v*Math.cos(m)),t.args.falling=!0}break}if(r[0]||r[1])!r[0]&&!r[1]||t.rotateLock||(t.args.moving=!0,t.args.angle=r[0]?Math.atan(r[1]/r[0]):Math.sign(r[1])*Math.PI/2,t.lastAngles.unshift(t.args.angle),t.lastAngles.splice(t.angleAvg));else switch(t.args.moving=!1,t.args.mode){case 0:case 2:t.args.gSpeed=0}if(!t.rotateLock){switch(t.args.mode){case 0:t.args.x+=r[0],t.args.y-=r[1];break;case 2:t.args.x-=r[0],t.args.y+=r[1];break;case 1:t.args.x+=r[1],t.args.y+=r[0];break;case 3:t.args.x-=r[1],t.args.y-=r[0]}if(t.args.angle>Math.PI/4&&t.args.angle<Math.PI/2){var O=t.lastAngles.map(function(t){return Number(t)-Math.PI/2});switch(Object.defineProperty(O,o.Bindable.NoGetters,{value:!0}),t.lastAngles=O,t.args.mode){case 0:t.args.mode=3;break;case 3:t.args.mode=2;break;case 2:t.args.mode=1;break;case 1:t.args.mode=0}t.args.groundAngle-=Math.PI/2}else if(t.args.angle<-Math.PI/4&&t.args.angle>-Math.PI/2){t.args.mode;var k=t.lastAngles.map(function(t){return Number(t)+Math.PI/2});switch(Object.defineProperty(k,o.Bindable.NoGetters,{value:!0}),t.lastAngles=k,t.args.mode){case 0:t.args.mode=1;break;case 3:t.args.mode=0;break;case 2:t.args.mode=3;break;case 1:t.args.mode=2}t.args.groundAngle=Number(t.args.groundAngle)+Math.PI/2}}}else t.args.pushing=Math.sign(t.args.gSpeed);var x=Math.round(t.args.height/2);if(!t.static&&0===t.args.mode){for(;(t.args.gSpeed<=0||t.args.modeTime<3)&&t.getMapSolidAt(t.args.x-n,t.args.y-x,!1);)t.args.x++;for(;(t.args.gSpeed>=0||t.args.modeTime<3)&&t.getMapSolidAt(t.args.x+n,t.args.y-x,!1);)t.args.x--}i||t.pause(!1);var j=t.xAxis&&Math.sign(t.xAxis)===Math.sign(t.args.gSpeed),P=t.getLocalFriction();if(0===t.args.mode||2===t.args.mode||t.args.gSpeed<0&&1===t.args.mode||t.args.gSpeed>0&&3===t.args.mode){var _=t.xAxis&&Math.sign(t.xAxis)!==Math.sign(t.args.gSpeed),R=P*t.args.decel*(t.args.rolling&&_?3:.75);t.args.climbing||!t.args.gSpeed||j&&!t.args.rolling||(t.args.grinding?(t.yAxis>.5||(t.args.gSpeed-=1*R/e*.125*Math.sign(t.args.gSpeed)),Math.abs(t.args.gSpeed)>40&&(t.args.gSpeed=40*a)):t.args.rolling?t.args.gSpeed-=1*R/e*.06125*Math.sign(t.args.gSpeed):t.args.grinding||t.args.rolling||t.xAxis&&!_||(t.args.gSpeed-=1*R/e*Math.sign(t.args.gSpeed)),Math.abs(t.args.gSpeed)<.1&&(t.args.gSpeed=0))}!j&&Math.abs(t.args.gSpeed)<1&&(t.args.wallSticking||(t.args.gSpeed=0));var M=0;if(!t.args.climbing){switch(t.args.mode){case 0:M=t.args.groundAngle/(Math.PI/2),a>0&&(M*=-1);break;case 2:M=-t.args.groundAngle/(Math.PI/2),a>0&&(M*=-1);break;case 3:a>0?(M=-1,M-=t.args.groundAngle/(Math.PI/2)):(M=1,M+=t.args.groundAngle/(Math.PI/2));break;case 1:a>0?(M=1,M-=t.args.groundAngle/(Math.PI/2)):(M=-1,M+=t.args.groundAngle/(Math.PI/2))}if(t.args.grinding){var T=Math.abs(t.args.gSpeed),E=Math.sign(t.args.gSpeed||t.xSpeedLast||1);t.args.direction=E,T<6?t.args.gSpeed=6*E:T>40?t.args.gSpeed=40*E:M<0?t.args.gSpeed*=1-(0-M/2*.015):M>0?t.args.gSpeed*=1.0015*(1+M/2*.045):t.args.gSpeed+=.1*E}else if(t.args.rolling||t.canRoll&&t.args.crouching)if(M>0&&t.args.modeTime>3){Math.abs(t.args.gSpeed)<4*t.args.gSpeedMax&&(t.args.gSpeed+=.45*M*a),Math.abs(t.args.gSpeed)<1&&(t.args.gSpeed=(1+Math.pow(M,2))*Math.sign(t.args.gSpeed));var A,C=c(t.viewport.regionsAtPoint(t.args.x,t.args.y));try{for(C.s();!(A=C.n()).done;){var B=A.value;!B.args.maxSpeed||B.args.maxSpeed<0||B.args.maxSpeed<Math.abs(t.args.gSpeed)&&(t.args.gSpeed=B.args.maxSpeed*Math.sign(t.args.gSpeed))}}catch(t){C.e(t)}finally{C.f()}Math.abs(t.args.gSpeed)<2&&Math.abs(Math.sign(t.args.gSpeed)-Math.sign(a))<2&&(t.args.gSpeed=2*a)}else M<0&&(Math.abs(t.args.gSpeed)<10?t.args.gSpeed+=.65*M*a:t.args.gSpeed+=.45*M*a);else t.stayStuck||(M>.25?Math.abs(t.args.gSpeed)<2*t.args.gSpeedMax&&(t.args.gSpeed+=M*a,Math.abs(t.args.gSpeed)<2&&Math.abs(Math.sign(t.args.gSpeed)-Math.sign(a))<2&&(t.args.gSpeed=2*a)):M<0?Math.abs(t.args.gSpeed)<10&&(t.args.gSpeed+=.3*M*a):M>0&&P<.75&&(Math.abs(t.args.gSpeed)<1&&(t.args.gSpeed=a),t.args.gSpeed+=a*M),Math.abs(t.args.gSpeed))}}(!r||!1===r[0]&&!1===r[1])&&(t.args.ignore=t.args.ignore||1,t.args.falling&&(t.args.gSpeed=0)),t.args.heading=Math.sign(t.args.gSpeed)}},{key:"findAirPointA",value:function(t,e,r){if(r.viewport){var n=r.viewport,o=n.tileMap;if(n.actorsAtPoint(e[0],e[1]).filter(function(t){return t.args!==r.args&&t.callCollideHandler(r)&&t.solid}).length>0)return r.lastPointA;if(o.getSolid(e[0],e[1],r.args.layer))return r.lastPointA;Object.assign(r.lastPointA,e.map(Math.trunc))}}},{key:"findAirPointB",value:function(t,e,r){if(r.viewport){var n=r.viewport,o=n.tileMap;return n.actorsAtPoint(e[0],e[1]).filter(function(t){return t.args!==r.args&&t.callCollideHandler(r)&&t.solid}).length>0?r.lastPointB:o.getSolid(e[0],e[1],r.args.layer)?r.lastPointB:void Object.assign(r.lastPointB,e.map(Math.trunc))}}},{key:"updateAirPosition",value:function(t){var e=t.args.xSpeed,r=t.args.ySpeed;t.args.standingLayer=null;t.viewport;var n=Math.ceil(t.args.width/2),o=Math.sign(t.args.xSpeed),c=t.viewport.tileMap,l=Math.pow(t.args.xSpeed,2)+Math.pow(t.args.ySpeed,2),u=l?Math.sqrt(l):0;if(t.args.airSpeed=u,u){if(t.controllable||t.isVehicle){var f=t.springing;t.args.groundAngle+=.001*-Math.sign(t.args.groundAngle)*(f?125:50)}if(Math.abs(t.args.groundAngle)<.04&&(t.args.groundAngle=0),t.noClip)return t.args.x+=t.args.xSpeed,void(t.args.y+=t.args.ySpeed);t.args.jumping&&t.args.ySpeed<0&&t.args.ySpeed>-4&&(t.args.xSpeed-=t.args.xSpeed/.125/256);var p=(t.args.flying?t.args.height+t.args.yMargin:t.args.height)||1;t.upScan=!0;var h=t.args.ySpeed<0?-t.args.ySpeed+p:0,g=t.castRay(h,-Math.PI/2,[-t.args.width/2,0],t.findSolid),d=t.castRay(h,-Math.PI/2,[t.args.width/2,0],t.findSolid),y=!(!g&&!d)&&Math.min.apply(Math,s([g,d].filter(function(t){return!1!==t})));t.upScan=!1;var b=[];if(!t.args.hLock){var v=t.args.xSpeed;b=[!!v&&this.scanForward(t,v,.9),!!v&&this.scanForward(t,v,.5),!!v&&this.scanForward(t,v,.1)].filter(function(t){return!1!==t})}if(t.args.ySpeed&&y&&t.lastLayer&&t.lastLayer.offsetYChanged)return t.args.y+=t.lastLayer.offsetYChanged+1,t.args.ySpeed=t.lastLayer.offsetYChanged+1,void(t.lastLayer=null);var m=!1;[g,d].some(function(t){return!1===t})||(m=Math.atan2(g-d,t.args.width));t.willStick||t.args.deepJump;var w=t.xLast-t.args.x;if(g&&d&&y<=h&&(!t.args.flying||t.canStick)&&Math.abs(m)<Math.PI/4&&t.args.ySpeed<=0)return t.args.y-=y-t.args.height,t.args.ySpeed&&(t.args.falling=!0),void(t.args.ySpeed=Math.max(0,t.args.ySpeed));if(!t.willStick&&b.length>1&&(!1===y||y<t.args.height)){var S=Math.sign(t.args.xSpeed),O=(Math.max.apply(Math,s(b)),-1+Math.min.apply(Math,s(b))),k=t.args.width,x=k+-O,j=x*-S;isNaN(j)||j&&!(x<k)&&Math.sign(j)!==Math.sign(t.args.xSpeed)||(t.args.x+=j,t.args.flySpeed=0,t.args.xSpeed=0,t.args.gSpeed=0,t.args.mode=0),t.viewport.actorsAtPoint(t.x+(0+n)*S,t.y,t.args.width,t.args.height).forEach(function(e){e!==t&&e.callCollideHandler(t,S<0?1:3)})}Object.assign(t.lastPointA,[t.args.x,t.args.y].map(Math.trunc)),Object.assign(t.lastPointB,[t.args.x,t.args.y].map(Math.trunc));var P=1+Math.ceil(u),_=t.castRay(P,t.airAngle,this.findAirPointA),R=t.rotateLock?_:t.castRay(P,t.airAngle,[0,-3*Math.sign(t.args.ySpeed||1)],this.findAirPointB);t.willJump=!1;var M=!1,T=!1;if([_,R].some(function(t){return!1===t})||(T=Math.atan2(_[1]-R[1],_[0]-R[0])),t.xLast!==t.args.x&&(t.xLast=t.args.x),t.yLast!==t.args.y&&(t.yLast=t.args.y),!1!==_){var E=!1;e<0&&(E=T<=Math.PI/2),e>0&&(E=T>=Math.PI/2);var A=E&&e<0,C=E&&e>0,B=this.checkBelow.apply(this,[t].concat(s(_)));t.willStick||(t.args.gSpeed=e,B&&"object"===a(B)&&B.offsetXChanged&&(t.args.gSpeed-=B.offsetXChanged));var D=_[0],I=_[1];t.args.x=D,t.args.y=I,M=t.getMapSolidAt(t.args.x+o,t.args.y),Array.isArray(M)&&((M=M.filter(function(e){return e.callCollideHandler(t)})).length||(M=!1)),t.rotateLock||(!1!==m&&m<0?(t.args.gSpeed=0,t.args.mode=1,t.args.direction=1,t.args.facing="right"):!1!==m&&m>0?(t.args.gSpeed=0,t.args.mode=3,t.args.direction=-1,t.args.facing="left"):!t.willStick&&(A||C)||t.getMapSolidAt(t.args.x-o,t.args.y)||t.getMapSolidAt(t.args.x-o,t.args.y+1)||(A?(t.args.gSpeed=0,t.args.mode=1,t.args.direction=1,t.args.facing="right"):C?(t.args.gSpeed=0,t.args.mode=3,t.args.direction=-1,t.args.facing="left"):!1!==m&&(t.args.mode=2)));Math.floor(t.args.width/2);var L=this.findNextStep(t,-3),F=this.findNextStep(t,3);if(t.xSpeedLast>0&&F&&F[3])t.args.x-=t.args.width;else if(t.xSpeedLast<0&&L&&L[3])t.args.x+=t.args.width;else if(!F||!1!==F[0]&&!1!==F[1]||!L||!1!==L[0]&&!1!==L[1]){var N,z,q,U,W=0;if(F&&L)W=(r<0?-1:1)*Number(Math.atan2((null!==(N=F[1])&&void 0!==N?N:0)-(null!==(z=L[1])&&void 0!==z?z:0),(null!==(q=F[0])&&void 0!==q?q:0)-(null!==(U=L[0])&&void 0!==U?U:0)));if(isNaN(W))throw console.log(W),new Error("angle is NAN!");if(!F||!L||F[2]||L[2]||F[3]&&L[3]){if(!t.args.dead&&t.args.startled<175&&t.args.ySpeed>0&&(F&&F[2]&&(!L||!L[3])||(!F||!F[3])&&L&&L[2])){var V=e||t.xSpeedLast;return t.args.falling=!1,t.args.gSpeed=V,t.args.float=t.args.float||1,t.args.x+=V,t.args.y-=F[1]||L[1],void(t.viewport.settings.rumble&&t.controller.rumble&&t.controller.rumble({duration:80,strongMagnitude:0,weakMagnitude:Math.min(40,Math.max(Math.abs(10*t.args.ySpeed),10))/40}))}}else{t.canRoll&&(t.yAxis>.55||t.args.dropDashCharge)&&!t.carrying.size&&(t.args.rolling=!0),t.args.startled<175&&(t.args.falling=!1,t.viewport.settings.rumble&&t.controller.rumble&&t.controller.rumble({duration:80,strongMagnitude:0,weakMagnitude:Math.min(40,Math.max(Math.abs(10*t.args.ySpeed),10))/40})),t.args.groundAngle=W,t.lastAngles.splice(0);var H=-t.args.groundAngle/(.4*Math.PI),G=0;G+=e||-w,G+=r*H,M&&M.length&&(G=0),t.args.mode%2==1&&(G*=-1),"object"===a(B)&&(t.args.standingLayer=B,B.offsetXChanged&&(G-=B.offsetXChanged,t.args.x+=B.offsetXChanged)),G&&(t.args.gSpeed=G)}Math.abs(t.args.gSpeed)}}else if(t.args.ySpeed>0){if(1===t.args.mode||3===t.args.mode){var K=1===t.args.mode?-1:1;t.args.direction=K,t.args.groundAngle=Math.PI/2*K}t.args.falling||t.args.gSpeed||(t.args.gSpeed=Math.floor(e||t.xSpeedLast)),_&&(yPointDir===ySpeedDir||!yPointDir&&1===ySpeedDir)&&(t.args.x=Number(_[0]),t.args.y=Number(_[1]),t.args.falling=!1,t.viewport.settings.rumble&&t.controller.rumble&&t.controller.rumble({duration:80,strongMagnitude:0,weakMagnitude:Math.min(40,Math.max(Math.abs(10*t.args.ySpeed),10))/40}))}if(c.getSolid(t.args.x+t.args.width/2*Math.sign(t.args.xSpeed),t.args.y,t.args.layer)||(Math.abs(t.args.xSpeed)>t.args.xSpeedMax&&(t.args.xSpeed=t.args.xSpeedMax*Math.sign(t.args.xSpeed)),Math.abs(t.args.ySpeed)>t.args.ySpeedMax&&(t.args.ySpeed=t.args.ySpeedMax*Math.sign(t.args.ySpeed))),!1===_){if(t.args.xSpeed){var Y=!t.willStick&&t.getMapSolidAt(t.args.x+(1+n)*Math.sign(t.args.xSpeed),t.args.y-t.args.height/2),J=t.getMapSolidAt(t.args.x,t.args.y-24);Y||(t.args.x=Number(t.args.x)+Number(t.args.xSpeed)),J&&(t.args.y+=t.args.height)}t.args.ySpeed&&(t.args.y=Number(Number(t.args.y)+Number(t.args.ySpeed)),t.args.flying&&t.args.ySpeed<0&&y>0&&(t.args.y+=p-y+4,t.args.ySpeed=0))}else t.viewport&&t.ySpeedLast>0&&t.viewport.tileMap.getSolid(t.args.x,t.args.y)&&!t.viewport.tileMap.getSolid(t.args.x,t.args.y-1)&&t.args.y--;if(t.args.standingOn instanceof i.PointActor){var X=t.args.standingOn.args.y+-t.args.standingOn.args.height+-1;(t.args.y<X||t.args.ySpeed<0)&&(t.args.standingOn=null)}}}},{key:"checkDropDash",value:function(t){if(t.dropDashCharge&&0===t.args.mode){var e=t.dropDashCharge*Math.sign(t.args.direction);t.dropDashCharge=0,t.viewport.onFrameOut(1,function(){t.args.gSpeed+=e,t.args.rolling=!0});var r=t.viewport,o=new n.Tag('<div class = "particle-dust">'),i=t.rotatePoint(t.args.gSpeed,0);o.style({"--x":i[0]+t.args.x,"--y":i[1]+t.args.y,"z-index":0,opacity:2*Math.random()}),r.particles.add(o),setTimeout(function(){r.particles.remove(o)},350)}}},{key:"findDownSolid",value:function(t,e,r){if(r.viewport){var n=r.viewport,o=n.tileMap;if(0===r.args.groundAngle){var i,a=c(r.viewport.regionsAtPoint(e[0],e[1]));try{for(a.s();!(i=a.n()).done;){var s=i.value;if(0===r.args.mode&&-1+e[1]===s.args.y+-s.args.height&&Math.abs(r.args.gSpeed)>=s.skimSpeed)return-1+t}}catch(t){a.e(t)}finally{a.f()}}return o.getSolid(e[0],e[1],r.args.layer)?t:n.actorsAtPoint(e[0],e[1]).filter(function(t){return t.args!==r.args&&t.callCollideHandler(r)&&t.solid}).length>0?t:void 0}}},{key:"findUpSpace",value:function(t,e,r){if(r.viewport){var n=r.viewport,o=n.tileMap;if(r.args.groundAngle<=0){var i,a=c(r.viewport.regionsAtPoint(e[0],e[1]));try{for(a.s();!(i=a.n()).done;){var s=i.value;if(0!==r.args.mode||e[1]!==1+s.args.y+-s.args.height||Math.abs(r.args.gSpeed)<=s.skimSpeed)if(0===n.actorsAtPoint(e[0],e[1]).filter(function(t){return t.args!==r.args&&t.callCollideHandler(r)&&t.solid}).length&&!o.getSolid(e[0],e[1],r.args.layer))return t}}catch(t){a.e(t)}finally{a.f()}}var l,u=[],f=c(n.actorsAtPoint(e[0],e[1]));try{for(f.s();!(l=f.n()).done;){var p=l.value;p.args!==r.args&&(p.callCollideHandler(r)&&p.solid&&u.push(p))}}catch(t){f.e(t)}finally{f.f()}return 0!==u.length||o.getSolid(e[0],e[1],r.args.layer)?void 0:t}}},{key:"findNextStep",value:function(t,e){if(t.viewport){if(void 0!==t.stepCache[e])return t.stepCache[e];t.viewport.tileMap;for(var r=t.maxStep*(t.args.falling&&!t.args.xSpeed?3:1),n=(Math.max(t.args.width/2,1),Math.sign(e)),o=!1,i=!1,a=0,s=0,c=0;c<Math.abs(e);c+=1){o=!1,i=!1;var l=void 0,u=(1+c)*n;switch(t.args.mode){case 0:l=[u,1];break;case 3:l=[1,-u];break;case 2:l=[-u,-1];break;case 1:l=[-1,u]}if(!1===(o=t.castRay(r,t.downAngle,l,this.findDownSolid)))return[!1,!1,!0];var f=s-o;if(Math.abs(f)>=r)return[!1,!1,f<0,f>0];if(0===o){var p=void 0;switch(t.args.mode){case 0:p=[u,0];break;case 3:p=[0,-u];break;case 2:p=[-u,0];break;case 1:p=[0,u]}var h=1+r;i=t.castRay(h,t.upAngle,p,this.findUpSpace);var g=Math.abs(a-i);if(!1===i)return[!1,!1,!1,!0];if(g>=r)return[!1,!1,!1,!0];a=i}else s=o;t.stepCache[c*n]=!1!==i?[c*n,i,!1]:[c*n,-o,!1]}return!1!==i?[c*n,i,!1]:[c*n,-o,!1]}}},{key:"castRay",value:function(){for(var t=1,e=function(){},r=Math.PI/2,n=[0,0],o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];switch(i.length){case 2:t=i[0],e=i[1];break;case 3:t=i[0],r=i[1],e=i[2];break;case 4:t=i[0],r=i[1],n=i[2],e=i[3]}for(var s=0;s<Math.floor(t);s++){var c=e(s,[host.args.x+n[0]+s*Math.cos(r),host.args.y+n[1]+s*Math.sin(r)],host);if(void 0!==c)return c}return!1}},{key:"doJump",value:function(t,e){if(!t.args.ignore&&!t.args.falling&&t.args.landed&&!t.args.float){var r=new CustomEvent("jump",{cancelable:!0,detail:{host:t,force:e}});if(t.dispatchEvent(r)){t.args.standingOn&&t.args.standingOn.args.yForce?e+=Math.max(0,.25*t.args.standingOn.args.yForce):t.args.standingOn&&t.args.standingOn.yLast&&(e+=Math.max(0,t.args.standingOn.yLast-t.args.standingOn.args.y));var n=t.args.width/2,o=Math.min(n,4),i=this.findNextStep(t,-o),a=this.findNextStep(t,+o),s=2*o,c=Math.atan2(i[1]-a[1],Math.ceil(s));t.args.ignore=6,t.args.pushing=!1,t.args.landed=!1,t.args.falling=!0;t.args.mode;switch(t.args.mode){case 0:t.args.y-=16;break;case 3:c+=-Math.PI/2,t.args.x+=-t.args.width/2;break;case 2:c+=Math.PI,t.args.y+=t.args.normalHeight||t.args.height;break;case 1:c+=Math.PI/2,t.args.x+=t.args.width/2}var l=t.args.gSpeed;t.args.standingOn&&t.args.standingOn.args.convey&&(l+=t.args.standingOn.args.convey),t.args.standingOn=null,t.args.xSpeed=l*Math.cos(c),t.args.ySpeed=l*Math.sin(c);var u=c-Math.PI/2,f=e*Math.cos(u),p=e*Math.sin(u);Math.abs(f)<.01&&(f=0),Math.abs(p)<.01&&(p=0),t.args.airAngle=u,t.args.xSpeed+=f,t.args.ySpeed+=p,t.args.jumpedAt=t.args.y,t.args.jumping=!0,t.viewport.tileMap.getSolid(t.args.x+t.args.width/2*Math.sign(t.args.xSpeed),t.args.y,t.args.layer)&&(t.args.xSpeed=0),t.args.rolling=!1,t.args.mode=0,t.args.groundAngle=0,t.args.gSpeed=0}}}},{key:"impulse",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.args.dead||(t.impulseMag=e,t.impulseDir=r,t.impulseFal=n)}},{key:"scanForward",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Math.sign(e),i=t.args.width/2,a=Math.abs(e),s=t.viewport;if(s){s.tileMap;var c=t.args.falling?[i*-o,-t.args.height*r]:t.rotatePoint(i*-o,t.args.height*r);return t.castRay(a+t.args.width,t.args.falling?[Math.PI,0,0][o+1]:t.realAngle+[0,0,Math.PI][o+1],c,n?t.findSolid:t.findSolidTile)}}},{key:"scanBottomEdge",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=host.viewport.tileMap,r=host.args.width/2,n=e.getSolid(host.x-r,host.y-1,host.args.layer),o=e.getSolid(host.x+r,host.y-1,host.args.layer);if(!n||!o)return host.castRay(host.args.width,t<0?Math.PI:0,[-t*r,0],function(t,r){if(!host.viewport.actorsAtPoint(r[0],r[1]).filter(function(t){return t.args!==host.args}).length&&!e.getSolid(r[0],r[1]+1,host.args.layer))return t})}},{key:"checkBelow",value:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n=null!==(e=n)&&void 0!==e?e:t.args.x,o=null!==(r=o)&&void 0!==r?r:t.args.y;var i=[],a=[];switch(t.args.mode){case 0:i[0]=n+0,i[1]=o+1,a[0]=n-0,a[1]=o+1;break;case 1:i[0]=n-1,i[1]=o+0,a[0]=n-1,a[1]=o-0;break;case 2:i[0]=n-0,i[1]=o-1,a[0]=n+0,a[1]=o-1;break;case 3:i[0]=n+1,i[1]=o+0,a[0]=n+1,a[1]=o-0}var s=t.getMapSolidAt.apply(t,i);return Array.isArray(s)&&(s=s.filter(function(e){return e.callCollideHandler(t)}).length),s}}])&&f(e.prototype,r),l&&f(e,l),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.Platformer=p}),require.register("behavior/SkidDust.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SkidDust=void 0;var o=e("curvature/base/Tag"),i=e("./Behavior");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,i.Behavior);var e,r,n,l=c(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=l.call(this)).dustType=t||"particle-dust",e}return e=u,(r=[{key:"update",value:function(t){if(!(t.args.falling||t.args.rolling||t.spindashCharge||t.args.wallSticking||t.args.climbing)){var e=t.args.direction;if(Math.sign(t.args.gSpeed)&&Math.sign(e)&&!(Math.abs(t.args.gSpeed-e)<5)){if(!t.alwaysSkidding){if(Math.sign(t.args.gSpeed)===Math.sign(e))return;if(!t.skidding)return}var r=t.viewport,n=t.distFreq||2;if(r.args.frameId%n==0){var i=new o.Tag(document.createElement("div"));i.classList.add(this.dustType);var a=Math.sign(t.args.gSpeed)*t.dustDist||0,s=t.groundPoint;i.style({"--x":s[0]+a,"--y":s[1],"z-index":0,opacity:.25*Math.random()+.5}),r.particles.add(i),r.onFrameOut(20,function(){r.particles.remove(i)})}}}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.SkidDust=u}),require.register("cards/basic-controls.html",function(t,e,r){r.exports='<div class = "control-card">\n\t<span class = "button-index">\n\t\t<span class = "arrow button arrow-west"></span>\n\t\t/ <span class = "arrow button arrow-east"></span>\n\t\t/ <b>wasd</b>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-x"></span>\n\t\t<span class = "button xb xb-a"></span>\n\t\t<b>space</b>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-o"></span>\n\t\t<span class = "button xb xb-b"></span>\n\t\t<b>ctrl</b>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-s"></span>\n\t\t<span class = "button xb xb-x"></span>\n\t\t<b>shift</b>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-t"></span>\n\t\t<span class = "button xb xb-y"></span>\n\t\t<b>z</b>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-l1"></span>\n\t\t<span class = "button xb xb-lb"></span>\n\t\t<b>q</b>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-r1"></span>\n\t\t<span class = "button xb xb-rb"></span>\n\t\t<b>e</b>\n\t</span>\n</div>\n'}),require.register("cards/basic-moves.html",function(t,e,r){r.exports='<p><b>jump</b> + <b>jump</b> - fly / double jump action</p>\n\n<p><span class = "arrow-button arrow-north"></span> + <b>jump</b> - disengage vehicle</p>\n\n\x3c!-- <p><span class = "arrow-button arrow-south"></span> + <b>jump</b> - spindash</p> --\x3e\n'}),require.register("cards/plane-air-controls.html",function(t,e,r){r.exports='<div class = "control-card">\n\t<span class = "button-index">\n\t\t<span class = "arrow button arrow-west"></span>\n\t\t/ <span class = "arrow button arrow-east"></span>\n\t\t/ <b>wasd</b>\n\t\t- move\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-x"></span>\n\t\t<span class = "button xb xb-a"></span>\n\t\t<b>space</b>\n\t\t- double barrier\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-o"></span>\n\t\t<span class = "button xb xb-b"></span>\n\t\t<b>ctrl</b>\n\t\t- <span>no action</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-s"></span>\n\t\t<span class = "button xb xb-x"></span>\n\t\t<b>shift</b>\n\t\t- <span>light dash</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-t"></span>\n\t\t<span class = "button xb xb-y"></span>\n\t\t<b>z</b>\n\t\t- <span>no action</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-l1"></span>\n\t\t<span class = "button xb xb-lb"></span>\n\t\t<b>q</b>\n\t\t- <span>air dash left</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-r1"></span>\n\t\t<span class = "button xb xb-rb"></span>\n\t\t<b>e</b>\n\t\t- <span>air dash right</span>\n\t</span>\n\n</div>\n'}),require.register("cards/sonic-air-controls.html",function(t,e,r){r.exports='<div class = "control-card">\n\t<span class = "button-index">\n\t\t<span class = "arrow button arrow-west"></span>\n\t\t/ <span class = "arrow button arrow-east"></span>\n\t\t/ <b>wasd</b>\n\t\t- move\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-x"></span>\n\t\t<span class = "button xb xb-a"></span>\n\t\t<b>space</b>\n\t\t- double barrier\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-o"></span>\n\t\t<span class = "button xb xb-b"></span>\n\t\t<b>ctrl</b>\n\t\t- <span>no action</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-s"></span>\n\t\t<span class = "button xb xb-x"></span>\n\t\t<b>shift</b>\n\t\t- <span>light dash</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-t"></span>\n\t\t<span class = "button xb xb-y"></span>\n\t\t<b>z</b>\n\t\t- <span>no action</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-l1"></span>\n\t\t<span class = "button xb xb-lb"></span>\n\t\t<b>q</b>\n\t\t- <span>air dash left</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-r1"></span>\n\t\t<span class = "button xb xb-rb"></span>\n\t\t<b>e</b>\n\t\t- <span>air dash right</span>\n\t</span>\n\n</div>\n'}),require.register("cards/sonic-controls.html",function(t,e,r){r.exports='<div class = "control-card">\n\n\t<span class = "button-index">\n\t\t<span class = "arrow button arrow-west"></span>\n\t\t/ <span class = "arrow button arrow-east"></span>\n\t\t/ <b>wasd</b>\n\t\t- move\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-x"></span>\n\t\t<span class = "button xb xb-a"></span>\n\t\t<b>space</b>\n\t\t- jump\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-o"></span>\n\t\t<span class = "button xb xb-b"></span>\n\t\t<b>ctrl</b>\n\t\t- <span>spindash</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-s"></span>\n\t\t<span class = "button xb xb-x"></span>\n\t\t<b>z</b>\n\t\t- <span>no action</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-t"></span>\n\t\t<span class = "button xb xb-y"></span>\n\t\t<b>x</b>\n\t\t- <span>super</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-l1"></span>\n\t\t<span class = "button xb xb-lb"></span>\n\t\t<b>q</b>\n\t\t- <span>no action</span>\n\t</span>\n\n\t<span class = "button-index">\n\t\t<span class = "button ps ps-r1"></span>\n\t\t<span class = "button xb xb-rb"></span>\n\t\t<b>e</b>\n\t\t- <span>no action</span>\n\t</span>\n\n</div>\n'}),require.register("console/task/Chao.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Chao=void 0;e("curvature/base/Router");var o=e("subspace-console/Task"),i=e("../../actor/Chao");function a(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(f,o.Task);var e,r,n,s=u(f);function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),s.apply(this,arguments)}return e=f,(r=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"list";if("function"==typeof this["command_"+t]){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this["command_"+t].apply(this,r)}}},{key:"command_list",value:function(){if(f.viewport){var t,e=a(f.viewport.actors.items());try{for(e.s();!(t=e.n()).done;){var r=t.value;r instanceof i.Chao&&this.print("".concat(Number(r.args.id),') Chao "').concat(r.args.name,'" is at ').concat(r.x,", ").concat(r.y,"."))}}catch(t){e.e(t)}finally{e.f()}}}},{key:"command_name",value:function(t,e){if(f.viewport){var r=f.viewport.actorsById[t];r instanceof i.Chao&&(r.args.name=e)}}},{key:"command_color",value:function(t){if(f.viewport){var e=f.viewport.actorsById[t];if(e instanceof i.Chao){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.recolor.apply(this,[e].concat(n))}}}},{key:"recolor",value:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];for(;r.length;){var o=r.shift(),i=r.shift();t.customColors[o]=i}}},{key:"command_store",value:function(t){if(f.viewport){var e=f.viewport.actorsById[t];e instanceof i.Chao&&this.print(JSON.stringify(e.store()))}}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Chao=h,p(h,"viewport",null),p(h,"helpText","List the chao in the current map.")}),require.register("console/task/Impulse.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Impulse=void 0;var o=e("subspace-console/Task");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.Task);var e,r,n,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call.apply(l,[this].concat(r))),"title","Impulse task"),u(c(t),"prompt",".."),t}return e=f,(r=[{key:"init",value:function(t,e){if(f.viewport.controlActor){var r=f.viewport.controlActor;r.standingOn&&r.standingOn.isVehicle&&(r=r.standingOn),r.impulse(t,e,!0)}}},{key:"write",value:function(t){this.print(t)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Impulse=f,u(f,"viewport",null),u(f,"helpText","Apply an impulse to the player object."),u(f,"useText","input magnitude angle")}),require.register("console/task/Input.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0;var o=e("subspace-console/Task");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.Task);var e,r,n,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call.apply(l,[this].concat(r))),"title","Input task"),u(c(t),"prompt",".."),t}return e=f,(r=[{key:"init",value:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=function(){};if(f.viewport.controlActor){var a=f.viewport.controlActor,s=a.controller;if("a"===t[0]){var c=t.substring(1);this.print("Setting axis ".concat(c," to ").concat(o," for ").concat(n," milliseconds...")),e={axes:u({},c,o)},r=setInterval(function(){s.replay(e),a.readInput()},16),i=function(){e.axes[c]=0,s.replay(e),a.readInput(),clearInterval(r)}}if("b"===t[0]){var l=t.substring(1);this.print("Pressing button ".concat(l," for ").concat(n," milliseconds...")),e={buttons:u({},l,1)},r=setInterval(function(){e.buttons[l]=1,s.replay(e),a.readInput()},16),i=function(){e.buttons[l]=0,s.replay(e),a.readInput(),clearInterval(r)}}if(e)return s.replay(e),a.readInput(),new Promise(function(t){setTimeout(function(){i(),t()},n)})}}},{key:"write",value:function(t){this.print(t)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Input=f,u(f,"viewport",null),u(f,"helpText","Press a button x for y milliseconds."),u(f,"useText","input x y")}),require.register("console/task/Mark.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Mark=void 0;var o=e("curvature/base/Router"),i=e("subspace-console/Task");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,i.Task);var e,r,n,l=c(u);function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),l.apply(this,arguments)}return e=u,(r=[{key:"init",value:function(t,e){if(u.viewport.controlActor){var r=u.viewport.controlActor;this.print("Character is at ".concat(r.x,", ").concat(r.y,".")),o.Router.setQuery("map",u.viewport.currentMap.replace(/^\/map\//,"")),o.Router.setQuery("start","".concat(Math.round(r.x),",").concat(Math.round(r.y)))}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.Mark=f,u(f,"viewport",null),u(f,"helpText","Mark the current actor's position in space as a start position.")}),require.register("console/task/Move.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Move=void 0;var o=e("subspace-console/Task");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.Task);var e,r,n,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call.apply(l,[this].concat(r))),"prompt",".."),t}return e=f,(r=[{key:"init",value:function(t,e){if(f.viewport.controlActor){this.print("Moving character to x, y...");var r=f.viewport.controlActor;r.args.x=Number(t),r.args.y=Number(e),r.viewport&&r.viewport.setColCell(r)}}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Move=f,u(f,"viewport",null),u(f,"helpText","Move the current actor to a position in space."),u(f,"useText","move x y")}),require.register("console/task/Pos.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Pos=void 0;var o=e("subspace-console/Task");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Task);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"init",value:function(t,e){if(l.viewport.controlActor){var r=l.viewport.controlActor;this.print("Character is at ".concat(r.x,", ").concat(r.y,"."))}}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Pos=u,l(u,"viewport",null),l(u,"helpText","Check the current actor's position in space.")}),require.register("console/task/Settings.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;var o=e("subspace-console/Task");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.Task);var e,r,n,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call.apply(l,[this].concat(r))),"prompt",".."),t}return e=f,(r=[{key:"init",value:function(t,e){var r=f.viewport;void 0!==e&&(r.settings[t]=JSON.parse(e)),this.print(JSON.stringify(r.settings[t]))}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Settings=f,u(f,"viewport",null),u(f,"helpText","Get/set the values of settings variables."),u(f,"useText","set key val")}),require.register("console/task/Spawn.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Spawn=void 0;var o=e("subspace-console/Task");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Task);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"init",value:function(t){if(l.viewport&&l.viewport.controlActor){var e=l.viewport.objectPalette,r=l.viewport.controlActor;if(t)if(t in e){var n=e[t];l.viewport.spawn.add({object:new n({x:r.x+128,y:r.y-128})})}else this.print('Type not found: "'.concat(t,'".'));else this.print(Object.keys(e).join(", "))}}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.Spawn=u,l(u,"viewport",null),l(u,"helpText","Spawn an object.")}),require.register("controller/Axis.js",function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(t,"__esModule",{value:!0}),t.Axis=void 0;var i=function(){function t(e){var r=e.deadZone,n=void 0===r?0:r,i=e.proportional,a=void 0===i||i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"magnitude",0),o(this,"delta",0),n&&(this.proportional=a,this.deadZone=n)}var e,r,i;return e=t,(r=[{key:"tilt",value:function(t){t=this.deadZone&&Math.abs(t)>=this.deadZone?(Math.abs(t)-this.deadZone)/(1-this.deadZone)*Math.sign(t):0,this.delta=Number(t-this.magnitude).toFixed(3)-0,this.magnitude=Number(t).toFixed(3)-0}},{key:"zero",value:function(){this.magnitude=this.delta=0}}])&&n(e.prototype,r),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.Axis=i}),require.register("controller/Button.js",function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"active",!1),o(this,"pressure",0),o(this,"delta",0),o(this,"time",0)}var e,r,i;return e=t,(r=[{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pressure?this.time++:!this.pressure&&this.time>0?this.time=-1:!this.pressure&&this.time<0&&this.time--,this.time<-1&&-1===this.delta&&(this.delta=0)}},{key:"press",value:function(t){this.delta=Number(t-this.pressure).toFixed(3)-0,this.pressure=Number(t).toFixed(3)-0,this.active=!0,this.time=this.time>0?this.time:0}},{key:"release",value:function(){this.active&&(this.delta=Number(-this.pressure).toFixed(3)-0,this.pressure=0,this.active=!1)}},{key:"zero",value:function(){this.pressure=this.delta=0,this.active=!1}}])&&n(e.prototype,r),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.Button=i}),require.register("controller/Controller.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;var n=e("./Axis"),o=e("./Button");function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l={Space:0,Enter:0,NumpadEnter:0,ControlLeft:1,ControlRight:1,ShiftLeft:2,ShiftRight:2,KeyZ:3,KeyQ:4,KeyE:5,Digit1:6,Digit3:7,KeyW:12,KeyA:14,KeyS:13,KeyD:15,KeyH:112,KeyJ:113,KeyK:114,KeyL:115,KeyP:1020,Pause:1020,Tab:11,ArrowUp:12,ArrowDown:13,ArrowLeft:14,ArrowRight:15,Numpad4:112,Numpad2:113,Numpad8:114,Numpad6:115,Backquote:1010,NumpadAdd:1011,NumpadSubtract:1012,NumpadMultiply:1013,NumpadDivide:1014,Escape:1020};s(Array(12)).map(function(t,e){return l["F".concat(e)]=2e3+e});var u={12:-1,13:1,14:-0,15:0,112:-2,113:3,114:-3,115:2},f={"-6":14,"+6":15,"-7":12,"+7":13},p=function(){function t(e){e.keys;var r=e.deadZone,n=void 0===r?0:r;e.gamepad,e.keyboard;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.deadZone=n,Object.defineProperties(this,{buttons:{value:{}},pressure:{value:{}},axes:{value:{}},keys:{value:{}}})}var e,r,c;return e=t,(r=[{key:"update",value:function(t){var e=t.gamepad;for(var r in this.buttons){this.buttons[r].update()}e&&this.willRumble&&("object"!==i(this.willRumble)&&(this.willRumble={duration:1e3,strongMagnitude:1,weakMagnitude:1}),e.vibrationActuator&&e.vibrationActuator.playEffect("dual-rumble",this.willRumble),this.willRumble=!1)}},{key:"rumble",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.willRumble=t}},{key:"readInput",value:function(t){var e=t.keyboard,r=t.gamepad,i={},a={};if(r)for(var c in r.buttons){var p=r.buttons[c];p.pressed&&(this.press(c,p.value),i[c]=!0)}if(e){for(var h in s(Array(10)))i[h]||e.getKeyCode(h)>0&&(this.press(h,1),i[h]=!0);for(var g in l)if(!i[g]){var d=l[g];e.getKeyCode(g)>0&&(this.press(d,1),i[d]=!0)}}if(r)for(var y in r.buttons){if(!i[y])r.buttons[y].pressed||(this.release(y),a[y]=!0)}if(e){for(var b in s(Array(10)))a[b]||i[b]||e.getKeyCode(b)<0&&(this.release(b),a[b]=!0);for(var v in l){var m=l[v];a[m]||(i[m]||e.getKeyCode(v)<0&&(this.release(m),a[v]=!0))}}var w={};if(r)for(var S in r.axes){var O=r.axes[S];w[S]=!0,this.tilt(S,O)}for(var k in u){this.buttons[k]||(this.buttons[k]=new o.Button);var x=u[k],j=Math.sign(1/x),P=Math.abs(x);this.buttons[k].active?(w[P]=!0,this.tilt(P,j)):w[P]||this.tilt(P,0)}for(var _ in f){var R=f[_];if(!a[R]&&!i[R]){var M=[_.slice(0,1),_.slice(1)],T=M[1];this.axes[T]||(this.axes[T]=new n.Axis({deadZone:this.deadZone}));var E=this.axes[T];if(!E.magnitude||Math.sign(_)===Math.sign(E.magnitude)){var A=Math.abs(E.magnitude);A?this.press(R,A):this.release(R,A)}}}}},{key:"tilt",value:function(t,e){this.axes[t]||(this.axes[t]=new n.Axis({deadZone:this.deadZone})),this.axes[t].tilt(e)}},{key:"press",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.buttons[t]||(this.buttons[t]=new o.Button),this.buttons[t].press(e)}},{key:"release",value:function(t){this.buttons[t]||(this.buttons[t]=new o.Button),this.buttons[t].release()}},{key:"serialize",value:function(){var t={};for(var e in this.buttons)t[e]=this.buttons[e].pressure;var r={};for(var n in this.axes)r[n]=this.axes[n].magnitude;return{axes:r,buttons:t}}},{key:"replay",value:function(t){if(t.buttons)for(var e in t.buttons)t.buttons[e]>0?this.press(e,t.buttons[e]):this.release(e);if(t.axes)for(var r in t.axes)t.axes[r].magnitude!==t.axes[r]&&this.tilt(r,t.axes[r])}},{key:"zero",value:function(){for(var t in this.axes)this.axes[t].zero();for(var e in this.buttons)this.buttons[e].zero()}}])&&a(e.prototype,r),c&&a(e,c),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.Controller=p}),require.register("controller/GamepadConfig.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GamepadConfig=void 0;var o=e("curvature/base/View");e("../intro/Card");function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.View);var r,n,l,u=c(f);function f(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(n=u.call(this,t,r)).template=e("./gamepad-config.html"),n.args.cardName="gamepad-config-card",n.gamepads={xb:o.View.from(e("./xbox360-input.svg")),ps:o.View.from(e("./ps3-input.svg")),gc:o.View.from(e("./gc-input.svg")),dc:o.View.from(e("./dc-input.svg"))},n.current=0,n.buttons=[],n.sticks={},n}return r=f,(n=[{key:"onAttached",value:function(){this.span=this.findTag("div"),this.args.text=Object.values(this.gamepads)[this.current],this.args.type=Object.keys(this.gamepads)[this.current]}},{key:"swap",value:function(){this.current++;var t=Object.values(this.gamepads),e=Object.keys(this.gamepads);this.current>=t.length&&(this.current=0),this.args.text=t[this.current],this.args.type=e[this.current]}},{key:"exit",value:function(){this.remove()}},{key:"input",value:function(t){if(this.span){var e=0,r=0,n=0,o=0;for(var a in t.axes[0]&&(e=t.axes[0].magnitude),t.axes[1]&&(r=t.axes[1].magnitude),t.axes[2]&&(n=t.axes[2].magnitude),t.axes[3]&&(o=t.axes[3].magnitude),this.span.style({"--x":e,"--y":r,"--a":n,"--b":o}),t.buttons)t.buttons[a]?this.span.style(i({},"--pressed-".concat(a),t.buttons[a].pressure)):this.span.style(i({},"--pressed-".concat(a),0))}}}])&&a(r.prototype,n),l&&a(r,l),Object.defineProperty(r,"prototype",{writable:!1}),f}();t.GamepadConfig=u}),require.register("controller/dc-input.svg",function(t,e,r){r.exports='<svg version="1.0" viewBox="0 0 512 288" xmlns="http://www.w3.org/2000/svg">\n <defs>\n  <clipPath id="a">\n   <ellipse cx="296.69" cy="214.12" rx="206.77" ry="205.42" display="none" fill="#4d4d4d"/>\n   <path class="powerclip" d="m8.0946 3.7805h575.41v590.04h-575.41zm495.36 210.34a206.77 205.42 0 0 0-206.77-205.42 206.77 205.42 0 0 0-206.77 205.42 206.77 205.42 0 0 0 206.77 205.42 206.77 205.42 0 0 0 206.77-205.42z" display="block" fill="#4d4d4d"/>\n  </clipPath>\n </defs>\n <g transform="translate(-260.34 -473.69)">\n  <path d="m437.18 546.97c0.0704-0.35215 1.3382-5.8456 1.479-6.7612 0.14086-0.91559 0.35215-1.4086 1.479-2.1833 10.576-7.2713 5.4994-7.4732 17.763-5.4952 2.1833 0.35214 5.0005 5.8456 5.0005 5.8456z" fill="#d8d8d8" fill-rule="evenodd" stroke="#000" stroke-width=".96695" data-button="button-6"/>\n  <path d="m595.5 546.97c-0.0704-0.35215-1.3382-5.8456-1.479-6.7612-0.14086-0.91559-0.35215-1.4086-1.479-2.1833-10.576-7.2713-5.4994-7.4732-17.763-5.4952-2.1833 0.35214-5.0005 5.8456-5.0005 5.8456z" fill="#d8d8d8" fill-rule="evenodd" stroke="#000" stroke-width=".96695" data-button="button-7"/>\n  <path d="m604.24 553.13c-0.0704-0.35215-1.3382-5.8456-1.479-6.7612-0.14086-0.91559-0.35215-1.4086-1.479-2.1833-10.576-7.2713-22.951-10.782-35.215-8.8037-2.1833 0.35214-5.0005 5.8456-5.0005 5.8456z" fill="#d8d8d8" fill-rule="evenodd" stroke="#000" stroke-width=".96695" data-button="button-5"/>\n  <path d="m428.44 553.13c0.0704-0.35215 1.3382-5.8456 1.479-6.7612 0.14086-0.91559 0.35215-1.4086 1.479-2.1833 10.576-7.2713 22.951-10.782 35.215-8.8037 2.1833 0.35214 5.0005 5.8456 5.0005 5.8456z" fill="#d8d8d8" fill-rule="evenodd" stroke="#000" stroke-width=".96695" data-button="button-4"/>\n  <g transform="matrix(.34401 0 0 .34401 414.97 503.95)">\n   <ellipse cx="294.98" cy="208.06" rx="205.59" ry="199.11" fill="none" stroke="#000" stroke-width="7.4"/>\n   <ellipse cx="295.57" cy="214.12" rx="206.77" ry="205.42" display="block" fill="#e6e6e6"/>\n   <rect x="255.55" y="18.994" width="93.05" height="71.373" fill="#d35f5f" stroke-width=".67124"/>\n   <rect x="234.74" y="140.67" width="129.82" height="113.54" fill="#666"/>\n   <g transform="translate(-1.12)" fill="#1a1a1a">\n    <g>\n     <path d="m243.78 111.34c0.838 0 1.818-0.043 2.687-0.135s1.481-0.397 2.167-0.636 1.377-0.643 2.02-1.261c0.637-0.618 1.157-1.316 1.548-2.099 0.392-0.784 0.673-1.659 0.845-2.632 0.171-0.967 0.239-1.952 0.196-2.95-0.042-1.12-0.343-1.953-0.648-2.907-0.306-0.955-0.881-2.154-1.671-2.803-0.869-0.716-1.493-1.224-2.387-1.481-0.894-0.251-2.154-0.637-3.599-0.637-0.881 0-2.05 0.062-2.62 0.128-0.593 0.074-1.138 0.147-1.885 0.159l0.196 17.228c1.162 0.038 2.154 0.026 3.151 0.026z" fill="#1a1a1a"/>\n     <path d="m278.33 102.96c-0.031-0.624 0-0.416-0.073-0.765-0.074-0.343-0.166-0.618-0.349-0.991-0.184-0.367-0.502-0.624-0.795-0.894-0.294-0.27-0.643-0.478-1.053-0.618-0.404-0.147-1.01-0.22-1.475-0.22-0.501 0-0.948 0.153-1.395 0.312s-0.838 0.374-1.175 0.649c-0.336 0.275-0.618 0.6-0.844 0.967-0.227 0.367-0.392 0.729-0.496 1.071-0.042 0.135-0.049 0.147-0.042 0.153 6e-3 6e-3 0.03-0.012-0.025 0.336z" fill="#1a1a1a"/>\n     <path d="m291.54 104.42c-0.3 0.27-0.441 0.343-0.587 0.453-0.147 0.11-0.361 0.171-0.551 0.269-0.19 0.092-0.447 0.116-0.68 0.202-0.226 0.085-1.022 0.11-1.346 0.153-0.691 0.086-1.15 0.159-1.426 0.27-0.6 0.214-0.955 0.275-1.298 0.496-0.342 0.22-0.612 0.551-0.838 0.808-0.227 0.257-0.312 0.49-0.404 0.747-0.104 0.318-0.092 0.655-0.073 0.998 0.018 0.538 0.434 1.132 0.734 1.523 0.293 0.398 0.3 0.257 0.679 0.526 0.379 0.263 0.918 0.404 1.518 0.404 0.374 0 0.759-0.031 1.157-0.092 0.306-0.043 0.637-0.239 1.096-0.392 0.146-0.049 0.489-0.361 0.655-0.422 0 0 0.422-0.342 0.844-1.077 0.422-0.734 0.508-1.952 0.508-1.952z" fill="#1a1a1a"/>\n     <path d="m341.81 104.23c-0.294 0.27-0.44 0.349-0.588 0.459-0.146 0.11-0.379 0.153-0.569 0.251-0.189 0.092-0.428 0.135-0.66 0.22-0.227 0.086-1.022 0.11-1.347 0.153-0.691 0.085-1.15 0.159-1.426 0.269-0.6 0.22-0.961 0.282-1.304 0.496-0.343 0.221-0.618 0.551-0.845 0.808s-0.318 0.489-0.404 0.747c-0.104 0.318-0.085 0.655-0.073 1.003 0.019 0.533 0.435 1.132 0.734 1.524 0.3 0.398 0.3 0.257 0.686 0.526 0.38 0.263 0.918 0.404 1.524 0.404 0.373 0 0.759-0.03 1.162-0.092 0.307-0.042 0.643-0.245 1.096-0.392 0.146-0.049 0.489-0.361 0.655-0.422 0 0 0.422-0.343 0.844-1.077 0.423-0.729 0.509-1.953 0.509-1.953z" fill="#1a1a1a"/>\n     <path d="m79.619 239.47c24.811 0 44.995-20.073 44.995-44.748s-20.184-44.748-44.995-44.748-44.997 20.073-44.997 44.748 20.192 44.748 44.997 44.748z" fill="#ececec"/>\n     <polygon transform="matrix(1.6291,0,0,1.6291,-178.01,-257.79)" points="318.12 444.41 293.78 403.06 269.44 444.41" fill="#fff" stroke-width=".61384"/>\n     <path d="m119.14 577.38c12.815-43.023 10.985-43.023 17.393-58.582 6.408-15.562 19.223-16.475 35.698-20.135 15.404-3.42 80.508-11.378 123.02-12.431 6e-3 0.117 0 0 0 0l11.652-0.15207-0.013-0.092s75.652 4.8914 112.49 12.675c16.476 3.66 29.291 4.578 35.698 20.135 6.407 15.564 4.578 15.564 17.394 58.582 12.814 43.018 69.554-66.818 95.184-228.83 25.631-162.01-11.848-224.91-22.222-230.4-10.373-5.49-79.382-20.404-79.382-20.404-18.269-23.911-37.871-41.377-57.039-54.199v181.14c0 53.85-43.807 97.657-97.656 97.657h-21.524c-53.85 0-97.657-43.808-97.657-97.657v-187.17c-22.156 13.194-45.296 32.319-66.624 60.232 0 0-69.009 14.908-79.382 20.404-10.374 5.49-47.853 68.385-22.222 230.4 25.624 162.01 82.375 271.85 95.19 228.83zm373.77-258.73c-13.801 0-25.031-11.223-25.031-25.024s11.23-25.031 25.031-25.031c13.8 0 25.024 11.224 25.024 25.031 1e-3 13.802-11.224 25.024-25.024 25.024zm48.207-96.432c13.801 0 25.03 11.224 25.03 25.031 0 13.801-11.229 25.025-25.03 25.025s-25.031-11.224-25.031-25.025 11.23-25.031 25.031-25.031zm-47.601-46.989c13.801 0 25.031 11.224 25.031 25.031 0 13.8-11.23 25.024-25.031 25.024s-25.03-11.224-25.03-25.024c5e-3 -13.801 11.229-25.031 25.03-25.031zm-48.207 46.383c13.801 0 25.024 11.224 25.024 25.031 0 13.801-11.224 25.025-25.024 25.025s-25.031-11.224-25.031-25.025c6e-3 -13.807 11.236-25.031 25.031-25.031zm-176.43 232.05 28.458-48.342c1.408-2.418 5.056-2.441 6.5-6e-3l28.451 48.342c0.729 1.242 0.759 2.662 0.099 3.818-0.655 1.15-1.91 1.842-3.33 1.842h-56.928c-1.426 0-2.674-0.691-3.335-1.842-0.668-1.156-0.631-2.582 0.085-3.812zm-136.01-171.33c2.699 0 4.896 2.191 4.896 4.89v26.23h26.23c2.693 0 4.89 2.191 4.89 4.891v23.801c0 2.697-2.191 4.889-4.89 4.889h-26.23v26.23c0 2.693-2.191 4.891-4.896 4.891h-23.801c-2.692 0-4.89-2.191-4.89-4.891v-26.23h-26.23c-2.693 0-4.89-2.191-4.89-4.889v-23.801c0-2.693 2.191-4.891 4.89-4.891h26.23v-26.23c0-2.699 2.191-4.89 4.89-4.89zm-54.009-133.64c24.902 0 45.166 20.263 45.166 45.166s-20.263 45.166-45.166 45.166-45.166-20.263-45.166-45.166 20.264-45.166 45.166-45.166z" clip-path="url(#b)" fill="#e6e6e6"/>\n     <path d="m371.79 133.6h-142.4v126.1h142.4zm-8.256 117.31c0 0.985-0.796 1.781-1.781 1.781h-122.33c-0.979 0-1.781-0.796-1.781-1.781v-108.51c0-0.985 0.795-1.781 1.781-1.781h122.33c0.985 0 1.781 0.795 1.781 1.781z" fill="#1a1a1a"/>\n     <path d="m289.82 316.22h21.523c50.558 0 91.537-40.985 91.537-91.536v-6.089l0.0627-180.67c-46.252-27.867-85.605-28.475-100.38-29.284-3.6348-0.19916-6.7928-0.03767-6.7928-0.03767s-2.9265-0.19568-6.6277-0.015294c-13.717 0.66851-50.54 2.3407-91.789 25.089l0.93221 184.88v6.12c0 50.552 40.986 91.537 91.537 91.537zm66.506-218.18 1.806-0.061c0.018-0.379-0.031-1.567-0.031-2.497 0-0.453-0.227-0.869-0.41-1.096 0.82-0.184 2.069-0.563 2.638-0.728-6e-3 1.469 0.099 3.556 0.117 4.321l3.684 0.055c-0.019 0.63 0.049 0.851 0.062 1.419l-1.016-0.122h-2.705l-0.05 8.103-0.024 0.679c0.024 0.723 0.123 1.641 0.282 2.001 0.159 0.361 0.385 0.496 0.679 0.655 0.3 0.159 0.637 0.196 0.949 0.196 0.22 0 0.551-6e-3 0.808-6e-3s0.435-0.019 1.071-0.202c-0.08 0.478-0.209 0.741-0.294 1.536-0.588 0.166-0.857 0.208-1.206 0.245-0.349 0.043-0.679-0.067-0.997-0.067-0.777 0-1.414-0.11-1.903-0.337-0.49-0.22-0.869-0.575-1.139-1.071-0.275-0.49-0.465-1.708-0.496-2.552-6e-3 -0.11-6e-3 -0.3-0.012-0.575 0-0.275-0.019-0.551 0-2.197l-0.056-6.402h-1.774c0.023-0.397 0.023-0.519 0.017-1.297zm-2.932 9.309c-0.135-0.184-0.643-0.618-0.899-0.838-0.257-0.227-0.937-0.557-1.824-0.924-0.899-0.379-2.044-0.74-2.46-1.089-0.416-0.355-1.175-0.759-1.475-1.132s-0.526-0.74-0.68-1.12c-0.153-0.374-0.043-0.943-0.055-1.328-0.024-0.618 0.36-1.254 0.728-1.836 0.361-0.575 0.992-0.9 1.714-1.188 0.723-0.281 1.579-0.428 2.564-0.428 1.102 0 2.166 0.214 3.501 0.471 0.073 0.753-0.099 1.273-7e-3 1.897-0.961-0.636-2.025-0.955-3.072-0.955-0.568 0-1.145 0.086-1.621 0.233-0.478 0.146-1.01 0.624-1.218 0.918-0.215 0.3-0.331 0.581-0.318 0.936 6e-3 0.233 0.079 0.618 0.165 0.833 0.086 0.214 0.648 0.808 0.942 0.937 0.404 0.177 0.245 0.153 0.612 0.232 0.416 0.092 1.444 0.618 2.423 1.083 1.017 0.483 1.946 1.089 2.265 1.408 0.324 0.318 0.637 0.759 0.931 1.438 0.165 0.38 0.257 0.826 0.257 1.145 0 0.551-0.146 0.625-0.129 0.967 0.031 0.673-0.141 0.924-0.514 1.5s-1.071 1.126-1.849 1.444c-0.777 0.318-1.604 0.582-2.576 0.582-0.416 0-1.377 0.049-1.934-6e-3 -0.558-0.049-1.035-0.239-1.427-0.312s-0.643-0.092-1.224-0.232l-0.202-0.985c-6e-3 -0.116-0.263-0.771-0.373-1.396 1.646 0.906 3.385 1.542 4.633 1.542 0.654 0 1.304-0.19 1.75-0.361 0.447-0.171 0.882-0.489 1.096-0.826 0.208-0.336 0.44-0.661 0.521-1.016 0.049-0.196 0.11-0.459 0.061-0.637-0.067-0.211-0.171-0.774-0.306-0.957zm-86.138-55.282c0.324-2.111 0.955-4.223 1.364-5.673 0.973-3.47 3.581-8.672 4.841-10.429s1.762-2.295 3.592-4.339 0.783-0.637 4.174-3.421c3.384-2.785 7.938-4.78 9.933-5.587 1.995-0.814 5.037-2.301 10.521-2.668s8.794 0.312 11.854 0.667c3.586 0.417 10.435 2.754 10.435 2.754s3.996 1.805 7.093 3.837c1.671 1.004 3.158 2.987 4.676 4.927 2.087 2.668 4.131 6.028 4.425 6.505 0.508 0.814 2.778 4.908 3.256 6.426s1.542 7.117 1.628 7.729 0.937 4.051-2.001 4.253c-3.22 0.22-3.55-3.066-3.758-4.002-0.214-0.942-2.387-8.158-3.14-9.517s-5.264-7.962-7.265-10.135-5.894-4.951-10.141-6.255c-4.063-1.254-10.961-2.479-15.6-2.276-4.076 0.177-5.416 0.459-7.191 1.022-3.629 1.157-6.812 2.993-9.015 4.382-2.203 1.383-5.899 4.357-7.515 6.383-1.916 2.405-5.166 8.354-5.888 11.64-1.334 6.114-0.502 12.014-0.502 12.014s1.506 11.579 9.015 17.521c2.938 2.332 5.336 3.562 12.02 5.379 0.937 0.257 3.978 0.471 7.778 0.496 3.801 0.019 4.957-0.11 7.124-0.869 2.16-0.759 2.852-0.894 4.504-1.75 1.659-0.857 4.505-1.799 7.559-4.811 1.707-1.689 3.837-5.006 4.719-8.329 0.514-1.946 0.189-2.552 0.122-5.104-0.019-0.783-0.092-1.493-0.153-2.167-0.146-1.524-0.397-2.938-0.93-5.178-0.771-3.231-0.539-2.387-1.292-4.449-0.52-1.42-1.107-2.577-1.523-3.25s-0.814-1.12-1.273-1.818c-3.17-4.841-9.431-8.011-15.232-8.201-1.934-0.067-4.314 0.135-6.714 0.894-1.628 0.514-3.268 1.346-4.786 2.271-0.63 0.379-1.23 0.673-1.812 1.132-0.587 0.471-0.942 0.606-1.462 1.157-0.471 0.501-1.114 1.628-1.5 2.136-4.725 6.065-3.629 11.689-3.629 11.689s-0.44 13.207 13.52 14.646c3.525 0.171 9.89-2.087 12.301-4.67 1.481-1.591 1.585-4.437 1.536-6.964-0.036-2.001-1.016-5.551-2.552-6.922-3.342-2.98-6.12-3.072-7.576-3.158-1.94-0.123-4.7 0.477-5.79 4.725-0.38 1.475 0.777 4.547 2.962 4.982 1.879 0.379 3.88 0 4.762 0.128 0.783 0.11 1.971-0.153 1.971 2.313-0.221 4.321-9.633 1.903-9.737 1.812-0.722-0.624-4.969-3.042-5.134-7.631-0.178-4.847 2.099-8.507 6.236-10.576 1.041-0.52 2.956-0.783 4.254-0.838 3.524 0.171 6.021 0.63 8.604 2.02 0.483 0.263 0.979 0.477 1.512 0.838 0.165 0.11 0.802 0.557 0.899 0.618 3.023 2.601 4.284 6.035 4.884 9.499 0.238 1.377 0.232 2.662 0.275 3.678 0.08 1.738-0.122 3.843-1.01 5.82-0.942 2.112-2.638 4.082-5 5.318-2.295 1.2-5.643 3.103-10.264 3.672-2.784 0.342-6.021 0.287-9.773-0.924-10.643-3.439-11.646-15.514-11.646-15.514s-2.173-8.898 3.69-16.916c0.618-0.844 1.322-1.928 2.129-2.735 2.644-2.644 5.012-4.015 7.185-5.166 3.99-2.111 6.916-2.595 7.779-2.595 0.618 0 2.093-0.085 3.824 0.043 1.983 0.141 4.309 0.526 6.065 0.955 1.928 0.471 3.537 0.851 4.792 1.383 1.188 0.508 2.038 1.175 2.968 1.744 1.922 1.169 4.982 3.488 6.017 5.055 1.07 1.628 2.589 3.715 3.77 7.387 0.691 2.154 1.273 5.232 1.983 8.703 1.064 5.196 0.679 10.447-0.502 13.764-0.129 0.355-1.451 4.566-5.637 8.513-4.187 3.954-9.455 6.193-11.016 6.817-1.567 0.625-3.795 2.521-12.332 2.381-7.387-0.123-12.987-2.081-14.651-2.754-1.665-0.673-6.059-2.068-10.833-7.319-4.773-5.257-5.814-8.648-6.573-10.949s-2.191-8.195-2.191-8.195 0.171-0.024-0.171-3.066c-0.129-1.359-0.111-3.133 0.159-4.908zm73.825 59.388c-0.465 0.386-0.937 0.673-1.236 0.857-0.637 0.134-1.021 0.281-1.426 0.312-0.404 0.037-0.783 0.049-1.15 0.049-1.212 0-2.1-0.367-2.791-0.686-0.691-0.318-1.261-0.875-1.622-1.523-0.36-0.649-0.44-1.243-0.471-2.008-0.019-0.446 0.11-0.905 0.22-1.279 0.104-0.379 0.251-0.716 0.447-1.022 0.189-0.306 0.33-0.539 0.691-0.851 0.361-0.306 0.575-0.478 0.979-0.673 0.403-0.202 0.777-0.288 1.315-0.483 0.539-0.196 1.524-0.263 2.785-0.441 0.385-0.098 0.71-0.073 0.979-0.177 0.27-0.104 0.509-0.208 0.717-0.306s0.385-0.214 0.538-0.349 0.294-0.3 0.416-0.49c0.129-0.196 0.215-0.141 0.27-0.336 0.055-0.196 0.024-0.294 0.019-0.496-0.019-0.489-0.043-0.765-0.337-1.107s-0.637-0.833-1.102-0.967c-0.459-0.141-1.23-0.361-1.849-0.361-0.575 0-1.046 0.073-1.646 0.178-0.6 0.104-1.114 0.232-1.549 0.373-0.429 0.147-0.918 0.361-1.561 0.649 0.062-0.435 0.013-1.065 0.062-1.922 1.053-0.306 1.609-0.453 2.387-0.563s1.928-0.178 2.674-0.178c0.796 0 1.292 0.171 1.995 0.337 0.698 0.165 1.586 0.777 1.91 1.261 0.336 0.496 0.648 0.856 0.819 1.334 0.172 0.478 0.404 1.42 0.429 1.958 0.024 0.679 0.062 0.239 0.037 1.842-0.024 1.609 0.073 4.547 0.061 5.912-6e-3 0.833 0.099 0.912 0.318 2.038-0.483-0.019-1.102 0.024-1.401 0.024-0.287 0-0.71-0.043-1.236-0.024v-1.53c7e-3 6e-3 -0.226 0.263-0.691 0.648zm-19.155-3.378c0.336 0.838 0.899 1.659 1.683 2.118s1.701 0.906 2.662 0.906c0.931 0 2.889-0.098 5.013-1.224-0.013 0.159-0.098 0.514-0.153 0.942-0.055 0.435-0.178 0.796-0.214 1.212-0.637 0.166-1.31 0.349-1.903 0.41-0.588 0.061-2.197 0.165-2.644 0.165-0.949 0-2.051-0.196-2.864-0.483-0.814-0.288-1.83-0.832-2.448-1.487-0.624-0.655-1.328-1.31-1.646-2.283s-0.545-1.909-0.581-2.993c-0.056-1.457 0.177-1.946 0.587-3.25 0.404-1.31 1.438-2.252 2.394-2.993 0.954-0.741 3.164-1.371 4.859-1.371 1.248 0 2.711 0.208 3.91 0.575 0.086 0.851 0.116 1.31 0.178 1.861-0.845-0.3-1.616-0.649-2.148-0.753s-1.199-0.202-1.652-0.202c-0.771 0-2.411 0.343-3.011 0.655-0.6 0.318-1.102 0.765-1.512 1.353-0.41 0.581-0.734 1.395-0.894 2.197s-0.221 0.869-0.189 1.702c0.04 1.125 0.23 2.104 0.573 2.943zm-6.898-5.263c-0.019-0.575-0.189-1.224-0.306-1.548-0.116-0.324-0.704-0.924-0.949-1.187-0.244-0.263-0.611-0.312-0.961-0.447-0.349-0.135-0.911-0.166-1.353-0.166-0.354 0-0.802 0.062-1.095 0.147-0.275 0.086-0.551 0.147-0.809 0.331-0.281 0.189-0.532 0.3-0.752 0.575-0.221 0.27-0.398 0.575-0.545 0.912-0.153 0.349-0.159 0.869-0.189 1.432-0.037 0.606 0.03 1.383 0.012 2.252-0.024 0.918-0.024 4.56 0 6.065l0.422 1.346c-0.514-0.018-1.272-0.03-1.529-0.03-0.239 0-0.894 6e-3 -1.457 0.03 0.043-1.224 0.19-0.11 0.196-1.407l0.024-5.594c0-1.108-0.013-2.057-0.043-2.833-0.019-0.508-0.079-0.686-0.184-1.041-0.098-0.355-0.275-0.802-0.532-1.096-0.251-0.293-0.808-0.765-1.15-0.918-0.35-0.153-0.839-0.269-1.268-0.269-0.452 0-0.746 0.049-1.138 0.22s-0.734 0.251-1.059 0.594c-0.318 0.336-0.588 0.373-0.796 0.869-0.208 0.489-0.367 0.385-0.459 1.181-0.098 0.795-0.141 3.69-0.135 5.667 6e-3 1.169 0.019 2.228 0.037 3.183 0.012 0.654 0.281 0.887 0.306 1.444-0.569-0.018-1.212-0.03-1.42-0.03-0.232 0-1.01 6e-3 -1.585 0.03l0.318-1.028c0.012-0.453 0.019-1.922 0.024-2.901l-0.147-8.292c-0.018-0.741-0.416-1.628-0.435-2.014 0.41 0.012 1.335-0.135 1.763-0.294 0.343-0.128 0.729-0.128 1.09-0.141l-6e-3 1.928c0.275-0.557 0.776-0.612 1.01-0.942 0.232-0.324 0.471-0.312 0.856-0.587s0.624-0.288 1.139-0.361c0.63-0.092 1.027-0.123 1.572-0.123 0.38 0 0.753 0.049 1.126 0.147 0.374 0.098 0.717 0.239 1.041 0.417 0.318 0.177 0.594 0.379 0.826 0.605 0.232 0.227 0.483 0.349 0.691 0.741 0.073 0.128 0.637-0.624 1.426-1.083 0.79-0.453 1.72-0.802 2.711-0.802 0.637 0 2.057 0.085 2.662 0.312 0.606 0.227 1.463 0.557 1.836 0.979 0.367 0.429 0.478 0.618 0.809 0.967 0.41 0.435 0.538 1.53 0.562 1.995 0.019 0.477 0.067 1.199 0.067 2.16l6e-3 6.818c0 0.655 0.19 0.734 0.312 1.481-0.471-0.019-1.083-0.031-1.353-0.031-0.281 0-0.955 6e-3 -1.506 0.031 0.367-1.169 0.294-0.771 0.325-1.487l0.024-6.181c-2e-3 -0.87-7e-3 -1.384-0.032-2.026zm-24.217 8.831c-0.459 0.386-0.937 0.667-1.23 0.857-0.637 0.135-1.016 0.282-1.42 0.312-0.404 0.031-0.79 0.049-1.151 0.049-1.206 0-2.093-0.367-2.784-0.686-0.692-0.318-1.255-0.875-1.616-1.524-0.361-0.648-0.441-1.242-0.471-2.007-0.019-0.447 0.116-0.906 0.22-1.279 0.104-0.374 0.251-0.716 0.44-1.022 0.19-0.306 0.331-0.539 0.692-0.844 0.361-0.306 0.575-0.478 0.979-0.673s0.771-0.288 1.31-0.483c0.539-0.19 1.524-0.263 2.778-0.441 0.38-0.098 0.71-0.073 0.979-0.177s0.508-0.208 0.716-0.306 0.386-0.214 0.539-0.349 0.294-0.3 0.417-0.49c0.128-0.196 0.214-0.263 0.269-0.459s0.024-0.294 0.019-0.496c-0.019-0.49-0.043-0.637-0.337-0.985-0.293-0.349-0.636-0.833-1.095-0.967s-1.224-0.361-1.842-0.361c-0.575 0-1.046 0.074-1.646 0.177-0.6 0.104-1.114 0.233-1.548 0.374-0.429 0.147-0.918 0.361-1.561 0.649 0.062-0.441 0.012-1.065 0.062-1.928 1.046-0.3 1.604-0.453 2.38-0.563 0.777-0.11 1.928-0.177 2.668-0.177 0.795 0 1.292 0.171 1.989 0.336 0.704 0.166 1.579 0.777 1.904 1.261 0.336 0.496 0.648 0.851 0.82 1.328 0.165 0.478 0.404 1.42 0.428 1.958 0.025 0.686 0.062 0.239 0.037 1.842-0.025 1.609 0.073 4.547 0.061 5.912-6e-3 0.826 0.098 0.912 0.318 2.038-0.478-0.019-1.096 0.024-1.402 0.024-0.281 0-0.709-0.043-1.236-0.024v-1.53c6e-3 0.011-0.227 0.268-0.686 0.654zm-19.975-3.109c0.422 0.875 0.991 1.438 1.769 1.891 0.777 0.447 1.805 0.839 2.791 0.839 1.139 0 3.213-0.478 4.915-1.328-0.085 0.539-0.263 1.242-0.336 2.075-0.838 0.238-2.222 0.771-2.84 0.856-0.618 0.086-1.23 0.104-1.848 0.104-1.102 0-2.197-0.275-3.084-0.569-0.888-0.3-1.775-0.912-2.424-1.652-0.655-0.735-1.297-1.536-1.603-2.491-0.312-0.948-0.386-1.909-0.429-2.968-0.055-1.475 0.184-2.025 0.637-3.286s1.401-2.179 2.387-2.901c0.979-0.722 2.246-1.083 3.794-1.083 0.802 0 1.713 0.062 2.454 0.325 0.74 0.263 1.365 0.539 1.867 1.071 0.508 0.539 0.93 1.071 1.224 1.86 0.294 0.79 0.361 0.802 0.526 1.72 0.074 0.429 0.129 1.102 0.092 1.438l-10.49 0.061c-0.012 0.545-0.049 0.814-0.037 1.096 0.029 1.045 0.212 2.067 0.635 2.942zm-11.12-10.288c0.318-0.067 1.102-0.177 1.518-0.189l6e-3 2.644c0.3-0.612 0.318-0.575 0.563-0.881 0.239-0.312 0.624-0.667 0.93-0.869 0.312-0.202 0.649-0.49 1.046-0.606 0.392-0.117 0.753-0.282 1.188-0.3 0.343-0.012 0.667-0.061 1.548 0.031 0.887 0.092 1.353 0.294 1.548 0.349 0.019 0.355-0.649 1.989-0.649 1.989s-0.636-0.055-1.211-0.293c-0.551-0.166-0.924-0.166-1.359-0.166-0.514 0-1.12 0.116-1.524 0.312-0.404 0.19-0.79 0.422-1.102 0.814s-0.52 0.796-0.71 1.34c-0.159 0.441-0.104 0.073-0.165 0.765-0.067 0.691-6e-3 7.326 0.049 8.819l0.263 0.857c-0.483-0.019-1.169 0-1.462 0-0.27 0-0.924 0.012-1.469 0.03 0-0.281 0.282-0.673 0.288-0.942 0.067-4.633-0.03-8.213-0.141-11.206l-0.049-1.261-0.44-1.071c0.446-0.05 1.052-0.111 1.334-0.166zm-18.654-6.224c0.533 0 1.322 0.086 2.436 0.062 1.114-0.025 2.105 0 2.546 0.042 1.585 0.147 1.989 0.233 3.078 0.502 0.826 0.196 2.393 1.034 3.091 1.53 0.704 0.496 1.401 1.064 1.97 1.866 0.563 0.802 0.845 1.059 1.224 1.989 0.508 1.261 0.802 2.625 0.851 3.892 0.067 1.732-0.116 3.06-0.618 4.651-0.496 1.591-1.603 2.772-2.668 3.837s-2.234 1.708-3.593 2.044c-1.365 0.336-2.901 0.667-4.596 0.667l-3.991-0.03-3.8-0.092 0.539-1.42-0.043-17.528c-0.012-0.508-0.251-1.034-0.501-1.922 1.198 0.027 3.224-0.09 4.075-0.09zm-17.797 168.64v-128.02c0-2.846 2.313-5.159 5.159-5.159h144.32c2.846 0 5.159 2.313 5.159 5.159v128.02c0 2.846-2.313 5.159-5.159 5.159h-144.32c-2.846 1e-3 -5.159-2.312-5.159-5.158z" fill="#1a1a1a"/>\n     <ellipse cx="493.55" cy="200.22" rx="25.204" ry="25.115" fill="#fff"/>\n     <circle cx="493.51" cy="200.26" r="18.911" fill="#1a1a1a"/>\n     <ellipse cx="444.94" cy="246.54" rx="25.204" ry="25.115" fill="#fff"/>\n     <path d="m445.3 265.55c10.422 0 18.904-8.482 18.904-18.905s-8.482-18.911-18.904-18.911c-10.429 0-18.911 8.482-18.911 18.911s8.482 18.905 18.911 18.905z" fill="#1a1a1a"/>\n     <ellipse cx="492.88" cy="293.45" rx="25.204" ry="25.115" fill="#fff"/>\n     <path d="m492.9 274.71c-10.429 0-18.911 8.482-18.911 18.911 0 10.428 8.482 18.905 18.911 18.905 10.422 0 18.904-8.482 18.904-18.905s-8.482-18.911-18.904-18.911z" fill="#1a1a1a"/>\n     <ellipse cx="541.23" cy="247.25" rx="25.204" ry="25.115" fill="#fff"/>\n     <circle cx="541.11" cy="247.25" r="18.911" fill="#1a1a1a"/>\n     <path d="m78.855 232.89c21.53 0 39.045-17.515 39.045-39.045s-17.515-39.045-39.045-39.045-39.046 17.515-39.046 39.045 17.522 39.045 39.046 39.045z" fill="#1a1a1a"/>\n     <polygon transform="translate(6.8088,8.7805)" points="124.82 332.13 155.94 332.13 155.94 310.78 124.82 310.78 124.82 279.67 103.48 279.67 103.48 310.78 72.364 310.78 72.364 332.13 103.48 332.13 103.48 363.25 124.82 363.25" fill="#1a1a1a"/>\n     <polygon transform="translate(6.8088,8.7805)" points="269.44 444.41 318.12 444.41 293.78 403.06" fill="#1a1a1a"/>\n    </g>\n   </g>\n   <g transform="translate(-1.12)" clip-path="url(#a)" fill="#1a1a1a">\n    <g clip-path="none">\n     <path d="m243.78 111.34c0.838 0 1.818-0.043 2.687-0.135s1.481-0.397 2.167-0.636 1.377-0.643 2.02-1.261c0.637-0.618 1.157-1.316 1.548-2.099 0.392-0.784 0.673-1.659 0.845-2.632 0.171-0.967 0.239-1.952 0.196-2.95-0.042-1.12-0.343-1.953-0.648-2.907-0.306-0.955-0.881-2.154-1.671-2.803-0.869-0.716-1.493-1.224-2.387-1.481-0.894-0.251-2.154-0.637-3.599-0.637-0.881 0-2.05 0.062-2.62 0.128-0.593 0.074-1.138 0.147-1.885 0.159l0.196 17.228c1.162 0.038 2.154 0.026 3.151 0.026z" fill="#1a1a1a"/>\n     <path d="m278.33 102.96c-0.031-0.624 0-0.416-0.073-0.765-0.074-0.343-0.166-0.618-0.349-0.991-0.184-0.367-0.502-0.624-0.795-0.894-0.294-0.27-0.643-0.478-1.053-0.618-0.404-0.147-1.01-0.22-1.475-0.22-0.501 0-0.948 0.153-1.395 0.312s-0.838 0.374-1.175 0.649c-0.336 0.275-0.618 0.6-0.844 0.967-0.227 0.367-0.392 0.729-0.496 1.071-0.042 0.135-0.049 0.147-0.042 0.153 6e-3 6e-3 0.03-0.012-0.025 0.336z" fill="#1a1a1a"/>\n     <path d="m291.54 104.42c-0.3 0.27-0.441 0.343-0.587 0.453-0.147 0.11-0.361 0.171-0.551 0.269-0.19 0.092-0.447 0.116-0.68 0.202-0.226 0.085-1.022 0.11-1.346 0.153-0.691 0.086-1.15 0.159-1.426 0.27-0.6 0.214-0.955 0.275-1.298 0.496-0.342 0.22-0.612 0.551-0.838 0.808-0.227 0.257-0.312 0.49-0.404 0.747-0.104 0.318-0.092 0.655-0.073 0.998 0.018 0.538 0.434 1.132 0.734 1.523 0.293 0.398 0.3 0.257 0.679 0.526 0.379 0.263 0.918 0.404 1.518 0.404 0.374 0 0.759-0.031 1.157-0.092 0.306-0.043 0.637-0.239 1.096-0.392 0.146-0.049 0.489-0.361 0.655-0.422 0 0 0.422-0.342 0.844-1.077 0.422-0.734 0.508-1.952 0.508-1.952z" fill="#1a1a1a"/>\n     <path d="m341.81 104.23c-0.294 0.27-0.44 0.349-0.588 0.459-0.146 0.11-0.379 0.153-0.569 0.251-0.189 0.092-0.428 0.135-0.66 0.22-0.227 0.086-1.022 0.11-1.347 0.153-0.691 0.085-1.15 0.159-1.426 0.269-0.6 0.22-0.961 0.282-1.304 0.496-0.343 0.221-0.618 0.551-0.845 0.808s-0.318 0.489-0.404 0.747c-0.104 0.318-0.085 0.655-0.073 1.003 0.019 0.533 0.435 1.132 0.734 1.524 0.3 0.398 0.3 0.257 0.686 0.526 0.38 0.263 0.918 0.404 1.524 0.404 0.373 0 0.759-0.03 1.162-0.092 0.307-0.042 0.643-0.245 1.096-0.392 0.146-0.049 0.489-0.361 0.655-0.422 0 0 0.422-0.343 0.844-1.077 0.423-0.729 0.509-1.953 0.509-1.953z" fill="#1a1a1a"/>\n     <path d="m119.14 577.38c12.815-43.023 10.985-43.023 17.393-58.582 6.408-15.562 19.223-16.475 35.698-20.135 82.805-10.454 167.09-15.742 247.15-7e-5 16.476 3.66 29.291 4.578 35.698 20.135 6.407 15.564 4.578 15.564 17.394 58.582 12.814 43.018 69.554-66.818 95.184-228.83 25.631-162.01-11.848-224.91-22.222-230.4-10.373-5.49-79.382-20.404-79.382-20.404-18.269-23.911-37.871-41.377-57.039-54.199v181.14c0 53.85-43.807 97.657-97.656 97.657h-21.524c-53.85 0-97.657-43.808-97.657-97.657v-187.17c-22.156 13.194-45.296 32.319-66.624 60.232 0 0-69.009 14.908-79.382 20.404-10.374 5.49-47.853 68.385-22.222 230.4 25.624 162.01 82.375 271.85 95.19 228.83zm373.77-258.73c-13.801 0-25.031-11.223-25.031-25.024s11.23-25.031 25.031-25.031c13.8 0 25.024 11.224 25.024 25.031 1e-3 13.802-11.224 25.024-25.024 25.024zm48.207-96.432c13.801 0 25.03 11.224 25.03 25.031 0 13.801-11.229 25.025-25.03 25.025s-25.031-11.224-25.031-25.025 11.23-25.031 25.031-25.031zm-47.601-46.989c13.801 0 25.031 11.224 25.031 25.031 0 13.8-11.23 25.024-25.031 25.024s-25.03-11.224-25.03-25.024c5e-3 -13.801 11.229-25.031 25.03-25.031zm-48.207 46.383c13.801 0 25.024 11.224 25.024 25.031 0 13.801-11.224 25.025-25.024 25.025s-25.031-11.224-25.031-25.025c6e-3 -13.807 11.236-25.031 25.031-25.031zm-176.43 232.05 28.458-48.342c1.408-2.418 5.056-2.441 6.5-6e-3l28.451 48.342c0.729 1.242 0.759 2.662 0.099 3.818-0.655 1.15-1.91 1.842-3.33 1.842h-56.928c-1.426 0-2.674-0.691-3.335-1.842-0.668-1.156-0.631-2.582 0.085-3.812zm-136.01-171.33c0.12593-2.6961 5.1037 2.1992 4.895 4.8902v26.23l26.231-1.6e-4c2.693-2e-5 4.89 2.191 4.89 4.891v23.801c0 2.697-2.191 4.889-4.89 4.889l-26.231 1.6e-4v26.23c0 2.693-2.19 4.8908-4.895 4.8908h-23.801c-2.692 0-4.89-2.191-4.89-4.891v-26.23h-26.23c-2.693 0-4.89-2.191-4.89-4.889v-23.801c0-2.693 2.191-4.891 4.89-4.891h26.23v-26.23c0-2.699 2.191-4.89 4.89-4.89 7.9337 0 15.867 169.86 23.801 0zm-54.009-133.64c24.902 0 45.166 20.263 45.166 45.166s-20.263 45.166-45.166 45.166-45.166-20.263-45.166-45.166 20.264-45.166 45.166-45.166z" fill="#f2f2f2" stroke="#000" stroke-width="3.2267"/>\n     <path d="m371.79 133.6h-142.4v126.1h142.4zm-8.256 117.31c0 0.985-0.796 1.781-1.781 1.781h-122.33c-0.979 0-1.781-0.796-1.781-1.781v-108.51c0-0.985 0.795-1.781 1.781-1.781h122.33c0.985 0 1.781 0.795 1.781 1.781z" fill="#1a1a1a"/>\n     <path d="m126.54 95.719a205.64 206.43 0 0 0-36.058 116.76 205.64 206.43 0 0 0 205.64 206.43 205.64 206.43 0 0 0 205.64-206.43 205.64 206.43 0 0 0-36.06-116.76z" clip-path="none" fill="none" stroke="#000" stroke-width="7.4"/>\n     <path d="m289.82 316.22h21.523c50.558 0 91.537-40.985 91.537-91.536v-185.14c-45.018-27.974-86.578-30.765-101.38-30.765-3.69 0-5.71 0.171-5.71 0.171s-2.026-0.171-5.71-0.171c-13.733 0-50.551 2.405-91.8 25.153v190.75c0 50.552 40.986 91.537 91.537 91.537zm66.506-218.18 1.806-0.061c0.018-0.379-0.031-1.567-0.031-2.497 0-0.453-0.227-0.869-0.41-1.096 0.82-0.184 2.069-0.563 2.638-0.728-6e-3 1.469 0.099 3.556 0.117 4.321l3.684 0.055c-0.019 0.63 0.049 0.851 0.062 1.419l-1.016-0.122h-2.705l-0.05 8.103-0.024 0.679c0.024 0.723 0.123 1.641 0.282 2.001 0.159 0.361 0.385 0.496 0.679 0.655 0.3 0.159 0.637 0.196 0.949 0.196 0.22 0 0.551-6e-3 0.808-6e-3s0.435-0.019 1.071-0.202c-0.08 0.478-0.209 0.741-0.294 1.536-0.588 0.166-0.857 0.208-1.206 0.245-0.349 0.043-0.679-0.067-0.997-0.067-0.777 0-1.414-0.11-1.903-0.337-0.49-0.22-0.869-0.575-1.139-1.071-0.275-0.49-0.465-1.708-0.496-2.552-6e-3 -0.11-6e-3 -0.3-0.012-0.575 0-0.275-0.019-0.551 0-2.197l-0.056-6.402h-1.774c0.023-0.397 0.023-0.519 0.017-1.297zm-2.932 9.309c-0.135-0.184-0.643-0.618-0.899-0.838-0.257-0.227-0.937-0.557-1.824-0.924-0.899-0.379-2.044-0.74-2.46-1.089-0.416-0.355-1.175-0.759-1.475-1.132s-0.526-0.74-0.68-1.12c-0.153-0.374-0.043-0.943-0.055-1.328-0.024-0.618 0.36-1.254 0.728-1.836 0.361-0.575 0.992-0.9 1.714-1.188 0.723-0.281 1.579-0.428 2.564-0.428 1.102 0 2.166 0.214 3.501 0.471 0.073 0.753-0.099 1.273-7e-3 1.897-0.961-0.636-2.025-0.955-3.072-0.955-0.568 0-1.145 0.086-1.621 0.233-0.478 0.146-1.01 0.624-1.218 0.918-0.215 0.3-0.331 0.581-0.318 0.936 6e-3 0.233 0.079 0.618 0.165 0.833 0.086 0.214 0.648 0.808 0.942 0.937 0.404 0.177 0.245 0.153 0.612 0.232 0.416 0.092 1.444 0.618 2.423 1.083 1.017 0.483 1.946 1.089 2.265 1.408 0.324 0.318 0.637 0.759 0.931 1.438 0.165 0.38 0.257 0.826 0.257 1.145 0 0.551-0.146 0.625-0.129 0.967 0.031 0.673-0.141 0.924-0.514 1.5s-1.071 1.126-1.849 1.444c-0.777 0.318-1.604 0.582-2.576 0.582-0.416 0-1.377 0.049-1.934-6e-3 -0.558-0.049-1.035-0.239-1.427-0.312s-0.643-0.092-1.224-0.232l-0.202-0.985c-6e-3 -0.116-0.263-0.771-0.373-1.396 1.646 0.906 3.385 1.542 4.633 1.542 0.654 0 1.304-0.19 1.75-0.361 0.447-0.171 0.882-0.489 1.096-0.826 0.208-0.336 0.44-0.661 0.521-1.016 0.049-0.196 0.11-0.459 0.061-0.637-0.067-0.211-0.171-0.774-0.306-0.957zm-86.138-55.282c0.324-2.111 0.955-4.223 1.364-5.673 0.973-3.47 3.581-8.672 4.841-10.429s1.762-2.295 3.592-4.339 0.783-0.637 4.174-3.421c3.384-2.785 7.938-4.78 9.933-5.587 1.995-0.814 5.037-2.301 10.521-2.668s8.794 0.312 11.854 0.667c3.586 0.417 10.435 2.754 10.435 2.754s3.996 1.805 7.093 3.837c1.671 1.004 3.158 2.987 4.676 4.927 2.087 2.668 4.131 6.028 4.425 6.505 0.508 0.814 2.778 4.908 3.256 6.426s1.542 7.117 1.628 7.729 0.937 4.051-2.001 4.253c-3.22 0.22-3.55-3.066-3.758-4.002-0.214-0.942-2.387-8.158-3.14-9.517s-5.264-7.962-7.265-10.135-5.894-4.951-10.141-6.255c-4.063-1.254-10.961-2.479-15.6-2.276-4.076 0.177-5.416 0.459-7.191 1.022-3.629 1.157-6.812 2.993-9.015 4.382-2.203 1.383-5.899 4.357-7.515 6.383-1.916 2.405-5.166 8.354-5.888 11.64-1.334 6.114-0.502 12.014-0.502 12.014s1.506 11.579 9.015 17.521c2.938 2.332 5.336 3.562 12.02 5.379 0.937 0.257 3.978 0.471 7.778 0.496 3.801 0.019 4.957-0.11 7.124-0.869 2.16-0.759 2.852-0.894 4.504-1.75 1.659-0.857 4.505-1.799 7.559-4.811 1.707-1.689 3.837-5.006 4.719-8.329 0.514-1.946 0.189-2.552 0.122-5.104-0.019-0.783-0.092-1.493-0.153-2.167-0.146-1.524-0.397-2.938-0.93-5.178-0.771-3.231-0.539-2.387-1.292-4.449-0.52-1.42-1.107-2.577-1.523-3.25s-0.814-1.12-1.273-1.818c-3.17-4.841-9.431-8.011-15.232-8.201-1.934-0.067-4.314 0.135-6.714 0.894-1.628 0.514-3.268 1.346-4.786 2.271-0.63 0.379-1.23 0.673-1.812 1.132-0.587 0.471-0.942 0.606-1.462 1.157-0.471 0.501-1.114 1.628-1.5 2.136-4.725 6.065-3.629 11.689-3.629 11.689s-0.44 13.207 13.52 14.646c3.525 0.171 9.89-2.087 12.301-4.67 1.481-1.591 1.585-4.437 1.536-6.964-0.036-2.001-1.016-5.551-2.552-6.922-3.342-2.98-6.12-3.072-7.576-3.158-1.94-0.123-4.7 0.477-5.79 4.725-0.38 1.475 0.777 4.547 2.962 4.982 1.879 0.379 3.88 0 4.762 0.128 0.783 0.11 1.971-0.153 1.971 2.313-0.221 4.321-9.633 1.903-9.737 1.812-0.722-0.624-4.969-3.042-5.134-7.631-0.178-4.847 2.099-8.507 6.236-10.576 1.041-0.52 2.956-0.783 4.254-0.838 3.524 0.171 6.021 0.63 8.604 2.02 0.483 0.263 0.979 0.477 1.512 0.838 0.165 0.11 0.802 0.557 0.899 0.618 3.023 2.601 4.284 6.035 4.884 9.499 0.238 1.377 0.232 2.662 0.275 3.678 0.08 1.738-0.122 3.843-1.01 5.82-0.942 2.112-2.638 4.082-5 5.318-2.295 1.2-5.643 3.103-10.264 3.672-2.784 0.342-6.021 0.287-9.773-0.924-10.643-3.439-11.646-15.514-11.646-15.514s-2.173-8.898 3.69-16.916c0.618-0.844 1.322-1.928 2.129-2.735 2.644-2.644 5.012-4.015 7.185-5.166 3.99-2.111 6.916-2.595 7.779-2.595 0.618 0 2.093-0.085 3.824 0.043 1.983 0.141 4.309 0.526 6.065 0.955 1.928 0.471 3.537 0.851 4.792 1.383 1.188 0.508 2.038 1.175 2.968 1.744 1.922 1.169 4.982 3.488 6.017 5.055 1.07 1.628 2.589 3.715 3.77 7.387 0.691 2.154 1.273 5.232 1.983 8.703 1.064 5.196 0.679 10.447-0.502 13.764-0.129 0.355-1.451 4.566-5.637 8.513-4.187 3.954-9.455 6.193-11.016 6.817-1.567 0.625-3.795 2.521-12.332 2.381-7.387-0.123-12.987-2.081-14.651-2.754-1.665-0.673-6.059-2.068-10.833-7.319-4.773-5.257-5.814-8.648-6.573-10.949s-2.191-8.195-2.191-8.195 0.171-0.024-0.171-3.066c-0.129-1.359-0.111-3.133 0.159-4.908zm73.825 59.388c-0.465 0.386-0.937 0.673-1.236 0.857-0.637 0.134-1.021 0.281-1.426 0.312-0.404 0.037-0.783 0.049-1.15 0.049-1.212 0-2.1-0.367-2.791-0.686-0.691-0.318-1.261-0.875-1.622-1.523-0.36-0.649-0.44-1.243-0.471-2.008-0.019-0.446 0.11-0.905 0.22-1.279 0.104-0.379 0.251-0.716 0.447-1.022 0.189-0.306 0.33-0.539 0.691-0.851 0.361-0.306 0.575-0.478 0.979-0.673 0.403-0.202 0.777-0.288 1.315-0.483 0.539-0.196 1.524-0.263 2.785-0.441 0.385-0.098 0.71-0.073 0.979-0.177 0.27-0.104 0.509-0.208 0.717-0.306s0.385-0.214 0.538-0.349 0.294-0.3 0.416-0.49c0.129-0.196 0.215-0.141 0.27-0.336 0.055-0.196 0.024-0.294 0.019-0.496-0.019-0.489-0.043-0.765-0.337-1.107s-0.637-0.833-1.102-0.967c-0.459-0.141-1.23-0.361-1.849-0.361-0.575 0-1.046 0.073-1.646 0.178-0.6 0.104-1.114 0.232-1.549 0.373-0.429 0.147-0.918 0.361-1.561 0.649 0.062-0.435 0.013-1.065 0.062-1.922 1.053-0.306 1.609-0.453 2.387-0.563s1.928-0.178 2.674-0.178c0.796 0 1.292 0.171 1.995 0.337 0.698 0.165 1.586 0.777 1.91 1.261 0.336 0.496 0.648 0.856 0.819 1.334 0.172 0.478 0.404 1.42 0.429 1.958 0.024 0.679 0.062 0.239 0.037 1.842-0.024 1.609 0.073 4.547 0.061 5.912-6e-3 0.833 0.099 0.912 0.318 2.038-0.483-0.019-1.102 0.024-1.401 0.024-0.287 0-0.71-0.043-1.236-0.024v-1.53c7e-3 6e-3 -0.226 0.263-0.691 0.648zm-19.155-3.378c0.336 0.838 0.899 1.659 1.683 2.118s1.701 0.906 2.662 0.906c0.931 0 2.889-0.098 5.013-1.224-0.013 0.159-0.098 0.514-0.153 0.942-0.055 0.435-0.178 0.796-0.214 1.212-0.637 0.166-1.31 0.349-1.903 0.41-0.588 0.061-2.197 0.165-2.644 0.165-0.949 0-2.051-0.196-2.864-0.483-0.814-0.288-1.83-0.832-2.448-1.487-0.624-0.655-1.328-1.31-1.646-2.283s-0.545-1.909-0.581-2.993c-0.056-1.457 0.177-1.946 0.587-3.25 0.404-1.31 1.438-2.252 2.394-2.993 0.954-0.741 3.164-1.371 4.859-1.371 1.248 0 2.711 0.208 3.91 0.575 0.086 0.851 0.116 1.31 0.178 1.861-0.845-0.3-1.616-0.649-2.148-0.753s-1.199-0.202-1.652-0.202c-0.771 0-2.411 0.343-3.011 0.655-0.6 0.318-1.102 0.765-1.512 1.353-0.41 0.581-0.734 1.395-0.894 2.197s-0.221 0.869-0.189 1.702c0.04 1.125 0.23 2.104 0.573 2.943zm-6.898-5.263c-0.019-0.575-0.189-1.224-0.306-1.548-0.116-0.324-0.704-0.924-0.949-1.187-0.244-0.263-0.611-0.312-0.961-0.447-0.349-0.135-0.911-0.166-1.353-0.166-0.354 0-0.802 0.062-1.095 0.147-0.275 0.086-0.551 0.147-0.809 0.331-0.281 0.189-0.532 0.3-0.752 0.575-0.221 0.27-0.398 0.575-0.545 0.912-0.153 0.349-0.159 0.869-0.189 1.432-0.037 0.606 0.03 1.383 0.012 2.252-0.024 0.918-0.024 4.56 0 6.065l0.422 1.346c-0.514-0.018-1.272-0.03-1.529-0.03-0.239 0-0.894 6e-3 -1.457 0.03 0.043-1.224 0.19-0.11 0.196-1.407l0.024-5.594c0-1.108-0.013-2.057-0.043-2.833-0.019-0.508-0.079-0.686-0.184-1.041-0.098-0.355-0.275-0.802-0.532-1.096-0.251-0.293-0.808-0.765-1.15-0.918-0.35-0.153-0.839-0.269-1.268-0.269-0.452 0-0.746 0.049-1.138 0.22s-0.734 0.251-1.059 0.594c-0.318 0.336-0.588 0.373-0.796 0.869-0.208 0.489-0.367 0.385-0.459 1.181-0.098 0.795-0.141 3.69-0.135 5.667 6e-3 1.169 0.019 2.228 0.037 3.183 0.012 0.654 0.281 0.887 0.306 1.444-0.569-0.018-1.212-0.03-1.42-0.03-0.232 0-1.01 6e-3 -1.585 0.03l0.318-1.028c0.012-0.453 0.019-1.922 0.024-2.901l-0.147-8.292c-0.018-0.741-0.416-1.628-0.435-2.014 0.41 0.012 1.335-0.135 1.763-0.294 0.343-0.128 0.729-0.128 1.09-0.141l-6e-3 1.928c0.275-0.557 0.776-0.612 1.01-0.942 0.232-0.324 0.471-0.312 0.856-0.587s0.624-0.288 1.139-0.361c0.63-0.092 1.027-0.123 1.572-0.123 0.38 0 0.753 0.049 1.126 0.147 0.374 0.098 0.717 0.239 1.041 0.417 0.318 0.177 0.594 0.379 0.826 0.605 0.232 0.227 0.483 0.349 0.691 0.741 0.073 0.128 0.637-0.624 1.426-1.083 0.79-0.453 1.72-0.802 2.711-0.802 0.637 0 2.057 0.085 2.662 0.312 0.606 0.227 1.463 0.557 1.836 0.979 0.367 0.429 0.478 0.618 0.809 0.967 0.41 0.435 0.538 1.53 0.562 1.995 0.019 0.477 0.067 1.199 0.067 2.16l6e-3 6.818c0 0.655 0.19 0.734 0.312 1.481-0.471-0.019-1.083-0.031-1.353-0.031-0.281 0-0.955 6e-3 -1.506 0.031 0.367-1.169 0.294-0.771 0.325-1.487l0.024-6.181c-2e-3 -0.87-7e-3 -1.384-0.032-2.026zm-24.217 8.831c-0.459 0.386-0.937 0.667-1.23 0.857-0.637 0.135-1.016 0.282-1.42 0.312-0.404 0.031-0.79 0.049-1.151 0.049-1.206 0-2.093-0.367-2.784-0.686-0.692-0.318-1.255-0.875-1.616-1.524-0.361-0.648-0.441-1.242-0.471-2.007-0.019-0.447 0.116-0.906 0.22-1.279 0.104-0.374 0.251-0.716 0.44-1.022 0.19-0.306 0.331-0.539 0.692-0.844 0.361-0.306 0.575-0.478 0.979-0.673s0.771-0.288 1.31-0.483c0.539-0.19 1.524-0.263 2.778-0.441 0.38-0.098 0.71-0.073 0.979-0.177s0.508-0.208 0.716-0.306 0.386-0.214 0.539-0.349 0.294-0.3 0.417-0.49c0.128-0.196 0.214-0.263 0.269-0.459s0.024-0.294 0.019-0.496c-0.019-0.49-0.043-0.637-0.337-0.985-0.293-0.349-0.636-0.833-1.095-0.967s-1.224-0.361-1.842-0.361c-0.575 0-1.046 0.074-1.646 0.177-0.6 0.104-1.114 0.233-1.548 0.374-0.429 0.147-0.918 0.361-1.561 0.649 0.062-0.441 0.012-1.065 0.062-1.928 1.046-0.3 1.604-0.453 2.38-0.563 0.777-0.11 1.928-0.177 2.668-0.177 0.795 0 1.292 0.171 1.989 0.336 0.704 0.166 1.579 0.777 1.904 1.261 0.336 0.496 0.648 0.851 0.82 1.328 0.165 0.478 0.404 1.42 0.428 1.958 0.025 0.686 0.062 0.239 0.037 1.842-0.025 1.609 0.073 4.547 0.061 5.912-6e-3 0.826 0.098 0.912 0.318 2.038-0.478-0.019-1.096 0.024-1.402 0.024-0.281 0-0.709-0.043-1.236-0.024v-1.53c6e-3 0.011-0.227 0.268-0.686 0.654zm-19.975-3.109c0.422 0.875 0.991 1.438 1.769 1.891 0.777 0.447 1.805 0.839 2.791 0.839 1.139 0 3.213-0.478 4.915-1.328-0.085 0.539-0.263 1.242-0.336 2.075-0.838 0.238-2.222 0.771-2.84 0.856-0.618 0.086-1.23 0.104-1.848 0.104-1.102 0-2.197-0.275-3.084-0.569-0.888-0.3-1.775-0.912-2.424-1.652-0.655-0.735-1.297-1.536-1.603-2.491-0.312-0.948-0.386-1.909-0.429-2.968-0.055-1.475 0.184-2.025 0.637-3.286s1.401-2.179 2.387-2.901c0.979-0.722 2.246-1.083 3.794-1.083 0.802 0 1.713 0.062 2.454 0.325 0.74 0.263 1.365 0.539 1.867 1.071 0.508 0.539 0.93 1.071 1.224 1.86 0.294 0.79 0.361 0.802 0.526 1.72 0.074 0.429 0.129 1.102 0.092 1.438l-10.49 0.061c-0.012 0.545-0.049 0.814-0.037 1.096 0.029 1.045 0.212 2.067 0.635 2.942zm-11.12-10.288c0.318-0.067 1.102-0.177 1.518-0.189l6e-3 2.644c0.3-0.612 0.318-0.575 0.563-0.881 0.239-0.312 0.624-0.667 0.93-0.869 0.312-0.202 0.649-0.49 1.046-0.606 0.392-0.117 0.753-0.282 1.188-0.3 0.343-0.012 0.667-0.061 1.548 0.031 0.887 0.092 1.353 0.294 1.548 0.349 0.019 0.355-0.649 1.989-0.649 1.989s-0.636-0.055-1.211-0.293c-0.551-0.166-0.924-0.166-1.359-0.166-0.514 0-1.12 0.116-1.524 0.312-0.404 0.19-0.79 0.422-1.102 0.814s-0.52 0.796-0.71 1.34c-0.159 0.441-0.104 0.073-0.165 0.765-0.067 0.691-6e-3 7.326 0.049 8.819l0.263 0.857c-0.483-0.019-1.169 0-1.462 0-0.27 0-0.924 0.012-1.469 0.03 0-0.281 0.282-0.673 0.288-0.942 0.067-4.633-0.03-8.213-0.141-11.206l-0.049-1.261-0.44-1.071c0.446-0.05 1.052-0.111 1.334-0.166zm-18.654-6.224c0.533 0 1.322 0.086 2.436 0.062 1.114-0.025 2.105 0 2.546 0.042 1.585 0.147 1.989 0.233 3.078 0.502 0.826 0.196 2.393 1.034 3.091 1.53 0.704 0.496 1.401 1.064 1.97 1.866 0.563 0.802 0.845 1.059 1.224 1.989 0.508 1.261 0.802 2.625 0.851 3.892 0.067 1.732-0.116 3.06-0.618 4.651-0.496 1.591-1.603 2.772-2.668 3.837s-2.234 1.708-3.593 2.044c-1.365 0.336-2.901 0.667-4.596 0.667l-3.991-0.03-3.8-0.092 0.539-1.42-0.043-17.528c-0.012-0.508-0.251-1.034-0.501-1.922 1.198 0.027 3.224-0.09 4.075-0.09zm-17.797 168.64v-128.02c0-2.846 2.313-5.159 5.159-5.159h144.32c2.846 0 5.159 2.313 5.159 5.159v128.02c0 2.846-2.313 5.159-5.159 5.159h-144.32c-2.846 1e-3 -5.159-2.312-5.159-5.158z" fill="#1a1a1a"/>\n     <ellipse cx="444.94" cy="246.54" rx="25.204" ry="25.115" fill="#fff"/>\n     <path d="m445.3 265.55c10.422 0 18.904-8.482 18.904-18.905s-8.482-18.911-18.904-18.911c-10.429 0-18.911 8.482-18.911 18.911s8.482 18.905 18.911 18.905z" fill="#1a1a1a"/>\n     <ellipse cx="492.88" cy="293.45" rx="25.204" ry="25.115" fill="#fff"/>\n     <path d="m492.9 274.71c-10.429 0-18.911 8.482-18.911 18.911 0 10.428 8.482 18.905 18.911 18.905 10.422 0 18.904-8.482 18.904-18.905s-8.482-18.911-18.904-18.911z" fill="#1a1a1a"/>\n     <ellipse cx="541.23" cy="247.25" rx="25.204" ry="25.115" fill="#fff"/>\n     <circle cx="541.11" cy="247.25" r="18.911" fill="#1a1a1a"/>\n     <path d="m78.855 232.89c21.53 0 39.045-17.515 39.045-39.045s-17.515-39.045-39.045-39.045-39.046 17.515-39.046 39.045 17.522 39.045 39.046 39.045z" fill="#1a1a1a"/>\n     <polygon transform="translate(6.8088,8.7805)" points="124.82 279.67 103.48 279.67 103.48 310.78 72.364 310.78 72.364 332.13 103.48 332.13 103.48 363.25 124.82 363.25 124.82 332.13 155.94 332.13 155.94 310.78 124.82 310.78" fill="#1a1a1a"/>\n     <polygon transform="translate(6.8088,8.7805)" points="318.12 444.41 293.78 403.06 269.44 444.41" fill="#1a1a1a"/>\n     <polygon transform="translate(6.8088,8.7805)" points="124.82 332.13 155.94 332.13 155.94 310.78 124.82 310.78 124.82 279.67 103.48 279.67 103.48 310.78 72.364 310.78 72.364 332.13 103.48 332.13 103.48 363.25 124.82 363.25" fill="#1a1a1a"/>\n     <ellipse cx="409.18" cy="244.08" rx="25.204" ry="25.115" fill="#fff"/>\n    </g>\n   </g>\n   <path d="m444.19 415.9c23.103 0 41.897-18.795 41.897-41.897s-18.794-41.897-41.897-41.897c-23.103 0-41.898 18.795-41.898 41.897s18.802 41.897 41.898 41.897z" stroke-width=".86172"/>\n   <path d="m444.19 412.57c21.38 0 38.773-17.297 38.773-38.56 0-21.263-17.393-38.56-38.773-38.56-21.38 0-38.775 17.297-38.775 38.56 0 21.263 17.4 38.56 38.775 38.56z" fill="#ececec" stroke-width=".86172"/>\n   <path d="m444.19 407.65c18.553 0 33.646-15.093 33.646-33.646 0-18.553-15.093-33.646-33.646-33.646-18.553 0-33.647 15.093-33.647 33.646 0 18.553 15.099 33.646 33.647 33.646z" fill="#333" stroke="#000" stroke-width="2.9069" data-button="button-11"/>\n   <path d="m78.499 243.34c26.81 0 48.62-21.811 48.62-48.621s-21.81-48.621-48.62-48.621-48.622 21.811-48.622 48.621 21.819 48.621 48.622 48.621z"/>\n   <path d="m78.499 239.47c24.811 0 44.995-20.073 44.995-44.748s-20.184-44.748-44.995-44.748-44.997 20.073-44.997 44.748 20.192 44.748 44.997 44.748z" fill="#ececec"/>\n   <path d="m78.499 233.76c21.53 0 39.045-17.515 39.045-39.045s-17.515-39.045-39.045-39.045-39.046 17.515-39.046 39.045 17.522 39.045 39.046 39.045z" fill="#333" stroke="#000" stroke-width="2.9069" data-button="button-10"/>\n   <path d="m491.78 320.33c14.996 0 27.196-12.2 27.196-27.196s-12.199-27.196-27.196-27.196c-14.996 0-27.197 12.2-27.197 27.196s12.204 27.196 27.197 27.196z"/>\n   <path d="m491.78 317.32c13.408 0 24.317-10.848 24.317-24.183s-10.908-24.183-24.317-24.183c-13.409 0-24.317 10.848-24.317 24.183s10.912 24.183 24.317 24.183z" fill="#ececec"/>\n   <path d="m491.78 314.23c11.635 0 21.101-9.4653 21.101-21.101 0-11.635-9.4653-21.101-21.101-21.101-11.635 0-21.101 9.4653-21.101 21.101 0 11.635 9.4692 21.101 21.101 21.101z" fill="#a02c2c" data-button="button-0"/>\n   <path d="m539.97 273.92c14.738 0 26.727-11.99 26.727-26.728s-11.989-26.728-26.727-26.728c-14.738 0-26.728 11.99-26.728 26.728s11.994 26.728 26.728 26.728z"/>\n   <path d="m539.97 270.95c13.177 0 23.898-10.661 23.898-23.767 0-13.105-10.72-23.767-23.898-23.767s-23.899 10.661-23.899 23.767c0 13.105 10.724 23.767 23.899 23.767z" fill="#ececec"/>\n   <path d="m539.97 267.92c11.435 0 20.738-9.3024 20.738-20.738 0-11.435-9.3024-20.738-20.738-20.738-11.435 0-20.738 9.3024-20.738 20.738 0 11.435 9.3062 20.738 20.738 20.738z" fill="#06f" data-button="button-1"/>\n   <path d="m493.22 227.32c14.738 0 26.727-11.99 26.727-26.728s-11.989-26.728-26.727-26.728c-14.738 0-26.728 11.99-26.728 26.728s11.994 26.728 26.728 26.728z"/>\n   <path d="m493.22 224.36c13.177 0 23.898-10.661 23.898-23.767 0-13.105-10.72-23.767-23.898-23.767s-23.899 10.661-23.899 23.767c0 13.105 10.724 23.767 23.899 23.767z" fill="#ececec"/>\n   <path d="m493.22 221.33c11.435 0 20.738-9.3024 20.738-20.738 0-11.435-9.3024-20.738-20.738-20.738-11.435 0-20.738 9.3024-20.738 20.738 0 11.435 9.3062 20.738 20.738 20.738z" fill="#1ccb1c" data-button="button-3"/>\n   <path d="m444.79 268.33c14.738 0 26.727-11.99 26.727-26.728s-11.989-26.728-26.727-26.728c-14.738 0-26.728 11.99-26.728 26.728s11.994 26.728 26.728 26.728z"/>\n   <path d="m444.79 265.37c13.177 0 23.898-10.661 23.898-23.767 0-13.105-10.72-23.767-23.898-23.767s-23.899 10.661-23.899 23.767c0 13.105 10.724 23.767 23.899 23.767z" fill="#fff"/>\n   <path d="m444.79 262.34c11.435 0 20.738-9.3024 20.738-20.738 0-11.435-9.3024-20.738-20.738-20.738-11.435 0-20.738 9.3024-20.738 20.738 0 11.435 9.3062 20.738 20.738 20.738z" fill="#fa9900" data-button="button-2"/>\n   <polygon transform="matrix(1.7101,0,0,1.7148,-202.93,-294.51)" points="269.44 444.41 318.12 444.41 293.78 403.06" fill="#fff" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.0439"/>\n   <g transform="matrix(1.2116 0 0 1.2405 -56.477 -89.866)" fill="#333" stroke="#000" stroke-width="2.3711">\n    <polygon points="269.44 444.41 318.12 444.41 293.78 403.06" fill="#333" stroke="#000" stroke-width="2.3711" data-button="button-9"/>\n   </g>\n   <text x="484.67032" y="210.79993" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8197" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="484.67032" y="210.79993" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="28px" stroke-width="1.8197" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Y</tspan></text>\n   <text x="435.22971" y="251.80605" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8197" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="435.22971" y="251.80605" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="28px" stroke-width="1.8197" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">X</tspan></text>\n   <text x="531.4353" y="257.39502" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8197" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="531.4353" y="257.39502" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="28px" stroke-width="1.8197" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">B</tspan></text>\n   <text x="482.2132" y="303.34509" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8197" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="482.2132" y="303.34509" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="28px" stroke-width="1.8197" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">A</tspan></text>\n   <path d="m173.25 347.86v-35.975h-35.335v-35.719h-36.421v35.719h-35.602v35.975h35.602v35.944h36.421v-35.944z" fill="#fff" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="6.6" stroke-width="3.1826"/>\n   <g fill="#333" stroke="#000" stroke-width="2.0348" data-button="dpad-0">\n    <polygon transform="matrix(1.1296 0 0 1.1296 -9.6574 -33.438)" points="103.48 363.25 124.82 363.25 124.82 332.13 155.94 332.13 155.94 310.78 124.82 310.78 124.82 279.67 103.48 279.67 103.48 310.78 72.364 310.78 72.364 332.13 103.48 332.13" fill="#333" stroke="#000" stroke-width="1.8014"/>\n   </g>\n   <path d="m246.43 423.18c9.522 0 17.268-7.7465 17.268-17.268 0-9.522-7.7461-17.268-17.268-17.268-9.522 0-17.269 7.7465-17.269 17.268 0 9.522 7.7493 17.268 17.269 17.268z" stroke-width=".63497"/>\n   <path d="m246.43 420.5c8.0934 0 14.678-6.5481 14.678-14.597 0-8.0492-6.5842-14.597-14.678-14.597-8.0937 0-14.678 6.5481-14.678 14.597 0 8.0492 6.5869 14.597 14.678 14.597z" fill="#ececec" stroke-width=".60362"/>\n   <path d="m246.43 418.33c6.8504 0 12.424-5.5729 12.424-12.424 0-6.8504-5.5729-12.424-12.424-12.424-6.8504 0-12.424 5.5729-12.424 12.424 0 6.8504 5.5752 12.424 12.424 12.424z" fill="#333" stroke="#000" stroke-width="1.4535" data-button="button-8"/>\n   <path d="m352.5 423.18c9.522 0 17.268-7.7465 17.268-17.268 0-9.522-7.7461-17.268-17.268-17.268-9.522 0-17.269 7.7465-17.269 17.268 0 9.522 7.7493 17.268 17.269 17.268z" stroke-width=".63497"/>\n   <path d="m352.5 420.5c8.0934 0 14.678-6.5481 14.678-14.597 0-8.0492-6.5842-14.597-14.678-14.597-8.0937 0-14.678 6.5481-14.678 14.597 0 8.0492 6.5869 14.597 14.678 14.597z" fill="#ececec" stroke-width=".60362"/>\n   <path d="m352.5 418.33c6.8504 0 12.424-5.5729 12.424-12.424 0-6.8504-5.5729-12.424-12.424-12.424-6.8504 0-12.424 5.5729-12.424 12.424 0 6.8504 5.5752 12.424 12.424 12.424z" fill="#333" stroke="#000" stroke-width="1.4535" data-button="button-16"/>\n   <text x="281.13306" y="481.78577" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8191" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="281.13306" y="481.78577" fill="#000000" font-family="sans-serif" font-size="11.628px" stroke-width="1.8191" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">START</tspan></text>\n   <text x="224.14134" y="384.38974" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8191" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="224.14134" y="384.38974" fill="#000000" font-family="sans-serif" font-size="11.628px" stroke-width="1.8191" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">SELECT</tspan></text>\n   <text x="334.6618" y="384.38974" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="1.8191" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="334.6618" y="384.38974" fill="#000000" font-family="sans-serif" font-size="11.628px" stroke-width="1.8191" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">HOME</tspan></text>\n  </g>\n </g>\n <g transform="translate(-260.34 -473.69)">\n  <path d="m591.98 611.79 68.946 20.079" fill="none" stroke="#000" stroke-width=".5"/>\n  <path d="m576.4 592.1 84.526 24.701" fill="none" stroke="#000" stroke-width=".5"/>\n  <path d="m595.33 575.12 65.6 18.183" fill="none" stroke="#000" stroke-width=".5"/>\n  <path d="m609.93 591.65 50.998 15.219" fill="none" stroke="#000" stroke-width=".5"/>\n  <text x="662.21619" y="608.90283" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="662.21619" y="608.90283" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Spindash / Roll</tspan></text>\n  <text x="662.5141" y="634.3454" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="662.5141" y="634.3454" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Jump</tspan></text>\n  <text x="662.27887" y="619.60553" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="662.27887" y="619.60553" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Lightspeed Dash / Lift Object</tspan></text>\n  <text x="661.63348" y="595.76831" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="661.63348" y="595.76831" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Super Transform</tspan></text>\n  <path d="m605.15 544.5 53.163 13.403" fill="none" stroke="#000" stroke-width=".5"/>\n  <text x="659.01825" y="560.35986" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="659.01825" y="560.35986" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Air Dash</tspan></text>\n  <path d="m582.92 636.21 78.008 22.519" fill="none" stroke="#000" stroke-width=".5"/>\n  <text x="664.28082" y="661.3197" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="664.28082" y="661.3197" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Switch Shields</tspan></text>\n  <path d="m426.92 544.08-53.163 13.403" fill="none" stroke="#000" stroke-width=".5"/>\n  <text x="347.5455" y="559.51819" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="347.5455" y="559.51819" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Air Dash</tspan></text>\n  <path d="m438.09 626.74-67.043 18.472" fill="none" stroke="#000" stroke-width=".5"/>\n  <text x="352.86777" y="647.30273" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="352.86777" y="647.30273" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Move</tspan></text>\n  <path d="m507.06 652.49-115.69 44.146" fill="none" stroke="#000" stroke-width=".5"/>\n  <text x="371.43689" y="698.36121" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="371.43689" y="698.36121" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Pause</tspan></text>\n </g>\n</svg>\n'}),require.register("controller/gamepad-config.html",function(t,e,r){r.exports='<div class = "gamepad-config [[animation]] input-[[type]]">\n\t<span>[[text]]</span>\n\t<div class = "buttons">\n\t\t<button cv-on = "click:swap">next</button>\n\t\t<button cv-on = "click:exit">exit</button>\n\t</div>\n</div>\n'}),require.register("controller/gc-input.svg",function(t,e,r){r.exports='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="512" height="288" version="1.0" xmlns="http://www.w3.org/2000/svg"><g transform="translate(-260.34 -473.69)"><g transform="translate(134.82 68.294)"><g transform="matrix(.06485 0 0 .06485 172.41 452.75)" stroke-width="15.42"><g stroke-width="15.42" data-button="button-6"><g id="Shape_13_copy_1_" enable-background="new    " fill="#2d1650"><g id="Shape_13_copy" fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><ellipse cx="2016" cy="596" rx="394.32" ry="416.56" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_13_1_" enable-background="new    "><g stroke-width="15.42"><g stroke-width="15.42"><ellipse cx="2016" cy="600" rx="381.55" ry="410.27" fill="#eee" stroke-width="207.68"/></g></g></g></g><g stroke-width="15.42" data-button="button-7"><g id="Shape_13_copy_2_1_" enable-background="new    " fill="#2d1650"><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><ellipse cx="4444" cy="597" rx="394.32" ry="416.56" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_13_copy_3_1_" enable-background="new    "><g stroke-width="15.42"><g stroke-width="15.42"><ellipse cx="4444" cy="601" rx="381.55" ry="410.27" fill="#eee" stroke-width="207.68"/></g></g></g></g><text transform="matrix(.68482 0 0 .68587 845.52 -545.07)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="22.5" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5-2);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="22.5">R</tspan></tspan></text><g stroke-width="15.42" data-button="button-5"><g id="Shape_14_copy_1_" transform="translate(63.785 -10.951)" enable-background="new    "><g id="Shape_14_copy" stroke-width="15.42"><g stroke-width="15.42"><path d="m4875.8 533.15c-9.153-20.295-141.3-109.76-312.96-156.14-171.66-46.381-446.05-75.91-470.47-66.579-24.426 9.331-20.68 96.067-20.68 96.067l755.06 236.36c0 1e-3 58.209-89.412 49.057-109.71z" fill="#490094" stroke-width="207.68"/></g></g></g><g id="Shape_14_1_" transform="translate(63.785 -10.951)" enable-background="new    "><g stroke-width="15.42"><g stroke-width="15.42"><path d="m4862.8 543.29c-8.855-19.636-136.71-106.2-302.8-151.08s-431.57-73.446-455.2-64.418-20.008 92.95-20.008 92.95l730.55 228.69s56.319-86.51 47.464-106.15z" fill="#5600ae" stroke-width="207.68"/></g></g></g></g><g stroke-width="15.42" data-button="button-4"><g transform="matrix(-1 0 0 1 6378.1 -10.674)" enable-background="new    "><g stroke-width="15.42"><g stroke-width="15.42"><path d="m4875.8 533.15c-9.153-20.295-141.3-109.76-312.96-156.14-171.66-46.381-446.05-75.91-470.47-66.579-24.426 9.331-20.68 96.067-20.68 96.067l755.06 236.36c0 1e-3 58.209-89.412 49.057-109.71z" fill="#490094" stroke-width="207.68"/></g></g></g><g transform="matrix(-1 0 0 1 6378.1 -10.674)" enable-background="new    "><g stroke-width="15.42"><g stroke-width="15.42"><path d="m4862.8 543.29c-8.855-19.636-136.71-106.2-302.8-151.08s-431.57-73.446-455.2-64.418-20.008 92.95-20.008 92.95l730.55 228.69s56.319-86.51 47.464-106.15z" fill="#5600ae" stroke-width="207.68"/></g></g></g></g><g id="Shape_15_copy_2_1_" enable-background="new    " stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><path d="m3227.9 120.17c-783.43 0-1504.4 382.76-1504.4 382.76l447.27 1463.6s200.02-494.06 1045-494.06c807.36 0 1061.2 473.81 1061.2 473.81l423.57-1451.3s-688.92-374.76-1472.6-374.76z" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_15_copy_3_1_" enable-background="new    " fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><path d="m3228 136c-767.99 0-1504 388-1504 388l460 1390s194.99-457.37 1044-457.37c779.87 0 1036 437.37 1036 437.37l436-1378s-719.98-380-1472-380z" fill="#442178" stroke-width="15.42"/></g></g></g><text transform="matrix(.49661 0 0 .49737 -1067.6 -73.788)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="31.027" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5-2-3-7);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="31.027">ZL</tspan></tspan></text><g id="Shape_12_1_" enable-background="new    " fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><path d="m1376.2 941.81c-30.5 123.8-80.063 786.99-61.001 1136.3 19.063 349.28 53.376 702.99 282.13 725.09s244-265.28 270.69-371.39c26.688-106.11 163.94-711.83 163.94-711.83s-625.25-901.94-655.75-778.15z" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_5_1_" enable-background="new    " fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><path d="m1387.9 966.73c-28.94 121.04-75.969 769.48-57.881 1111s50.646 687.34 267.7 708.96c217.06 21.614 231.52-259.38 256.85-363.12 25.322-103.75 155.56-695.99 155.56-695.99s-593.28-881.87-622.22-760.83z" fill="#442178" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_6_1_" enable-background="new    " fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><path d="m5071.2 945.81c-31.246-123.8-671.8 778.15-671.8 778.15s140.61 605.72 167.95 711.83c27.34 106.11 42.963 393.5 277.31 371.39s269.5-375.81 289.03-725.09-31.246-1012.5-62.493-1136.3z" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_7_1_" enable-background="new    " fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><path d="m5059.2 970.73c-29.648-121.04-637.45 760.83-637.45 760.83s133.42 592.24 159.36 695.99c25.942 103.75 40.768 384.74 263.13 363.12 222.36-21.615 255.72-367.45 274.25-708.96 18.531-341.51-29.649-989.94-59.297-1111z" fill="#442178" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_3_1_" enable-background="new    " fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><path d="m3049.2 1753.4c-122.76-188.31-176.88-182.53-252.72-305.76-97.796-158.92 14.472-476-199.59-766.22-174.59-236.7-591.61-384.65-941.21-138.62-373.08 262.56-355.83 699.77-175.22 973.89 189.64 287.82 445.08 264.06 582.85 407.41 85.999 89.487 101.86 265.09 203.89 370.36 143.79 148.36 380.24 225.33 639.15 61.496 215.72-136.5 255.61-429.57 142.84-602.55z" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_1_" enable-background="new    " fill="#442178" stroke-width="15.42"><g id="Shape_12_copy" fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><path d="m3044 1772c-111.08-187.17-185.56-195.03-260-316-96-156-1.5-502.6-192-760-171.76-232.08-571.05-373.11-920-140-362.3 242.03-364 668-172 956 188.32 282.48 434.64 257.5 568 400 108.42 115.84 111.85 264.14 196 356 154.8 168.97 400.25 242.11 644 68 224-160 208.51-441.82 136-564z" fill="#442178" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_4_1_" enable-background="new    " fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><path d="m4789.3 542.8c-349.6-246.03-766.62-98.079-941.21 138.62-214.06 290.21-101.8 607.3-199.59 766.22-75.836 123.24-129.96 117.45-252.72 305.76-112.77 172.98-72.872 466.05 142.84 602.55 258.9 163.84 495.36 86.859 639.15-61.496 102.03-105.28 117.89-280.87 203.89-370.36 137.77-143.35 393.21-119.59 582.85-407.41 180.61-274.12 197.86-711.33-175.22-973.89z" fill="#2d1650" stroke-width="15.42"/></g></g></g><g id="Shape_12_copy_2_1_" enable-background="new    " fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><path d="m4773 556c-348.95-233.11-748.24-92.075-920 140-190.5 257.4-96 604-192 760-74.444 120.97-148.92 128.83-260 316-72.508 122.18-88 404 136 564 243.75 174.11 489.2 100.97 644-68 84.154-91.858 87.58-240.16 196-356 133.36-142.5 379.68-117.52 568-400 192-288 190.3-713.97-172-956z" fill="#442178" stroke-width="15.42"/></g></g></g><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><ellipse cx="2064" cy="1112" rx="475.27" ry="470.42" fill="#2d1650" stroke-width="15.42"/></g></g><g id="Shape_2_copy" fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><ellipse cx="2064" cy="1112" rx="463.16" ry="458.44" fill="#442178" stroke-width="15.42"/></g></g><g stroke-width="15.42"><g stroke-width="15.42"><path d="m2277.5 911.54c-16.518-16.517-171.99-88.264-210.78-88.264-38.798 0-189.87 67.706-210.24 88.074-21.36 21.361-87.389 180.22-88.395 211.24-0.982 30.301 63.237 186.73 87.045 210.53 26.177 26.177 171.71 85.496 210.51 86.467 38.797 0.97 184.9-64.136 209.77-86.1 25.23-22.284 89.316-181.15 89.316-211.28-1e-3 -30.067-68.831-192.28-87.223-210.68z" stroke-width="15.42"/></g></g><g stroke-width="15.42"><g stroke-width="15.42"><path d="m2271 917.95c-16.014-16.014-166.74-85.57-204.35-85.57s-184.07 65.64-203.82 85.386c-20.709 20.709-84.722 174.72-85.696 204.8-0.952 29.376 61.307 181.03 84.389 204.11 25.377 25.377 166.47 82.886 204.08 83.827 37.613 0.939 179.26-62.179 203.36-83.472 24.46-21.604 86.591-175.62 86.591-204.83 0-29.15-66.729-186.42-84.561-204.25z" fill="#d1d1d1" stroke-width="207.68"/></g></g><g stroke-width="15.42" data-button="button-10"><g><g stroke-width="15.42"><ellipse cx="2065.6" cy="1124.9" rx="248.44" ry="238.77" stroke-width="15.42"/></g></g><g id="Shape_1_copy"><g stroke-width="15.42"><ellipse cx="2065.6" cy="1124.9" rx="234.29" ry="225.17" fill="#eee" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><ellipse cx="2064.1" cy="1125.8" rx="211.47" ry="199.69" fill="#acacac" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><ellipse cx="2064.1" cy="1125.8" rx="199.43" ry="188.32" fill="#eee" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><ellipse cx="2063.9" cy="1131.1" rx="135.66" ry="128.1" fill="#acacac" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><ellipse cx="2063.9" cy="1131.1" rx="123.95" ry="117.04" fill="#eee" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><ellipse cx="2066" cy="1131" rx="53.975" ry="50.966" fill="#acacac" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><ellipse cx="2066" cy="1131" rx="42.118" ry="39.771" fill="#eee" stroke-width="207.68"/></g></g></g><g stroke-width="15.42"><g stroke-width="15.42"><path d="m4035.5 1760.5c-16.518-16.517-171.99-88.264-210.78-88.264-38.798 0-189.87 67.706-210.24 88.074-21.361 21.361-87.389 180.22-88.395 211.24-0.982 30.301 63.237 186.73 87.045 210.53 26.177 26.177 171.71 85.496 210.51 86.466 38.798 0.971 184.9-64.135 209.77-86.099 25.229-22.284 89.316-181.15 89.316-211.28 0-30.067-68.831-192.28-87.223-210.68z" stroke-width="15.42"/></g></g><g stroke-width="15.42"><g stroke-width="15.42"><path d="m4029 1767c-16.014-16.014-166.74-85.57-204.35-85.57s-184.07 65.64-203.82 85.386c-20.709 20.709-84.722 174.72-85.696 204.8-0.952 29.376 61.307 181.03 84.389 204.11 25.377 25.377 166.47 82.886 204.08 83.827 37.613 0.939 179.26-62.179 203.36-83.472 24.46-21.604 86.591-175.62 86.591-204.83 0-29.15-66.729-186.42-84.561-204.25z" fill="#ffe400" stroke-width="207.68"/></g></g><g data-button="button-11"><g stroke-width="15.42"><g stroke-width="15.42"><circle cx="3824" cy="1976" r="144" fill="#5f5500" stroke-width="207.68"/></g></g><g id="Shape_9_copy" stroke-width="15.42"><g stroke-width="15.42"><circle cx="3824" cy="1976" r="128" fill="#ffe400" stroke-width="207.68"/></g></g><text transform="matrix(.68482 0 0 .68587 195.81 1137.2)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="22.5" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5-2-7);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="22.5">C</tspan></tspan></text></g><text x="3826.5161" y="1970.2391" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" stroke-width="15.42" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="3826.5161" y="1970.2391" stroke-width="15.42"/></text><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><ellipse cx="2626.5" cy="1976.9" rx="320.41" ry="317.14" fill="#2d1650" stroke-width="15.42"/></g></g><g fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><ellipse cx="2626.5" cy="1976.9" rx="312.25" ry="309.06" fill="#442178" stroke-width="15.42"/></g></g><g stroke-width="15.42"><g stroke-width="15.42"><polygon points="2870.6 1901.9 2709.5 1901.9 2709.5 1737.1 2545.8 1737.1 2545.9 1899.5 2387.3 1899.5 2387.3 2055.9 2544.8 2057.1 2544.8 2221.9 2707.3 2221.9 2708.5 2054.7 2870.6 2053.5" stroke-width="15.42"/></g></g><g stroke-width="15.42" data-button="dpad-0"><g id="Shape_4_copy"><g stroke-width="15.42"><polygon points="2860.2 1911 2700.8 1911 2700.8 1747.6 2554.2 1747.6 2554.4 1908.7 2396.1 1908.7 2396.1 2047.5 2554.1 2048.7 2554.3 2211.4 2698.2 2211.4 2699.6 2046.4 2860.2 2045.3" fill="#eaeaea" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><polygon points="2674.2 1862 2627.3 1780.1 2578.7 1862" fill="#c7c7c7" stroke-width="207.68"/></g></g><g id="Shape_5_copy"><g stroke-width="15.42"><polygon points="2674.2 2103 2578.7 2103 2627.3 2184.9" fill="#c7c7c7" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><polygon points="2506 1934.7 2424 1981.7 2506 2030.3" fill="#c7c7c7" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><polygon points="2828.9 1981.7 2747 1934.7 2747 2030.3" fill="#c7c7c7" stroke-width="207.68"/></g></g><g><g stroke-width="15.42"><circle cx="2626.9" cy="1979.4" r="48.647" fill="#c7c7c7" stroke-width="207.68"/></g></g></g><g id="Shape_6_copy_1_" enable-background="new    " stroke-width="15.42"><g id="Shape_6_copy" stroke-width="15.42"></g></g><g id="START_x2F_PAUSE" transform="matrix(1.4379 0 0 1.1683 -1075.9 -163.29)" enable-background="new    " stroke-width="11.898"><text transform="matrix(.7382 0 0 1 3021.6 1148)" font-family="KhmerUI-Bold" font-size="86.409px" stroke-width="160.24">START</text></g><g fill="#2d1650" stroke-width="15.42"><g fill="#2d1650" stroke-width="15.42"><ellipse cx="4403.4" cy="1112" rx="475.27" ry="470.42" fill="#2d1650" stroke-width="15.42"/></g></g><g fill="#442178" stroke-width="15.42"><g fill="#442178" stroke-width="15.42"><ellipse cx="4403.4" cy="1112" rx="463.16" ry="458.44" fill="#442178" stroke-width="15.42"/></g></g><g stroke-width="15.42" data-button="button-0"><g id="Shape_7_copy"><g stroke-width="15.42"><circle cx="4408" cy="1104" r="240" stroke-width="15.42"/></g></g><g><g stroke-width="15.42"><circle cx="4408" cy="1104" r="224" fill="#00bc8e" stroke-width="207.68"/></g></g></g><g stroke-width="15.42" data-button="button-2"><g><g stroke-width="15.42"><circle cx="3968" cy="1336" r="148" stroke-width="15.42"/></g></g><g id="Shape_8_copy"><g stroke-width="15.42"><circle cx="3968" cy="1336" r="130" fill="#f00" stroke-width="207.68"/></g></g></g><g stroke-width="15.42" data-button="button-3"><g><g stroke-width="15.42"><path d="m4206 614c-40 18-216 108-140 216 94 100 146-2 226-40 104-40 210 18 210-118-8-128-256-76-296-58z" stroke-width="15.42"/></g></g><g id="Shape_10_copy"><g stroke-width="15.42"><path d="m4487.3 672.68c-8.889-112.4-236.65-62.308-273.91-45.485s-207.07 96.898-134.67 194.16c83.202 86.025 136.64-11.178 211.14-46.641 96.962-37.559 200.88 15.784 197.44-102.04z" fill="#eaeaea" stroke-width="207.68"/></g></g></g><g stroke-width="15.42" data-button="button-1"><g><g stroke-width="15.42"><path d="m4910.5 905.72c-18-40-108-216-216-140-100 94 2 146 40 226 40 104-18 210 118 210 128-8 76-256 58-296z" stroke-width="15.42"/></g></g><g><g stroke-width="15.42"><path d="m4897.3 913.11c-16.822-37.264-96.897-207.07-194.16-134.67-86.025 83.202 11.178 136.64 46.641 211.14 37.56 96.962-15.783 200.88 102.04 197.44 112.4-8.888 62.308-236.64 45.485-273.91z" fill="#eaeaea" stroke-width="207.68"/></g></g></g><text transform="translate(-888.84 -118.88)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="15.42" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan fill="#000000" fill-opacity=".75" stroke-width="15.42" style="shape-inside:url(#rect1879-3)">A</tspan></tspan></text><text transform="translate(-1331 113.12)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="15.42" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="15.42">B</tspan></tspan></text><text transform="matrix(.88915 0 0 .88915 -425.56 -389.36)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="17.343" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="17.343">Y</tspan></tspan></text><text transform="translate(-479.38 -261.09)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="15.42" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5-5);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="15.42">X</tspan></tspan></text><text transform="matrix(.68482 0 0 .68587 -1678.4 -545.07)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="22.5" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5-2-1);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="22.5">L</tspan></tspan></text><text transform="matrix(.49661 0 0 .49737 2207.6 -73.254)" fill="#000000" fill-opacity=".75" font-family="sans-serif" font-size="144px" letter-spacing="0px" stroke-width="31.027" word-spacing="0px" style="line-height:1.25;shape-inside:url(#rect1879-3-6-5-2-3);white-space:pre" xml:space="preserve"><tspan x="5247.6191" y="1275.3691"><tspan stroke-width="31.027">ZR</tspan></tspan></text><g stroke-width="15.42" data-button="button-16"><g transform="translate(-1196 -395.27)"><g stroke-width="15.42"><circle cx="4408" cy="1104" r="240" stroke-width="15.42"/></g></g><g><g transform="translate(-1196 -395.27)" stroke-width="15.42"><circle cx="4408" cy="1104" r="224" fill="#ebebeb" stroke-width="207.68"/></g></g></g><path d="m3170.6 561.51c-21.814 12.496-54.583 31.25-72.82 41.674l-33.157 18.954-0.026 170.4 72.068 42.783c39.638 23.53 73.022 43.032 74.185 43.336 1.3821 0.36118 17.016-8.291 45.019-24.916 23.596-14.009 56.552-33.525 73.235-43.371l30.335-17.901v-85.002c0-79.864-0.1179-84.957-1.9466-84.255-1.0711 0.41057-18.804 11.009-39.407 23.553-20.603 12.543-37.97 22.797-38.594 22.787-0.6235-0.0103-16.148-9.5256-34.499-21.145l-33.366-21.125-5.2696 3.0995c-2.8975 1.7042-17.847 10.754-33.219 20.109l-27.95 17.01 0.016 41.958 0.017 41.959 32.606 18.428c17.933 10.135 33.345 18.407 34.249 18.382 0.9044-0.025 16.698-8.3971 35.096-18.605l33.454-18.56 0.317-14.198 0.3162-14.199 14.426-8.7472c7.9335-4.8111 14.808-8.961 15.276-9.2219 0.4673-0.26094 0.8397 13.971 0.827 31.628l-0.023 32.102-50.01 29.247-50.01 29.246-26.228-15.523c-14.425-8.5379-37.327-22.118-50.893-30.176l-24.665-14.654v-116.2l50.068-28.856c27.537-15.871 50.482-29.02 50.988-29.22 0.5064-0.19976 15.973 8.6028 34.372 19.562 18.398 10.959 33.999 19.925 34.668 19.925 1.8597 0 46.5-27.347 46.5-28.486 0-0.54913-0.5337-0.99804-1.186-0.99804s-26.117-14.289-56.588-31.752c-30.471-17.464-56.103-31.752-56.96-31.752-0.8573 0-19.406 10.224-41.22 22.721" fill-opacity=".75" fill-rule="evenodd" stroke-width="237.78"/><g transform="translate(9.424)" data-button="button-8"><g transform="matrix(.58703 0 0 .58703 695.18 537.14)" stroke-width="26.268"><g stroke-width="26.268"><circle cx="3968" cy="1336" r="148" stroke-width="26.268"/></g></g><g transform="translate(-943.5 -14.586)" stroke-width="15.42"><g stroke-width="15.42"><circle cx="3968" cy="1336" r="76.314" fill="#ebebeb" stroke-width="207.68"/></g></g></g><g transform="matrix(1.4379 0 0 1.1683 -1486.6 -163.29)" enable-background="new    " stroke-width="11.898"><text transform="matrix(.7382 0 0 1 3021.6 1148)" font-family="KhmerUI-Bold" font-size="86.409px" stroke-width="160.24">SELECT</text></g><g data-button="button-9"><g transform="matrix(.58703 0 0 .58703 1084.2 537.14)" stroke-width="26.268"><g stroke-width="26.268"><circle cx="3968" cy="1336" r="148" stroke-width="26.268"/></g></g><g transform="translate(-554.5 -14.586)" stroke-width="15.42"><g stroke-width="15.42"><circle cx="3968" cy="1336" r="76.314" fill="#ebebeb" stroke-width="207.68"/></g></g></g></g></g></g><g transform="translate(-260.34 -473.69)"><path d="m567.54 648.99h103.15" fill="none" stroke="#000" stroke-width=".5"/><path d="m374.56 649.32h103.15" fill="none" stroke="#000" stroke-width=".5"/><path d="m596.71 592.91h91.882" fill="none" stroke="#000" stroke-width=".5"/><path d="m568.05 607.66h103.15" fill="none" stroke="#000" stroke-width=".5"/><path d="m589.13 565.7h99.459" fill="none" stroke="#000" stroke-width=".5"/><path d="m622.99 583.02h65.606" fill="none" stroke="#000" stroke-width=".5"/><path d="m628.97 554.91h59.627" fill="none" stroke="#000" stroke-width=".5"/><path d="m528.6 591.28v-82.736" fill="none" stroke="#000" stroke-width=".5"/><text x="519.64154" y="506.8317" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="519.64154" y="506.8317" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Pause</tspan></text><text x="674.04346" y="651.5755" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="674.04346" y="651.5755" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Switch Shields</tspan></text><text x="673.08386" y="609.31451" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="673.08386" y="609.31451" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Lift Object / LightspeedDash</tspan></text><text x="691.40167" y="594.74054" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="691.40167" y="594.74054" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Jump</tspan></text><text x="690.66138" y="584.66785" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="690.66138" y="584.66785" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Spindash / Roll</tspan></text><text x="691.40601" y="567.63531" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="691.40601" y="567.63531" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Super Transform</tspan></text><text x="690.68622" y="557.03937" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="690.68622" y="557.03937" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Air Dash</tspan></text><path d="m342.83 555.19h59.627" fill="none" stroke="#000" stroke-width=".5"/><text x="315.89267" y="557.19037" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="315.89267" y="557.19037" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Air Dash</tspan></text><text x="354.72061" y="651.14825" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="354.72061" y="651.14825" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Move</tspan></text></g></svg>\n'}),require.register("controller/ps3-input.svg",function(t,e,r){r.exports='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="512" height="288" version="1.0" xmlns="http://www.w3.org/2000/svg"><g transform="translate(-260.34 -473.69)"><g transform="translate(134.82 68.294)"><path d="m435.57 481.84h33.046l-2.5898-4.9919c-1.698-3.2729-6.1119-5.7018-13.933-5.7018-7.8212 0-12.235 2.4289-13.933 5.7018z" fill="#7a7a7a" fill-rule="evenodd" stroke="#000" stroke-width="1.0793" data-button="button-7"/><path d="m293.22 481.84h33.046l-2.5898-4.9919c-1.698-3.2729-6.1119-5.7018-13.933-5.7018-7.8212 0-12.235 2.4289-13.933 5.7018z" fill="#7a7a7a" fill-rule="evenodd" stroke="#000" stroke-width="1.0793" data-button="button-6"/><path d="m320.62 497.85c-1.5358 0-2.75 1.2454-2.75 2.7812v73.156c0 1.5358 1.2142 2.75 2.75 2.75h121.78c1.5358 0 2.7812-1.2142 2.7812-2.75v-73.156c0-1.5358-1.2454-2.7812-2.7812-2.7812h-52.808c-0.2723 0.44907-0.77809 0.75-1.3438 0.75h-14.312c-0.56415 0-1.0398-0.30294-1.3125-0.75z" fill="#3f3f3f" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/><rect x="324.17" y="504.14" width="114.69" height="68.484" rx="2.7723" ry="2.6797" fill="#262626" fill-rule="evenodd"/><path d="m272.94 520.34c-5.4902 30.065-9.0709 62.226-11.765 76.34-4.2253 22.138 32.77 40.747 46.797 15.163 10.649-19.422 22.745-44.183 22.745-44.183z" fill="#262626" fill-rule="evenodd" stroke="#000"/><path d="m435.52 483.74h33.15l-2.598-4.2714c-1.7033-2.8005-6.1312-4.8789-13.977-4.8789-7.8459 0-12.274 2.0784-13.977 4.8789z" fill="#7a7a7a" fill-rule="evenodd" stroke="#000" data-button="button-5"/><path d="m293.16 483.74h33.15l-2.598-4.2714c-1.7033-2.8005-6.1312-4.8789-13.977-4.8789-7.8459 0-12.274 2.0784-13.977 4.8789z" fill="#7a7a7a" fill-rule="evenodd" stroke="#000" data-button="button-4"/><path d="m330.59 504.54c-1.6994-10.98-2.4837-16.471-3.268-20.523-0.78432-4.0523-7.7124-6.1438-17.582-6.1438s-16.797 2.0915-17.582 6.1438c-0.78431 4.0523-1.5686 9.5425-3.268 20.523" fill="#262626" fill-rule="evenodd" stroke="#000"/><circle cx="309.8" cy="529.75" r="37.909" fill="#333" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/><path d="m472.94 504.54c-1.6994-10.98-2.4837-16.471-3.268-20.523-0.78432-4.0523-7.7124-6.1438-17.582-6.1438s-16.797 2.0915-17.582 6.1438c-0.78431 4.0523-1.5686 9.5425-3.268 20.523" fill="#262626" fill-rule="evenodd" stroke="#000"/><circle cx="346.14" cy="566.61" r="24.052" fill="#333" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/><circle cx="346.14" cy="566.61" r="18.562" fill-opacity=".51852" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/><circle cx="346.14" cy="566.61" r="16.209" fill="#3b3b3b" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" data-button="left-stick button-10"/><path d="m490.08 520.34c5.4902 30.065 9.0709 62.749 11.765 76.34 4.3818 22.107-32.77 40.747-46.797 15.163-10.649-19.422-22.745-44.183-22.745-44.183z" fill="#262626" fill-rule="evenodd" stroke="#000"/><circle transform="scale(-1,1)" cx="-453.21" cy="529.75" r="37.909" fill="#333" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/><path d="m445.43 501.73c-1.5358 0-2.7812 1.2454-2.7812 2.7812v14.656h-14.688c-1.5358 0-2.75 1.2454-2.75 2.7812v15.594c0 1.5358 1.2142 2.7812 2.75 2.7812h14.688v14.656c0 1.5358 1.2454 2.7812 2.7812 2.7812h15.594c1.5358 0 2.75-1.2454 2.75-2.7812v-14.656h14.688c1.5358 0 2.75-1.2454 2.75-2.7812v-15.594c0-1.5358-1.2142-2.7812-2.75-2.7812h-14.688v-14.656c0-1.5358-1.2142-2.7812-2.75-2.7812z" fill="#262626" fill-rule="evenodd"/><rect x="353.46" y="530.28" width="11.634" height="6.6667" rx="1.5686" ry="1.5686" fill="#595959" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" data-button="button-8"/><path d="m407.19 533.61-8.4967 3.3333c-0.80899 0.31737-1.5686-0.69961-1.5686-1.5686v-3.5294c0-0.86902 0.75963-1.886 1.5686-1.5686z" fill="#595959" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" data-button="button-9"/><circle cx="382.48" cy="551.32" r="7.9347" fill="#595959" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.3796" data-button="button-16"/><circle cx="453.21" cy="512.1" r="8.2353" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round" data-button="button-3"/><circle cx="453.21" cy="547.53" r="8.2353" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round" data-button="button-0"/><circle cx="470.93" cy="529.81" r="8.2353" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round" data-button="button-1"/><circle cx="435.5" cy="529.81" r="8.2353" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round" data-button="button-2"/><path d="m301.84 501.25c-1.5358 0-2.7812 1.2454-2.7812 2.7812v14.656h-14.688c-1.5358 0-2.75 1.2454-2.75 2.7812v15.594c0 1.5358 1.2142 2.7812 2.75 2.7812h14.688v14.656c0 1.5358 1.2454 2.7812 2.7812 2.7812h15.594c1.5358 0 2.75-1.2454 2.75-2.7812v-14.656h14.688c1.5358 0 2.75-1.2454 2.75-2.7812v-15.594c0-1.5358-1.2142-2.7812-2.75-2.7812h-14.688v-14.656c0-1.5358-1.2142-2.7812-2.75-2.7812z" fill="#262626" fill-rule="evenodd"/><circle cx="416.21" cy="566.61" r="24.052" fill="#333" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/><circle cx="416.21" cy="566.61" r="18.562" fill-opacity=".51852" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round"/><circle cx="416.21" cy="566.61" r="16.209" fill="#3b3b3b" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" data-button="right-stick button-11"/><g fill="#3f3f3f" fill-rule="evenodd"><path transform="matrix(0 -.28374 -.51741 0 575.79 583.64)" d="m279.97 514.41-12.665 7.3123v-14.625z"/><path transform="matrix(0 .28374 -.51741 0 575.79 474.89)" d="m279.97 514.41-12.665 7.3123v-14.625z"/><path transform="matrix(.28374 0 0 -.51741 255.25 795.43)" d="m279.97 514.41-12.665 7.3123v-14.625z"/><path transform="matrix(-.28374 0 0 -.51741 364 795.43)" d="m279.97 514.41-12.665 7.3123v-14.625z"/></g><rect x="430.79" y="525.1" width="9.4281" height="9.4281" rx="0" ry="0" fill="none" stroke="#ff01db"/><path transform="matrix(.87668 0 0 .87521 59.31 61.955)" d="m455.3 518.14h-11.974l5.9871-10.37z" fill="none" stroke="#00ff83" stroke-width="1.1416"/><circle transform="scale(-1)" cx="-470.93" cy="-529.81" r="5.6472" fill="none" stroke="#f00" stroke-linecap="round" stroke-linejoin="round"/><path d="m449.04 543.43 8.5038 8.5038m0-8.5038-8.5038 8.5038" fill="none" stroke="#8243fb"/><g fill="#5a5a5a" stroke="#454545"><path transform="translate(.35102 .37335)" d="m318.62 523.29a1.1789 1.1789 0 0 0-0.85742 0.44726l-3.5 4.4375a1.1789 1.1789 0 0 0-2e-3 1.457l3.5 4.4688a1.1789 1.1789 0 0 0 0.92382 0.45313l8.125 0.0312a1.1789 1.1789 0 0 0 1.1836-1.1797v-8.7812a1.1789 1.1789 0 0 0-1.1562-1.1777l-8.125-0.15625a1.1789 1.1789 0 0 0-0.0918 0z" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round" data-button="button-15"/><g data-button="button-14"><path transform="matrix(-1 0 0 1 618.9 .2845)" d="m318.62 523.29a1.1789 1.1789 0 0 0-0.85742 0.44726l-3.5 4.4375a1.1789 1.1789 0 0 0-2e-3 1.457l3.5 4.4688a1.1789 1.1789 0 0 0 0.92382 0.45313l8.125 0.0312a1.1789 1.1789 0 0 0 1.1836-1.1797v-8.7812a1.1789 1.1789 0 0 0-1.1562-1.1777l-8.125-0.15625a1.1789 1.1789 0 0 0-0.0918 0z" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round"/></g><g data-button="button-13"><path transform="rotate(90 309.26 529.25)" d="m318.62 523.29a1.1789 1.1789 0 0 0-0.85742 0.44726l-3.5 4.4375a1.1789 1.1789 0 0 0-2e-3 1.457l3.5 4.4688a1.1789 1.1789 0 0 0 0.92382 0.45313l8.125 0.0312a1.1789 1.1789 0 0 0 1.1836-1.1797v-8.7812a1.1789 1.1789 0 0 0-1.1562-1.1777l-8.125-0.15625a1.1789 1.1789 0 0 0-0.0918 0z" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round"/></g><g data-button="button-12"><path transform="matrix(0 -1 -1 0 838.61 838.54)" d="m318.62 523.29a1.1789 1.1789 0 0 0-0.85742 0.44726l-3.5 4.4375a1.1789 1.1789 0 0 0-2e-3 1.457l3.5 4.4688a1.1789 1.1789 0 0 0 0.92382 0.45313l8.125 0.0312a1.1789 1.1789 0 0 0 1.1836-1.1797v-8.7812a1.1789 1.1789 0 0 0-1.1562-1.1777l-8.125-0.15625a1.1789 1.1789 0 0 0-0.0918 0z" fill="#5a5a5a" fill-rule="evenodd" stroke="#454545" stroke-linecap="round" stroke-linejoin="round"/></g></g><path d="m307.47 481.42h1.038v6.7985h3.7358v0.87358h-4.7738v-7.6721"/><path d="m454.02 485.5c0.22267 0.0754 0.43849 0.23638 0.64747 0.48303 0.2124 0.24666 0.4248 0.58582 0.6372 1.0175l1.0534 2.0966h-1.1151l-0.98149-1.9681c-0.25352-0.51387-0.50017-0.85473-0.73998-1.0226-0.23638-0.16786-0.56012-0.25179-0.97121-0.25179h-1.1305v3.2425h-1.038v-7.6721h2.3432c0.877 1e-5 1.5313 0.18329 1.963 0.54984 0.43164 0.36657 0.64747 0.91983 0.64747 1.6598 0 0.48304-0.11305 0.88386-0.33915 1.2024-0.22268 0.31861-0.54813 0.53957-0.97635 0.6629m-2.6002-3.222v2.7235h1.3052c0.50016 1e-5 0.877-0.11476 1.1305-0.34429 0.25693-0.23295 0.3854-0.57382 0.3854-1.0226 0-0.44877-0.12847-0.78622-0.3854-1.0123-0.25351-0.22953-0.63035-0.34429-1.1305-0.3443h-1.3052"/><path d="m353.63 524.56v0.43917c-0.17091-0.0817-0.33216-0.14267-0.48375-0.1828-0.15159-0.0401-0.29798-0.0602-0.43917-0.0602-0.24522 0-0.43471 0.0476-0.56846 0.14267-0.13227 0.0951-0.19841 0.23036-0.19841 0.40573 0 0.14713 0.0438 0.2586 0.13153 0.33439 0.0892 0.0743 0.25711 0.1345 0.50382 0.18057l0.27197 0.0557c0.33587 0.0639 0.58332 0.17686 0.74234 0.33885 0.16051 0.16051 0.24076 0.37601 0.24077 0.64649-1e-5 0.3225-0.1085 0.56698-0.32548 0.73343-0.2155 0.16646-0.53205 0.24968-0.94967 0.24968-0.15753 0-0.32547-0.0178-0.50381-0.0535-0.17686-0.0357-0.3604-0.0884-0.55063-0.15828v-0.46369c0.1828 0.10255 0.36188 0.17983 0.53725 0.23185 0.17537 0.052 0.34777 0.078 0.51719 0.078 0.25711 0 0.45551-0.0505 0.59522-0.15159 0.1397-0.10106 0.20955-0.24522 0.20955-0.43248 0-0.16348-0.0505-0.29129-0.15159-0.38343-0.0996-0.0921-0.2638-0.16125-0.49267-0.20733l-0.2742-0.0535c-0.33588-0.0669-0.57887-0.17165-0.72897-0.31433-0.15011-0.14267-0.22516-0.34107-0.22516-0.59521 0-0.29426 0.10329-0.52611 0.30987-0.69553 0.20806-0.16943 0.49415-0.25414 0.85827-0.25414 0.15605 0 0.31507 0.0141 0.47706 0.0423 0.162 0.0283 0.3277 0.0706 0.49713 0.12707m0.90286-0.10923h2.1044v0.37898h-1.6541v0.98533h1.585v0.37898h-1.585v1.206h1.6942v0.37897h-2.1446v-3.3283m2.8891 0h0.45032v2.9493h1.6207v0.37897h-2.071v-3.3283m2.5414 0h2.1044v0.37898h-1.6541v0.98533h1.585v0.37898h-1.585v1.206h1.6942v0.37897h-2.1446v-3.3283m5.3815 0.25637v0.47483c-0.15159-0.14118-0.31359-0.2467-0.48598-0.31656-0.17092-0.0698-0.35297-0.10477-0.54617-0.10477-0.38047 0-0.67176 0.11667-0.87388 0.34999-0.20212 0.23185-0.30318 0.56773-0.30318 1.0076 0 0.43843 0.10106 0.77431 0.30318 1.0076 0.20212 0.23184 0.49341 0.34776 0.87388 0.34776 0.1932 0 0.37525-0.0349 0.54617-0.10477 0.17239-0.0698 0.33439-0.17537 0.48598-0.31656v0.47038c-0.15754 0.107-0.32473 0.18726-0.50159 0.24076-0.17537 0.0535-0.36114 0.0802-0.55732 0.0802-0.50381 0-0.90062-0.15382-1.1904-0.46146-0.2898-0.30912-0.43471-0.73045-0.43471-1.264 0-0.53502 0.14491-0.95635 0.43471-1.264 0.28981-0.30913 0.68662-0.46369 1.1904-0.46369 0.19915 0 0.38641 0.0267 0.56178 0.0802 0.17685 0.052 0.34256 0.13079 0.49713 0.23631m0.23853-0.25637h2.8156v0.37898h-1.1815v2.9493h-0.45254v-2.9493h-1.1815v-0.37898" fill="#e6e6e6"/><path d="m396.51 524.56v0.43917c-0.17092-0.0817-0.33217-0.14267-0.48376-0.1828-0.15159-0.0401-0.29798-0.0602-0.43916-0.0602-0.24522 0-0.43471 0.0476-0.56847 0.14267-0.13227 0.0951-0.1984 0.23036-0.1984 0.40573 0 0.14713 0.0438 0.2586 0.13152 0.33439 0.0892 0.0743 0.25711 0.1345 0.50382 0.18057l0.27197 0.0557c0.33588 0.0639 0.58333 0.17686 0.74235 0.33885 0.1605 0.16051 0.24076 0.37601 0.24076 0.64649 0 0.3225-0.10849 0.56698-0.32547 0.73343-0.2155 0.16646-0.53206 0.24968-0.94967 0.24968-0.15754 0-0.32548-0.0178-0.50382-0.0535-0.17686-0.0357-0.3604-0.0884-0.55063-0.15828v-0.46369c0.1828 0.10255 0.36189 0.17983 0.53726 0.23185 0.17536 0.052 0.34776 0.078 0.51719 0.078 0.2571 0 0.45551-0.0505 0.59521-0.15159 0.1397-0.10106 0.20955-0.24522 0.20955-0.43248 0-0.16348-0.0505-0.29129-0.15159-0.38343-0.0996-0.0921-0.2638-0.16125-0.49267-0.20733l-0.2742-0.0535c-0.33587-0.0669-0.57886-0.17165-0.72897-0.31433-0.1501-0.14267-0.22516-0.34107-0.22515-0.59521-1e-5 -0.29426 0.10328-0.52611 0.30986-0.69553 0.20807-0.16943 0.49416-0.25414 0.85827-0.25414 0.15605 0 0.31507 0.0141 0.47707 0.0423 0.16199 0.0283 0.3277 0.0706 0.49713 0.12707m0.44139-0.10923h2.8156v0.37898h-1.1815v2.9493h-0.45254v-2.9493h-1.1815v-0.37898m4.0082 0.44362-0.61082 1.6564h1.2239l-0.61305-1.6564m-0.25413-0.44362h0.5105l1.2685 3.3283h-0.46815l-0.30318-0.85381h-1.5003l-0.30318 0.85381h-0.47484l1.2707-3.3283m3.841 1.7678c0.0966 0.0327 0.19023 0.10255 0.28089 0.20955 0.0921 0.10701 0.18429 0.25414 0.27643 0.4414l0.457 0.90954h-0.48375l-0.42579-0.85381c-0.10998-0.22292-0.21698-0.3708-0.32102-0.44362-0.10254-0.0728-0.24299-0.10924-0.42133-0.10924h-0.49044v1.4067h-0.45031v-3.3283h1.0166c0.38046 0 0.66432 0.0795 0.85158 0.23853s0.28088 0.39904 0.28089 0.72006c-1e-5 0.20955-0.0491 0.38343-0.14713 0.52165-0.0966 0.13821-0.2378 0.23407-0.42357 0.28757m-1.128-1.3978v1.1815h0.56624c0.21698 0 0.38046-0.0498 0.49044-0.14936 0.11146-0.10106 0.16719-0.24893 0.16719-0.44362s-0.0557-0.34108-0.16719-0.43917c-0.10998-0.0996-0.27346-0.14936-0.49044-0.14936h-0.56624m1.9328-0.37006h2.8156v0.37898h-1.1815v2.9493h-0.45254v-2.9493h-1.1815v-0.37898" fill="#e6e6e6"/><text transform="scale(-1.6252 -.6153)" x="-223.68372" y="-815.48474" fill="#b3b3b3" font-family="Arial" stroke-width="1px" style="line-height:0%" xml:space="preserve"><tspan x="-223.68372" y="-815.48474" font-size="3.0753px" style="line-height:1.25">1</tspan></text><text transform="scale(-1.6252 -.6153)" x="-220.45108" y="-815.48474" fill="#b3b3b3" font-family="Arial" stroke-width="1px" style="line-height:0%" xml:space="preserve"><tspan x="-220.45108" y="-815.48474" font-size="3.0753px" style="line-height:1.25">2</tspan></text><text transform="scale(-1.6252 -.6153)" x="-216.92226" y="-815.5238" fill="#b3b3b3" font-family="Arial" stroke-width="1px" style="line-height:0%" xml:space="preserve"><tspan x="-216.92226" y="-815.5238" font-size="3.0753px" style="line-height:1.25">3</tspan></text><text transform="scale(-1.6252 -.6153)" x="-212.86066" y="-815.49377" fill="#b3b3b3" font-family="Arial" stroke-width="1px" style="line-height:0%" xml:space="preserve"><tspan x="-212.86066" y="-815.49377" font-size="3.0753px" style="line-height:1.25">4</tspan></text><rect x="343.44" y="498.32" width="2.0832" height="2.7005" rx="0" ry="1.5686" fill="#1a1a1a"/><rect x="350" y="498.32" width="2.0832" height="2.7005" rx="0" ry="1.5686" fill="#1a1a1a"/><rect x="355.86" y="498.32" width="2.0832" height="2.7005" rx="0" ry="1.5686" fill="#1a1a1a"/><rect x="360.96" y="498.32" width="2.0832" height="2.7005" rx="0" ry="1.5686" fill="#f00"/><g transform="matrix(.080659 0 0 .080659 351.05 512.47)" clip-rule="evenodd" fill-rule="evenodd" stroke-width="2.256"><path d="m394.88 444.14-0.0851 78.095-20.924-6.8051v-91.793l26.708 7.0613c17.096 4.5948 27.559 13.526 27.388 29.18-0.17 18.206-8.5908 25.521-25.007 20.757v-35.901c0-4.3389-8.0805-4.593-8.0805-0.59435z" fill="#de0029"/><path d="m364.26 500.28-9.867 3.3186c-6.3802 2.2124-11.823-2.9768-5.9543-5.1048l4.763-1.7003-17.947-5.701c-5.5292 1.8724-10.718 5.8707-10.377 11.486 0.34027 5.6992 13.354 7.061 23.392 8.6775 9.3559 1.5306 17.862 0.68001 25.603-2.0424v-5.8705zm30.706 21.95 18.288-6.381-18.458-5.8692v11.824z" fill="#f3c202"/><path d="m443.62 505.13 0.34-0.0857c7.9956-2.8065 11.398-6.7213 10.548-10.378-1.3611-6.1248-11.143-9.4434-26.199-10.55-10.802-0.76514-21.434 1.6162-31.811 5.1889l-1.7013 0.5962 18.628 5.7848 10.887-3.6586c11.398-2.1262 15.992 1.6165 5.0189 5.1048l-5.444 1.8705zm-69.748-27.052-8.2516 2.8065 8.2516 2.5524z" fill="#326db3"/><path d="m413.25 515.85 30.366-10.718-19.734-6.1267-29.09 9.9534v1.0221zm-39.382-18.801-9.6118 3.2327 9.6118 3.0627zm20.924 5.0207v-12.166l18.628 5.7848zm-41.594-5.2748 20.67-7.4013v-5.9551l-8.2513-2.5524-29.941 10.124c-0.0851 0-0.25513 0.0841-0.42513 0.0841z" fill="#00aa9e"/></g></g></g><g transform="translate(-260.34 -473.69)"><path transform="translate(134.82 68.294)" d="m456.39 552.34 69.71 17.901" fill="none" stroke="#000" stroke-width=".5"/><path transform="translate(134.82 68.294)" d="m439.07 532.57 87.033 22.593" fill="none" stroke="#000" stroke-width=".5"/><path transform="translate(134.82 68.294)" d="m457.95 515.41 68.155 16.266" fill="none" stroke="#000" stroke-width=".5"/><path transform="translate(134.82 68.294)" d="m474.2 532.63 51.904 12.605" fill="none" stroke="#000" stroke-width=".5"/><text transform="translate(134.82 68.294)" x="527.39423" y="547.27045" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="527.39423" y="547.27045" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Spindash / Roll</tspan></text><text transform="translate(134.82 68.294)" x="527.69214" y="572.71301" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="527.69214" y="572.71301" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Jump</tspan></text><text transform="translate(134.82 68.294)" x="527.45691" y="557.97314" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="527.45691" y="557.97314" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Lightspeed Dash / Lift Object</tspan></text><text transform="translate(134.82 68.294)" x="526.81152" y="534.13593" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="526.81152" y="534.13593" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Super Transform</tspan></text><path transform="translate(134.82 68.294)" d="m470.33 481.76 53.163 13.403" fill="none" stroke="#000" stroke-width=".5"/><text transform="translate(134.82 68.294)" x="524.19629" y="497.62772" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="524.19629" y="497.62772" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Air Dash</tspan></text><path transform="translate(134.82 68.294)" d="m435.96 571.55 90.146 25.55" fill="none" stroke="#000" stroke-width=".5"/><text transform="translate(134.82 68.294)" x="529.45886" y="599.68732" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="529.45886" y="599.68732" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Switch Shields</tspan></text><path transform="translate(134.82 68.294)" d="m292.1 481.01-53.163 13.403" fill="none" stroke="#000" stroke-width=".5"/><text transform="translate(134.82 68.294)" x="212.72356" y="496.87265" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="212.72356" y="496.87265" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Air Dash</tspan></text><path transform="translate(134.82 68.294)" d="m294.23 543.48-55.024 27.964" fill="none" stroke="#000" stroke-width=".5"/><text transform="translate(134.82 68.294)" x="220.96754" y="573.75909" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="220.96754" y="573.75909" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Move</tspan></text><path transform="translate(134.82 68.294)" d="m401.03 523.14v-50.774" fill="none" stroke="#000" stroke-width=".5"/><text transform="translate(134.82 68.294)" x="392.06915" y="470.65366" fill="#000000" font-family="sans-serif" font-size="40px" letter-spacing="0px" word-spacing="0px" style="line-height:1.25" xml:space="preserve"><tspan x="392.06915" y="470.65366" font-family="sans-serif" font-size="6px" style="font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal">Pause</tspan></text></g></svg>\n'}),require.register("controller/xbox360-input.svg",function(t,e,r){r.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="512"\n   height="288"\n   id="svg2"\n   sodipodi:version="0.32"\n   inkscape:version="1.0.2 (e86c870879, 2021-01-15)"\n   sodipodi:docname="xbox360-input.svg"\n   inkscape:output_extension="org.inkscape.output.svg.inkscape"\n   version="1.0">\n  <defs\n     id="defs4">\n    <inkscape:perspective\n       sodipodi:type="inkscape:persp3d"\n       inkscape:vp_x="0 : 663.1653 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_z="744.09448 : 663.1653 : 1"\n       inkscape:persp3d-origin="372.04724 : 487.7716 : 1"\n       id="perspective10" />\n    <inkscape:perspective\n       id="perspective2390"\n       inkscape:persp3d-origin="372.04724 : 487.7716 : 1"\n       inkscape:vp_z="744.09448 : 663.1653 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 663.1653 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective12"\n       inkscape:persp3d-origin="886.50018 : 236.98421 : 1"\n       inkscape:vp_z="1773.0004 : 286.98421 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 286.98421 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3355"\n       inkscape:persp3d-origin="67.123741 : 170.98342 : 1"\n       inkscape:vp_z="134.24748 : 187.98302 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 187.98302 : 1"\n       sodipodi:type="inkscape:persp3d" />\n    <inkscape:perspective\n       id="perspective3443"\n       inkscape:persp3d-origin="177.16534 : 255.09444 : 1"\n       inkscape:vp_z="354.33069 : 314.14955 : 1"\n       inkscape:vp_y="0 : 1000 : 0"\n       inkscape:vp_x="0 : 314.14955 : 1"\n       sodipodi:type="inkscape:persp3d" />\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     gridtolerance="10000"\n     guidetolerance="10"\n     objecttolerance="10"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="1.7956884"\n     inkscape:cx="145.53463"\n     inkscape:cy="120.12192"\n     inkscape:document-units="px"\n     inkscape:current-layer="layer4"\n     showgrid="false"\n     inkscape:window-width="1920"\n     inkscape:window-height="1026"\n     inkscape:window-x="1050"\n     inkscape:window-y="31"\n     showguides="true"\n     inkscape:guide-bbox="true"\n     inkscape:document-rotation="0"\n     inkscape:window-maximized="1">\n    <sodipodi:guide\n       position="399.98588,184.41855"\n       orientation="1,0"\n       id="guide4464" />\n    <sodipodi:guide\n       position="113.8839,194.16412"\n       orientation="1,0"\n       id="guide5621" />\n  </sodipodi:namedview>\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1"\n     transform="translate(-260.34243,-473.69226)">\n    <g\n       id="g237"\n       transform="translate(134.82195,68.29447)">\n      <g\n         id="g817"\n         transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)">\n        <path\n           style="fill:#d8d8d8;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           d="m 628.39816,299.51068 c -0.21851,-1.09254 -4.15168,-18.13627 -4.58869,-20.97689 -0.43702,-2.84062 -1.09255,-4.37019 -4.5887,-6.77379 -32.81359,-22.55933 -17.06203,-23.18579 -55.11042,-17.04898 -6.77379,1.09254 -15.51417,18.13627 -15.51417,18.13627 z"\n           id="path3352-3-3"\n           sodipodi:nodetypes="cssscc"\n           data-button="button-7" />\n        <path\n           style="fill:#d8d8d8;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           d="m 124.78295,299.51068 c 0.21851,-1.09254 4.15168,-18.13627 4.58869,-20.97689 0.43702,-2.84062 1.09255,-4.37019 4.5887,-6.77379 32.81359,-22.55933 17.06203,-23.18579 55.11042,-17.04898 6.77379,1.09254 15.51417,18.13627 15.51417,18.13627 z"\n           id="path3352-3"\n           sodipodi:nodetypes="cssscc"\n           data-button="button-6" />\n        <g\n           id="g4442"\n           transform="matrix(0.5752286,0,0,0.5752286,161.90411,275.5957)"\n           style="stroke:#000000;stroke-width:2;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1">\n          <rect\n             style="fill:#4d4d4d;fill-opacity:1;stroke:#000000;stroke-width:2;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="rect4436"\n             width="45.344299"\n             height="27.532085"\n             x="390.84552"\n             y="630.43866"\n             ry="4.973381"\n             rx="4.973381" />\n          <rect\n             rx="4.973381"\n             ry="4.973381"\n             y="630.43866"\n             x="305.26193"\n             height="27.532085"\n             width="45.344299"\n             id="rect4438"\n             style="fill:#4d4d4d;fill-opacity:1;stroke:#000000;stroke-width:2;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n          <rect\n             style="fill:#4d4d4d;fill-opacity:1;stroke:#000000;stroke-width:2;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="rect4440"\n             width="32.910625"\n             height="27.325605"\n             x="354.27057"\n             y="630.23145"\n             ry="4.973381"\n             rx="4.973381" />\n        </g>\n        <path\n           sodipodi:nodetypes="cssscc"\n           id="path3365"\n           d="m 655.50745,318.60794 c -0.21851,-1.09254 -4.15168,-18.13627 -4.58869,-20.97689 -0.43702,-2.84062 -1.09255,-4.37019 -4.5887,-6.77379 -32.81359,-22.55933 -71.20626,-33.45047 -109.25465,-27.31366 -6.77379,1.09254 -15.51417,18.13627 -15.51417,18.13627 z"\n           style="fill:#d8d8d8;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           data-button="button-5" />\n        <path\n           style="fill:#d8d8d8;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           d="m 97.673659,318.60794 c 0.218509,-1.09254 4.151681,-18.13627 4.588691,-20.97689 0.43702,-2.84062 1.09255,-4.37019 4.5887,-6.77379 32.81359,-22.55933 71.20626,-33.45047 109.25465,-27.31366 6.77379,1.09254 15.51417,18.13627 15.51417,18.13627 z"\n           id="path3352"\n           sodipodi:nodetypes="cssscc"\n           data-button="button-4" />\n        <path\n           style="fill:#cccccc;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           d="m 692.40625,795.6875 c 36.84007,1.09337 52.80772,-18.83796 56.40625,-117.4375 3.77124,-103.33202 -63.29854,-299.68945 -82.96875,-349.21875 -19.67025,-49.52929 -118.71329,-75.82532 -163.65625,-47.5 -36.98649,23.31075 -77.50632,26.375 -127.03125,26.375 -49.52492,0 -90.0135,-3.06425 -127,-26.375 -12.6402,-7.9665 -29.58112,-11.63473 -47.8125,-11.65625 C 153.75246,269.82 98.606739,293.43208 84.46875,329.03125 64.798509,378.56054 -2.2712417,574.91797 1.5,678.25 c 3.5785642,98.05266 19.406856,118.31763 55.8125,117.45312 84.47581,-9.05099 93.14578,-56.86454 150.09375,-101.60937 52.79739,-41.48369 89.78117,-45.2585 167.46875,-43.75 77.68757,-1.50848 114.64011,2.26634 167.4375,43.75 56.94798,44.7448 65.61794,92.54276 150.09375,101.59375 z"\n           id="path3354"\n           sodipodi:nodetypes="cssssscsscscsc" />\n        <path\n           style="fill:#808080;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           d="m 376.55538,626.9578 c -70.07127,10e-6 -105.56406,1.53631 -141.34375,21.125 -74.56634,40.82366 -89.5368,105.33263 -168.59376,147.59375 77.18929,-11.18226 87.06449,-58.28282 142.1875,-101.59375 52.7974,-41.48366 89.78118,-45.2585 167.46876,-43.75 77.68757,-1.50851 114.64011,2.26634 167.4375,43.75 55.31458,43.46144 65.07175,90.74856 143,101.71875 -79.25058,-42.25894 -94.17658,-106.857 -168.8125,-147.71875 -35.77969,-19.58869 -71.27248,-21.125 -141.34375,-21.125 z"\n           id="path3191" />\n        <ellipse\n           style="opacity:1;fill:#d4d4d4;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.24301;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           id="path3339"\n           cx="485.73596"\n           cy="515.71448"\n           rx="90.509804"\n           ry="93.149673" />\n        <ellipse\n           style="opacity:1;fill:#d4d4d4;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           id="path3335"\n           cx="162.54053"\n           cy="382.21249"\n           rx="76.556213"\n           ry="71.276474" />\n        <ellipse\n           id="path3337"\n           style="opacity:1;fill:#d4d4d4;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.24301;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           cx="264.74118"\n           cy="515.71448"\n           rx="90.509804"\n           ry="93.149673" />\n        <circle\n           style="opacity:1;fill:#333333;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           id="path3249"\n           cx="265.90213"\n           cy="501.4498"\n           r="60.547413" />\n        <path\n           id="path3253"\n           style="fill:#3a3a3a;fill-opacity:1;fill-rule:evenodd;stroke:#515151;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n           d="m 249.60884,556.05516 c 0,5.37504 32.58658,4.96298 32.58658,0 0,-20.05425 16.27567,-36.33015 36.32964,-36.33015 5.24879,1.15665 7.27598,-35.55207 0,-36.55035 -20.05397,0 -36.32964,-16.2759 -36.32964,-36.33015 0,-5.39506 -32.58658,-5.80591 -32.58658,0 0,20.05425 -16.27567,36.33015 -36.32964,36.33015 -5.88003,-0.22498 -7.05562,36.34403 0,36.55035 20.05397,0 36.32964,16.2759 36.32964,36.33015 z"\n           sodipodi:nodetypes="ccccssccc"\n           data-button="dpad-0" />\n        <g\n           id="g3292"\n           data-button="button-9">\n          <rect\n             ry="16.450199"\n             rx="16.450203"\n             y="372.24924"\n             x="437.39334"\n             height="29.558952"\n             width="37.428303"\n             id="rect3288"\n             style="opacity:1;fill:#d1d1d1;fill-opacity:1;fill-rule:evenodd;stroke:#6d6d6d;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n          <path\n             transform="matrix(0,1.1259413,1.1259413,0,20.719223,57.395722)"\n             inkscape:randomized="0"\n             inkscape:rounded="0"\n             inkscape:flatsided="true"\n             sodipodi:arg2="0.52359878"\n             sodipodi:arg1="-0.52359878"\n             sodipodi:r2="4.7132702"\n             sodipodi:r1="9.4265404"\n             sodipodi:cy="386.38617"\n             sodipodi:cx="292.76215"\n             sodipodi:sides="3"\n             id="path3290"\n             style="opacity:1;fill:#717171;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             sodipodi:type="star"\n             d="m 300.92577,381.6729 -8.16362,14.13981 -8.16363,-14.13981 z" />\n        </g>\n        <g\n           id="g3296-7"\n           data-button="button-8">\n          <rect\n             style="opacity:1;fill:#d1d1d1;fill-opacity:1;fill-rule:evenodd;stroke:#6d6d6d;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="rect3298-5"\n             width="37.428303"\n             height="29.558952"\n             x="282.40161"\n             y="372.24924"\n             rx="16.450203"\n             ry="16.450199" />\n          <path\n             sodipodi:type="star"\n             style="opacity:1;fill:#717171;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="path3300-6"\n             sodipodi:sides="3"\n             sodipodi:cx="292.76215"\n             sodipodi:cy="386.38617"\n             sodipodi:r1="9.4265404"\n             sodipodi:r2="4.7132702"\n             sodipodi:arg1="-0.52359878"\n             sodipodi:arg2="0.52359878"\n             inkscape:flatsided="true"\n             inkscape:rounded="0"\n             inkscape:randomized="0"\n             transform="matrix(0,1.1259413,-1.1259413,0,738.02813,57.395722)"\n             d="m 300.92577,381.6729 -8.16362,14.13981 -8.16363,-14.13981 z" />\n        </g>\n        <circle\n           id="path3310"\n           style="opacity:1;fill:#a7a7a7;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.07159;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           cx="379.25415"\n           cy="382.24289"\n           r="27.00733" />\n        <g\n           id="g4372"\n           data-button="button-16">\n          <circle\n             id="path3304"\n             style="opacity:1;fill:#007800;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             cx="379.25418"\n             cy="387.28577"\n             r="42.671013" />\n          <circle\n             style="opacity:1;fill:#979797;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="path3302"\n             cx="379.25418"\n             cy="387.28577"\n             r="36.252529" />\n          <path\n             style="fill:#007800;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.25pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n             d="m 344.94011,404.6356 c 11.61506,-28.78785 27.87652,-46.26619 54.74832,-50.37874 l 3.08442,2.57034 c -21.94963,7.88995 -42.83002,29.43216 -53.72019,53.46315 z"\n             id="path3306"\n             sodipodi:nodetypes="ccccc" />\n          <path\n             sodipodi:nodetypes="ccccc"\n             id="path3308"\n             d="M 412.64636,405.10615 C 401.90402,378.48134 383.44171,358.47214 358.58899,354.6686 l -2.85267,2.37721 c 20.3004,7.29712 43.03458,31.06484 53.1065,53.29021 z"\n             style="fill:#007800;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.25pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />\n        </g>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:0%;font-family:\'DejaVu Sans Mono\';-inkscape-font-specification:\'DejaVu Sans Mono\';text-align:center;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           x="472.78644"\n           y="364.41809"\n           id="text3312"><tspan\n             sodipodi:role="line"\n             id="tspan3314"\n             x="472.78644"\n             y="364.41809"\n             style="font-size:10.9335px;line-height:-2">START</tspan></text>\n        <path\n           d="m 542.19462,503.98223 c 0,31.40573 -25.48873,56.89446 -56.89447,56.89446 -31.40574,0 -56.89447,-25.48873 -56.89447,-56.89446 0,-31.40575 25.48873,-56.89448 56.89447,-56.89448 31.40574,0 56.89447,25.48873 56.89447,56.89448 z m -8.30373,-1e-5 c 0,26.82209 -21.76866,48.59074 -48.59074,48.59074 -26.82209,0 -48.59075,-21.76865 -48.59075,-48.59074 0,-26.82209 21.76866,-48.59074 48.59075,-48.59074 26.82208,0 48.59074,21.76865 48.59074,48.59074 z"\n           style="fill:#dfdfdf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.06703;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n           id="path3348" />\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:0%;font-family:\'DejaVu Sans Mono\';-inkscape-font-specification:\'DejaVu Sans Mono\';text-align:center;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           x="284.78766"\n           y="362.92157"\n           id="text3316"><tspan\n             sodipodi:role="line"\n             id="tspan3318"\n             x="284.78766"\n             y="362.92157"\n             style="font-size:10.9335px;line-height:1">BACK</tspan></text>\n        <path\n           id="path3350"\n           style="fill:#dfdfdf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.06703;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n           d="m 218.67656,375.05998 c 0,30.22813 -24.533,54.76113 -54.76114,54.76113 -30.22814,0 -54.76114,-24.533 -54.76114,-54.76113 0,-30.22815 24.533,-54.76115 54.76114,-54.76115 30.22814,0 54.76114,24.533 54.76114,54.76115 z m -7.99237,-10e-6 c 0,25.81636 -20.95242,46.76877 -46.76877,46.76877 -25.81636,0 -46.76878,-20.95241 -46.76878,-46.76877 0,-25.81636 20.95242,-46.76877 46.76878,-46.76877 25.81635,0 46.76877,20.95241 46.76877,46.76877 z" />\n        <path\n           id="path3320"\n           style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#969696;stroke-width:0.81337;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n           d="m 379.23104,433.61031 c 12.61575,0 24.35251,-4.77192 32.3309,-13.285 7.1145,-7.5913 15.68671,-13.9149 22.63475,-13.9149 6.94804,0 -0.53333,0 -0.53333,0 0,0 27.94422,0 27.94422,0 10.45366,0 18.93778,-8.48412 18.93778,-19.03121 0,-10.54708 -8.48412,-19.0312 -18.93778,-19.0312 0,0 -27.94422,0 -27.94422,0 0,0 7.48137,0 0.53333,0 -6.94804,0 -15.52025,-6.3236 -22.63475,-13.9149 -7.97839,-8.51308 -19.73829,-13.285 -32.3309,-13.285 -12.5926,0 -24.3525,4.77192 -32.33089,13.285 -7.1145,7.5913 -15.68671,13.9149 -22.63475,13.9149 -6.94804,0 0.53333,0 0.53333,0 0,0 -27.94422,0 -27.94422,0 -10.45366,0 -18.93778,8.48412 -18.93778,19.0312 0,10.54709 8.48412,19.03121 18.93778,19.03121 0,0 27.94422,0 27.94422,0 0,0 -7.48137,0 -0.53333,0 6.94804,0 15.52025,6.3236 22.63475,13.9149 7.97839,8.51308 19.71515,13.285 32.33089,13.285 z"\n           sodipodi:nodetypes="cssccsccsscssccsccssc" />\n        <path\n           id="path3341"\n           style="fill:#dfdfdf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.06703;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n           d="m 338.14038,501.44979 c 0,39.8755 -32.36275,72.23825 -72.23826,72.23825 -39.87552,0 -72.23826,-32.36275 -72.23826,-72.23825 0,-39.87552 32.36274,-72.23827 72.23826,-72.23827 39.87551,0 72.23826,32.36275 72.23826,72.23827 z m -10.54315,-1e-5 c 0,34.0557 -27.63942,61.69511 -61.69511,61.69511 -34.0557,0 -61.69512,-27.63941 -61.69512,-61.69511 0,-34.0557 27.63942,-61.69511 61.69512,-61.69511 34.05569,0 61.69511,27.63941 61.69511,61.69511 z" />\n        <g\n           id="g3233-5"\n           data-button="button-10">\n          <circle\n             style="opacity:1;fill:#4d4d4d;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="path3235-6"\n             cx="163.84641"\n             cy="375.03775"\n             r="49.266716" />\n          <circle\n             id="path3237-6"\n             style="opacity:1;fill:#333333;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             cx="163.84641"\n             cy="375.03778"\n             r="34.993183" />\n          <g\n             id="g3239-4"\n             transform="matrix(1.0746269,0,0,1.0746269,-358.16498,-156.16434)">\n            <circle\n               transform="matrix(0.08411222,0,0,0.08411222,471.14277,452.73529)"\n               id="path3241-0"\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n            <circle\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               id="path3243-0"\n               transform="matrix(0.08411222,0,0,0.08411222,417.73213,452.73529)"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n            <circle\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               id="path3245-4"\n               transform="matrix(0,0.08411222,-0.08411222,0,527.33836,479.69524)"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n            <circle\n               transform="matrix(0,0.08411222,-0.08411222,0,527.33836,426.2846)"\n               id="path3247-6"\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n          </g>\n        </g>\n        <g\n           id="g3224"\n           data-button="button-11">\n          <circle\n             id="path3196"\n             style="opacity:1;fill:#4d4d4d;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             cx="491.28583"\n             cy="494.31305"\n             r="49.266716"\n             transform="translate(-5.525239)" />\n          <circle\n             style="opacity:1;fill:#333333;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:4.22368;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="path3198"\n             transform="matrix(0.7102804,0,0,0.7102804,136.8099,143.21219)"\n             cx="491.28583"\n             cy="494.31305"\n             r="49.266716" />\n          <g\n             transform="matrix(1.0746269,0,0,1.0746269,-36.250788,-36.889032)"\n             id="g3218">\n            <circle\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               id="path3200"\n               transform="matrix(0.08411222,0,0,0.08411222,471.14277,452.73529)"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n            <circle\n               transform="matrix(0.08411222,0,0,0.08411222,417.73213,452.73529)"\n               id="path3202"\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n            <circle\n               transform="matrix(0,0.08411222,-0.08411222,0,527.33836,479.69524)"\n               id="path3210-6"\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n            <circle\n               style="fill:#9b9b9b;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:26.75;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n               id="path3212-9"\n               transform="matrix(0,0.08411222,-0.08411222,0,527.33836,426.2846)"\n               cx="491.28583"\n               cy="494.31305"\n               r="49.266716" />\n          </g>\n        </g>\n        <circle\n           id="path3405"\n           style="opacity:1;fill:#dadada;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.26316;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           cx="645.6366"\n           cy="385.60663"\n           r="36.203922" />\n        <path\n           sodipodi:nodetypes="cssssscsscscsc"\n           id="path3363"\n           d="m 692.40625,795.6875 c 36.84007,1.09337 52.80772,-18.83796 56.40625,-117.4375 3.77124,-103.33202 -63.29854,-299.68945 -82.96875,-349.21875 -19.67025,-49.52929 -118.71329,-75.82532 -163.65625,-47.5 -36.98649,23.31075 -77.50632,26.375 -127.03125,26.375 -49.52492,0 -90.0135,-3.06425 -127,-26.375 -12.6402,-7.9665 -29.58112,-11.63473 -47.8125,-11.65625 C 153.75246,269.82 98.606739,293.43208 84.46875,329.03125 64.798509,378.56054 -2.2712417,574.91797 1.5,678.25 c 3.5785642,98.05266 19.406856,118.31763 55.8125,117.45312 84.47581,-9.05099 93.14578,-56.86454 150.09375,-101.60937 52.79739,-41.48369 89.78117,-45.2585 167.46875,-43.75 77.68757,-1.50848 114.64011,2.26634 167.4375,43.75 56.94798,44.7448 65.61794,92.54276 150.09375,101.59375 z"\n           style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />\n        <circle\n           style="opacity:1;fill:#dadada;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.26316;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           id="path3403"\n           cx="536.64771"\n           cy="385.60663"\n           r="36.203922" />\n        <circle\n           style="opacity:1;fill:#dadada;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.26316;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           id="path3407"\n           cx="590.95355"\n           cy="333.56348"\n           r="36.203922" />\n        <circle\n           id="path3409"\n           style="opacity:1;fill:#dadada;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.26316;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n           cx="590.95355"\n           cy="441.04388"\n           r="36.203922" />\n        <g\n           id="g4272"\n           data-button="button-2">\n          <circle\n             style="opacity:1;fill:#004cca;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="path3367"\n             cx="536.64771"\n             cy="382.96677"\n             r="25.267321" />\n          <path\n             style="fill:#ffffff;fill-opacity:0.486772;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n             d="m 553.83094,369.19255 c 0,5.88801 -7.72084,1.63138 -17.23402,1.63138 -9.51318,0 -17.23402,4.25663 -17.23402,-1.63138 0,-5.888 7.72084,-10.66668 17.23402,-10.66668 9.51318,0 17.23402,4.77868 17.23402,10.66668 z"\n             id="path3433"\n             sodipodi:nodetypes="csssc" />\n          <path\n             sodipodi:nodetypes="csssc"\n             id="path3462"\n             d="m 557.61978,396.01861 c 0,-6.53475 -10.46192,4.49228 -21.02005,4.49228 -10.55813,0 -21.02005,-10.71153 -21.02005,-4.17678 0,6.53475 10.46192,11.52283 21.02005,11.52283 10.55813,0 21.02005,-5.30358 21.02005,-11.83833 z"\n             style="fill:#000000;fill-opacity:0.26455;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1" />\n        </g>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;line-height:0%;font-family:\'DejaVu Sans Mono\';-inkscape-font-specification:\'DejaVu Sans Mono Bold\';text-align:center;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:0.70356804;stroke:none;stroke-width:3pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;"\n           x="491.71802"\n           y="429.30984"\n           id="text3381"\n           transform="scale(1.0913562,0.91629113)"><tspan\n             sodipodi:role="line"\n             id="tspan3383"\n             x="491.71802"\n             y="429.30984"\n             style="font-size:31.1568px;line-height:-2;fill:#000000;fill-opacity:0.70356804;">X</tspan></text>\n        <g\n           id="g4267"\n           data-button="button-3">\n          <circle\n             id="path3371"\n             style="fill:#ffaa00;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             transform="scale(-1)"\n             cx="-591.33069"\n             cy="-328.28375"\n             r="25.267321" />\n          <path\n             sodipodi:nodetypes="csssc"\n             id="path3436"\n             d="m 609.04671,315.31534 c 0,5.88801 -7.72084,1.63138 -17.23402,1.63138 -9.51318,0 -17.23402,4.25663 -17.23402,-1.63138 0,-5.888 7.72084,-10.66668 17.23402,-10.66668 9.51318,0 17.23402,4.77868 17.23402,10.66668 z"\n             style="fill:#ffffff;fill-opacity:0.486772;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1" />\n          <path\n             sodipodi:nodetypes="csssc"\n             id="path3456"\n             d="m 612.51723,341.12116 c 0,-6.53475 -10.46192,4.49228 -21.02005,4.49228 -10.55813,0 -21.02005,-10.71153 -21.02005,-4.17678 0,6.53475 10.46192,11.52283 21.02005,11.52283 10.55813,0 21.02005,-5.30358 21.02005,-11.83833 z"\n             style="fill:#000000;fill-opacity:0.26455;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1" />\n        </g>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;line-height:0%;font-family:\'DejaVu Sans Mono\';-inkscape-font-specification:\'DejaVu Sans Mono Bold\';text-align:center;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:0.70356804;stroke:none;stroke-width:3pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;"\n           x="541.82349"\n           y="369.6312"\n           id="text3385"\n           transform="scale(1.0913562,0.91629113)"><tspan\n             sodipodi:role="line"\n             id="tspan3387"\n             x="541.82349"\n             y="369.6312"\n             style="font-size:31.1568px;line-height:-2;fill:#000000;fill-opacity:0.70356804;">Y</tspan></text>\n        <g\n           id="g4257"\n           data-button="button-0">\n          <circle\n             transform="scale(-1)"\n             style="fill:#009a00;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             id="path3373"\n             cx="-591.33069"\n             cy="-437.64978"\n             r="25.267321" />\n          <path\n             style="fill:#ffffff;fill-opacity:0.486772;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n             d="m 609.04671,423.73903 c 0,5.88801 -7.72084,1.63138 -17.23402,1.63138 -9.51318,0 -17.23402,4.25663 -17.23402,-1.63138 0,-5.888 7.72084,-10.66668 17.23402,-10.66668 9.51318,0 17.23402,4.77868 17.23402,10.66668 z"\n             id="path3438"\n             sodipodi:nodetypes="csssc" />\n          <path\n             style="fill:#000000;fill-opacity:0.26455;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n             d="m 612.51723,450.91606 c 0,-6.53475 -10.46192,4.49228 -21.02005,4.49228 -10.55813,0 -21.02005,-10.71153 -21.02005,-4.17678 0,6.53475 10.46192,11.52283 21.02005,11.52283 10.55813,0 21.02005,-5.30358 21.02005,-11.83833 z"\n             id="path3460"\n             sodipodi:nodetypes="csssc" />\n        </g>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;line-height:0%;font-family:\'DejaVu Sans Mono\';-inkscape-font-specification:\'DejaVu Sans Mono Bold\';text-align:center;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:0.70356804;stroke:none;stroke-width:3pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;"\n           x="541.82349"\n           y="488.98853"\n           id="text3389"\n           transform="scale(1.0913562,0.91629113)"><tspan\n             sodipodi:role="line"\n             id="tspan3391"\n             x="541.82349"\n             y="488.98853"\n             style="font-size:31.1568px;line-height:-2;fill:#000000;fill-opacity:0.70356804;">A</tspan></text>\n        <g\n           id="g4262"\n           data-button="button-1">\n          <circle\n             id="path3369"\n             style="opacity:1;fill:#740000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n             cx="646.01373"\n             cy="382.96677"\n             r="25.267321" />\n          <path\n             sodipodi:nodetypes="csssc"\n             id="path3440"\n             d="m 663.92784,369.52718 c 0,5.88801 -7.72084,1.63138 -17.23402,1.63138 -9.51318,0 -17.23402,4.25663 -17.23402,-1.63138 0,-5.888 7.72084,-10.66668 17.23402,-10.66668 9.51318,0 17.23402,4.77868 17.23402,10.66668 z"\n             style="fill:#ffffff;fill-opacity:0.486772;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1" />\n          <path\n             style="fill:#000000;fill-opacity:0.26455;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1"\n             d="m 667.73018,396.01861 c 0,-6.53475 -10.46192,4.49228 -21.02005,4.49228 -10.55813,0 -21.02005,-10.71153 -21.02005,-4.17678 0,6.53475 10.46192,11.52283 21.02005,11.52283 10.55813,0 21.02005,-5.30358 21.02005,-11.83833 z"\n             id="path3464"\n             sodipodi:nodetypes="csssc" />\n        </g>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;line-height:0%;font-family:\'DejaVu Sans Mono\';-inkscape-font-specification:\'DejaVu Sans Mono Bold\';text-align:center;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:0.70356804;stroke:none;stroke-width:3pt;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;"\n           x="591.54114"\n           y="429.32504"\n           id="text3393"\n           transform="scale(1.0913562,0.91629113)"><tspan\n             sodipodi:role="line"\n             id="tspan3395"\n             x="591.54114"\n             y="429.32504"\n             style="font-size:31.1568px;line-height:-2;fill:#000000;fill-opacity:0.70356804;">B</tspan></text>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:0%;font-family:Arial;-inkscape-font-specification:Arial;text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#808080;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           x="334.25269"\n           y="350.16708"\n           id="text4416"><tspan\n             sodipodi:role="line"\n             id="tspan4418"\n             x="334.25269"\n             y="350.16708"\n             style="font-size:19.0724px;line-height:1.25">1</tspan></text>\n        <text\n           id="text4420"\n           y="350.16708"\n           x="412.03046"\n           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:0%;font-family:Arial;-inkscape-font-specification:Arial;text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#808080;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           xml:space="preserve"><tspan\n             y="350.16708"\n             x="412.03046"\n             id="tspan4422"\n             sodipodi:role="line"\n             style="font-size:19.0724px;line-height:1.25">2</tspan></text>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-weight:normal;line-height:0%;font-family:\'Bitstream Vera Sans\';fill:#007800;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;"\n           x="337.12454"\n           y="424.88486"\n           id="text4424"><tspan\n             sodipodi:role="line"\n             id="tspan4426"\n             x="337.12454"\n             y="424.88486"\n             style="font-size:40px;line-height:1.25;fill:#007800;fill-opacity:1;"></tspan></text>\n        <text\n           id="text4428"\n           y="436.35324"\n           x="334.25269"\n           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:0%;font-family:Arial;-inkscape-font-specification:Arial;text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#808080;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           xml:space="preserve"><tspan\n             y="436.35324"\n             x="334.25269"\n             id="tspan4430"\n             sodipodi:role="line"\n             style="font-size:19.0724px;line-height:1.25">3</tspan></text>\n        <text\n           xml:space="preserve"\n           style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:0%;font-family:Arial;-inkscape-font-specification:Arial;text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#808080;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"\n           x="412.03046"\n           y="436.35324"\n           id="text4432"><tspan\n             sodipodi:role="line"\n             id="tspan4434"\n             x="412.03046"\n             y="436.35324"\n             style="font-size:19.0724px;line-height:1.25">4</tspan></text>\n      </g>\n    </g>\n  </g>\n  <g\n     inkscape:groupmode="layer"\n     id="layer4"\n     inkscape:label="Layer 2"\n     transform="translate(-125.52048,-405.39779)">\n    <path\n       style="fill:none;stroke:#000000;stroke-width:0.499999;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="m 455.79635,519.99047 69.71001,17.90083"\n       id="path4466-5-6"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:0.499999;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="m 438.47373,504.22466 87.03273,22.59255"\n       id="path4466-6"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:0.499999;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="m 457.35152,487.45952 68.15505,16.26615"\n       id="path4466-5-6-4"\n       sodipodi:nodetypes="cc" />\n    <path\n       style="fill:none;stroke:#000000;stroke-width:0.499999;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="m 473.60248,502.87892 51.90361,12.60482"\n       id="path4466-6-0"\n       sodipodi:nodetypes="cc" />\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:40px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1"\n       x="526.79633"\n       y="517.52081"\n       id="text3125-3-3-9-9"><tspan\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6"\n         x="526.79633"\n         y="517.52081"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:6.00001px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:1">Spindash / Roll</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:40px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1"\n       x="527.09454"\n       y="540.36304"\n       id="text3125-3-3-9-9-0"><tspan\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6-4"\n         x="527.09454"\n         y="540.36304"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:6.00001px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:1">Jump</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:40px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1"\n       x="526.85919"\n       y="529.62354"\n       id="text3125-3-3-9-9-6"><tspan\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6-2"\n         x="526.85919"\n         y="529.62354"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:6.00001px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:1">Lightspeed Dash / Lift Object</tspan></text>\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:40px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1"\n       x="526.21417"\n       y="506.18649"\n       id="text3125-3-3-9-9-67"><tspan\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6-5"\n         x="526.21417"\n         y="506.18649"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:6.00001px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:1">Super Transform</tspan></text>\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1.55126;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 656.93727,296.09185 821.8762,337.67559"\n       id="path4466-5-6-4-6"\n       sodipodi:nodetypes="cc"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)" />\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:124.101px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3.10253"\n       x="824.07147"\n       y="345.30997"\n       id="text3125-3-3-9-9-67-9"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)"><tspan\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6-5-8"\n         x="824.07147"\n         y="345.30997"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:18.6152px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:3.10253">Air Dash</tspan></text>\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1.55126;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 98.337471,294.83145 -66.601455,336.41519"\n       id="path4466-5-6-4-6-7"\n       sodipodi:nodetypes="cc"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)" />\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:124.101px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3.10253"\n       x="-147.9368"\n       y="344.04959"\n       id="text3125-3-3-9-9-67-9-2"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)"><tspan\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6-5-8-8"\n         x="-147.9368"\n         y="344.04959"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:18.6152px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:3.10253">Air Dash</tspan></text>\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1.55126;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 195.45,507.2765 -65.76263,575.40558"\n       id="path4466-5-6-4-6-7-2"\n       sodipodi:nodetypes="cc"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)" />\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:124.101px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3.10253"\n       x="-122.35963"\n       y="582.59192"\n       id="text3125-3-3-9-9-67-9-2-9"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)"><tspan\n         sodipodi:role="line"\n         id="tspan3123-1-4-1-6-5-8-8-9"\n         x="-122.35963"\n         y="582.59192"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:18.6152px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:3.10253">Move</tspan></text>\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1.55126;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 455.73274,349.69679 V 192.16781"\n       id="path3121"\n       sodipodi:nodetypes="cc"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)" />\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:124.101px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3.10253"\n       x="427.94226"\n       y="186.86783"\n       id="text3125"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)"><tspan\n         sodipodi:role="line"\n         id="tspan3123"\n         x="427.94226"\n         y="186.86783"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:18.6152px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:3.10253">Pause</tspan></text>\n    <path\n       style="fill:none;stroke:#000000;stroke-width:1.55126;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"\n       d="M 542.19462,503.98223 821.8762,583.25165"\n       id="path2959"\n       sodipodi:nodetypes="cc"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)" />\n    <text\n       xml:space="preserve"\n       style="font-style:normal;font-weight:normal;font-size:124.101px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:3.10253"\n       x="832.28497"\n       y="591.27563"\n       id="text3125-3"\n       transform="matrix(0.32231801,0,0,0.32231801,260.60086,378.95899)"><tspan\n         sodipodi:role="line"\n         id="tspan3123-1"\n         x="832.28497"\n         y="591.27563"\n         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:18.6152px;font-family:sans-serif;-inkscape-font-specification:\'sans-serif, Normal\';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:3.10253">Switch Shields</tspan></text>\n  </g>\n</svg>\n'}),require.register("debug/LineDump.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LineDump=void 0;var o=e("curvature/base/View");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,o.View);var e,r,n,l=s(u);function u(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=l.call.apply(l,[this].concat(i)),e=c(t),n='<div class = "line-dump" style = "--x:[[x]];--y:[[y]];--length:[[len]];--angle:[[angle]]">\n\t\t<div class = "line" style = "border-color:[[color]]"></div>\n\t</div>',(r="template")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.x=t.args.x||0,t.args.y=t.args.y||0,t}return e=u,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.LineDump=u}),require.register("debug/PointDump.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PointDump=void 0;var o=e("curvature/base/View");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,o.View);var e,r,n,l=s(u);function u(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=l.call.apply(l,[this].concat(i)),e=c(t),n='<div class = "point-dump">\n\t\t<div class = "point" style = "--color:[[color]]">[[x]], [[y]]</div>\n\t</div>',(r="template")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.x=t.args.x||0,t.args.y=t.args.y||0,t}return e=u,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.PointDump=u}),require.register("debug/arrow-east.svg",function(t,e,r){r.exports='<svg width="497.81px" height="497.81px" enable-background="new 0 0 497.812 497.812" version="1.1" viewBox="0 0 497.81 497.81" xmlns="http://www.w3.org/2000/svg">\n\t<g transform="matrix(-1 0 0 1 497.81 0)">\n\t\t<path d="m203.66 312.91 117.03 117.03-67.906 67.875-248.91-248.91 248.91-248.91 67.906 67.875-117.06 117.06 290.28-0.031 0.031 127.97z"/>\n\t</g>\n</svg>\n'}),require.register("effects/Cylinder.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Cylinder=void 0;var o=e("curvature/base/View"),i=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.View);var r,n,u,f=c(p);function p(t,r){var n,o,i,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),n=f.call(this,t,r),o=l(n),i="template",a=e("./twist.svg"),i in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,n.args.scale=n.args.scale||0,n.args.id=n.args.id||"cylinder",n.args.width=n.args.width||64,n.args.height=n.args.height||64,n}return r=p,(n=[{key:"onRendered",value:function(){var t=this,e=new i.Tag('<canvas width = "'.concat(this.args.width,'" height = "').concat(this.args.height,'">')),r=e.getContext("2d");r.imageSmoothingEnabled=!1;for(var n=r.getImageData(0,0,this.args.width,this.args.height),o=n.data,a=0;a<o.length;a+=4){var s,c,l=a/4,u=Math.floor(l/this.args.width),f=l%this.args.width-this.args.width/2,p=u-this.args.height/2;Math.sqrt(Math.pow(f,2)+Math.pow(p,2)),Math.min(this.args.width,this.args.height);c=128+4*f*(Math.abs(f/this.args.width)/2),128,0,o[a+0]=null!==(s=c)&&void 0!==s?s:128,o[a+1]=(128,128),o[a+2]=null!==0?0:128,o[a+3]=255}r.putImageData(n,0,0),e.toBlob(function(e){return t.args.blob=URL.createObjectURL(e)},"image/png")}},{key:"name",get:function(){return"".concat(this.args.id)}}])&&a(r.prototype,n),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),p}();t.Cylinder=f}),require.register("effects/Droop.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Droop=void 0;var o=e("curvature/base/View"),i=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,o.View);var r,n,u,p=c(h);function h(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),f(l(n=p.call(this,t,r)),"template",e("./droop.svg")),n.args.scale=n.args.scale||0,n.args.id=n.args.id||"droop",n.args.width=2*(t.width||64),n.args.height=t.height||64,n.args.intensity=1,n.args.droopWidth="102%",n}return r=h,u=[{key:"generateMap",value:function(t,e){var r="".concat(t,"::").concat(e),n=this.memoMaps;if(n.has(r))return Promise.resolve(n.get(r));var o=new i.Tag('<canvas width = "'.concat(t,'" height = "').concat(e,'">')),a=o.getContext("2d");a.imageSmoothingEnabled=!1;for(var s=a.getImageData(0,0,t,e),c=s.data,l=0;l<c.length;l+=4){var u,f,p=l/4,h=p%t/t,g=(Math.floor(p/t),-Math.PI+h*Math.PI);128,f=128+Math.round(128*(.5*Math.cos(g)+.5)),0,255,c[l+0]=(128,128),c[l+1]=null!==(u=f)&&void 0!==u?u:128,c[l+2]=null!==0?0:128,c[l+3]=(255,255)}return a.putImageData(s,0,0),new Promise(function(t){o.toBlob(function(e){var o=URL.createObjectURL(e,"image/png");n.set(r,o),t(o)})})}}],(n=[{key:"onRendered",value:function(){var t=this;this.constructor.generateMap(this.args.width,this.args.height).then(function(e){t.args.blob=e})}},{key:"name",get:function(){return"".concat(this.args.id)}}])&&a(r.prototype,n),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),h}();t.Droop=p,f(p,"memoMaps",new Map)}),require.register("effects/Pinch.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Pinch=void 0;var o=e("curvature/base/View"),i=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.View);var r,n,u,f=c(p);function p(t,r){var n,o,i,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),n=f.call(this,t,r),o=l(n),i="template",a=e("./twist.svg"),i in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,n.args.scale=n.args.scale||0,n.args.id=n.args.id||"pinch",n.args.width=n.args.width||64,n.args.height=n.args.height||64,n}return r=p,(n=[{key:"onRendered",value:function(){var t=this,e=new i.Tag('<canvas width = "'.concat(this.args.width,'" height = "').concat(this.args.height,'">')),r=e.getContext("2d");r.imageSmoothingEnabled=!1;for(var n=r.getImageData(0,0,this.args.width,this.args.height),o=n.data,a=0;a<o.length;a+=4){var s,c,l,u,f=void 0,p=0,h=a/4,g=Math.floor(h/this.args.width),d=h%this.args.width-this.args.width/2,y=g-this.args.height/2,b=Math.sqrt(Math.pow(d,2)+Math.pow(y,2)),v=Math.min(this.args.width,this.args.height)/2;b<v?(f=Math.pow(1-b/v,2),p=Math.pow(1-b/v,2)):(f=0,p=0),l=128+4*d*f,u=128+4*y*p,0,o[a+0]=null!==(s=l)&&void 0!==s?s:128,o[a+1]=null!==(c=u)&&void 0!==c?c:128,o[a+2]=null!==0?0:128,o[a+3]=255}r.putImageData(n,0,0),e.toBlob(function(e){return t.args.blob=URL.createObjectURL(e)},"image/png")}},{key:"name",get:function(){return"".concat(this.args.id)}}])&&a(r.prototype,n),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),p}();t.Pinch=f}),require.register("effects/ScreenFire.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenFire=void 0;var o=e("curvature/base/View");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.View);var r,n,l,u=s(f);function f(){var t,r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=u.call.apply(u,[this].concat(a)),r=c(t),n="template",o=e("./screen-fire"),n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,t}return r=f,(n=[{key:"onAttach",value:function(t){this.args.animation="playing"}}])&&i(r.prototype,n),l&&i(r,l),Object.defineProperty(r,"prototype",{writable:!1}),f}();t.ScreenFire=u}),require.register("effects/ScreenWarp.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenWarp=void 0;var o=e("curvature/base/View");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.View);var r,n,l,u=s(f);function f(){var t,r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=u.call.apply(u,[this].concat(a)),r=c(t),n="template",o=e("./screen-fire"),n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,t}return r=f,(n=[{key:"onAttach",value:function(t){var e=this;this.args.animation="playing",this.onTimeout(5e3,function(){return e.remove()})}}])&&i(r.prototype,n),l&&i(r,l),Object.defineProperty(r,"prototype",{writable:!1}),f}();t.ScreenWarp=u}),require.register("effects/Twist.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Twist=void 0;var o=e("curvature/base/View"),i=e("curvature/base/Tag");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.View);var r,n,u,f=c(p);function p(t,r){var n,o,i,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),n=f.call(this,t,r),o=l(n),i="template",a=e("./twist.svg"),i in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,n.args.scale=n.args.scale||0,n.args.id=n.args.id||"twist",n.args.width=n.args.width||64,n.args.height=n.args.height||64,n.args.dx=0,n.args.dy=0,n}return r=p,(n=[{key:"onRendered",value:function(){var t=this,e=new i.Tag('<canvas width = "64" height = "64">'),r=e.getContext("2d");r.imageSmoothingEnabled=!1;for(var n=r.getImageData(0,0,64,64),o=n.data,a=0;a<o.length;a+=4){var s,c,l,u,f=1,p=a/4,h=p%64-31.5,g=Math.floor(p/64)-31.5,d=Math.sqrt(Math.pow(h,2)+Math.pow(g,2));l=128+4*g*(f=d>32?0:Math.pow(1-d/32,3)),u=128-4*h*f,o[a+0]=null!==(s=l)&&void 0!==s?s:0,o[a+1]=null!==(c=u)&&void 0!==c?c:0,o[a+2]=0,o[a+3]=255}r.putImageData(n,0,0),e.toBlob(function(e){return t.args.blob=URL.createObjectURL(e)},"image/png")}},{key:"name",get:function(){return"".concat(this.args.id)}}])&&a(r.prototype,n),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),p}();t.Twist=f}),require.register("effects/droop.svg",function(t,e,r){r.exports='<svg\n\twidth  ="100%"\n\theight ="100%"\n>\n\t<defs>\n\n\t\t<filter\n\t\t\tcv-ref = "filter"\n\t\t\tcolor-interpolation-filters="sRGB"\n\t\t\tid = "[[id]]"\n\t\t\twidth  ="102%"\n\t\t\theight ="1204%"\n\t\t\tx  = "-1%"\n\t\t\ty  = "-2%"\n\n\t\t>\n\t\t\t<feImage\n\t\t\t\tpreserveAspectRatio = "none"\n\t\t\t\tresult  = "DisplacementSourceLeft"\n\t\t\t\tcv-attr = "width:droopWidthLeft,href:blob"\n\t\t\t/>\n\n\t\t\t<feImage\n\t\t\t\tpreserveAspectRatio = "none"\n\t\t\t\tresult  = "DisplacementSourceRightInvert"\n\t\t\t\tcv-attr = "x:droopRightStart,width:droopWidthRight,href:blob"\n\t\t\t/>\n\n\t\t\t<feColorMatrix\n\t\t\t\tin     = "DisplacementSourceRightInvert"\n\t\t\t\tresult = "DisplacementSourceRight"\n\t\t\t\ttype   = "matrix"\n\t\t\t\tvalues="\n\t\t\t\t\t1 0 0 0 0\n\t\t\t\t\t0 -1 0 0 1.5\n\t\t\t\t\t0 0 1 0 0\n\t\t\t\t\t0 0 0 1 0"\n\t\t\t/>\n\n\t\t\t<feComposite\n\t\t\t\toperator="over"\n\t\t\t\tin     = "DisplacementSourceLeft"\n\t\t\t\tin2    = "DisplacementSourceRight"\n\t\t\t\tresult = "DisplacementSource"\n\t\t\t\twidth  ="102%"\n\t\t\t/>\n\n\t\t\t<feFlood flood-color="#808000" result = "OffsetNeutral" />\n\n\t\t\t<feComposite\n\t\t\t\toperator="over"\n\t\t\t\tin     = "DisplacementSource"\n\t\t\t\tin2    = "OffsetNeutral"\n\t\t\t\tresult = "DisplacementResult"\n\t\t\t\twidth  ="102%"\n\t\t\t/>\n\n\t\t\t<feComposite\n\t\t\t\toperator="over"\n\t\t\t\tin     = "DisplacementSource"\n\t\t\t\tin2    = "OffsetNeutral"\n\t\t\t\tresult = "DisplacementResult"\n\t\t\t\twidth  ="102%"\n\t\t\t/>\n\n\t\t\t<feDisplacementMap\n\t\t\t\txChannelSelector = "R"\n\t\t\t\tyChannelSelector = "G"\n\t\t\t\tin      = "SourceGraphic"\n\t\t\t\tin2     = "DisplacementResult"\n\t\t\t\tcv-ref  = "displace"\n\t\t\t\tcv-attr = "scale:scale"\n\t\t\t\twidth  ="102%"\n\t\t\t/>\n\n\t\t</filter>\n\n\t</defs>\n</svg>\n'}),require.register("effects/screen-fire.html",function(t,e,r){r.exports='<div class = "screen-fire [[animation]]">\n\t<div class = "fire-strip" style = "--index:0"><div></div></div>\n\t<div class = "fire-strip" style = "--index:1"><div></div></div>\n\t<div class = "fire-strip" style = "--index:2"><div></div></div>\n\t<div class = "fire-strip" style = "--index:3"><div></div></div>\n\t<div class = "fire-strip" style = "--index:4"><div></div></div>\n\t<div class = "fire-strip" style = "--index:5"><div></div></div>\n\t<div class = "fire-strip" style = "--index:6"><div></div></div>\n\t<div class = "fire-strip" style = "--index:7"><div></div></div>\n\t<div class = "fire-strip" style = "--index:8"><div></div></div>\n\t<div class = "fire-strip" style = "--index:9"><div></div></div>\n\t<div class = "fire-strip" style = "--index:10"><div></div></div>\n\t<div class = "fire-strip" style = "--index:11"><div></div></div>\n\t<div class = "fire-strip" style = "--index:12"><div></div></div>\n\t<div class = "fire-strip" style = "--index:13"><div></div></div>\n\t<div class = "fire-strip" style = "--index:14"><div></div></div>\n\t<div class = "fire-strip" style = "--index:15"><div></div></div>\n\t<div class = "fire-strip" style = "--index:16"><div></div></div>\n</div>\n'}),require.register("effects/twist.svg",function(t,e,r){r.exports='<svg\n\theight ="100%"\n\twidth  ="100%"\n>\n\t<defs>\n\n\t\t<filter\n\t\t\tcv-ref = "filter"\n\t\t\tcolor-interpolation-filters="sRGB"\n\t\t\theight = "100%"\n\t\t\twidth  = "100%"\n\t\t\tid     = "[[id]]"\n\t\t\tx      = "0%"\n\t\t\ty      = "0%"\n\n\t\t>\n\t\t\t<feFlood\n\t\t\t\tflood-color="#808000"\n\t\t\t\theight = "100%"\n\t\t\t\twidth  = "100%"\n\t\t\t\tresult = "OffsetNeutral"\n\t\t\t\tx="0"\n\t\t\t\ty="0"\n\t\t\t/>\n\n\t\t\t<feImage\n\t\t\t\txlink:href="[[blob]]"\n\t\t\t\tresult = "DisplacementSource"\n\t\t\t\theight = "100%"\n\t\t\t\twidth  = "100%"\n\t\t\t/>\n\n\t\t\t<feOffset\n\t\t\t\tin      = "DisplacementSource"\n\t\t\t\tresult  = "OffsetSource"\n\t\t\t\tcv-attr =  "dx:dx,dy:dy"\n\t\t\t/>\n\n\t\t\t<feComposite\n\t\t\t\toperator="over"\n\t\t\t\tin2    = "OffsetNeutral"\n\t\t\t\tin     = "OffsetSource"\n\t\t\t\tresult = "DisplacementResult"\n\t\t\t/>\n\n\t\t\t<feDisplacementMap\n\t\t\t\txChannelSelector = "R"\n\t\t\t\tyChannelSelector = "G"\n\t\t\t\tin      = "SourceGraphic"\n\t\t\t\tin2     = "DisplacementResult"\n\t\t\t\tcv-ref  = "displace"\n\t\t\t\tcv-attr = "scale:scale"\n\t\t\t/>\n\n\t\t</filter>\n\n\t</defs>\n</svg>\n'}),require.register("initialize.js",function(t,e,r){"use strict";var n=e("./audio/Bgm"),o=e("./audio/Sfx"),i=e("./viewport/Viewport"),a=(e("curvature/base/Tag"),e("./tileMap/TileMap"),e("matrix-api/Matrix"));if("/accept-sso"===location.pathname){var s=new a.Matrix("https://matrix.org/_matrix"),c=new URLSearchParams(location.search).get("loginToken");s.completeSso(c)}else{var l=new i.Viewport;document.addEventListener("DOMContentLoaded",function(){console.log("Starting..."),navigator.serviceWorker&&navigator.serviceWorker.register("/worker-cache.js");var t=0;l.render(document.body);!function e(){requestAnimationFrame(e);var r=performance.now(),n=r-t;n<1e3/(l.args.maxFps||61)||(l.update(),l.args.fps=1e3/n,t=r)}()}),n.Bgm.register("STAR_SHIELD","/audio/leslie-wai/feel-the-sunshine.mp3"),n.Bgm.register("RADICAL_CITY","/audio/colbreakz/848482_ColBreakz---My-Universe.mp3"),n.Bgm.register("WEST_SIDE","/audio/akselmcbossmcgee123/1066486_Blammed-By-Pico.mp3"),n.Bgm.register("UNDERGROUND_ZONE","/audio/tee-lopes/under-ground-zone-remix.mp3"),n.Bgm.register("MISTY_RUINS","audio/neil-voss/extol.mp3"),n.Bgm.register("MANIC_HARBOR","/audio/bobenshibobsled/1024371_Curse-Ska-Version.mp3"),n.Bgm.register("TITLE_THEME","/Sonic/carnival-night-zone-act-2-beta.mp3"),n.Bgm.register("MENU_THEME","/Sonic/s3k-competition.mp3"),n.Bgm.register("TUTORIAL_THEME","/audio/teravex/1083419_Lowbeat.mp3"),n.Bgm.register("ACT-BOSS","/audio/F-777/Double-Cross.mp3"),n.Bgm.register("ZONE-BOSS","/audio/dex-arson/rampage.mp3"),n.Bgm.register("NO_WAY","/audio/sonic/no-way.mp3"),o.Sfx.register("PLAYER_DAMAGED","/Sonic/S3K_35.wav"),o.Sfx.register("RINGS_SCATTERED","/Sonic/ring-loss.wav",{maxConcurrent:3,volume:.75,fudgeFactor:0}),o.Sfx.register("BUMPER_BOUNCE","/Sonic/S3K_AA.wav"),o.Sfx.register("RING_COLLECTED","/Sonic/ring-collect.wav",{maxConcurrent:3,volume:.25,fudgeFactor:.1}),o.Sfx.register("SPIKE_DAMAGE","/Sonic/S2_26.wav",{maxConcurrent:1,volume:.5,fudgeFactor:.1}),o.Sfx.register("EMBLEM_COLLECTED","/custom/emblem-collect.wav",{maxConcurrent:3,volume:.25,fudgeFactor:.1}),o.Sfx.register("EMERALD_COLLECTED","/Sonic/S3K_9C.wav"),o.Sfx.register("OBJECT_DESTROYED","/Sonic/object-destroyed.wav",{maxConcurrent:3,volume:.75,fudgeFactor:.1}),o.Sfx.register("BLOCK_DESTROYED","/Sonic/0A3H.wav",{maxConcurrent:4,volume:1,fudgeFactor:0,startTime:.4}),o.Sfx.register("ROCKS_DESTROYED","/Sonic/rock-smash.wav"),o.Sfx.register("SPEEDPAD_HIT","/Sonic/S2_2B.wav",{maxConcurrent:3,volume:.75,fudgeFactor:.1}),o.Sfx.register("SPRING_HIT","/Sonic/spring-activated.wav",{maxConcurrent:2,volume:.5,fudgeFactor:.1}),o.Sfx.register("SWITCH_HIT","/Sonic/switch-activated.wav",{maxConcurrent:3,volume:.3,fudgeFactor:.2}),o.Sfx.register("ALT_BEEP","/Sonic/S2_28.wav",{maxConcurrent:8,volume:.3,fudgeFactor:.2}),o.Sfx.register("KNOCK_PLATFORM","/Sonic/S2_57.wav",{maxConcurrent:3,volume:.3,fudgeFactor:.2}),o.Sfx.register("STARPOST_HIT","/Sonic/starpost-active.wav",{volume:.5}),o.Sfx.register("SHOT_FIRED","/Sonic/shot-fired.wav",{volume:.5}),o.Sfx.register("THRUSTER_FIRED","/Sonic/mecha-sonic-thruster.wav"),o.Sfx.register("BOSS_DAMAGED","/Sonic/S3K_6E.wav"),o.Sfx.register("BOSS_DUDHIT","/Sonic/S2_59.wav"),o.Sfx.register("FAIL","/Sonic/S2_6D.wav"),o.Sfx.register("WATER_ACQUIRE","/Sonic/S3K_3F.wav",{volume:.75,fudgeFactor:.1}),o.Sfx.register("WATER_BOUNCE","/Sonic/S3K_44.wav",{volume:.5,fudgeFactor:.1}),o.Sfx.register("ELECTRIC_ACQUIRE","/Sonic/S3K_41.wav",{volume:.75,fudgeFactor:.1}),o.Sfx.register("ELECTRIC_JUMP","/Sonic/S3K_45.wav",{maxConcurrent:3,volume:.5,fudgeFactor:.1}),o.Sfx.register("FIRE_ACQUIRE","/Sonic/S3K_3E.wav",{volume:.75,fudgeFactor:.1}),o.Sfx.register("FIRE_DASH","/Sonic/S3K_43.wav",{volume:.5,fudgeFactor:.1}),o.Sfx.register("CHOPPER_DRONE","/Sonic/drill-car-copter.wav"),o.Sfx.register("CHOPPER_DRONE","/Sonic/drill-car-copter.wav"),o.Sfx.register("MECHASONIC_TAKEOFF","/Sonic/mecha-sonic-takeoff.wav"),o.Sfx.register("MECHASONIC_SCRAPE","/Sonic/mecha-sonic-scrape.wav"),o.Sfx.register("MECHASONIC_SLAP","/Sonic/mecha-sonic-thruster-close.wav"),o.Sfx.register("TAILS_FLY","/Sonic/tails-flying.wav"),o.Sfx.register("LIGTNING_STRIKE","/Sonic/S3K_4E.wav",{maxConcurrent:1,volume:1,fudgeFactor:0}),o.Sfx.register("SECRET_FOUND","/doom/dssecret.wav"),o.Sfx.register("GRINDING","/Sonic/S3K_DB_sus.wav"),o.Sfx.register("SPIKES_OUT","/Sonic/S3K_A6.wav"),o.Sfx.register("SPIKES_IN","/Sonic/S3K_52.wav"),o.Sfx.register("POGO_BOUNCE","/Sonic/0A8H.wav",{maxConcurrent:3,volume:.5,fudgeFactor:.25})}}),require.register("intro/BootCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BootCard=void 0;var o=e("./Card");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Card);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.cardName="boot-card",r.args.text="PRODUCED BY\nSEAN MORRIS UNDER\nTHE APACHE 2.0 LICENSE",r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.BootCard=l}),require.register("intro/Card.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0;var o=e("curvature/base/View");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.View);var r,n,l,u=s(f);function f(){var t,r,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),t=u.call(this,i,a),r=c(t),n="template",o=e("./card.html"),n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,i.text=i.text||"this is an intro card.",t.args.timeout=t.args.timeout||1e3,t.args.animation="opening",t.done=new Promise(function(e){return t.accept=e}),t}return r=f,(n=[{key:"play",value:function(t){var e=this;this.onTimeout(50,function(){return e.args.animation="opened"});var r=this.args.waitFor||Promise.resolve();return new Promise(function(t){r.then(function(){var r=e.args.timeout;r>0&&(e.onTimeout(r-500,function(){return e.args.animation="closing"}),e.onTimeout(r,function(){e.args.animation="closed";var n=new Promise(function(t){return e.onTimeout(r,t)});t(e.accept([n]))}))})})}}])&&i(r.prototype,n),l&&i(r,l),Object.defineProperty(r,"prototype",{writable:!1}),f}();t.Card=u}),require.register("intro/DebianCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DebianCard=void 0;var o=e("./SkippableCard");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.SkippableCard);var r,n,l,u=s(f);function f(t,r){var n,o,i,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),n=u.call(this,t,r),o=c(n),i="template",a=e("./debian-card.html"),i in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,n.args.cardName="debian-card",n.args.text="",n}return r=f,n&&i(r.prototype,n),l&&i(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r}();t.DebianCard=u}),require.register("intro/GamepadCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GamepadCard=void 0;var o=e("./SkippableCard");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.SkippableCard);var r,n,l,u=s(f);function f(t,r){var n,o,i,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),n=u.call(this,t,r),o=c(n),i="template",a=e("./gamepad-card.html"),i in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,n.args.timeout=2500,n.args.cardName="gamepad-card",n.args.text="",n}return r=f,n&&i(r.prototype,n),l&&i(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r}();t.GamepadCard=u}),require.register("intro/LoadingCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingCard=void 0;var o=e("./Card");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Card);var e,r,n,c=s(l);function l(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(r=c.call(this,t,e)).args.cardName="loading-card",r}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.LoadingCard=l}),require.register("intro/LogoSplash.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LogoSplash=void 0;var o=e("curvature/base/View"),i=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,o.View);var e,r,n,l=c(u);function u(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e,r)).template='\n\t\t<div class = "player-waving"></div>\n\t\t<div class = "splash [[animation]]" style = "\n\t\t\tpointer-events: [[pointerEvents]]\n\t\t">\n\t\t\t<div class = "center">SEAN<span class = "min">MORRIS</span><div class = "sm">SM</div></div>\n\t\t\t<div class = "center">SEAN<span class = "min">MORRIS</span><div class = "sm">SM</div></div>\n\t\t\t<div class = "center">SEAN<span class = "min">MORRIS</span><div class = "sm">SM</div></div>\n\t\t</div>',t}return e=u,(r=[{key:"onAttached",value:function(){var t=this;this.alreadyAttached||(this.alreadyAttached=!0,this.args.left=0,this.args.right=0,this.args.fade=1,this.args.frame=0,this.args.fullFade=1,this.args.pointerEvents="all",this.args.animation="hide",this.onTimeout(500,function(){return t.args.animation="slide"}),this.onTimeout(1250,function(){return t.args.animation="show"}),this.onTimeout(5e3,function(){return t.args.animation="done"}),this.onTimeout(1250,function(){return i.Sfx.play("RING_COLLECTED")}))}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.LogoSplash=u}),require.register("intro/NoWayCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NoWayCard=void 0;var o=e("./Card"),i=e("../audio/Bgm"),a=e("../ui/CharacterString");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,o.Card);var r,n,f,p=l(h);function h(t,r){var n,o,i,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),n=p.call(this,t,r),o=u(n),i="template",s=e("./no-way.html"),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,n.args.cardName="no-way-card",n.args.text=new a.CharacterString({value:"Error: "+n.args.errorString}),n.args.backdrop="...",n}return r=h,(n=[{key:"onAttached",value:function(){i.Bgm.play("NO_WAY",!0)}}])&&s(r.prototype,n),f&&s(r,f),Object.defineProperty(r,"prototype",{writable:!1}),h}();t.NoWayCard=p}),require.register("intro/SaneCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SaneCard=void 0;var o=e("./SkippableCard");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.SkippableCard);var r,n,l,u=s(f);function f(t,r){var n,o,i,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),n=u.call(this,t,r),o=c(n),i="template",a=e("./sane-card.html"),i in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,n.args.cardName="sane-card",n.args.text="",n}return r=f,n&&i(r.prototype,n),l&&i(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r}();t.SaneCard=u}),require.register("intro/SeanCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SeanCard=void 0;var o=e("./Card"),i=e("./LogoSplash");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,o.Card);var e,r,n,l=c(u);function u(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=l.call(this,t,e)).args.cardName="sean-card",r.args.text=new i.LogoSplash({},e),r}return e=u,r&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.SeanCard=u}),require.register("intro/Series.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Series=void 0;var o=e("curvature/base/View");e("./Card");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,o.View);var e,r,n,l=s(u);function u(){var t,e,r,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),t=l.call(this,o,i),e=c(t),n='<div class = "intro-cards" cv-each = "cards:card:c">[[card]]</div>',(r="template")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.cards=t.args.cards,t.args.cards=[],t.args.card=null,t.startTime=!1,t}return e=u,(r=[{key:"play",value:function(){var t=this,e=this.cards.shift(),r=new Promise(function(t){return e.onRemove(t)}),n=e.play();this.args.cards.push(e),this.startTime=Date.now();var o=[r,e.done];return n&&o.push(n),Promise.race(o).then(function(r){return r&&t.parent.onFrameOut(10,function(){Promise.all(r).then(function(){return e.remove()})}),t.cards.length?t.play():n})}},{key:"input",value:function(t){var e=this.args.cards[this.args.cards.length-1];e&&e.input&&e.input(t)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.Series=u}),require.register("intro/SkippableCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SkippableCard=void 0;var o=e("./Card");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.Card);var e,r,n,u=c(f);function f(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(r=u.call(this,t,e)).args.cardName="skippable-card",r.args.text="",r}return e=f,(r=[{key:"input",value:function(t){var e=this;!this.started||Date.now()+-this.started<500||(t.buttons[9]&&1===t.buttons[9].time||t.buttons[0]&&1===t.buttons[0].time)&&(this.onTimeout(200,function(){return e.startPressed=!0}),this.args.animation="closing")}},{key:"play",value:function(){var t=this;return this.started=Date.now(),Promise.race([a(l(f.prototype),"play",this).call(this),new Promise(function(e){return t.onFrame(function(){t.startPressed&&e()})})])}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.SkippableCard=u}),require.register("intro/ThankYouCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ThankYouCard=void 0;var o=e("./Card"),i=e("../ui/CharacterString");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.Card);var r,n,u,f=c(p);function p(t,r){var n,o,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),n=f.call(this,t,r),o=l(n),a="template",s=e("./thank-you.html"),a in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,n.args.cardName="thank-you-card",n.args.text=new i.CharacterString({value:"Thank you for playing!"}),n.args.backdrop="...",n}return r=p,n&&a(r.prototype,n),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),r}();t.ThankYouCard=f}),require.register("intro/TitleScreenCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TitleScreenCard=void 0;var o=e("./Card"),i=e("../ui/CharacterString"),a=e("../audio/Bgm"),s=e("../backdrop/MarbleGarden"),c=e("curvature/input/Keyboard");function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(this,r)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(b,o.Card);var r,n,d,y=p(b);function b(t,r){var n,o,a,l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b),n=y.call(this,t,r),o=h(n),a="template",l=e("./titlescreen.html"),a in o?Object.defineProperty(o,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[a]=l,n.args.cardName="title-screen-card",n.args.text="",n.args.backdrop="...",n.startPressed=!1;var u=new s.MarbleGarden;u.args.frame=0,u.args.x=0,u.args.y=140,u.args.xMax=1e4,u.args.yMax=800,n.started=0,c.Keyboard.get().reset();var f=c.Keyboard.get().codes.bindTo("Enter",function(t){!n.started||Date.now()-n.started<2e3||t<=0||void 0===t||(n.onTimeout(200,function(){return n.startPressed=!0}),n.args.animation="closing")});return n.onRemove(f),u.args.xPan=0,n.start=new Promise(function(t){return n.onFrame(function(){if(n.started&&!(Date.now()-n.started<0)&&(u.args.xPan-=24,u.args.frame++,n.startPressed)){var e=new Promise(function(t){return n.onTimeout(200,t)});t([e])}})}),n.args.backdrop=u,n.args.pressStart=new i.CharacterString({value:"press start/enter"}),n}return r=b,(n=[{key:"input",value:function(t){var e=this;if(!this.started||Date.now()-this.started<2e3)t.zero();else{t.buttons[9]&&1===t.buttons[9].time&&(this.onTimeout(200,function(){return e.startPressed=!0}),this.args.animation="closing")}}},{key:"play",value:function(){var t=this;this.onTimeout(1e3,function(){t.onRemove(function(){return a.Bgm.stop("TITLE_THEME")}),a.Bgm.play("TITLE_THEME")}),this.onTimeout(2e3,function(){return t.args.aurora="aurora"}),this.started=Date.now();var e=u(g(b.prototype),"play",this).call(this);return Promise.race([this.start,e])}}])&&l(r.prototype,n),d&&l(r,d),Object.defineProperty(r,"prototype",{writable:!1}),b}();t.TitleScreenCard=d}),require.register("intro/WarningCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WarningCard=void 0;var o=e("./SkippableCard");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.SkippableCard);var r,n,l,u=s(f);function f(t,r){var n,o,i,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),n=u.call(this,t,r),o=c(n),i="template",a=e("./warning-card.html"),i in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,n.args.cardName="warning-card",n.args.text="",n}return r=f,n&&i(r.prototype,n),l&&i(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r}();t.WarningCard=u}),require.register("intro/WebkitCard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WebkitCard=void 0;var o=e("./SkippableCard");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,o.SkippableCard);var r,n,f,p=c(h);function h(t,r){var n,o,i,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),n=p.call(this,t,r),o=l(n),i="template",a=e("./webkit-card.html"),i in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,n.args.cardName="webkit-card",n.args.text="",n}return r=h,(n=[{key:"play",value:function(t){var e=this;return this.onTimeout(1500,function(){return e.args.animation="spindash-charge"}),this.onTimeout(3e3,function(){return e.args.animation="spindash"}),a(u(h.prototype),"play",this).call(this,t)}}])&&i(r.prototype,n),f&&i(r,f),Object.defineProperty(r,"prototype",{writable:!1}),h}();t.WebkitCard=f}),require.register("intro/card.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]]">\n\t<span>[[text]]</span>\n</div>\n'}),require.register("intro/debian-card.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "main-elements-container">\n\t\t<div class = "debian-logo"></div>\n\t\t<div class = "caption">Built on Debian</div>\n\t</div>\n</div>\n'}),require.register("intro/gamepad-card.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "main-elements-container">\n\t\t<div class = "gamepad-svg"></div>\n\t\t<div class = "caption">Supports HTML5 Gamepad API.</div>\n\t\t<div class = "button-callout">Toggle audio and fullscreen<div class = "arrow"></div></div>\n\t</div>\n</div>\n\n'}),require.register("intro/no-way.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "player-waving"></div>\n\t<div class = "no-way"></div>\n\t<div class = "main-elements-container">\n\t\t[[text]]\n\t</div>\n</div>\n'}),require.register("intro/sane-card.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "main-elements-container">\n\t\t<div><img src = "/icons/chaosean.svg" /></div>\n\t\t<div><img src = "/icons/sane-engine.svg" /></div>\n\t</div>\n</div>\n\n'}),require.register("intro/thank-you.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "player-waving"></div>\n\t<div class = "main-elements-container">\n\t\t<div class = "title-emblem"></div>\n\t\t[[text]]\n\t</div>\n</div>\n'}),require.register("intro/titlescreen.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t[[backdrop]]\n\n\t<div class = "main-elements-container">\n\n\t\t<div class = "title-emblem"></div>\n\t\t<div class = "press-start">[[pressStart]]</div>\n\n\t</div>\n\n</div>\n'}),require.register("intro/warning-card.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "main-elements-container">\n\t\t<div class = "warning-svg"></div>\n\t</div>\n</div>\n\n'}),require.register("intro/webkit-card.html",function(t,e,r){r.exports='<div class = "screen-card screen-card-[[cardName]] [[animation]] [[aurora]]">\n\t<div class = "main-elements-container">\n\t\t<div class = "chromium-logo"></div>\n\t\t<div class = "caption">WebKit recommended for best experience.</div>\n\t</div>\n</div>\n'}),require.register("legacy/Actor.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Actor=void 0;var o=e("curvature/base/View"),i=e("../debug/PointDump");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,o.View);var r,n,u,p=c(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return f(l(t=p.call.apply(p,[this].concat(n))),"speed",15),f(l(t),"template",e("./actor.html")),t.world=null,t.x=92,t.y=1024,t.width=64,t.height=64,t.boxWidth=64,t.boxHeight=64,t.directions=16,t.state="standing",t.gSpeed=0,t.gSpeedMax=40,t.xSpeed=0,t.ySpeed=0,t.angle=0,t.maxGravity=48,t.gravity=0,t.slopeFactor=.01,t.falling=!0,t.sensors={top:!1,bottom:!1,left:!1,right:!1},t.mode=t.args.mode=0,t.modes={floor:0,leftWall:1,ceiling:2,rightWall:3},t.animationClasses={},t.currentClasses=null,t.pdL=new i.PointDump({color:"red"}),t.pdR=new i.PointDump({color:"green"}),t.args.debugs=[t.pdL,t.pdR],t}return r=h,(n=[{key:"destroy",value:function(){}},{key:"update",value:function(){if(this.tags.actor){var t=this.gSpeed;this.args.animspeed=Math.floor((this.gSpeedMax-Math.abs(t))/12),this.args.animspeed<1&&(this.args.animspeed=1);var e=Math.round(1e3*this.angle)/1e3;if(this.falling?(this.falling||this.jumped)&&(this.args.state="jumping"):(e>Math.PI/4&&e<2*Math.PI/4&&(this.mode===this.modes.floor?this.args.mode=this.mode=this.modes.leftWall:this.mode===this.modes.leftWall?this.args.mode=this.mode=this.modes.ceiling:this.mode===this.modes.ceiling?this.args.mode=this.mode=this.modes.rightWall:this.mode===this.modes.rightWall&&(this.args.mode=this.mode=this.modes.floor)),e<-Math.PI/4&&e>-2*Math.PI/4&&(this.mode===this.modes.floor?this.args.mode=this.mode=this.modes.rightWall:this.mode===this.modes.rightWall?this.args.mode=this.mode=this.modes.ceiling:this.mode===this.modes.ceiling?this.args.mode=this.mode=this.modes.leftWall:this.mode===this.modes.leftWall&&(this.args.mode=this.mode=this.modes.floor)),Math.abs(t)>this.gSpeedMax/2?this.args.state="running":Math.abs(t)>0?this.args.state="walking":this.args.state="standing",this.args.facing=t>0?"facing-right":"facing-left"),this.falling?this.mode==this.modes.floor?this.ySpeed++:this.mode==this.modes.ceiling?this.ySpeed--:this.mode==this.modes.leftWall?this.xSpeed--:this.mode==this.modes.rightWall&&this.xSpeed++:this.jumped||(this.xSpeed=0,this.ySpeed=0),this.x+=this.xSpeed,this.ySpeed&&(this.y+=this.ySpeed>0?1:-1),t)for(var r=Math.abs(t),n=r>8?8:r,o=0;o<n;o++)this.iteratePosition(Math.floor(t/n));else this.iteratePosition(0);this.ySpeed>32&&(this.ySpeed=32),this.ySpeed<-32&&(this.ySpeed=-32),this.xSpeed>32&&(this.xSpeed=32),this.xSpeed<-32&&(this.xSpeed=-32),this.tags.actor.style({"--x":Math.floor(this.x),"--y":Math.floor(this.y)}),this.mode===this.modes.floor?this.tags.actor.style({"--angle":this.angle}):this.mode===this.modes.leftWall?this.tags.actor.style({"--angle":this.angle+Math.PI/2*1}):this.mode===this.modes.ceiling?this.tags.actor.style({"--angle":this.angle+Math.PI/2*2}):this.mode===this.modes.rightWall&&this.tags.actor.style({"--angle":this.angle+Math.PI/2*3}),this.jumped&&(this.jumped=!1)}}},{key:"iteratePosition",value:function(t){var e,r,n,o,i=Math.sin(this.angle),a=Math.cos(this.angle),s=this.center,c=(this.top,this.bottom),l=(this.left,this.right);this.mode==this.modes.floor||this.mode==this.modes.ceiling?(e=l-s[0],s[1]):this.mode!=this.modes.leftWall&&this.mode!=this.modes.rightWall||(e=l-s[1],s[0]),r=this.left-e*i+.5*e,n=this.right-e*i-.5*e,o=Math.abs(n-r);var u,f,p,h,g=this.viewport.tileMap,d=0,y=0,b=!1,v=!1,m=(this.falling,this.height),w=[[-m,0],[-m,m]];t:for(var S in w)for(d=w[S][0];d<w[S][1];){if(this.mode==this.modes.floor?(u=r,f=c+d):this.mode==this.modes.ceiling?(u=r,f=c-d):this.mode==this.modes.leftWall?(u=c-d,f=r):this.mode==this.modes.rightWall&&(u=c+d,f=r),b=g.getSolid(u,f)){if(0!==d)break t;break}d++}for(var O in w)for(y=w[O][0];y<w[O][1]&&(this.mode==this.modes.floor?(p=n,h=c+y):this.mode==this.modes.ceiling?(p=n,h=c-y):this.mode==this.modes.leftWall?(p=c-y,h=n):this.mode==this.modes.rightWall&&(p=c+y,h=n),!(v=g.getSolid(p,h)));)y++;if(this.pdL.args.x=u,this.pdL.args.y=f,this.pdR.args.x=p,this.pdR.args.y=h,this.angle=Math.atan((y-d)/o),!this.falling){var k=(d+y)/2;this.mode===this.modes.floor?(this.x+=t*a,this.y+=t*i):this.mode===this.modes.rightWall?(this.x+=t*i,this.y-=t*a):this.mode===this.modes.ceiling?(this.x-=t*a,this.y-=t*i):this.mode===this.modes.leftWall&&(this.x-=t*i,this.y+=t*a),b&&v&&d<=0&&y<=0&&(this.mode==this.modes.floor?this.y+=Math.ceil(k):this.mode==this.modes.ceiling?this.y-=Math.ceil(k):this.mode==this.modes.leftWall?this.x-=k:this.mode==this.modes.rightWall&&(this.x+=k))}this.falling=d>0&&y>0}},{key:"isColliding",value:function(t){}},{key:"animate",value:function(){this.animationClasses[animation]&&this.currentClasses!=this.animationClasses[animation]&&(this.currentClasses.map(function(t){this.tags.sprite.removeClass(t)}),this.animationClasses[animation].map(function(t){this.tags.sprite.addClass(t)}),this.currentClasses=this.animationClasses[animation])}},{key:"roundAngle",value:function(t,e){return 360*"Math.round"((t=Math.round(t*(180/Math.PI)))/(360/e))/e*(Math.PI/180)}},{key:"goLeft",value:function(){this.gSpeed>0&&(this.gSpeed=0),this.gSpeed>-this.gSpeedMax&&this.gSpeed--}},{key:"goRight",value:function(){this.gSpeed<0&&(this.gSpeed=0),this.gSpeed<this.gSpeedMax&&this.gSpeed++}},{key:"slowDown",value:function(){Math.abs(this.gSpeed)>32?this.gSpeed=.95*this.gSpeed:this.gSpeed=.75*this.gSpeed,Math.abs(this.gSpeed)<=.1&&(this.gSpeed=0)}},{key:"jump",value:function(){var t;this.falling||(this.falling=!0,this.jumped=!0,this.mode=this.args.mode=this.modes.floor,this.mode===this.modes.floor?t=this.angle:this.mode===this.modes.leftWall?t=this.angle+Math.PI/2*1:this.mode===this.modes.ceiling?t=this.angle+Math.PI/2*2:this.mode===this.modes.rightWall&&(t=this.angle+Math.PI/2*3),this.angle=0,this.ySpeed=20*-Math.cos(t),this.xSpeed=20*Math.sin(t),this.mode!==this.modes.leftWall&&this.mode!==this.modes.rightWall||(this.gSpeed=0))}},{key:"center",get:function(){return[this.x+this.boxWidth/2,this.y+this.boxHeight/2]}},{key:"left",get:function(){return this.mode==this.modes.floor?this.center[0]-this.width/2:this.mode==this.modes.ceiling?this.center[0]+this.width/2:this.mode==this.modes.leftWall?this.center[1]-this.width/2:this.mode==this.modes.rightWall?this.center[1]+this.width/2:void 0}},{key:"right",get:function(){return this.mode==this.modes.floor?this.center[0]+this.width/2:this.mode==this.modes.ceiling?this.center[0]-this.width/2:this.mode==this.modes.leftWall?this.center[1]+this.width/2:this.mode==this.modes.rightWall?this.center[1]-this.width/2:void 0}},{key:"top",get:function(){return this.mode==this.modes.floor?this.center[1]-Math.floor(this.height/2):this.mode==this.modes.ceiling?this.center[1]+Math.floor(this.height/2):this.mode==this.modes.leftWall?this.center[0]+Math.floor(this.height/2):this.mode==this.modes.rightWall?this.center[0]-Math.floor(this.height/2):void 0}},{key:"bottom",get:function(){return this.mode==this.modes.floor?this.center[1]+Math.floor(this.height/2):this.mode==this.modes.ceiling?this.center[1]-Math.floor(this.height/2):this.mode==this.modes.leftWall?this.center[0]-Math.floor(this.height/2):this.mode==this.modes.rightWall?this.center[0]+Math.floor(this.height/2):void 0}}])&&a(r.prototype,n),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),h}();t.Actor=p}),require.register("legacy/Walker.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Walker=void 0;var o=e("./Actor");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Actor);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Walker=l}),require.register("legacy/actor.html",function(t,e,r){r.exports='<div class = "actor knuckles [[state]] [[facing]]" cv-ref = "actor" data-mode = "[[mode]]" style = "--animspeed:[[animspeed]]">\n\t<div class = "sprite" cv-ref = "sprite" ></div>\n</div>\n<div cv-each = "debugs:debug">[[debug]]</div>\n'}),require.register("mixin/CanPop.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanPop=void 0;var n=e("curvature/base/Tag"),o=(e("../actor/Explosion"),e("../actor/Projectile")),i=e("../audio/Sfx");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,s;return e=t,(r=[{key:"collideA",value:function(t,e){var r=this,n=this.viewport;if(t.knocked)return t.pop&&t.pop(t.knocked),void this.pop(t.knocked);if(t.punching)return this.args.falling=!0,t.args.falling&&t.args.ySpeed<0?this.args.ySpeed=-10+t.args.ySpeed:(this.args.xSpeed=t.args.gSpeed*Math.sign(t.args.gSpeed)*2,this.args.ySpeed=-2),this.args.float=15,this.knocked=t,this.noClip=!0,this.static=!1,this.viewport.onFrameOut(30,function(){return r.pop(t)}),!1;var i=this.args.currentSheild,a=t.immune(this,i?i.type:"normal");if(i&&!a||this.args.gone||!this.viewport||!(a||t.dashed||t.args.jumping||t.args.spinning||t instanceof o.Projectile))return!this.knocked&&t&&t.controllable&&!t.punching&&("function"==typeof ga&&ga("send","event",{eventCategory:"badnik",eventAction:"damaged-player",eventLabel:"".concat(n.args.actName,"::").concat(this.args.id,"::").concat(t.args.id)}),t.args.mercy||(t.damage(this,i?i.type:"normal"),this.ignores.set(t,10))),!1;var s=t.args.currentSheild;this.damage(t,s?s.type:"normal")}},{key:"damage",value:function(t,e){if(t){var r=this.args.currentSheild,n=t.immune(this,r?r.type:"normal");r&&!n||this.args.gone||!this.viewport||!(n||t.dashed||t.args.jumping||t.args.spinning||t instanceof o.Projectile)||this.pop(t)}else this.pop()}},{key:"pop",value:function(t){var e=this,r=this.viewport;if(!(!r||this.args.gone||t&&t.args.owner===this)){var o=document.createElement("div");o.classList.add("particle-explosion");var a=new n.Tag(o);if(a.style({"--x":this.args.x,"--y":this.args.y-16}),r.particles.add(a),setTimeout(function(){return r.particles.remove(a)},512),setTimeout(function(){return e.screen&&e.screen.remove()},1024),this.box&&this.box.setAttribute("data-animation","broken"),t&&t.dashed&&(t.args.gSpeed=0,t.args.xSpeed=0,t.args.ySpeed=-9,t.args.x=this.args.x,t.dashed=!1),t){if(t.occupant&&(t=t.occupant),t.args.owner&&(t=t.args.owner),t.controllable&&"function"==typeof this.effect){var s=100;t.args.popCombo+=1;var c=document.createElement("div");c.classList.add("particle-score");var l=new n.Tag(c);switch(l.style({"--x":this.args.x,"--y":this.args.y-16}),!0){case this.args.gold:c.classList.add("score-10000"),s=1e4;break;case 1===t.args.popCombo:c.classList.add("score-100");break;case 2===t.args.popCombo:case 3===t.args.popCombo:c.classList.add("score-200"),s*=2;break;case t.args.popCombo>=4&&t.args.popCombo<=6:c.classList.add("score-500"),s*=5;break;case t.args.popCombo>=7:c.classList.add("score-1000"),s*=10}r.particles.add(l),setTimeout(function(){return r.particles.remove(l)},768),t.args.score+=s,this.effect(t)}t.dashed&&(t.args.xSpeed/=4);var u=t.args.ySpeed;t.args.falling&&!t.punching&&this.onNextFrame(function(){u>0?t.args.ySpeed=Math.min(-u,-7):t.args.ySpeed+=4,t.args.falling=!0}),t.dashed=!1,this.viewport.settings.rumble&&t&&t.controller&&t.controller.rumble&&(t.controller.rumble({duration:40,strongMagnitude:0,weakMagnitude:1}),this.viewport.onTimeout(40,function(){t.controller.rumble({duration:110,strongMagnitude:.75,weakMagnitude:1})}))}if(this.args.target&&this.viewport.actorsById[this.args.target]){var f=this.viewport.actorsById[this.args.target];f&&(this.viewport.auras.add(f),f.activate(t,this))}i.Sfx.play("OBJECT_DESTROYED"),"function"==typeof ga&&ga("send","event",{eventCategory:"badnik",eventAction:"defeated",eventLabel:"".concat(this.viewport.args.actName,"::").concat(this.args.id)}),this.viewport.actors.remove(this),this.args.gone=!0}}}])&&a(e.prototype,r),s&&a(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.CanPop=s}),require.register("mixin/Constrainable.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Constrainable=void 0;var n=e("curvature/base/Tag"),o={wakeUp:function(){var t=this;this.args._tiedTo||(this.args._tiedTo=this.viewport.actorsById[this.args.tiedTo]);var e=this.args._tiedTo;if(e&&!e.hanging.has(this.constructor)){e.hanging.set(this.constructor,new Set);var r=e.hanging.get(this.constructor);r.add(this),this.chain=new n.Tag('<div class = "chain">'),this.sprite.appendChild(this.chain.node),this.onRemove(function(){return r.delete(t)})}},sleep:function(){var t=this;this.viewport&&!this.args.stay&&this.viewport.onFrameOut(5,function(){t.args.x=t.def.get("x"),t.args.y=t.def.get("y"),t.args.xSpeed=0,t.args.ySpeed=0,t.viewport.setColCell(t)})},findNextStep:function(){return!1},setPos:function(){this.args._tiedTo||(this.args._tiedTo=this.viewport.actorsById[this.args.tiedTo]);var t=this.args._tiedTo;if(!t)return!1;this.args.ropeLength=this.args.ropeLength||t.args.ropeLength,this.args.falling=!0;var e=t.args.x,r=t.args.y,n=e-this.args.x,o=r-this.args.y,i=Math.atan2(o,n),a=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)),s=this.args.ropeLength||64;this.chain&&this.chain.style({"--distance":Math.min(a,s)}),this.args.groundAngle=-(i+Math.PI/2);var c=i;if(a>s){var l=a-s,u=e-Math.cos(i)*s,f=r-Math.sin(i)*s;this.args.xSpeed+=Math.cos(c)*l,this.args.ySpeed+=Math.sin(c)*l,this.args.x=u,this.args.y=f,this.viewport&&this.viewport.setColCell(this),this.args.x!==e||t.args.xSpeed||(this.args.ySpeed=0)}t.args.ySpeed>0&&!t.args.xSpeed&&!this.args.xSpeed&&(this.args.x=e,this.args.y=r+this.args.ropeLength)}};t.Constrainable=o}),require.register("mixin/Pushable.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pushable=void 0;var n=e("../actor/Ring"),o={collideA:function(t,e){if(t instanceof n.Ring)return!1;if(-1===e||t.isEffect)return!1;var r=Math.ceil(Math.abs(t.args.gSpeed||t.args.xSpeed))*Math.sign(t.args.gSpeed||t.args.xSpeed);if(Math.abs(t.args.ySpeed)>Math.abs(t.args.xSpeed))return!0;if(!this.args.falling&&1===e&&r<=0)return!1;if(!this.args.falling&&3===e&&r>=0)return!1;var o=this.y-this.args.height;if((1===e||3===e)&&(t.y>=this.y||t.y>o)){if(!r)return!0;this.args.gSpeed=r,this.args.pushed=Math.sign(r)||this.args.pushed;var i=this.viewport.tileMap,a=1===e?1:3===e&&-1,s=this.scanBottomEdge(a);if(i.getSolid(this.x+Math.ceil(this.args.width/2)*a,this.y))return!0;var c=this.args.width/2;if(a>0&&0===s)this.args.falling=!0;else if(a<0&&0===s)this.args.falling=!0;else if(!this.args.falling||s>0){var l=this.bMap("findNextStep",a).get(Platformer),u=this.bMap("findNextStep",a+c*Math.sign(a)).get(Platformer);if((!l[1]||l[2])&&!u[3]){var f=t.args.width,p=this.args.width/2;return this.args.x=t.args.x+a*(p+f),0===s}return!0}}return!0}};t.Pushable=o}),require.register("network/ChatBox.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ChatBox=void 0;var o=e("curvature/base/View");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.View);var r,n,l,u=s(f);function f(t,r){var n,i,a,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),n=u.call(this,t,r),i=c(n),a="template",s=e("./chat-box.html"),a in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,n.args.outputLines=[];return n.listen(t.pipe,"open",function(t){return n.args.outputLines=["You joined the chat."]}),n.listen(t.pipe,"message",function(t){var e=JSON.parse(t.detail);e.message&&(n.args.outputLines.push(o.View.from('> <span class = "incoming">[[message]]</span>',{message:e.message})),n.onNextFrame(function(){var t=n.tags.chatOutput;t&&t.scrollTo(0,t.scrollHeight)}))}),n}return r=f,(n=[{key:"send",value:function(t){var e=this;if(!t||!t.key||"Enter"===t.key){var r=this.args.chatInput;r&&(this.args.outputLines.push("< ".concat(r)),this.args.chatInput="",this.onNextFrame(function(){var t=e.tags.chatOutput;t.scrollTo(0,t.scrollHeight),t.focus()}),this.args.pipe.send(JSON.stringify({message:r})))}}}])&&i(r.prototype,n),l&&i(r,l),Object.defineProperty(r,"prototype",{writable:!1}),f}();t.ChatBox=u}),require.register("network/CryptoMessage.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoMessage=void 0;var n=e("curvature/base/Uuid"),o=e("./CryptoReply");function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(){function t(e){var r=e.content,o=e.sender,i=e.uuid,a=e.re,s=e.foreignKey,c=e.publicKey;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"content",void 0),f(this,"sender",void 0),f(this,"uuid",void 0),f(this,"re",void 0),f(this,"encryptedSymmetricKey",void 0),f(this,"foreignKey",void 0),f(this,"publicKey",void 0),this.uuid=i||String(new n.Uuid),Object.assign(this,{content:r,sender:o,re:a,foreignKey:s,publicKey:c})}var e,r,c;return e=t,(r=[{key:"createReply",value:function(t){var e=this,r=window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),n=r.then(function(t){return window.crypto.subtle.exportKey("raw",t)}),c=window.crypto.getRandomValues(new Uint8Array(12)),l=n.then(function(t){var r=new Uint8Array([].concat(s(c),s(new Uint8Array(t))));return window.crypto.subtle.encrypt({name:"RSA-OAEP"},e.foreignKey,r)});"object"===a(t)&&(console.warn("Encoding non-string value with JSON.stringify()."),t=JSON.stringify(t));var u=fetch("data:text/plain,"+t).then(function(t){return t.arrayBuffer()}),f=Promise.all([r,u]).then(function(t){var e=i(t,2),r=e[0],n=e[1];return window.crypto.subtle.encrypt({name:"AES-GCM",iv:c},r,n)}),p=window.crypto.subtle.exportKey("spki",this.publicKey);return Promise.all([f,l,p]).then(function(t){var r=i(t,3),n=r[0],a=r[1],c=r[2];return new o.CryptoReply({packet:btoa(String.fromCharCode.apply(String,s(new Uint8Array(n)))),key:btoa(String.fromCharCode.apply(String,s(new Uint8Array(a)))),pub:btoa(String.fromCharCode.apply(String,s(new Uint8Array(c)))),uuid:e.uuid,to:e.sender,re:e.re})})}}])&&u(e.prototype,r),c&&u(e,c),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.CryptoMessage=p}),require.register("network/CryptoMessageService.js",function(t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoMessageService=void 0;var n=e("./CryptoMessage"),o=e("curvature/base/Uuid");function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(){var e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r="requests",n=new Map,r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n}var e,r,s;return e=t,(r=[{key:"invite",value:function(t){var e=this,r=String(new o.Uuid),n=window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]);return n.then(function(t){return e.requests.set(r,{keyPair:t})}),n.then(function(t){return window.crypto.subtle.exportKey("spki",t.publicKey)}).then(function(e){return{pub:btoa(String.fromCharCode.apply(String,a(new Uint8Array(e)))),uuid:r,to:t}})}},{key:"accept",value:function(t){var e=this,r=t.content.pub,a=t.content.uuid,s=t.content.re,c=t.sender,l=String(new o.Uuid),u=fetch("data:text/plain;base64,"+r).then(function(t){return t.arrayBuffer()}).then(function(t){return window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])}),f=window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]);f.then(function(t){return e.requests.set(l,{keyPair:t})});var p=Promise.resolve();if(t.content.key&&this.requests.has(s)){var h=this.requests.get(s),g=t.content.key,d=(t.content.iv,t.content.packet);this.requests.delete(s);var y=fetch("data:text/plain;base64,"+g).then(function(t){return t.arrayBuffer()}).then(function(t){return window.crypto.subtle.decrypt({name:"RSA-OAEP"},h.keyPair.privateKey,t)}).then(function(t){var e=new Uint8Array(t),r=e.slice(0,12),n=e.slice(12),o=window.crypto.subtle.importKey("raw",n,{name:"AES-GCM",length:256},!0,["decrypt"]);return Promise.all([o,r])}),b=fetch("data:text/plain;base64,"+d).then(function(t){return t.arrayBuffer()});p=Promise.all([y,b]).then(function(t){var e=i(t,2),r=e[0],n=e[1];return window.crypto.subtle.decrypt({name:"AES-GCM",iv:r[1]},r[0],n)}).then(function(t){return new Blob([t],{type:"text/plain; charset=utf-8"}).text()})}return Promise.all([f,u,p]).then(function(t){var e=i(t,3),r=e[0].publicKey,o=e[1],s=e[2];return new n.CryptoMessage({uuid:l,foreignKey:o,publicKey:r,content:s,sender:c,re:a})})}}])&&l(e.prototype,r),s&&l(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.CryptoMessageService=u}),require.register("network/CryptoReply.js",function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoReply=void 0;var i=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){var r=e.packet,n=e.label,i=e.uuid,a=e.key,s=e.pub,c=e.re,l=e.to;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"packet",void 0),o(this,"label",void 0),o(this,"uuid",void 0),o(this,"key",void 0),o(this,"pub",void 0),o(this,"re",void 0),o(this,"to",void 0),Object.assign(this,{packet:r,label:n,uuid:i,key:a,pub:s,re:c,to:l})});t.CryptoReply=i}),require.register("network/Lobby.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Lobby=void 0;var o=e("curvature/base/View"),i=(e("curvature/base/Uuid"),e("curvature/base/Bag")),a=e("./LobbyMessage"),s=e("./LobbyStatus"),c=e("./CryptoMessageService"),l=e("../audio/Bgm"),u=e("../audio/Sfx");function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=b(t);if(e){var i=b(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}(this,r)}}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(m,o.View);var r,n,p,b=d(m);function m(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),v(y(n=b.call(this,t,r)),"template",e("./lobby.html")),v(y(n),"messageService",new c.CryptoMessageService),v(y(n),"floodControl",new Map),v(y(n),"requests",new Map),v(y(n),"users",new Map),v(y(n),"serverCandidates",new Set),v(y(n),"clientCandidates",new Set),v(y(n),"isClient",null),v(y(n),"sortByName",function(t,e){return t.username.localeCompare(e.username)}),v(y(n),"sortByTime",function(t,e){return e.lastSeen-t.lastSeen}),v(y(n),"sorting",!1),n.refreshRtc(),n.args.roomId="!hJzXrccruagKGXTFUQ:matrix.org",n.args.invites=new i.Bag,n.args.userList=[],n.args.users=new i.Bag(function(t,e,r){n.sortUsers()}),n.args.motd="Welcome to the Sonic 3000 test lobby! We're still building and testing, so check back soon for updates. Click a user's name on the left to send an invite.",n.args.messages=[],r.matrixConnect().then(function(t){n.matrix=t,t.whoAmI().then(function(t){n.user=t,n.args.username=t.user_id});var e=t.listenForRoomEvents(n.args.roomId);n.onRemove(function(){return e.cancelled=!0}),t.joinRoom(n.args.roomId),n.listen(t,"matrix-event",function(t){return console.log(t.detail.type,t)}),n.listen(t,"sonic-3000.lobby.message",function(t){return n.handleLobbyMessage(t)}),n.listen(t,"sonic-3000.lobby.crypto-game-invite",function(t){return n.handleCryptoGameInvite(t)}),n.listen(t,"sonic-3000.lobby.crypto-game-offer",function(t){return n.handleCryptoGameOffer(t)}),n.listen(t,"sonic-3000.lobby.crypto-game-accept",function(t){return n.handleCryptoGameAccept(t)}),n.listen(t,"sonic-3000.lobby.crypto-game-reject",function(t){return n.handleCryptoGameReject(t)}),n.listen(t,"sonic-3000.lobby.crypto-candidate-invite",function(t){return n.handleCryptoCandidateInvite(t)}),n.listen(t,"sonic-3000.lobby.crypto-candidate-present",function(t){return n.handleCryptoCandidatePresent(t)}),n.listen(t,"sonic-3000.lobby.crypto-candidate-ack",function(t){return n.handleCryptoCandidateAck(t)}),n.listen(t,"matrix-event",function(t){t.detail.sender&&n.checkEventSender(t.detail.sender)}),t.syncRoomHistory(n.args.roomId,function(t){if(t.sender){n.checkEventSender(t.sender);var e=n.users.get(t.sender);"sonic-3000.lobby.message"===t.type&&(t.origin_server_ts<1664651274e3||(n.args.messages.unshift(new a.LobbyMessage({message:t.content.body,user:e})),u.Sfx.play("ALT_BEEP"),n.onNextFrame(function(){n.tags.scroller.scrollTop=n.tags.scroller.scrollHeight,n.sortUsers()})))}},Date.now()-6048e5)}),n.args.input="",n}return r=m,(n=[{key:"input",value:function(){}},{key:"onAttached",value:function(){l.Bgm.fadeOut(250),this.onTimeout(250,function(){return l.Bgm.stop()})}},{key:"checkEventSender",value:function(t){var e=f(t.slice(1).split(":"),2),r=e[0],n=e[1];if(!this.users.has(t)){var o={id:t,lastSeen:0,username:r,host:n};this.users.set(t,o),this.args.users.add(o)}this.users.get(t).lastSeen=Date.now()}},{key:"sendMessage",value:function(t){var e=this;this.matrix.putEvent(this.args.roomId,"sonic-3000.lobby.message",{msgtype:"m.text",body:this.args.input}).then(function(t){return e.args.input=""}).catch(function(t){return console.error(t)}).finally(function(){e.tags.input.focus(),u.Sfx.play("SWITCH_HIT")})}},{key:"logOut",value:function(t){this.matrix.logOut(),this.remove()}},{key:"keyup",value:function(t){"Enter"===t.key&&this.sendMessage(t)}},{key:"sendCryptoGameInvite",value:function(t,e){var r=this,n=e.id;this.refreshRtc(),this.messageService.invite(n).then(function(t){return r.matrix.putEvent(r.args.roomId,"sonic-3000.lobby.crypto-game-invite",t)}).then(function(t){r.args.messages.push(new s.LobbyStatus({message:"You invited ".concat(n," to play!")})),r.onNextFrame(function(){r.tags.scroller.scrollTop=r.tags.scroller.scrollHeight,r.sortUsers()})}).catch(function(t){return console.error(t)}).finally(function(){return r.tags.input.focus()})}},{key:"handleCryptoGameInvite",value:function(t){var e=this;if(this.user&&t.detail.content.to===this.user.user_id){this.floodControl.has(t.detail.sender)||this.floodControl.set(t.detail.sender,{});var r=this.floodControl.get(t.detail.sender);r.invite&&Date.now()-r.invite<15e3?this.rejectCryptoGameInvite(t,t.detail,"flood_control",!0):(u.Sfx.play("KNOCK_PLATFORM"),this.args.messages.push(new s.LobbyStatus({message:"".concat(t.detail.sender," invited you to play!")})),this.onNextFrame(function(){e.tags.scroller.scrollTop=e.tags.scroller.scrollHeight,e.sortUsers()}),this.args.invites.add(t.detail),r.invite=Date.now())}}},{key:"acceptCryptoGameInvite",value:function(t,e){var r=this;this.args.invites.delete(e);e.content.uuid,e.sender;this.args.messages.push(new s.LobbyStatus({message:"You accepted the invite from ".concat(e.sender,"!")})),this.onNextFrame(function(){r.tags.scroller.scrollTop=r.tags.scroller.scrollHeight,r.sortUsers()}),this.isClient=!0;var n=this.client.getIceCandidates();n.then(function(t){return console.log(t)}),this.messageService.accept(e).then(function(t){Promise.all([n,r.client.offer()]).then(function(e){var r=f(e,2),n=r[0],o=r[1];return t.createReply(JSON.stringify({candidates:n,token:o}))}).then(function(t){return r.matrix.putEvent(r.args.roomId,"sonic-3000.lobby.crypto-game-offer",t)})}),this.onTimeout(200,function(){return r.args.showInvites="hide-invites"}),this.args.showInvites="hiding-invites",u.Sfx.play("EMERALD_COLLECTED")}},{key:"rejectCryptoGameInvite",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.args.invites.delete(e);e.content.uuid,e.sender;o||(this.args.messages.push(new s.LobbyStatus({message:"You rejected the invite from ".concat(e.sender,".")})),this.onNextFrame(function(){r.tags.scroller.scrollTop=r.tags.scroller.scrollHeight,r.sortUsers()})),this.messageService.accept(e).then(function(t){t.createReply(n).then(function(t){return r.matrix.putEvent(r.args.roomId,"sonic-3000.lobby.crypto-game-reject",t)})}),o||(this.onTimeout(200,function(){return r.args.showInvites="hide-invites"}),this.args.showInvites="hiding-invites",u.Sfx.play("OBJECT_DESTROYED"))}},{key:"handleCryptoGameOffer",value:function(t){var e=this;if(this.user&&t.detail.content.to===this.user.user_id){var r=t.detail;r.content.uuid,r.sender;this.messageService.accept(r).then(function(t){e.args.messages.push(new s.LobbyStatus({message:"Initializing RTC handshake..."})),e.onNextFrame(function(){e.tags.scroller.scrollTop=e.tags.scroller.scrollHeight,e.sortUsers()});var n=t.content,o=/^s3ktp:\/\/request\/(.+)/.exec(n);o&&(n=atob(o[1]));var i=JSON.parse(n),a=i.token,c=i.candidates,l=e.server.answer(a);l.then(function(){c.map(function(t){return e.server.addIceCandidate(t)})}),Promise.all([e.server.getIceCandidates(),l]).then(function(r){var n=f(r,2),o=n[0],i=n[1];console.log(o),t.createReply(JSON.stringify({candidates:o,token:i})).then(function(t){return e.matrix.putEvent(e.args.roomId,"sonic-3000.lobby.crypto-game-accept",t)})}),e.args.messages.push(new s.LobbyStatus({message:"".concat(r.sender," accepted your invite!")})),e.onNextFrame(function(){e.tags.scroller.scrollTop=e.tags.scroller.scrollHeight,e.sortUsers()})})}}},{key:"handleCryptoGameAccept",value:function(t){var e=this;if(this.user&&t.detail.content.to===this.user.user_id){var r=t.detail;r.content.uuid,r.sender;this.messageService.accept(r).then(function(t){var r=JSON.parse(t.content),n=r.token,o=r.candidates;e.client.accept(n).then(function(){o.map(function(t){e.client.addIceCandidate(t)})})})}}},{key:"handleCryptoGameReject",value:function(t){var e=this;if(this.user&&t.detail.content.to===this.user.user_id){var r=t.detail;r.content.uuid,r.sender;this.messageService.accept(r).then(function(r){var n="".concat(t.detail.sender," rejected your invite.");r.content&&(n="".concat(t.detail.sender," rejected your invite: (").concat(r.content,")")),e.args.messages.push(new s.LobbyStatus({message:n})),e.onNextFrame(function(){e.tags.scroller.scrollTop=e.tags.scroller.scrollHeight,e.sortUsers()})})}}},{key:"handleLobbyMessage",value:function(t){var e=this,r=t.detail;if(r.room_id===this.args.roomId){this.checkEventSender(r.sender);var n=this.users.get(r.sender);this.args.messages.push(new a.LobbyMessage({message:r.content.body,user:n})),this.onNextFrame(function(){e.tags.scroller.scrollTop=e.tags.scroller.scrollHeight,e.sortUsers()}),r.sender!==this.args.username&&u.Sfx.play("ALT_BEEP")}}},{key:"refreshRtc",value:function(){var t=this;this.server=this.parent.getServer(!0),this.client=this.parent.getClient(!0);var e=this.server,r=this.client,n=function(e){return t.parent.loadMap({mapUrl:"/map/manic-harbor-zone.json",networked:!0})},o=function(e){return t.disconnect()};e.addEventListener("open",n,{once:!0}),r.addEventListener("open",n,{once:!0}),e.addEventListener("close",o,{once:!0}),r.addEventListener("close",o,{once:!0})}},{key:"toggleMenu",value:function(){var t=this;this.args.showMenu&&"hide-menu"!=this.args.showMenu?(this.onTimeout(200,function(){return t.args.showMenu="hide-menu"}),this.args.showMenu="hiding-menu"):(this.onTimeout(200,function(){return t.args.showMenu="show-menu"}),this.args.showMenu="showing-menu")}},{key:"toggleInvites",value:function(){var t=this;this.args.showInvites&&"hide-invites"!=this.args.showInvites?(this.onTimeout(200,function(){return t.args.showInvites="hide-invites"}),this.args.showInvites="hiding-invites"):(this.onTimeout(200,function(){return t.args.showInvites="show-invites"}),this.args.showInvites="showing-invites")}},{key:"disconnect",value:function(){this.server.close(),this.client.close(),this.refreshRtc(),this.parent.quit(2),this.parent.args.networked=!1,this.parent.args.chatBox=null}},{key:"sortUsers",value:function(){var t=this;switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null){case"abc":this.userSorter=this.sortByName;break;case"time":this.userSorter=this.sortByTime}this.sorting||(this.sorting=!0,this.onTimeout(100,function(){var e=t.args.users.items();e.sort(t.userSorter||t.sortByName),t.args.userList=e,t.sorting=!1}))}},{key:"closeMotd",value:function(t){this.args.motdClosed="closed"}}])&&h(r.prototype,n),p&&h(r,p),Object.defineProperty(r,"prototype",{writable:!1}),m}();t.Lobby=m}),require.register("network/LobbyInvite.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LobbyInvite=void 0;var o=e("curvature/base/View");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,o.View);var e,r,n,l=s(u);function u(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=l.call.apply(l,[this].concat(i)),e=c(t),n='<div class = "lobby-invite">invite!</div>',(r="template")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=u,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.LobbyInvite=u}),require.register("network/LobbyMessage.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LobbyMessage=void 0;var o=e("curvature/base/View");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.View);var e,r,n,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call.apply(l,[this].concat(r))),"template",'<span title = "[[user.id]]" class = "username">&lt;<b>[[user.username]]</b>&gt;</span>:&nbsp;<span class = "message" cv-bind = "message"></span>'),u(c(t),"preserve",!0),t}return e=f,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.LobbyMessage=f}),require.register("network/LobbyStatus.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LobbyStatus=void 0;var o=e("curvature/base/View");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.View);var e,r,n,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call.apply(l,[this].concat(r))),"template",'<span class = "lobby-status-message" cv-bind = "message"></span>'),u(c(t),"preserve",!0),t}return e=f,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.LobbyStatus=f}),require.register("network/Rtc.js",function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Rtc=void 0;var o=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)});t.Rtc=o}),require.register("network/RtcClient.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RtcClient=void 0;var o=e("curvature/base/Mixin"),i=e("curvature/mixin/EventTargetMixin");function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(p,o.Mixin["with"](i.EventTargetMixin));var e,r,n,s=u(p);function p(t){var e,r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),e=s.call(this),r=f(e),o=500,(n="candidateTimeout")in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,e.peerClient=new RTCPeerConnection(t),e.peerClientChannel=e.peerClient.createDataChannel("chat"),e.peerClientChannel.addEventListener("open",function(t){var r=new CustomEvent("open",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r),e.connected=!0}),e.peerClientChannel.addEventListener("close",function(t){var r=new CustomEvent("close",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r),e.connected=!1}),e.peerClientChannel.addEventListener("message",function(t){var r=new CustomEvent("message",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r)}),e.peerClient.addEventListener("icecandidate",function(t){var r=new CustomEvent("icecandidate",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r)}),e}return e=p,(r=[{key:"send",value:function(t){this.peerClientChannel&&this.peerClientChannel.send(t)}},{key:"close",value:function(){this.peerClientChannel&&this.peerClientChannel.close()}},{key:"getIceCandidates",value:function(){var t=this,e=new Set;return new Promise(function(r){return t.peerClient.addEventListener("icecandidate",function(t){e.add(t.candidate),t.candidate||r(a(e))})})}},{key:"addIceCandidate",value:function(t){this.peerClient.addIceCandidate(t)}},{key:"offer",value:function(){var t=this;this.peerClient.createOffer().then(function(e){t.peerClient.setLocalDescription(e)});new Set;return new Promise(function(e){var r=null;t.peerClient.addEventListener("icecandidate",function(n){r&&clearTimeout(r),r=setTimeout(function(){return e(t.peerClient.localDescription)},t.candidateTimeout)})})}},{key:"accept",value:function(t){var e=new RTCSessionDescription(t);return this.peerClient.setRemoteDescription(e)}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.RtcClient=h}),require.register("network/RtcClientTask.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RtcClientTask=void 0;var o=e("subspace-console/Task"),i=e("curvature/base/Tag"),a=e("./RtcClient");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=Symbol("accept"),g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,o.Task);var e,r,n,f=l(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(u(t=f.call.apply(f,[this].concat(r))),"title","RTC Client Task"),p(u(t),"connected",!1),t}return e=g,(r=[{key:"init",value:function(){var t=this;return this.client=new a.RtcClient({iceServers:[{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]}),this.finally(function(){console.log("Terminating connection..."),t.client.close()}),this.client.addEventListener("open",function(){t.print("Remote peer client accepted!")}),this.client.addEventListener("close",function(){t.print("Peer reset connection.")}),this.client.addEventListener("message",function(e){t.print("> ".concat(e.detail))}),this.client.offerToken.then(function(e){var r=JSON.stringify(e),n="s3ktp://request/".concat(btoa(r));t.print("Client request code: ".concat(n));var o=new i.Tag('<textarea style = "display:none">');o.innerText=n,document.body.append(o.node),o.select(),document.execCommand("copy"),o.node.remove()}),new Promise(function(e){t[h]=e})}},{key:"main",value:function(t){t&&(this.client.connected?(this.print("< ".concat(t)),this.client.send(t)):this.accept(t))}},{key:"accept",value:function(t){if(t){var e=/^s3ktp:\/\/accept\/(.+)/.exec(t);e&&(t=atob(e[1]));var r=JSON.parse(t);this.client.accept(r)}else this.print("Please supply server's accept string.")}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.RtcClientTask=g,p(g,"helpText","RTC Client."),p(g,"useText","")}),require.register("network/RtcServer.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RtcServer=void 0;var o=e("curvature/base/Mixin"),i=e("curvature/mixin/EventTargetMixin");function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,r)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(p,o.Mixin["with"](i.EventTargetMixin));var e,r,n,s=u(p);function p(t){var e,r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),e=s.call(this),r=f(e),o=500,(n="candidateTimeout")in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,e.peerServer=new RTCPeerConnection(t),e.peerServer.addEventListener("datachannel",function(t){e.peerServerChannel=t.channel,e.peerServerChannel.addEventListener("open",function(t){var r=new CustomEvent("open",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r),e.connected=!0}),e.peerServerChannel.addEventListener("close",function(t){var r=new CustomEvent("close",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r),e.connected=!1}),e.peerServerChannel.addEventListener("message",function(t){var r=new CustomEvent("message",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r)}),e.peerServerChannel.addEventListener("icecandidate",function(t){var r=new CustomEvent("icecandidate",{detail:t.data});r.originalEvent=t,e.dispatchEvent(r)})}),e}return e=p,(r=[{key:"send",value:function(t){this.peerServerChannel&&this.peerServerChannel.send(t)}},{key:"close",value:function(){this.peerServerChannel&&this.peerServerChannel.close()}},{key:"getIceCandidates",value:function(){var t=this,e=new Set;return new Promise(function(r){return t.peerServer.addEventListener("icecandidate",function(t){e.add(t.candidate),t.candidate||r(a(e))})})}},{key:"addIceCandidate",value:function(t){this.peerServer.addIceCandidate(t)}},{key:"answer",value:function(t){var e=this;return new Promise(function(r){e.peerServer.setRemoteDescription(t),e.peerServer.createAnswer(function(t){return e.peerServer.setLocalDescription(t)},function(t){return console.error(t)});new Set;var n=null;e.peerServer.addEventListener("icecandidate",function(t){n&&clearTimeout(n),n=setTimeout(function(){return r(e.peerServer.localDescription)},e.candidateTimeout)})})}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.RtcServer=h}),require.register("network/RtcServerTask.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RtcServerTask=void 0;var o=e("subspace-console/Task"),i=e("curvature/base/Tag"),a=e("./RtcServer");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=Symbol("accept"),g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(g,o.Task);var e,r,n,f=l(g);function g(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(u(t=f.call.apply(f,[this].concat(r))),"title","RTC Server Task"),p(u(t),"connected",!1),t}return e=g,(r=[{key:"init",value:function(){var t=this;return this.server=new a.RtcServer({iceServers:[{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]}),this.finally(function(){t.print("Terminating connection..."),t.server.close()}),this.server.addEventListener("open",function(){t.print("Remote peer client accepted!")}),this.server.addEventListener("close",function(){t.print("Peer reset connection.")}),this.server.addEventListener("message",function(e){t.print("> ".concat(e.detail))}),this.server.answerToken.then(function(e){var r=JSON.stringify(e),n="s3ktp://accept/".concat(btoa(r));t.print("Server accept code: ".concat(n));var o=new i.Tag('<textarea style = "display:none">');o.innerText=n,document.body.append(o.node),o.select(),document.execCommand("copy"),o.node.remove()}),this.printErr("Please supply client's request code."),new Promise(function(e){t[h]=e})}},{key:"main",value:function(t){t&&(this.server.connected?(this.print("< ".concat(t)),this.server.send(t)):this.answer(t))}},{key:"answer",value:function(t){var e=/^s3ktp:\/\/request\/(.+)/.exec(t);console.log(e),e&&(t=atob(e[1]));var r=JSON.parse(t);this.server.answer(r)}},{key:"done",value:function(){}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.RtcServerTask=g,p(g,"helpText","RTC Server."),p(g,"useText","")}),require.register("network/chat-box.html",function(t,e,r){r.exports='<div class = "chatbox" data-click-barrier>\n\n\t<div class = "chat-output" cv-each = "outputLines:line" cv-ref = "chatOutput">\n\t\t<p>[[line]]</p>\n\t</div>\n\n\t<div class = "chat-input">\n\t\t<input cv-bind = "chatInput" cv-ref = "chatInput" cv-on = "keydown:send(event)">\n\t\t<button cv-on = "click:send">send</button>\n\t</div>\n\n</div>\n'}),require.register("network/lobby.html",function(t,e,r){r.exports='<div class = "lobby [[showMenu]] [[showInvites]]" data-click-barrier>\n\n\t<div class = "main column">\n\t\t<div class = "left-menu">\n\t\t\t<div>[[username]]</div>\n\t\t\t<button cv-on = "click:logOut">Log Out</button>\n\t\t</div>\n\n\t\t<div class = "topbar row">\n\t\t\t<div class = "row">\n\t\t\t\t<div class = "burger-button" cv-on = "click:toggleMenu">\n\t\t\t\t\t<div class = "stripe"></div>\n\t\t\t\t\t<div class = "stripe"></div>\n\t\t\t\t\t<div class = "stripe"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class = "title">\n\t\t\t\t\t#sonic-3000-test-lobby\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div cv-on = "click:toggleInvites" class = "invite button">\n\t\t\t\t\t<div class = "amount" cv-if = "invites.length">[[invites.length]]</div>\n\t\t\t\t\t<img class = "icon" src = "/icons/mail.svg" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class = "row wide">\n\n\t\t\t<div class = "users frame column">\n\t\t\t\t<div class = "sort-buttons">\n\t\t\t\t\t<button class = "sort-abc"  cv-on = \'click:sortUsers("abc")\'></button>\n\t\t\t\t\t<button class = "sort-time" cv-on = \'click:sortUsers("time")\'></button>\n\t\t\t\t</div>\n\t\t\t\t<div class = "scroller" cv-each = "userList:user">\n\t\t\t\t\t<div title = "[[user.id]]" class = "user" tabindex = "0">\n\t\t\t\t\t\t[[user.username]]\n\t\t\t\t\t\t<div class = "user-list-buttons">\n\t\t\t\t\t\t\t<button cv-on   = "click:sendCryptoGameInvite(event, user)">invite</button>\n\x3c!-- \t\t\t\t\t\t\t<button>message</button>\n\t\t\t\t\t\t\t<button>ignore</button> --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class = "messages wide column">\n\t\t\t\t<div class = "row motd [[motdClosed]]">\n\t\t\t\t\t<button class="close-button" cv-on = "click:closeMotd"></button>\n\t\t\t\t\t<span>&lt;motd&gt;: [[motd]]</span>\n\t\t\t\t</div>\n\t\t\t\t<div class = "row wide frame">\n\t\t\t\t\t<div class = "scroller" cv-ref = "scroller" cv-each = "messages:message">\n\t\t\t\t\t\t<span class = "message">[[message]]</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class = "row">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype    = "text"\n\t\t\t\t\t\tcv-bind = "input"\n\t\t\t\t\t\tcv-on   = "keyup"\n\t\t\t\t\t\tcv-ref  = "input"\n\t\t\t\t\t/>\n\t\t\t\t\t<button cv-on   = "click:sendMessage">send</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class = "invites">\n\t\t\t\t<div cv-if = "!invites.length">No pending invites.</div>\n\t\t\t\t<div class = "column" cv-each = "invites:invite:i">\n\t\t\t\t\t<div class = "column">\n\t\t\t\t\t\t<div>[[invite.sender]] invited you to play!</div>\n\t\t\t\t\t\t<div class = "row">\n\t\t\t\t\t\t\t<button cv-on = "click:acceptCryptoGameInvite(event, invite)">accept</button>\n\t\t\t\t\t\t\t<button cv-on = \'click:rejectCryptoGameInvite(event, invite, "button_clicked")\'>reject</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n\t</div>\n</div>\n'}),require.register("particle/Particle3d.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Particle3d=void 0;var o=e("curvature/base/Tag");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Tag);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),t=c.call(this,'<div class = "particle-3d">');var e=new o.Tag('<div class = "front-3d">'),r=new o.Tag('<div class = "back-3d">'),n=new o.Tag('<div class = "right-3d">'),i=new o.Tag('<div class = "left-3d">'),a=new o.Tag('<div class = "top-3d">'),s=new o.Tag('<div class = "bottom-3d">');return t.append(r.node),t.append(n.node),t.append(i.node),t.append(e.node),t.append(a.node),t.append(s.node),t}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Particle3d=l}),require.register("powerups/BubbleSheild.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BubbleSheild=void 0;var o=e("curvature/base/Bindable"),i=e("./Sheild"),a=e("../audio/Sfx");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,i.Sheild);var e,r,n,f=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(u(t=f.call.apply(f,[this].concat(r))),"template",'<div class = "sheild bubble-sheild [[bouncing]]"><div class = "bubble-sheild-shine"></div></div>'),p(u(t),"protect",!0),p(u(t),"type","water"),t}return e=h,(r=[{key:"acquire",value:function(t){var e=this;if(t.viewport){t.controllable&&a.Sfx.play("WATER_ACQUIRE");t.addEventListener("damage",function r(n){if(t.args.currentSheild===o.Bindable.make(e)){n.preventDefault();var i=n.detail.other;i&&i.pop&&i.pop(t),e.onNextFrame(function(){t.args.currentSheild=null,t.inventory.remove(e)}),t.removeEventListener("damage",r),t.startle()}})}}},{key:"immune",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";return"water"===r||"projectile"===r}},{key:"command_0",value:function(t,e){t.canFly||t.dashed||t.args.standingOn&&t.args.standingOn.isVehicle||(this.args.force=10,t.args.jumping&&(t.impulse(14,Math.PI/2),this.args.bouncing="bouncing",t.args.bouncing=!0))}},{key:"hold_0",value:function(){this.args.bouncing&&this.args.force<25&&this.args.force++}},{key:"update",value:function(t){var e=this;t.args.ySpeed<-5&&this.onNextFrame(function(){t.args.bouncing=!1,e.args.bouncing=!1,e.args.force=0}),t.canFly||t.args.falling||this.args.bouncing&&this.args.force&&(this.onNextFrame(function(){t.args.standingOn=null,t.args.bouncing=!1,t.args.falling=!0,t.args.jumping=!0,t.impulse(e.args.force,-Math.PI/2,!0)}),this.args.bouncing="",a.Sfx.play("WATER_BOUNCE"),t.viewport.settings.rumble&&t.controller.rumble({duration:200,strongMagnitude:1,weakMagnitude:1}))}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.BubbleSheild=h}),require.register("powerups/ElectricSheild.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ElectricSheild=void 0;var o=e("curvature/base/Bindable"),i=e("./Sheild"),a=e("../audio/Sfx");function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}(this,r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(h,i.Sheild);var e,r,n,c=f(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return g(p(t=c.call.apply(c,[this].concat(r))),"template",'<div class = "sheild electric-sheild [[boosted]]"></div>'),g(p(t),"protect",!0),g(p(t),"type","electric"),g(p(t),"jumps",3),g(p(t),"attract",new Set),g(p(t),"magnetism",.25),g(p(t),"magnetTimeout",!1),t}return e=h,(r=[{key:"acquire",value:function(t){var e=this;if(t.viewport){t.controllable&&a.Sfx.play("ELECTRIC_ACQUIRE");t.addEventListener("damage",function r(n){if(t.args.currentSheild===o.Bindable.make(e)){n.preventDefault();var i=n.detail.other;e.immune(t,i,n.detail.type)?n.detail.immune=!0:(i&&i.damage&&i.damage(t,"electric"),e.onNextFrame(function(){t.args.currentSheild=null,t.inventory.remove(e)}),t.removeEventListener("damage",r),t.startle())}})}}},{key:"immune",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";return"electric"===r||"projectile"===r}},{key:"command_0",value:function(t,e){var r=this;t.canFly||this.jumps>0&&t.args.jumping&&(t.args.ySpeed=0,t.impulse(10,-Math.PI/2),this.jumps--,this.onTimeout(250,function(){return r.args.boosted=""}),a.Sfx.play("ELECTRIC_JUMP"),t.xAxis&&Math.sign(t.xAxis)!==Math.sign(t.args.xSpeed)&&(t.args.xSpeed=1*t.xAxis))}},{key:"release_6",value:function(t,e){}},{key:"magnetize",value:function(t,e){var r=this;if(t.controllable){t.args.xOff=0,t.args.yOff=32,this.magnetism=Math.max(.25,e);var n=t.viewport.objectPalette.ring,o=t.findNearestActor(function(t){return!r.attract.has(t)&&t instanceof n&&!t.args.gone&&!t.restore},256);o&&(t.viewport.auras.add(o),this.attract.add(o))}}},{key:"update",value:function(t){var e=this;if(this.magnetize(t,2.5),t.args.falling||this.magnetTimeout||(this.magnetTimeout=this.onTimeout(100,function(){e.magnetTimeout=!1,e.args.boosted=""})),!t.canFly){t.args.falling||(this.jumps=3);var r,n=0,o=s(this.attract);try{var i=function(){var o=r.value;if(o.args.gone)return e.attract.delete(o),o.attract=null,e.onTimeout(500,function(){o.def&&(o.args.static=!1,o.args.xSpeed=0,o.args.ySpeed=0,o.args.x=o.def.get("x"),o.args.y=o.def.get("y"),t.viewport.setColCell(o),e.onTimeout(3e3,function(){t.viewport.auras.delete(o),o.args.float=-1,o.noClip=!1,o.restore=!0}))}),"continue";o.args.static=!1,o.attract=t,o.noClip=!0;var i=t.x-o.x,a=t.y-t.args.height/2-o.y,s=Math.atan2(a,i),c=Math.sqrt(Math.pow(a,2)+Math.pow(i,2)),l=Math.sign(i),u=Math.sign(a),f=Math.sign(o.args.xSpeed||0)===l,p=Math.sign(o.args.ySpeed||0)===u;if(c>512){if(n>45)return"continue";o.args.x=t.x-512*Math.cos(s),o.args.y=t.y-512*Math.sin(s)}t.viewport.setColCell(o),n++;var h=2*(e.magnetism||.75),g=Math.max(h,f?.45:.55),d=Math.max(h,.45);o.args.groundAngle=0;var y=e.magnetism?Math.random():1;(!f||Math.abs(o.args.xSpeed)<8||c>512)&&(o.args.xSpeed+=Math.max(.1,g*y)*l),(!p||Math.abs(o.args.ySpeed)<8||c>512)&&(o.args.ySpeed+=Math.max(.1,d*y)*u),o.args.falling=!0};for(o.s();!(r=o.n()).done;)i()}catch(t){o.e(t)}finally{o.f()}}}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.ElectricSheild=d}),require.register("powerups/FireSheild.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FireSheild=void 0;var o=e("curvature/base/Bindable"),i=e("./Sheild"),a=e("../audio/Sfx");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,i.Sheild);var e,r,n,f=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(u(t=f.call.apply(f,[this].concat(r))),"template",'<div class = "sheild fire-sheild [[boosted]]"></div>'),p(u(t),"protect",!0),p(u(t),"type","fire"),t}return e=h,(r=[{key:"acquire",value:function(t){var e=this;if(t.viewport){t.controllable&&a.Sfx.play("FIRE_ACQUIRE");t.addEventListener("damage",function r(n){if(t.args.currentSheild===o.Bindable.make(e)){n.preventDefault();var i=n.detail.other;i&&i.pop&&i.pop(t),e.onNextFrame(function(){t.args.currentSheild=null,t.inventory.remove(e)}),t.removeEventListener("damage",r),t.startle()}})}}},{key:"immune",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";return"fire"===r||"projectile"===r}},{key:"update",value:function(t){t.args.falling||(this.power=15)}},{key:"hold_4",value:function(t,e){var r=this;this.power<=0||(this.power--,t.canFly||(t.args.falling?(t.impulse(1,Math.PI),this.args.boosted||(this.args.boosted="boosted",a.Sfx.play("FIRE_DASH"),t.viewport.onFrameOut(15,function(){return r.args.boosted=""}))):this.args.boosted=""))}},{key:"hold_5",value:function(t,e){var r=this;this.power<=0||(this.power--,t.canFly||(t.args.falling?(t.impulse(1,0),this.args.boosted||(this.args.boosted="boosted",a.Sfx.play("FIRE_DASH"),t.viewport.onFrameOut(15,function(){return r.args.boosted=""}))):this.args.boosted=""))}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.FireSheild=h}),require.register("powerups/NormalSheild.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NormalSheild=void 0;var o=e("curvature/base/Bindable"),i=e("./Sheild");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,i.Sheild);var e,r,n,u=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return f(l(t=u.call.apply(u,[this].concat(r))),"template",'<div class = "sheild normal-sheild"></div>'),f(l(t),"protect",!0),f(l(t),"type","normal"),t}return e=p,(r=[{key:"acquire",value:function(t){var e=this;if(t.viewport){t.addEventListener("damage",function r(n){if(t.args.currentSheild===o.Bindable.make(e)){n.preventDefault();var i=n.detail.other;i&&i.damage&&i.damage(t),e.onNextFrame(function(){t.args.currentSheild=null,t.inventory.remove(e)}),t.removeEventListener("damage",r),t.startle()}})}}},{key:"immune",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!1}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.NormalSheild=p}),require.register("powerups/Powerup.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Powerup=void 0;var o,i=e("curvature/base/Bindable"),a=e("curvature/base/View");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}o=i.Bindable.NoGetters;var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(f,a.View);var e,r,n,i=l(f);function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return t=i.call.apply(i,[this].concat(s)),e=u(t),n=!0,(r=o)in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=f,(r=[{key:"equip",value:function(){}},{key:"unequip",value:function(){}},{key:"acquire",value:function(){}},{key:"drop",value:function(){}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Powerup=p}),require.register("powerups/Sheild.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Sheild=void 0;var o=e("./Powerup");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Powerup);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.Sheild=l}),require.register("powerups/StarSheild.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StarSheild=void 0;var o=e("./Sheild"),i=e("../audio/Bgm"),a=e("curvature/base/Tag");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,o.Sheild);var e,r,n,f=l(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return p(u(t=f.call.apply(f,[this].concat(r))),"type","star"),p(u(t),"protect",!0),p(u(t),"template",'<div class = "sheild star-sheild">\n\t\t<div class = "star-sheild-stars"></div>\n\t</div>'),p(u(t),"frame",0),t}return e=h,(r=[{key:"acquire",value:function(t){var e=this,r=t.viewport;if(r){var n=t.args.currentSheild,o=function(e){e.preventDefault();var r=e.detail.other;r&&r.pop&&r.pop(t)};t.addEventListener("damage",o),r.onFrameOut(1560,function(){i.Bgm.stop("STAR_SHIELD"),t.inventory.remove(e),t.removeEventListener("damage",o),t.args.currentSheild=n,e.debindPaused&&e.debindPaused(),delete e.debindPaused}),t.onRemove(function(){return i.Bgm.stop("STAR_SHIELD")}),i.Bgm.play("STAR_SHIELD"),r.args.audio||i.Bgm.pause()}}},{key:"immune",value:function(){return!0}},{key:"drop",value:function(t){console.log(this,t),this.debindPaused&&this.debindPaused(),delete this.debindPaused}},{key:"update",value:function(t){var e=t.viewport;if(e){var r=new a.Tag('<div class = "particle-stars">'),n=t.rotatePoint(0,t.args.height/2),o=t.dashed||"springdash"===t.args.animation;t.args.falling,r.style({"--x":n[0]+t.x+-3+t.args.xSpeed,"--y":n[1]+t.y+(o?-18:-3)+t.args.ySpeed,"--frame":this.frame++,"z-index":-1,opacity:2*Math.random()}),e.particles.add(r),e.onFrameOut(15,function(){return e.particles.remove(r)})}}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.StarSheild=h}),require.register("powerups/SuperSheild.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SuperSheild=void 0;var o=e("./Sheild");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.Sheild);var e,r,n,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call.apply(l,[this].concat(r))),"template",'<div class = "sheild super-sheild">\n\t\t<div class = "super-sheild-shine"></div>\n\t\t<div class = "super-sheild-spark"></div>\n\t\t<div class = "super-sheild-flare"></div>\n\t</div>'),u(c(t),"type","super"),t}return e=f,(r=[{key:"immune",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!(!t.isSuper&&!t.isHyper)}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.SuperSheild=f}),require.register("region/BgShadeRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BgShadeRegion=void 0;var o=e("./ShadeRegion");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.ShadeRegion);var e,r,n,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call.apply(l,[this].concat(r))),"currentFilter",-1),u(c(t),"filters",["studio","western","heat","hydro","lava","frost","eight-bit","corruption","black-hole","normal"]),t.args.type="region region-shade bg-region-shade",t}return e=f,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.BgShadeRegion=f}),require.register("region/BossRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BossRegion=void 0;var o=e("./Region");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Region);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.type="region boss",t.args.hidden=!0,t}return e=l,(r=[{key:"updateActor",value:function(t){t.args.falling||(this.args._boss||(this.viewport.actorsById[this.args.boss].args.hitPoints?t.args.bossMode=!0:t.args.bossMode=!1))}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.BossRegion=l}),require.register("region/CorkscrewRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CorkscrewRegion=void 0;var o=e("./Region");e("curvature/base/Tag");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.Region);var e,r,n,u=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call.apply(u,[this].concat(r))).args.type="region corkscrew",t.args.hidden=!0,t}return e=f,n=[{key:"fromDef",value:function(t){var e=t.width,r=t.height,n=(t.x,t.y),o=c(l(f),"fromDef",this).call(this,t);return o.args.width=e,o.args.height=r,o.args.y=n+r,o}}],(r=[{key:"updateActor",value:function(t){if(t.canRoll&&!(t.args.falling&&t.args.ySpeed<0)&&!(Math.abs(t.args.xSpeed)<5)){t.args.groundAngle=0;var e=(t.x-this.x)/this.args.width,r=1+Math.cos(-Math.PI+e*Math.PI*2),n=r*this.args.height*.5;t.args.y=this.y-n-1,t.args.ySpeed=0,t.args.xSpeed=Math.max(Math.abs(t.args.xSpeed)||t.args.width)*Math.sign(t.args.xSpeed),t.args.gSpeed=t.args.xSpeed,t.args.mode=0,t.args.ignore=-2,t.args.cameraMode="corkscrew",t.args.xSpeed-=Math.sign(t.args.xSpeed)*(-1+Math.abs(r))*.1,e>1||e<0?(t.args.falling=!1,t.args.y=this.y-1):t.args.animation="rolling"}}},{key:"collideA",value:function(t){return!1}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.CorkscrewRegion=u}),require.register("region/DarkRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DarkRegion=void 0;var o=e("./Region"),i=e("curvature/base/Tag"),a=e("curvature/base/View");function s(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(d,o.Region);var e,r,n,l=h(d);function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=l.call.apply(l,[this].concat(r))).args.type="region region-shade region-dark",t.paths=new Map,t.actors=new Set,t}return e=d,(r=[{key:"onRendered",value:function(t){f(g(d.prototype),"onRendered",this).call(this,t),this.basePath="M 0 0\n    \t\t\t\t\tL 0 ".concat(544,"\n    \t\t\t\t\tL ").concat(544," ").concat(544,"\n    \t\t\t\t\tL ").concat(544," 0\n    \t\t\t\t\tZ"),this.mask=a.View.from('<svg style = "width: 100vw;height: 100vh">\n\t\t\t<defs>\n\t\t\t\t<clipPath id = "mask-'.concat(this.args.id,'" clipPathUnits="userSpaceOnUse">\n\t\t\t\t\t<path />\n\t\t\t\t</clipPath>\n\t\t\t</defs>\n\t\t<svg>')),this.mask.render(this.tags.sprite),this.path=this.mask.findTag("clipPath > path"),this.path.attr({d:"".concat(this.basePath," ").concat(this.lightPath)}),this.tags.sprite.style({"--maskImage":"url(#mask-".concat(this.args.id,")")})}},{key:"update",value:function(){f(g(d.prototype),"update",this).call(this),!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new i.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new i.Tag('<div class = "region-color-wrapper">'),this.filter=new i.Tag('<div class = "region-filter">'),this.color=new i.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node))}},{key:"updateEnd",value:function(){f(g(d.prototype),"updateEnd",this).call(this);var t,e=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=c(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(this.actors);try{for(e.s();!(t=e.n()).done;){var r=t.value,n=r.x+r.viewport.args.x,o=r.y+r.viewport.args.y-.5*r.args.height;this.paths.set(r,"M ".concat(n," ").concat(o+64,"\n\t\t\t\t A ").concat(64," ").concat(64,", 0, 1 1, ").concat(n," ").concat(o+-64,"\n\t\t\t\t A ").concat(64," ").concat(64,", 0, 0 1, ").concat(n," ").concat(o+64,"\n        \t\t Z"))}}catch(t){e.e(t)}finally{e.f()}this.path.attr({d:this.basePath+s(this.paths.values()).join(" ")}),this.actors.clear(),this.paths.clear()}},{key:"updateActor",value:function(t){t.controllable&&this.actors.add(t)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}();t.DarkRegion=d}),require.register("region/DebrisRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DebrisRegion=void 0;var o=e("./Region"),i=e("curvature/base/Tag");e("curvature/base/View");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Region);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="region region-shade region-debris",t}return e=p,(r=[{key:"update",value:function(){s(u(p.prototype),"update",this).call(this),!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new i.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new i.Tag('<div class = "region-color-wrapper">'),this.filter=new i.Tag('<div class = "region-filter">'),this.color=new i.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node))}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.DebrisRegion=f}),require.register("region/DropVehicleRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DropVehicleRegion=void 0;var o=e("./Region");e("../ObjectPalette");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Region);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.type="region drop-vehicle",t}return e=l,(r=[{key:"updateActor",value:function(t){t.controllable&&(t.isVehicle||t.args.standingOn&&(t.args.standingOn=null))}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.DropVehicleRegion=l}),require.register("region/ExitRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ExitRegion=void 0;var o=e("./Region");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Region);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.type="region exit",t.args.hidden=!0,t}return e=l,(r=[{key:"updateActor",value:function(t){var e=this;if(t.occupant&&(t=t.occupant),t.controllable){var r=this.viewport;r.args.fade=!0,r.clearCheckpoints(t.args.id),r.onFrameOut(30,function(){r.actors.remove(e),e.args.nextStage?(r.quit(2),r.loadMap({mapUrl:"/map/"+e.args.nextStage})):(r.quit(),r.playCards())})}}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.ExitRegion=l}),require.register("region/ExplodingRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ExplodingRegion=void 0;var o=e("./Region"),i=e("../audio/Sfx"),a=e("curvature/base/Tag");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(h,o.Region);var e,r,n,p=u(h);function h(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=p.call.apply(p,[this].concat(r))).args.type="region region-exploding",t}return e=h,(r=[{key:"updateActor",value:function(t){this.args.active&&(t.controllable||(t.break&&(t.break(),this.viewport.actorIsOnScreen(t)||this.viewport.actors.remove(t)),t.pop&&(t.pop(),this.viewport.actorIsOnScreen(t)||this.viewport.actors.remove(t))))}},{key:"update",value:function(){var t=this;c(f(h.prototype),"update",this).call(this);var e=this.viewport;if(e)if(this.args.active){if(e){Math.random()>.85&&i.Sfx.play("BOSS_DAMAGED");for(var r=function(r){var n=document.createElement("div");n.classList.add("particle-explosion");var o=new a.Tag(n),i=(t.args.width,Math.random(),t.args.height,Math.random(),Math.max(t.x,-t.viewport.args.x)),s=Math.max(t.y,-t.viewport.args.y),c=Math.min(t.x+t.args.width,-t.viewport.args.x+t.viewport.args.width),l=Math.min(t.y-t.args.height,-t.viewport.args.y-t.viewport.args.height/2),u=c-i,f=s-l;o.style({"--x":i+u*Math.random(),"--y":l+f*Math.random()}),e.particles.add(o),setTimeout(function(){return e.particles.remove(o)},512)},n=0;n<1;n++)r()}}else{if(this.args.target&&e.actorsById[this.args.target]){var o=e.actorsById[this.args.target];e.auras.delete(o)}e.auras.delete(this)}}},{key:"activate",value:function(){var t=this;i.Sfx.play("BOSS_DAMAGED"),this.args.active=!0,this.viewport.onFrameOut(250,function(){return t.args.active=!1}),this.args.target&&this.viewport.actorsById[this.args.target]&&this.viewport.onFrameOut(60,function(){var e=t.viewport.actorsById[t.args.target];t.viewport.auras.add(e),e.activate(other,t)})}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),h}();t.ExplodingRegion=p}),require.register("region/FgShadeRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FgShadeRegion=void 0;var o=e("./ShadeRegion");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.ShadeRegion);var e,r,n,l=s(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return u(c(t=l.call.apply(l,[this].concat(r))),"currentFilter",-1),u(c(t),"filters",["studio","western","heat","hydro","lava","frost","eight-bit","corruption","black-hole","normal"]),t.args.type="fg-region-shade region region-shade",t}return e=f,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.FgShadeRegion=f}),require.register("region/ForceRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ForceRegion=void 0;var o=e("./Region");e("curvature/base/Tag");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.Region);var e,r,n,u=c(f);function f(t,e){var r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(n=u.call(this,t,e)).args.type="region region-force",n.args.xForce=n.args.xForce||0,n.args.yForce=n.args.yForce||-5,n.args.active=null!==(r=n.args.active)&&void 0!==r?r:1,n}return e=f,(r=[{key:"update",value:function(){this.originalHeight||(this.originalHeight=this.args.height),this.switch&&this.switch.args.active>0&&!this.args.active&&(this.args.active=!0),a(l(f.prototype),"update",this).call(this)}},{key:"onAttach",value:function(){this.viewport&&this.args.switch}},{key:"wakeUp",value:function(){this.switch=this.viewport.actorsById[this.args.switch]}},{key:"activate",value:function(){this.args.active=1}},{key:"updateActor",value:function(t){if(!(t instanceof o.Region||t.args.static||this.args.active<=0)){if(t.args.falling)return t.args.xSpeed+=Number(this.args.xForce),t.args.ySpeed+=Number(this.args.yForce),void(t.args.groundAngle=0);switch(t.args.mode){case 0:t.args.gSpeed+=Math.sign(this.args.xForce);break;case 1:t.args.gSpeed+=Math.sign(this.args.yForce);break;case 2:t.args.gSpeed-=Math.sign(this.args.xForce);break;case 3:t.args.gSpeed-=Math.sign(this.args.yForce)}}}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.ForceRegion=u}),require.register("region/FrictionRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FrictionRegion=void 0;var o=e("./Region");e("curvature/base/Tag");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Region);var e,r,n,c=s(l);function l(t,e){var r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=c.call(this,t,e)).args.type="region region-friction",n.args.friction=null!==(r=t.friction)&&void 0!==r?r:1,n}return e=l,(r=[{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.FrictionRegion=l}),require.register("region/GrindingRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GrindingRegion=void 0;var o=e("./Region");e("curvature/base/Tag");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,o.Region);var e,r,n,f=c(p);function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=f.call.apply(f,[this].concat(i)),e=l(t),n=!0,(r="grind")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="region grinding",t.args.hidden=!0,t}return e=p,(r=[{key:"update",value:function(){this.originalHeight||(this.originalHeight=this.args.height),a(u(p.prototype),"update",this).call(this)}},{key:"updateActor",value:function(t){t.args.falling||(t.args.grinding=!0)}},{key:"collideA",value:function(t,e){a(u(p.prototype),"collideA",this).call(this,t,e)}},{key:"collideB",value:function(t,e){a(u(p.prototype),"collideA",this).call(this,t,e)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.GrindingRegion=f}),require.register("region/KillRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.KillRegion=void 0;var o=e("./Region");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Region);var e,r,n,c=s(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=c.call.apply(c,[this].concat(r))).args.type="region kill",t.args.hidden=!0,t}return e=l,(r=[{key:"updateActor",value:function(t){t.controllable&&t.die()}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.KillRegion=l}),require.register("region/LavaRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LavaRegion=void 0;var o=e("./Region"),i=e("../actor/Ring"),a=e("../actor/MarbleBlock"),s=e("curvature/base/Tag"),c=e("curvature/base/Bindable");function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(this,r)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(y,o.Region);var e,r,n,d=p(y);function y(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=d.call.apply(d,[this].concat(i)),e=h(t),n=!0,(r="isWater")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="region region-lava",t.args.gravity=.5,t.args.drag=.85,t.args.density=15,t.skimSpeed=0,t}return e=y,(r=[{key:"update",value:function(){!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new s.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new s.Tag('<div class = "region-color-wrapper">'),this.filter=new s.Tag('<div class = "region-filter">'),this.color=new s.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node)),this.originalHeight||(this.originalHeight=this.args.height),u(g(y.prototype),"update",this).call(this)}},{key:"updateActor",value:function(t){t instanceof i.Ring?t.args.ySpeed=-Math.abs(t.args.ySpeed||-6):t.noClip||(t.controllable||t instanceof i.Ring)&&(t.y<this.y+-this.args.height+8||t.args.ySpeed<0||t.args.ignore||!t.args.mercy&&t.immune(this,"fire"))}},{key:"collideA",value:function(t,e){if(!t.noClip)return!(t instanceof a.MarbleBlock)&&((!t.args.standingOn||t.args.standingOn===c.Bindable.make(this))&&(u(g(y.prototype),"collideA",this).call(this,t,e),!!t.controllable&&(!(!t.args.mercy&&!t.immune(this,"fire"))||(t.args.y=this.y+-this.args.height+-32,t.damage(this,"fire"),!1))))}},{key:"collideB",value:function(t,e){t.noClip||u(g(y.prototype),"collideA",this).call(this,t,e)}},{key:"solid",get:function(){return!0}},{key:"isEffect",get:function(){return!0}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),y}();t.LavaRegion=d}),require.register("region/LoadingRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingRegion=void 0;var o=e("./Region");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.Region);var e,r,n,u=c(f);function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=u.call.apply(u,[this].concat(r))).args.hidden=!0,t.loading=t.loaded=!1,t}return e=f,(r=[{key:"updateActor",value:function(t){t.controllable&&(this.loaded||this.loading||this.loading||(this.loading=!0))}},{key:"updateEnd",value:function(){if(a(l(f.prototype),"updateStart",this).call(this),!this.loaded&&this.loading){var t=this.viewport,e=t.tileMap,r=e.mapData.width,n=e.mapData.height,o=this.args.x/32+this.args.xOffset;e.resize(r+9,n),t.appendMap(this.args.map,o,0),this.loaded=!0}}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.LoadingRegion=u}),require.register("region/RainRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RainRegion=void 0;var o=e("./Region"),i=e("curvature/base/Tag");e("curvature/base/View");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Region);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="region region-shade region-rain",t}return e=p,(r=[{key:"update",value:function(){s(u(p.prototype),"update",this).call(this),!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new i.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new i.Tag('<div class = "region-color-wrapper">'),this.filter=new i.Tag('<div class = "region-filter">'),this.color=new i.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node))}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.RainRegion=f}),require.register("region/Region.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Region=void 0;var o=e("curvature/base/Tag"),i=e("../actor/PointActor");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,i.PointActor);var e,r,n,f=c(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="region",t.args.width=t.args.width||32,t.args.height=t.args.height||32,t.args.density=1,t.args.gravity=1,t.args.drag=1,t.skimSpeed=1/0,t.args.float=-1,t.skimmers=new WeakSet,t}return e=p,n=[{key:"fromDef",value:function(t){var e=l(u(p),"fromDef",this).call(this,t);return e.args.width=t.width,e.args.height=t.height,e.args.x=e.originalX=-0+Math.floor(t.x),e.args.y=e.originalY=-0+Math.floor(t.y),e.args.static=!0,e}}],(r=[{key:"onRendered",value:function(){this.mainElem=new o.Tag(this.tags.sprite.parentNode),l(u(p.prototype),"onRendered",this).call(this)}},{key:"skim",value:function(t){this.skimmers.add(t)}},{key:"updateStart",value:function(){this.skimmers=new WeakSet,l(u(p.prototype),"updateStart",this).call(this)}},{key:"update",value:function(){if(this.viewport&&(!this.focus&&this.args.focus&&(this.focus=this.viewport.actorsById[this.args.focus]),l(u(p.prototype),"update",this).call(this),this.viewport.args.frameId%this.viewport.settings.frameSkip==0)){var t=-this.viewport.args.y-(this.args.y-this.args.height),e=-this.viewport.args.x-this.args.x;this.mainElem&&this.mainElem.style({"--viewportWidth":this.viewport.args.width+"px","--viewportHeight":this.viewport.args.height+"px","--leftBoundry":e+"px","--topBoundry":t+"px","--vpX":this.viewport.args.x+"px","--vpY":this.viewport.args.y+"px"})}}},{key:"updateActor",value:function(t){}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}},{key:"enter",value:function(t){}},{key:"leave",value:function(t){}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.Region=f}),require.register("region/RollingRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RollingRegion=void 0;var o=e("./Region");e("curvature/base/Tag");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.Region);var e,r,n,u=c(f);function f(t,e){var r,n,o,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(i=u.call(this,t,e)).args.sticky=!0,i.args.type="region rolling",i.args.maxSpeed=null!==(r=i.args.maxSpeed)&&void 0!==r?r:-1,i.args.minSpeed=null!==(n=i.args.minSpeed)&&void 0!==n?n:-1,i.args.canJump=null!==(o=i.args.canJump)&&void 0!==o&&o,i.args.hidden=!0,i}return e=f,(r=[{key:"update",value:function(){this.originalHeight||(this.originalHeight=this.args.height),a(l(f.prototype),"update",this).call(this)}},{key:"updateActor",value:function(t){if(t.controllable&&!t.args.falling){t.willStick=!1;var e=t.args.modeTime>5?t.gSpeedLast:0;Math.abs(t.args.gSpeed)<this.args.minSpeed&&(t.args.gSpeed=this.args.minSpeed*Math.sign(t.args.gSpeed||e||t.args.direction)),this.args.maxSpeed>0&&Math.abs(t.args.gSpeed)>this.args.maxSpeed&&(t.args.gSpeed=this.args.maxSpeed*Math.sign(t.args.gSpeed||e||t.args.direction),1===t.args.mode&&(t.args.gSpeed=t.ySpeedLast),3===t.args.mode&&(t.args.gSpeed=-t.ySpeedLast)),t.args.gSpeed||(t.args.gSpeed=2*Math.sign(e||t.args.direction)),t.args.rolling||(t.args.rolling=!0),t.willJump&&(this.args.canJump||(t.willJump=!1))}}},{key:"collideA",value:function(t,e){a(l(f.prototype),"collideA",this).call(this,t,e)}},{key:"collideB",value:function(t,e){a(l(f.prototype),"collideA",this).call(this,t,e)}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.RollingRegion=u}),require.register("region/ShadeRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ShadeRegion=void 0;var o=e("../ui/CharacterString"),i=e("../effects/Cylinder"),a=e("../effects/Pinch"),s=e("./Region"),c=e("curvature/base/Tag");function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(this,r)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(b,s.Region);var e,r,n,y=p(b);function b(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return d(h(t=y.call.apply(y,[this].concat(r))),"currentFilter",-1),d(h(t),"filters",["western","heat","hydro","lava","black-hole","normal"]),t.args.type="region region-shade",t}return e=b,(r=[{key:"onRendered",value:function(){u(g(b.prototype),"onRendered",this).call(this),this.actorFilterWrapper=new c.Tag('<div class = "region-filter-wrapper">'),this.actorColorWrapper=new c.Tag('<div class = "region-color-wrapper">'),this.filterWrapper=new c.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new c.Tag('<div class = "region-color-wrapper">'),this.actorFilter=new c.Tag('<div class = "region-filter">'),this.actorColor=new c.Tag('<div class = "region-color">'),this.filter=new c.Tag('<div class = "region-filter">'),this.color=new c.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node),this.text=new o.CharacterString({value:""}),this.text.render(this.tags.sprite),this.cylinder=new i.Cylinder({id:"shade-cylinder",width:this.args.width,height:this.args.height}),this.cylinder.render(this.tags.sprite),this.pinch=new a.Pinch({id:"shade-pinch",width:this.args.width,height:this.args.height,scale:150}),this.pinch.render(this.tags.sprite),this.args.filter&&(this.filters=[this.args.filter]),this.rotateFilter()}},{key:"update",value:function(){var t=this;u(g(b.prototype),"update",this).call(this),this.args.scale=175-Math.abs(25*Math.sin(Date.now()/200)),!this.switch&&this.args.switch&&(this.switch=this.viewport.actorsById[this.args.switch],this.switch&&this.switch.args.bindTo("active",function(e){e&&t.rotateFilter()}))}},{key:"rotateFilter",value:function(){this.mainElem&&this.args.filter&&this.mainElem.classList.remove(this.args.filter),this.mainElem&&(this.args.filter=this.filters[this.currentFilter++],this.currentFilter>=this.filters.length&&(this.currentFilter=0),this.args.filter&&this.mainElem.classList.add(this.args.filter),this.args.filter&&(this.text.remove(),this.text=new o.CharacterString({value:"".concat(this.currentFilter,": ").concat(this.args.filter)}),this.text.render(this.tags.sprite)))}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),b}();t.ShadeRegion=y}),require.register("region/SwitchRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchRegion=void 0;var o=e("./Region"),i=e("../actor/Rocket");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,o.Region);var e,r,n,l=c(u);function u(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=l.call.apply(l,[this].concat(n))).args.type="region region-switch",e.args.latch=null!==(t=n.latch)&&void 0!==t?t:e.args.latch,e.args.hidden=!0,e.activated=!1,e}return e=u,(r=[{key:"onAttach",value:function(t){return t&&t.preventDefault(),!1}},{key:"activate",value:function(t){if(!this.args.latch||!this.activated){this.args.latch&&(this.args.active=this.activated=!0);var e=this.viewport.actorsById[this.args.target];e&&e.activate&&e.activate(t,this)}}},{key:"updateActor",value:function(t){var e=this;if(this.args.rocket){if(t instanceof i.Rocket){var r=this.viewport.actorsById[this.args.target];if(!r||!r.activate)return;this.viewport.onFrameOut(this.args.delay||1,function(){return r.activate(t,e)})}}else t.isVehicle&&t.occupant&&(t=t.occupant),t.controllable&&this.viewport.onFrameOut(this.args.delay||1,function(){return e.activate(t)})}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.SwitchRegion=u}),require.register("region/VehicleRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.VehicleRegion=void 0;var o=e("./Region"),i=e("../ObjectPalette");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u,f,p,h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,o.Region);var e,r,n,l=c(u);function u(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=l.call.apply(l,[this].concat(r))).args.type="region vehicle",t}return e=u,(r=[{key:"updateActor",value:function(t){if(t[this.constructor.SpawnedFor]){var e=t[this.constructor.SpawnedFor];e.args.x=t.args.x,e.args.y=t.args.y,e.args.xSpeed=t.args.xSpeed,e.args.ySpeed=t.args.ySpeed,e.args.gSpeed=t.args.gSpeed,t.args.standingOn=e}if(t.controllable&&!t.isVehicle&&!t.args.standingOn){var r=i.ObjectPalette[this.args.vehicle];if(!r)return;var n=new r({x:t.x,y:t.y,xSpeed:t.args.xSpeed,ySpeed:t.args.ySpeed,gSpeed:t.args.gSpeed,falling:t.args.falling});this.viewport.spawn.add({object:n}),t.args.standingOn=n,t[this.constructor.SpawnedFor]=n}}},{key:"leave",value:function(t){if(t.occupant&&(t=t.occupant),this.args.restricted&&t.args.standingOn&&t.args.standingOn.isVehicle){var e=t.args.standingOn;e.dead=!0,t.args.standingOn=null,t.args.x=e.args.x,t.args.y=e.args.y,t.args.gSpeed=e.args.gSpeed,t.args.xSpeed=e.args.xSpeed,t.args.ySpeed=e.args.ySpeed,t.args.falling=e.args.falling}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}();t.VehicleRegion=h,u=h,f="SpawnedFor",p=Symbol("SpawnedFor"),f in u?Object.defineProperty(u,f,{value:p,enumerable:!0,configurable:!0,writable:!0}):u[f]=p}),require.register("region/WaterRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WaterRegion=void 0;var o=e("./Region"),i=e("curvature/base/Tag");e("curvature/base/View");function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=h(t);if(e){var i=h(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}(this,r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(g,o.Region);var e,r,n,s=f(g);function g(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i)),e=p(t),n=!0,(r="isWater")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t.args.type="region region-water",t.entryParticle='<div class = "particle-splash">',t.args.gravity=.4,t.args.drag=.85,t.args.density=1,t.skimSpeed=15,t.draining=0,t}return e=g,(r=[{key:"skim",value:function(t){var e=this;if(l(h(g.prototype),"skim",this).call(this,t),!(this.viewport.args.frameId%4)){var r=new i.Tag('<div class = "particle-skim">'),n=t.rotatePoint(t.args.gSpeed,0);r.style({"--x":n[0]+t.x+t.args.gSpeed,"--y":n[1]+t.y,"z-index":0,"--flip":"".concat(t.args.direction)}),this.viewport.particles.add(r),this.viewport.onFrameOut(16,function(){return e.viewport.particles.remove(r)})}}},{key:"update",value:function(){var t=this;if(this.viewport){if(!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new i.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new i.Tag('<div class = "region-color-wrapper">'),this.filter=new i.Tag('<div class = "region-filter">'),this.color=new i.Tag('<div class = "region-color">'),this.colorWrapper.appendChild(this.color.node),this.filterWrapper.appendChild(this.filter.node),this.tags.sprite.appendChild(this.colorWrapper.node),this.tags.sprite.appendChild(this.filterWrapper.node)),this.args.controller){var e=this.viewport.actorsById[this.args.controller];e&&(this.args.height=e.args.level)}if(!this.switch&&this.args.switch&&(this.switch=this.viewport.actorsById[this.args.switch],this.switch&&this.switch.args.bindTo("active",function(e){!e&&t.draining,t.draining=e?1:-1})),this.originalHeight||(this.originalHeight=this.args.height),this.draining&&(this.draining>0&&this.args.height>=32?this.args.height-=3.5:this.draining<0&&this.args.height<this.originalHeight&&(this.args.height+=3.5),this.args.height<=0?(this.args.display="none",this.draining>0&&(this.draining=0)):this.args.display="initial"),this.target&&this.args.height!==this.target){var r,n,o=this.args.height-this.target,a=null!==(r=this.args.drainSpeed)&&void 0!==r?r:1,s=null!==(n=this.args.fillSpeed)&&void 0!==n?n:1,c=o>0?a:s;Math.abs(this.args.height-this.target)>c?this.args.height-=Math.abs(c)*Math.sign(o):this.args.height=this.target}l(h(g.prototype),"update",this).call(this)}}},{key:"updateActor",value:function(t){var e=this;if(t.controllable&&!(t.args.y-t.args.height<this.args.y-this.args.height)&&this.viewport.args.frameId%5==0&&Math.random()>.9){var r=this.viewport,n=new i.Tag('<div class = "particle-bubble">'),o=t.rotatePoint.apply(t,a(t.facePoint)),s=(t.args.x,o[0],t.args.y+o[1]);n.style({"--startY":s,"--size":Math.random()});var c=r.onFrameInterval(1,function(){var r=t.facePoint,o=t.args.x+r[0],i=t.args.y+r[1];t.args.y<e.args.y-e.args.height&&n.style({display:"none"}),i<e.args.y-e.args.height&&n.style({display:"none"}),n.style({"--x":o,"--y":i})}),l=r.onFrameInterval(1,function(){n.style({"--maxY":e.args.y-e.args.height})});r.particles.add(n),r.onTimeout(350,function(){n.classList.add("float"),c()}),r.onTimeout(1e3,function(){n.classList.add("floating")}),setTimeout(function(){r.particles.remove(n),l()},1500)}}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),g}();t.WaterRegion=g}),require.register("region/WaterfallRegion.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WaterfallRegion=void 0;var o=e("./Region"),i=e("curvature/base/Tag");e("curvature/base/View");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,o.Region);var e,r,n,f=l(p);function p(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=f.call.apply(f,[this].concat(r))).args.type="region region-shade region-waterfall",t.args.density=0,t}return e=p,(r=[{key:"update",value:function(){s(u(p.prototype),"update",this).call(this),!this.filterWrapper&&this.tags.sprite&&(this.filterWrapper=new i.Tag('<div class = "region-filter-wrapper">'),this.colorWrapper=new i.Tag('<div class = "region-color-wrapper">'),this.filter=new i.Tag('<div class = "region-filter">'),this.color=new i.Tag('<div class = "region-color">'),this.filterWrapper.appendChild(this.filter.node),this.colorWrapper.appendChild(this.color.node),this.tags.sprite.appendChild(this.filterWrapper.node),this.tags.sprite.appendChild(this.colorWrapper.node),this.tags.sprite.style({"--maskImage":"url(#mask-".concat(this.args.id,")")}))}},{key:"solid",get:function(){return!1}},{key:"isEffect",get:function(){return!0}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}();t.WaterfallRegion=f}),require.register("save/Save.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Save=void 0;var o=e("curvature/base/Uuid"),i=e("curvature/model/Model"),a=e("./SaveDatabase");function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=f(t);if(e){var i=f(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var y=a.SaveDatabase.open("saves",1),b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(r,i.Model);var e=l(r);function r(){var t;g(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return d(u(t=e.call.apply(e,[this].concat(o))),"id",null),d(u(t),"created",Date.now()),d(u(t),"zones",{}),t}return h(r,[{key:"getZoneState",value:function(t){var e=this.zones[t]||{lastCheckpoint:null,emblems:[],rings:0,score:0,time:0};return this.zones[t]=e}},{key:"save",value:function(){var t=this;y.then(function(e){t.id?e.update("saves",t):(t.id=String(new o.Uuid),e.insert("saves",t))})}},{key:"load",value:function(){}}],[{key:"from",value:function(t){for(var e=s(f(r),"from",this).call(this,t),n=0,o=Object.values(e.zones);n<o.length;n++){var i=o[n];i.emblems=Object.assign([],i.emblems)}return e}},{key:"index",value:function(){return y.then(function(t){var e=[];return t.select({direction:"next",index:"created",store:"saves"}).each(function(t){return e.push(t)}).then(function(){return e})})}}]),r}();t.Save=b}),require.register("save/SaveDatabase.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SaveDatabase=void 0;var o=e("curvature/model/Database");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=c(t);if(e){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(l,o.Database);var e,r,n,c=s(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=l,(r=[{key:"_version_1",value:function(t){this.createObjectStore("saves",{keyPath:"id"}).createIndex("created","created",{unique:!1})}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}();t.SaveDatabase=l}),require.register("sprite/Png.js",function(t,e,r){"use strict";function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(t,"__esModule",{value:!0}),t.Png=void 0;var u=[137,80,78,71,13,10,26,10],f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;a(this,t),l(this,"r",0),l(this,"g",0),l(this,"b",0),l(this,"a",1),this.r=e,this.g=r,this.b=n,this.a=o}return c(t,[{key:"mean",value:function(){return(this.r+this.g+this.b)/3}},{key:"hex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return 3===t?"".concat(this.r.toString(16).padStart(2,"0")).concat(this.g.toString(16).padStart(2,"0")).concat(this.b.toString(16).padStart(2,"0")):4===t?"".concat(this.r.toString(16).padStart(2,"0")).concat(this.g.toString(16).padStart(2,"0")).concat(this.b.toString(16).padStart(2,"0")).concat(this.a.toString(16).padStart(2,"0")):void 0}},{key:"valueOf",value:function(){return"rgba(".concat(this.r,", ").concat(this.g,", ").concat(this.b,", ").concat(this.a,")")}}]),t}(),p=function(){function t(){a(this,t),l(this,"previous",null),l(this,"content",null),l(this,"length",0),l(this,"start",0),l(this,"type",""),l(this,"crc",0)}return c(t,[{key:"text",get:function(){return this.bytes.map(function(t){return String.fromCharCode(t)}).join("")}},{key:"bytes",get:function(){for(var t=[],e=0;e<this.length;e++)t.push(this.content.getUint8(e));return t}}]),t}(),h=function(){function t(e){var r=this;a(this,t),l(this,"buffer",null),l(this,"width",0),l(this,"height",0),l(this,"depth",0),l(this,"colorType",0),l(this,"compression",0),l(this,"filter",0),l(this,"interlace",0),"string"==typeof e?this.ready=fetch(e).then(function(t){return t.arrayBuffer()}).then(function(t){r.buffer=t,r.checkHeader(),r.indexChunks()}):"object"===i(e)&&e instanceof t&&(this.ready=Promise.resolve(),this.buffer=e.buffer.slice(0),this.checkHeader(),this.indexChunks())}return c(t,[{key:"checkHeader",value:function(){var t=new Uint8Array(this.buffer);for(var e in u)if(u[e]!==t[e])throw new Error("Png is not valid.")}},{key:"readIhdr",value:function(){var t=this.chunks[0];this.width=t.content.getUint32(0),this.height=t.content.getUint32(4),this.depth=t.content.getUint8(8),this.colorType=t.content.getUint8(9),this.compression=t.content.getUint8(10),this.filter=t.content.getUint8(11),this.interlace=t.content.getUint8(12)}},{key:"palette",get:function(){var t=[];for(var e in this.chunks){var r=this.chunks[e];if("PLTE"===r.type){for(var n=0;n<r.bytes.length;n+=3){var o=new f(r.bytes[n+0],r.bytes[n+1],r.bytes[n+2]);t.push(o)}return t}}}},{key:"recolor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.palette,o=[];for(var i in r){var a=r[i],s=(a.valueOf(),a.mean(),a.hex());if(e[s]){var c=e[s],l=[c.substring(0,2),c.substring(2,4),c.substring(4,6)].map(function(t){return parseInt(t,16)});o.push.apply(o,n(l))}else o.push(a.r,a.g,a.b)}var u=new t(this);for(var f in u.chunks){var p=u.chunks[f];if("PLTE"===p.type){var h=new Uint8Array(u.buffer),g=new DataView(u.buffer,p.start+p.length,4);h.set(o,p.start),g.setUint32(0,u.runCrc(p))}}return u}},{key:"runCrc",value:function(e){if(!t.crcTable){t.crcTable=new Uint32Array(256);for(var r=0;r<256;r++){for(var n=r,o=0;o<8;o++)1==(1&n)?n=3988292384^n>>>1:n>>>=1;t.crcTable[r]=n}}var i=4294967295,a=new Uint8Array(this.buffer).slice(e.start-4,e.start+e.length);for(var s in a){var c=a[s];i=t.crcTable[255&(i^c)]^i>>>8}return i=(4294967295^i)>>>0}},{key:"indexChunks",value:function(){for(var t=[],e=8;e<this.buffer.byteLength;){var r=new DataView(this.buffer,e,4);e+=4;var n=new DataView(this.buffer,e,4);e+=4;var o=new p;o.start=e,o.length=r.getUint32();for(var i=0;i<4;i++){var a=n.getUint8(i),s=String.fromCharCode(a);o.type+=s}o.content=new DataView(this.buffer,e,o.length),e+=o.length;var c=new DataView(this.buffer,e,4);o.crc=c.getUint32(),o.previous=t[t.length-1],t.push(o),e+=4}this.chunks=t}},{key:"toBlob",value:function(){return new Blob([new Uint8Array(this.buffer)],{type:"image/png"})}},{key:"toUrl",value:function(){return URL.createObjectURL(this.toBlob())}},{key:"toDataUri",value:function(){if(this.getDataUri)return this.getDataUri;var t=new FileReader;return t.readAsDataURL(this.toBlob()),this.getDataUri=new Promise(function(e){return t.addEventListener("load",function(t){return e(t.target.result)})}),this.getDataUri}}]),t}();t.Png=h,h.Pixel=f,h.Chunk=p}),require.register("tileMap/Elicit.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Elicit=void 0;var o=e("curvature/base/Mixin"),i=e("curvature/mixin/EventTargetMixin"),a=e("curvature/mixin/PromiseMixin");function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(f,o.Mixin["with"](i.EventTargetMixin,a.PromiseMixin));var e,r,n,u=l(f);function f(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=u.call(this)).fetch=fetch(t,r).then(function(t){return e.handleFetch(t)}),e}return e=f,(r=[{key:"headers",value:function(){return this.fetch.then(function(t){var e=t.response;t.stream;return e.headers})}},{key:"stream",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.fetch.then(function(t){var e=t.response,r=t.stream;return new Response(r,{headers:e.headers})})}},{key:"objectUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.stream(t,e).then(function(t){return t.blob()}).then(function(t){return URL.createObjectURL(t)})}},{key:"emitProgressEvent",value:function(t,e){var r=t?e/t:0;this.dispatchEvent(new CustomEvent("progress",{detail:{length:t,received:e,done:r}}))}},{key:"iterateDownload",value:function(t,e,r){var n=this;this.emitProgressEvent(r,0);var o=0;return function i(){t.read().then(function(t){var s=t.done,c=t.value;return s?(n[a.PromiseMixin.Accept](),void e.close()):(e.enqueue(c),o+=c.length,n.emitProgressEvent(r,o),i())})}()}},{key:"handleFetch",value:function(t){var e=t.body.getReader(),r=t.headers.get("Content-Length"),n=this;return{response:t,stream:new ReadableStream({start:function(t){n.iterateDownload(e,t,r)}})}}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.Elicit=f}),require.register("tileMap/TileMap.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TileMap=void 0;var o=e("curvature/base/Tag"),i=e("curvature/base/Mixin"),a=(e("curvature/base/Bindable"),e("curvature/mixin/EventTargetMixin")),s=e("./Elicit");function c(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=u(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function u(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=y(t);if(e){var i=y(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}(this,r)}}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(f,i.Mixin["with"](a.EventTargetMixin));var e,r,n,u=g(f);function f(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(r=u.call(this)).meta=new Map,r.heightMask=null,r.tileImages=new Map,r.tileNumberCache=new Map,r.tileSetCache=new Map,r.tileCache=new Map,r.heightMasks=new Map,r.heightMaskCache=new Map,r.tileLayers=[],r.destructibleLayers=[],r.collisionLayers=[],r.objectLayers=[];var n=t.mapUrl;r.mapData=null,r.mapUrl=n,r.maps=new Map,r.replacements=new Map;var o=new s.Elicit(n);return o.addEventListener("progress",function(t){var e=t.detail,o=e.received,i=e.length,a=e.done;r.dispatchEvent(new CustomEvent("level-progress",{detail:{length:i,received:o,done:a,url:n}}))}),r.ready=o.stream().then(function(t){return t.json()}).then(function(t){if(r.mapData=t,t&&t.properties){var e,n=l(t.properties);try{for(n.s();!(e=n.n()).done;){var o=e.value,i=o.name.replace(/-/g,"_");r.meta.set(i,o.value)}}catch(t){n.e(t)}finally{n.f()}}return r.desparseLayers(t),r.loadLayers(t),r.loadTilesets(t)}),Object.preventExtensions(d(r)),r}return e=f,(r=[{key:"desparseLayers",value:function(t){var e,r=l(t.layers);try{for(r.s();!(e=r.n()).done;){var n=e.value;if("tilelayer"===n.type&&n.sparsed&&!n.data)for(var o=n.data={};n.sparsed.length;){var i=Number(n.sparsed.pop());o[Number(n.sparsed.pop())]=i}}}catch(t){r.e(t)}finally{r.f()}}},{key:"append",value:function(t,e,r){var n=this,o=new s.Elicit(t);return o.stream().then(function(t){return t.json()}).then(function(t){n.desparseLayers(t);var o,i=0,a=l(n.mapData.tilesets);try{for(a.s();!(o=a.n()).done;){i+=o.value.tilecount}}catch(t){a.e(t)}finally{a.f()}var s,c=l(t.tilesets);try{for(c.s();!(s=c.n()).done;){s.value.firstgid+=i}}catch(t){c.e(t)}finally{c.f()}var u,f=l(t.layers);try{for(f.s();!(u=f.n()).done;){var p=u.value,h={},g=n.mapData.width-p.width,d=e+r*n.mapData.width;if(p.data){for(var y=0,b=Object.keys(p.data);y<b.length;y++){var v=b[y],m=Number(v),w=Number(p.data[v]),S=Math.floor(m/p.width);delete p.data[v],h[S*g+d+m]=w+i}for(var O in h)p.data[O]=h[O];var k,x=l(n.mapData.layers);try{for(x.s();!(k=x.n()).done;){var j=k.value;if(p.name===j.name)for(var P in p.data)j.data[P]=p.data[P]}}catch(t){x.e(t)}finally{x.f()}}}}catch(t){f.e(t)}finally{f.f()}var _,R=l(t.tilesets);try{for(R.s();!(_=R.n()).done;){var M=_.value;n.mapData.tilesets.push(M)}}catch(t){R.e(t)}finally{R.f()}return n.loadTilesets(t).then(function(){return n.tileNumberCache.clear(),n.getObjectDefs(t)})})}},{key:"resize",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.tileLayers,n=this.mapData,o=n.width;n.height;n.width=t,n.height=e;var i,a=t-o,s=l(r);try{for(s.s();!(i=s.n()).done;){for(var c=i.value,u={},f=0,p=Object.keys(c.data);f<p.length;f++){var h=p[f],g=Number(h),d=Number(c.data[h]),y=Math.floor(g/o);c.data[h]=void 0,u[y*a+g]=d}for(var b in u)c.data[b]=u[b]}}catch(t){s.e(t)}finally{s.f()}this.tileNumberCache.clear()}},{key:"offset",value:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.tileLayers,o=t+e*this.mapData.width,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value,s={};for(var c in a.data){Number(a.name);var u=Number(c),f=Number(a.data[c]);a.data[c]=0,s[o+u]=f}for(var p in s)a.data[p]=s[p]}}catch(t){i.e(t)}finally{i.f()}this.tileNumberCache.clear()}},{key:"loadTilesets",value:function(t){var e=this,r=[],n=new Map,i=new Map,a=function(a){var l=t.tilesets[a],u=new Image;e.tileImages.set(l,u);var f="/map/"+l.image;l.original=l.image=f;var p=new s.Elicit(f);p.addEventListener("progress",function(t){var r=t.detail,o=r.received,a=r.length;r.done;n.set(p,o),i.set(p,a);var s=c(n.values()).reduce(function(t,e){return Number(t)+Number(e)}),l=c(i.values()).reduce(function(t,e){return Number(t)+Number(e)}),u=s/l;e.dispatchEvent(new CustomEvent("texture-progress",{detail:{length:l,received:s,done:u,url:f}}))});var h=p.objectUrl().then(function(t){return new Promise(function(r){l.cachedImage=t,u.addEventListener("load",function(n){e.replacements.set(f,t);var i=new o.Tag("<canvas>");i.width=u.width,i.height=u.height,i.getContext("2d").drawImage(u,0,0,u.width,u.height),e.heightMasks.set(l,i),r(i)},{once:!0}),u.src=t})});r.push(h)};for(var l in t.tilesets)a(l);return Promise.all(r)}},{key:"loadLayers",value:function(t){var e={};t.layers;t.layers.forEach(function(t){t.offsetX=!1,t.offsetY=!1,t.offsetXChanged=!1,t.offsetYChanged=!1,t.destroyed=!1,t.layer=null,Object.preventExtensions(t)}),this.objectLayers=t.layers.filter(function(t){return"objectLayers"===t.type}),this.tileLayers=t.layers.filter(function(t){return"tilelayer"===t.type}),e.tileLayers=this.tileLayers,this.collisionLayers=this.tileLayers.filter(function(t){return!!t.name.match(/^Collision\s\d+/)}),this.destructibleLayers=this.tileLayers.filter(function(t){return!!t.name.match(/^Destructible\s\d+/)}),e.destructibleLayers=this.destructibleLayers,e.collisionLayers=this.collisionLayers}},{key:"addMap",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];var e=new s.Elicit(t);e.stream().then(function(t){return t.json()}).then(function(t){}),e.addEventListener("progress",function(t){var e=t.detail;e.received,e.length,e.done})}},{key:"coordsToTile",value:function(t,e,r){var n,o,i=this.blockSize,a=0,s=0;this.tileLayers[r]&&(a=null!==(n=this.tileLayers[r].offsetX)&&void 0!==n?n:0,s=null!==(o=this.tileLayers[r].offsetY)&&void 0!==o?o:0);return[Math.floor((t-a)/i),Math.floor((e-s)/i)]}},{key:"getTileNumber",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.tileLayers,o=this.mapData;if(!n[r])return!1;if(t>=o.width||t<0){if(t<0||!this.meta.get("wrapX"))return 0===r&&1;t<0&&t%this.mapData.width!=0&&e++,t%=this.mapData.width}if(e>=o.height||e<0){if(e<0||!this.meta.get("wrapY"))return 0===r&&1;e%=this.mapData.height}var i=e*o.width+t;if(i in n[r].data){var a=n[r].data[i];return a>0?a-1:0}return!1}},{key:"getObjectDefs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mapData;if(t)return t.layers.filter(function(t){return"objectgroup"===t.type}).map(function(t){return t.objects}).flat()}},{key:"getTile",value:function(t){var e=this.tileCache.get(t);if(void 0!==e)return this.replacements.has(e[3])&&(e[2]=this.replacements.get(e[3])),e;var r=this.blockSize,n=0,o=0,i="",a="",s=this.getTileset(t),c=this.tileImages.get(s);if(t){var l=t+-s.firstgid+1,u=Math.ceil(c.width/r);n=l%u,o=Math.floor(l/u),i=s.image,a=s.original}var f=[n,o,i,a];return this.tileCache.set(t,f),f}},{key:"getSolid",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.trunc(t),e=Math.trunc(e);var n=this.coordsToTile(t,e,r),o=this.getTileNumber.apply(this,c(n).concat([r])),i=this.collisionLayers.length;if(0===o)return!1;if(1===o)return this.tileLayers[r];if(r>0&&r<i){if(this.getSolid(t,e,0))return this.tileLayers[0];for(var a=0+i;a<this.tileLayers.length;a++){var s=this.tileLayers[a];if("Art"!==s.name.substring(0,3)&&("Moving Art"!==s.name.substring(0,10)&&"Foreground"!==s.name.substring(0,10)&&("Destructible"!==s.name.substring(0,12)||!s.destroyed)&&this.getSolid(t,e,a)))return this.tileLayers[a]}}var l=this.getTileset(o),u=this.mapData.tilewidth,f=this.getTile(o),p=[f[0]*u,f[1]*u],h=Number(t)%u,g=Number(e)%u,d=p[0]+h,y=p[1]+g,b=[d,y,o].join("::"),v=this.heightMaskCache;if(v.has(b))return v.get(b);var m=!1;return m=255===this.heightMasks.get(l).getContext("2d").getImageData(d,y,1,1).data[3]&&this.tileLayers[r],v.set(b,m),m}},{key:"getTileset",value:function(t){t=Number(t);var e=this.tileSetCache.get(t);if(void 0!==e)return this.replacements.has(e.original)&&(e.image=this.replacements.get(e.original)),e;if(this.mapData)for(var r in this.mapData.tilesets){var n=this.mapData.tilesets[r];if(t+1>=n.firstgid){var o=this.mapData.tilesets[Number(r)+1];if(!o)return this.tileSetCache.set(t,n),this.replacements.has(n.original)&&(n.image=this.replacements.get(n.original)),n;if(t+1<o.firstgid)return this.tileSetCache.set(t,n),this.replacements.has(n.original)&&(n.image=this.replacements.get(n.original)),n}}}},{key:"reset",value:function(){this.replacements.clear(),this.tileSetCache.clear(),this.tileCache.clear();for(var t=0;t<this.tileLayers.length;t++){this.tileLayers[t].destroyed=!1}var e,r=l(this.mapData.tilesets);try{for(r.s();!(e=r.n()).done;){var n=e.value;n.image=n.original}}catch(t){r.e(t)}finally{r.f()}}},{key:"blockSize",get:function(){return this.mapData.tilewidth}}])&&p(e.prototype,r),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.TileMap=b}),require.register("timer/Countdown.js",function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(t,"__esModule",{value:!0}),t.Countdown=void 0;var i=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"time",0),o(this,"callback",function(){return console.warn("No callback set!")}),this.time=e,this.callback=r}var e,r,i;return e=t,(r=[{key:"extend",value:function(t){this.time+=t}},{key:"extendTo",value:function(t){this.time=Math.max(t,this.time)}},{key:"update",value:function(){this.time>0&&this.time--,this.time<=0&&(this.callback(),this.time=0)}}])&&n(e.prototype,r),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.Countdown=i}),require.register("titlecard/Titlecard.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Titlecard=void 0;var o=e("curvature/base/View");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=Symbol("Accept"),f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,o.View);var r,n,l,f=s(p);function p(){var t,r,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),t=f.call(this,i,a),r=c(t),n="template",o=e("./titlecard.html"),n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,t.args.firstLine=i.firstLine||"First Line",t.args.secondLine=i.secondLine||"Second Line",t.args.creditLine=i.creditLine||"Credit Line",t.args.actNumber=i.actNumber||1,t.args.animation="start",t.played=new Promise(function(e){return t[u]=e}),t}return r=p,(n=[{key:"play",value:function(t){var e=this;if(this.playing)return this.playing;var r=new Promise(function(t){var r=e.args.waitFor||Promise.resolve(),n=750;e.onTimeout(n,function(){return e.onNextFrame(function(){return e.args.animation=""})}),n+=750,e.onTimeout(n,function(){return e.onNextFrame(function(){return e.args.animation="opening"})}),n+=500,r.finally(function(){e.onTimeout(n,function(){return e.onNextFrame(function(){return e.args.animation="opening2"})}),n+=750,e.onTimeout(n,function(){return e.onNextFrame(function(){return e.args.animation="closing"})}),e.onTimeout(n,function(){t([new Promise(function(t){return e.onTimeout(n+500,t)})]),e[u]()}),n+=1e3,e.onTimeout(n,function(){return e.onNextFrame(function(){return e.args.animation="closed"})}),n+=2500,e.onTimeout(n,function(){return e.onNextFrame(function(){e.args.animation="done",e.playing=!1})})})});this.playing=r}}])&&i(r.prototype,n),l&&i(r,l),Object.defineProperty(r,"prototype",{writable:!1}),p}();t.Titlecard=f}),require.register("titlecard/titlecard.html",function(t,e,r){r.exports='<div class = "titlecard [[animation]]">\n\n\t<div class = "titlecard-field"></div>\n\n\t<div class = "titlecard-bottom-border">\n\t\t<div class = "titlecard-border-text">[[creditLine]]</div>\n\t</div>\n\n\t<div class = "titlecard-left-border">\n\t\t<div class = "titlecard-border-shadow"></div>\n\t\t<div class = "titlecard-border-color"></div>\n\t</div>\n\n\t<div class = "titlecard-title">\n\n\t\t<div class = "titlecard-title-box">\n\n\t\t\t<div class = "titlecard-title-line-1">[[firstLine]]</div>\n\n\t\t\t<div class = "titlecard-title-line-2">\n\t\t\t\t[[secondLine]]<div class = "titlecard-title-number">[[actNumber]]</div>\n\t\t\t</div>\n\n\t\t</div>\n\n\t</div>\n\n</div>\n'}),require.register("ui/CharacterString.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterString=void 0;var o=e("curvature/base/View"),i=e("curvature/base/Bindable");function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,o.View);var e,r,n,u=c(f);function f(t,e){var r,n,o,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),t[i.Bindable.NoGetters]=!0,r=u.call(this,t,e),n=l(r),a='<div cv-ref = "main" class = "hud-character-string [[hide]] [[color]] [[font]]" cv-each = "chars:char:c"><span\n\t\t\t\tclass = "hud-character"\n\t\t\t\tdata-type  = "[[char.type]]"\n\t\t\t\tdata-value = "[[char.pos]]"\n\t\t\t\tdata-index = "[[c]]"\n\t\t\t\tstyle      = "--value:[[char.pos]];--index:[[c]];--length:[[chars.length]];"\n\t\t\t>[[char.original]]</span></div>',(o="template")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,r[i.Bindable.NoGetters]=!0;var s=[];s[i.Bindable.NoGetters]=!0,r.args.chars=s,r.args.scale=r.args.scale||1;r.args.high,r.args.med,r.args.low;return r.args.bindTo("value",function(t){var e=String(t).split("").map(r.characterToModel.bind(l(r)));e.length!==r.args.chars.length&&r.args.chars.splice(e.length),Object.assign(r.args.chars,e)}),r}return e=f,(r=[{key:"characterToModel",value:function(t,e){var r=t,n="number";if(" "===t||Number(t)!=t)switch(t){case" ":t=-1,n="number";break;case"-":t=11,n="number";break;case":":t=10,n="number";break;case".":t=12,n="number";break;case"/":t=13,n="number";break;case",":t=14,n="number";break;case"?":t=15,n="number";break;case"!":t=16,n="number";break;case"@":t=17,n="number";break;case"#":t=18,n="number";break;case"$":t=19,n="number";break;case"%":t=20,n="number";break;case"^":t=21,n="number";break;case"&":t=22,n="number";break;case"*":t=23,n="number";break;case"(":t=24,n="number";break;case")":t=25,n="number";break;case"":t=0,n="symbol2";break;case"":t=1,n="symbol2";break;case"":t=2,n="symbol2";break;case"":t=3,n="symbol2";break;case"":t=4,n="symbol2";break;case"":t=5,n="symbol2";break;case"'":t=6,n="symbol2";break;case'"':t=7,n="symbol2";break;case'"':t=8,n="symbol2";break;case"=":t=9,n="symbol2";break;case"+":t=10,n="symbol2";break;case"[":t=11,n="symbol2";break;case"]":t=12,n="symbol2";break;case"{":t=13,n="symbol2";break;case"}":t=14,n="symbol2";break;case"\\":t=15,n="symbol2";break;case";":t=16,n="symbol2";break;case"~":t=17,n="symbol2";break;case"|":t=18,n="symbol2";break;case"_":t=19,n="symbol2";break;case">":t=20,n="symbol2";break;case"<":t=21,n="symbol2";break;case"":t=22,n="symbol2";break;case"":t=23,n="symbol2";break;case"":t=24,n="symbol2";break;case"`":t=25,n="symbol2";break;default:t=String(t).toLowerCase().charCodeAt(0)-97,n="letter"}return this.args.chars[e]?(this.args.chars[e].original=r,this.args.chars[e].type=n,this.args.chars[e].pos=t,this.args.chars[e]):{pos:t,type:n,original:r}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}();t.CharacterString=f}),require.register("ui/ClickSwitch.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ClickSwitch=void 0;var o=e("curvature/base/View");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,o.View);var r,n,l,u=s(f);function f(){var t,r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=u.call.apply(u,[this].concat(a)),r=c(t),n="template",o=e("./click-switch.html"),n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,t}return r=f,(n=[{key:"toggle",value:function(){this.args.active=!this.args.active}}])&&i(r.prototype,n),l&&i(r,l),Object.defineProperty(r,"prototype",{writable:!1}),f}();t.ClickSwitch=u}),require.register("ui/HudFrame.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HudFrame=void 0;var o=e("curvature/base/View");function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,o.View);var e,r,n,l=s(u);function u(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=l.call.apply(l,[this].concat(i)),e=c(t),n='<div class = "hud-frame [[type]] [[alert]]">\n\t\t<div class = "hud-value">[[value]]</div>\n\t</div>',(r="template")in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=u,r&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.HudFrame=u}),require.register("ui/click-switch.html",function(t,e,r){r.exports='<div class = "switch" data-active = "[[active]]"  cv-on = "click:toggle(event)">\n\n\t<div class = "label labelOff">\n\t\t<img src = "/ui/mute.svg" />\n\t</div>\n\n\t<div class = "slide">\n\t\t<div class = "head"></div>\n\t</div>\n\n\t<div class = "label labelOn">\n\t\t<img src = "/ui/unmute.svg" />\n\t</div>\n\n</div>\n'}),require.register("viewport/Layer.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Layer=void 0;var o=e("curvature/base/Bindable"),i=e("curvature/base/View"),a=e("curvature/base/Tag"),s=e("curvature/base/Bag");function c(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}(this,r)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(d,i.View);var r,n,l,g=p(d);function d(t,r){var n,i,a,l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),t[o.Bindable.NoGetters]=!0,n=g.call(this,t,r),i=h(n),a="template",l=e("./layer.html"),a in i?Object.defineProperty(i,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[a]=l,n[o.Bindable.NoGetters]=!0,n.args.width=t.width||320,n.args.height=t.height||200,n.args.blockSize=t.blockSize||32,n.x=0,n.y=0,n.hidden=!1,n.args.offsetX=0,n.args.offsetY=0,n.args.layerId=n.args.layerId,Object.defineProperty(h(n),"blocksXY",{value:new Map}),Object.defineProperty(h(n),"blocks",{value:new s.Bag}),Object.defineProperty(h(n),"offsets",{value:new Map}),Object.defineProperty(h(n),"blockSrcs",{value:new Map}),n.args.blocks=n.blocks.list,n.meta={};var u=n.args.viewport.tileMap.tileLayers[n.args.layerId];if(u.properties){var f,p=c(u.properties);try{for(p.s();!(f=p.n()).done;){var y=f.value;n.meta[y.name]=y.value}}catch(t){p.e(t)}finally{p.f()}u.layer=h(n)}return n.offsetXChanged=0,n.offsetYChanged=0,n.fallSpeed=0,Object.preventExtensions(h(n)),n}return r=d,(n=[{key:"move",value:function(){if(void 0!==this.meta.controller){var t=this.args.viewport,e=t.tileMap.tileLayers[this.args.layerId],r=t.actorsById[this.meta.controller];if(this.offsetXChanged=0,this.offsetYChanged=0,e&&(e.offsetXChanged=0,e.offsetYChanged=0),r){e&&(e.offsetX=this.args.offsetX,e.offsetY=this.args.offsetY);var n=(r.args.xLayer||0)-this.args.offsetX,o=(r.args.yLayer||0)-this.args.offsetY;this.args.offsetX=r.args.xLayer||0,this.args.offsetY=r.args.yLayer||0,e&&(e.offsetXChanged=n,e.offsetYChanged=o),this.offsetXChanged=n,this.offsetYChanged=o}else this.args.offsetX=0,this.args.offsetY=0;this.fallSpeed=this.fallSpeed||0}}},{key:"onAttach",value:function(t){var e=this,r=this.args.viewport,n=r.tileMap.tileLayers[this.args.layerId],o=r.actorsById[this.meta.controller];n&&this.args.bindTo("destroyed",function(t){e.args.viewport.tileMap.tileLayers[e.args.layerId].destroyed=!!t,o&&(o.args.destroyed=!!t)})}},{key:"update",value:function(t){var e=this.args.viewport;if(e.args.frameId%e.settings.frameSkip==0)if(this.args.hidden)this.hidden||(this.blocks.list.forEach(function(t){t.style({display:"none"}),t.remove()}),this.hidden=!0);else{if(this.args.destroyed&&this.tags.background){var r=e.tileMap,n=this.args.layerId;return r.tileLayers[n].destroyed=!0,this.tags.background.style({display:"none"}),void(this.args.hidden=!0)}for(var o=this.args.blockSize,i=Math.ceil(this.args.width/o)+2,s=Math.ceil(this.args.height/o)+1,c=this.blocksXY,l=i/2,u=s/2,f=this.blocks,p=this.offsets,h=this.blockSrcs,g=this.args.offsetX,d=this.args.offsetY,y=this.args.layerId,b=i,v=0,m=!0,w=-1;w<=b;w+=Math.sign(i)){for(var S=w+-Math.ceil(this.x/o)+-Math.ceil(g/o)+(g>0?1:0),O=0;O<=s;O+=Math.sign(s)){var k=w*(1+Math.abs(s))+O,x=O+Math.floor(-this.y/o)+(this.offsetYChange<0?-Math.ceil(d/o):-Math.floor(d/o))+(d<0?-1:0),j=t.getTileNumber(S,x,y),P=void 0;if(c.has(k))P=c.get(k);else{P=new a.Tag(document.createElement("div")),c.set(k,P),P.style({width:o+"px",height:o+"px"});var _=o*w,R=o*O;P.style({transform:"translate(".concat(_,"px, ").concat(R,"px) scale(").concat("1.03",", ").concat("1.03",")"),position:"absolute",left:0,top:0}),f.add(P)}var M=[];y&&!1===j?(M[0]=-1,M[1]=-1):Object.assign(M,t.getTile(j));var T=p.get(P),E=h.get(P),A=M[0]*o*-1+"px "+M[1]*o*-1+"px",C=M[2];!1!==j&&0!==j&&(m=!1),T===A&&E===C||(!1!==j&&0!==j?P.style({display:"initial","background-position":A,"background-image":"url(".concat(C,")"),"--screenX":(l-v)/l,"--screenY":(O-u)/u}):P.style({display:"none"})),p.set(P,A),h.set(P,C)}v++}if(this.tags.background){var B=this.tags.background;m?B.style({display:"none"}):this.tags.background&&B.style({display:"initial","--offsetX":-g%o,"--offsetY":-d%o})}}}}])&&u(r.prototype,n),l&&u(r,l),Object.defineProperty(r,"prototype",{writable:!1}),d}();t.Layer=d}),require.register("viewport/Viewport.js",function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;var o=e("curvature/base/Bindable"),i=e("curvature/base/Bag"),a=(e("curvature/base/Tag"),e("curvature/base/Uuid")),s=e("curvature/base/View"),c=e("curvature/base/Router"),l=e("curvature/input/Keyboard"),u=e("curvature/input/Sequence"),f=e("curvature/net/Elicit"),p=(e("../QuadCell"),e("../timer/Countdown")),h=e("../audio/Bgm"),g=e("../audio/Sfx"),d=e("../tileMap/TileMap"),y=e("../titlecard/Titlecard"),b=e("../particle/Particle3d"),v=(e("../backdrop/MarbleGarden"),e("../backdrop/ProtoLabrynth"),e("../backdrop/MysticCave"),e("../intro/Series")),m=(e("../intro/Card"),e("../intro/TitleScreenCard")),w=e("../intro/ThankYouCard"),S=e("../intro/LoadingCard"),O=e("../intro/BootCard"),k=e("../intro/DebianCard"),x=e("../intro/WebkitCard"),j=e("../intro/GamepadCard"),P=e("../intro/WarningCard"),_=e("../intro/SaneCard"),R=e("../intro/NoWayCard"),M=e("../intro/SeanCard"),T=e("../Menu/PauseMenu.js"),E=e("../Menu/MainMenu.js"),A=e("../actor/LayerSwitch"),C=e("../region/Region"),B=e("../ui/CharacterString"),D=(e("../ui/HudFrame"),e("./Layer")),I=e("../controller/Controller"),L=e("../BackdropPalette"),F=e("../ObjectPalette"),N=e("../ui/ClickSwitch"),z=e("subspace-console/Console"),q=e("../console/task/Input"),U=e("../console/task/Impulse"),W=e("../console/task/Mark"),V=e("../console/task/Settings"),H=e("../console/task/Move"),G=e("../console/task/Pos"),K=e("../console/task/Spawn"),Y=e("../console/task/Chao"),J=e("../network/RtcClient"),X=e("../network/RtcServer"),$=e("../Classifier"),Z=e("../network/ChatBox"),Q=e("../actor/Platformer"),tt=e("../actor/Sonic"),et=e("../actor/Tails"),rt=e("../actor/Knuckles"),nt=(e("../actor/Seymour"),e("../actor/Chalmers"),e("../save/SaveDatabase"),e("../save/Save")),ot=e("../behavior/Platformer"),it=e("matrix-api/Matrix");function at(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||lt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=lt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function ct(t){return function(t){if(Array.isArray(t))return ut(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||lt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,e){if(t){if("string"==typeof t)return ut(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ut(t,e):void 0}}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pt(t,e){return(pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,o=dt(t);if(e){var i=dt(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gt(t)}(this,r)}}function gt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var bt=Symbol("actor-point-cache"),vt=(Symbol("collision-cells-near"),Symbol("collision-cells")),mt=Symbol("run"),wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pt(t,e)}(dt,s.View);var r,n,lt,ut=ht(dt);function dt(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,dt),r[o.Bindable.NoGetters]=!0,yt(gt(t=ut.call(this,r,n)),"secretsFound",new Set),yt(gt(t),"template",e("./viewport.html")),window.viewport=gt(t),t.listen(window,"focus",function(e){return t.args.windowFocused="window-focused"}),t.listen(window,"blur",function(e){return t.args.windowFocused="window-blurred"}),t.args.windowFocused=document.hasFocus()?"window-focused":"window-blurred",t[o.Bindable.NoGetters]=!0,c.Router.listen(gt(t),{"":function(){return""}}),t.args.screenEffects=new i.Bag,t.meta={},t.loadSaves().then(function(e){e.length?t.currentSave=nt.Save.from(e[0]):t.currentSave=new nt.Save}),t.characters={Sonic:tt.Sonic,Tails:et.Tails,Knuckles:rt.Knuckles,platformer:Q.PlatformActor},t.objectPalette=F.ObjectPalette,t.timers=new Map,t.quadCell=null,t.visible=new Set,t.callIntervals=new Map,t.callFrames=new Map,t.callRenderedFrames=new Map,t.willDetach=new Map,t.backdrops=new Map,t.checkpoints=new Map,t.maxObjectId=0,t.args.loadingMap=!1,t.server=null,t.client=null,t.args.networked=!1,t.args.mouse="moved",t.settings=o.Bindable.make({audio:!0,blur:!0,smoothing:!1,displace:!0,scaling:!0,rumble:!0,showHud:!0,shortcuts:!0,showFps:!0,debugOsd:!1,outline:1,frameSkip:1,musicVol:50,sfxVol:75,username:"player",graphicsLevel:"High",matrixUrl:"https://matrix.org/_matrix"}),t.args.shakeX=0,t.args.shakeY=0,t.args.level="";var a="",s=c.Router.query.map,l=!1;s&&s.match(/^\w/)&&(a="/map/"+s,l=!0),t.args.startFrameId=0,t.args.lastFrameId=-1,a&&t.loadMap({mapUrl:a}).catch(function(e){console.warn(e),t.args.titlecard=new v.Series({cards:[new R.NoWayCard({errorString:'Cannot load map "'.concat(s,'"!'),timeout:-1})]},gt(t)),t.args.titlecard.play()}),t.sprites=new i.Bag,t.world=null;var f=c.Router.query.nointro,d=[];l&&(f=!0),f?d.push(new E.MainMenu({timeout:-1},gt(t))):d.push.apply(d,ct(t.introCards())),t.args.titlecard=new v.Series({cards:d},gt(t)),a||t.args.titlecard.play(),t.args.noIntro=f?"no-intro":"";var y=new u.Sequence({keys:["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowUp","ArrowUp","ArrowUp","ArrowUp"],timing:750}),b=new u.Sequence({keys:["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","KeyB","KeyA","Enter"],timing:750}),m=new u.Sequence({keys:["KeyS","KeyV","KeyG","KeyR","KeyA","KeyV"],timing:750});for(var w in t.sequences=[y,b,m],t.args.debugEnabled=!1,t.args.debugEditMode=!1,t.args.debugObjectCursor=0,t.args.debugObjectName=new B.CharacterString({value:""}),t.debugBank={},t.args.interacted=!1,y.addEventListener("complete",function(e){t.args.debugEnabled||(t.args.debugEnabled=!0,console.log("Debug variable set."),t.args.topLine.args.value=" Debug variable set! ",t.args.topLine.args.hide="",t.onTimeout(1750,function(){t.args.topLine.args.value="",t.args.status.args.hide="hide"}))}),b.addEventListener("complete",function(e){t.args.masterCheat||(t.args.masterCheat=!0,t.args.topLine.args.value=" Master cheat detected. ",t.args.topLine.args.hide="",console.log("Master cheat detected."),t.onTimeout(1750,function(){t.args.topLine.args.value="",t.args.status.args.hide="hide"}))}),m.addEventListener("complete",function(e){t.controlActor&&(t.controlActor.gravityCheat=!t.controlActor.gravityCheat,t.args.topLine.args.value=" Gravity cheat ".concat(t.controlActor.gravityCheat?"on":"off",". "),t.args.topLine.args.hide="",t.onTimeout(1750,function(){t.args.topLine.args.value="",t.args.status.args.hide="hide"}),t.controlActor.gravityCheat?t.controlActor.args.gravity*=.5:t.controlActor.args.gravity*=2)}),t.args.pauseMenu=new T.PauseMenu({},gt(t)),t.particleObserver=new IntersectionObserver(function(t,e){var r,n=st(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;0===o.intersectionRation?(o.target.style.display="none",o.target.remove()):delete o.target.style.display}}catch(t){n.e(t)}finally{n.f()}},{threshold:0}),t.particles=new i.Bag(function(e,r,n){n===i.Bag.ITEM_ADDED?(e.node&&t.particleObserver.observe(e.node),e.node&&t.tags.particles.appendChild(e.node)):n===i.Bag.ITEM_REMOVED&&e.remove()}),t[mt]=0,t.effects=new i.Bag,t.maxCameraBound=64,t.cameraBound=64,t.args.particles=t.particles.list,t.args.effects=t.effects.list,t.args.maxFps=75,t.args.currentActor="",t.args.xOffset=.5,t.args.yOffset=.5,t.args.xOffsetTarget=.5,t.args.yOffsetTarget=.75,t.args.topLine=new B.CharacterString({value:""}),t.args.status=new B.CharacterString({value:""}),t.args.focusMe=new B.CharacterString({value:""}),t.args.labelChar=new B.CharacterString({value:"Char: "}),t.args.labelX=new B.CharacterString({value:"x pos: "}),t.args.labelY=new B.CharacterString({value:"y pos: "}),t.args.demoIndicator=null,t.args.labelGround=new B.CharacterString({value:"Grounded: "}),t.args.labelCamera=new B.CharacterString({value:"Camera: "}),t.args.labelAngle=new B.CharacterString({value:"Gnd theta: "}),t.args.labelGSpeed=new B.CharacterString({value:"Gnd spd: "}),t.args.labelXSpeed=new B.CharacterString({value:"X air spd: "}),t.args.labelYSpeed=new B.CharacterString({value:"Y air spd: "}),t.args.labelLayer=new B.CharacterString({value:"Layer: "}),t.args.labelMode=new B.CharacterString({value:"Mode: "}),t.args.labelFrame=new B.CharacterString({value:"Frame ID: "}),t.args.labelIgnore=new B.CharacterString({value:"Ignore: "}),t.args.labelFps=new B.CharacterString({value:"FPS: "}),t.args.labelAirAngle=new B.CharacterString({value:"Air theta: "}),t.args.char=new B.CharacterString({value:"..."}),t.args.xPos=new B.CharacterString({value:0}),t.args.yPos=new B.CharacterString({value:0}),t.args.layer=new B.CharacterString({value:0}),t.args.gSpeed=new B.CharacterString({value:0,high:199,med:99,low:49}),t.args.ground=new B.CharacterString({value:""}),t.args.xSpeed=new B.CharacterString({value:0}),t.args.ySpeed=new B.CharacterString({value:0}),t.args.mode=new B.CharacterString({value:0}),t.args.angle=new B.CharacterString({value:0}),t.args.ignore=new B.CharacterString({value:0}),t.args.cameraMode=new B.CharacterString({value:0}),t.args.airAngle=new B.CharacterString({value:0}),t.args.nowPlaying=new B.CharacterString({value:"Now playing"}),t.args.trackName=new B.CharacterString({value:""}),t.args.hideNowPlaying="hide-now-playing",g.Sfx.addEventListener("play",function(e){t.args.audio||e.preventDefault()}),h.Bgm.addEventListener("play",function(e){if(t.bgm=t.meta.bgm,!t.args.audio)return e.preventDefault(),void(t.args.hideNowPlaying="hide-now-playing");if(!e.detail)return t.args.trackName.args.value="",void(t.args.hideNowPlaying="hide-now-playing");if(t.args.trackName.args.value=e.detail.TIT2+" by "+e.detail.TPE1,t.args.trackName.args.value){var r=Promise.resolve();t.args.zonecard&&(r=t.args.zonecard.played),r.then(function(){t.args.started&&(t.onFrameOut(60,function(){return t.args.hideNowPlaying=""}),t.timers.has(h.Bgm)?t.timers.get(h.Bgm).extendTo(600):t.timers.set(h.Bgm,new p.Countdown(600,function(){t.args.hideNowPlaying="hide-now-playing"})))})}}),h.Bgm.addEventListener("stop",function(t){}),h.Bgm.addEventListener("pause",function(t){}),h.Bgm.addEventListener("unpause",function(e){t.args.audio||e.preventDefault()}),t.args.fpsSprite=new B.CharacterString({value:0}),t.args.frame=new B.CharacterString({value:0}),t.args.scoreLabel=new B.CharacterString({value:"SCORE:",color:"yellow"}),t.args.timerLabel=new B.CharacterString({value:"TIME: ",color:"yellow"}),t.args.ringLabel=new B.CharacterString({value:"RINGS: ",color:"yellow"}),t.args.actClearLabel=new B.CharacterString({value:"",color:"yellow"}),t.args.dialogLines=[],t.args.perfectBonusLabel=new B.CharacterString({value:"PERFECT BONUS: ",color:"yellow"}),t.args.perfectBonus=new B.CharacterString({value:0}),t.args.speedBonusLabel=new B.CharacterString({value:"SPEED BONUS: ",color:"yellow"}),t.args.speedBonus=new B.CharacterString({value:0}),t.args.skidBonusLabel=new B.CharacterString({value:"SKID BONUS: ",color:"yellow"}),t.args.skidBonus=new B.CharacterString({value:0}),t.args.ringBonusLabel=new B.CharacterString({value:"RING BONUS: ",color:"yellow"}),t.args.ringBonus=new B.CharacterString({value:0}),t.args.timeBonusLabel=new B.CharacterString({value:"TIME BONUS: ",color:"yellow"}),t.args.timeBonus=new B.CharacterString({value:0}),t.args.airBonusLabel=new B.CharacterString({value:"AIR TIME: ",color:"yellow"}),t.args.airBonus=new B.CharacterString({value:"0%"}),t.args.totalBonusLabel=new B.CharacterString({value:"TOTAL: ",color:"yellow"}),t.args.totalBonus=new B.CharacterString({value:0}),t.args.rings=new B.CharacterString({value:0}),t.args.score=new B.CharacterString({value:0}),t.args.timer=new B.CharacterString({value:"00:00"}),t.args.ntsc="ntsc",t.args.frameId=-1,t.settings.bindTo("scaling",function(e){return t.fitScale(!1)},{wait:0}),t.settings.bindTo("graphicsLevel",function(e){switch(e){case"High":t.settings.displace=!0,t.settings.scaling=!0,t.settings.blur=!0;break;case"Medium":t.settings.scaling=!0,t.settings.displace=!0,t.settings.blur=!1;break;case"Low":t.settings.scaling=!0,t.settings.displace=!1,t.settings.blur=!1;break;case"Very Low":t.settings.displace=!1,t.settings.scaling=!1,t.settings.blur=!1}}),t.settings.bindTo("displace",function(e){return t.args.displacement=e?"on":"off"}),t.settings.bindTo("outline",function(e){return t.args.outline=e}),t.settings.bindTo("debugOsd",function(e){return t.args.debugOsd=e}),t.settings.bindTo("showHud",function(e){return t.args.showHud=e}),t.settings.bindTo("shortcuts",function(e){return t.args.shortcuts=e}),t.settings.bindTo("showFps",function(e){return t.args.showFps=e}),t.settings.bindTo("smoothing",function(e){return t.args.smoothing=e}),t.settings.bindTo("musicVol",function(t){return h.Bgm.setVolume(t/100)}),t.settings.bindTo("sfxVol",function(t){return g.Sfx.setVolume(t/100)}),t.args.emeralds=[],t.settings){var S=localStorage.getItem("sonic-3000-setting-v0.0.0="+w);try{var O;t.settings[w]=null!==(O=JSON.parse(S))&&void 0!==O?O:t.settings[w]}catch(t){console.warn(t)}}t.settings.bindTo(function(t,e){localStorage.setItem("sonic-3000-setting-v0.0.0="+e,JSON.stringify(t))}),t.args.blockSize=32,t.args.populated=!1,t.args.willStick=!1,t.args.stayStuck=!1,t.args.willStick=!0,t.args.stayStuck=!0,t.args.width=512,t.args.height=288,t.args.scale=1,c.Router.query.tinyScale&&(t.args.width=256,t.args.height=144,t.args.scale=4),c.Router.query.noScale&&(t.args.width=896,t.args.height=512,t.args.scale=1),c.Router.query.bigScale&&(t.args.width=1920,t.args.height=1088,t.args.scale=1),t.collisions=new Map,t.args.x=t.args.x||0,t.args.y=t.args.y||0,t.args.fgLayers=[],t.args.layers=[],t.args.animation="",t.regions=new Set,t.spawn=new Set,t.auras=new Set,t.recent=new Set,t.actorsByName={},t.actorsById={},t.playable=new Set,t.actors=new i.Bag(function(e,r,n){if(n==i.Bag.ITEM_ADDED)e.viewport=gt(t),t.setColCell(e),e instanceof C.Region&&t.regions.add(e),e.controllable&&t.playable.add(e),t.actorsByName[e.args.name]=e,t.actorsById[e.args.id]=e,t.objectDb.add(e);else if(n==i.Bag.ITEM_REMOVED){e.viewport=null,t.playable.delete(e),e instanceof C.Region&&t.regions.delete(e),delete t.actorsByName[e.args.name],delete t.actorsById[e.args.name],delete t.actorsById[e.args.id],t.recent.delete(e),t.auras.delete(e),t.updateStarted.delete(e),t.updateEnded.delete(e),t.updated.delete(e),t.objectDb.remove(e);var o=t.getColCell(e);e[vt]&&e[vt].delete(e),o&&o.delete(e),delete e[vt],e.remove()}});return t.layerDb=new $.Classifier([/^Art\s+$/,/^Collision\s+$/,/^Destructible\s+$/],function(){}),t.objectDb=new $.Classifier(Object.values(F.ObjectPalette)),t.blocks=new i.Bag,t.args.blocks=t.blocks.list,t.args.actors=t.actors.list,t.listen(window,"gamepadconnected",function(e){return t.padConnected(e)}),t.listen(window,"gamepaddisconnected",function(e){return t.padRemoved(e)}),t.colCellDiv=.75*(t.args.width>t.args.height?t.args.width:t.args.height),t.colCellCache=new Map,t.colCells=new Map,t[bt]=new Map,t.startTime=null,t.args.audio=!1,t.nextControl=!1,t.updateStarted=new Set,t.updateEnded=new Set,t.updated=new Set,t.args.xBlur=0,t.args.yBlur=0,t.args.isRecording=!1,t.args.isReplaying=!1,t.replayInputs=[],t.replayFrames=new Map,t.args.standalone="",t.args.fullscreen="",t.args.initializing="initializing",t.args.muteSwitch=new N.ClickSwitch,t.args.muteSwitch.args.active=!1,t.args.bindTo("interacted",function(e){e&&(t.args.muteSwitch.args.active=t.getAudioSetting(),t.args.muteSwitch.args.bindTo("active",function(e){return t.args.audio=e}),t.args.bindTo("audio",function(e){localStorage.setItem("sonic-3000-audio-enabled",e),t.onNextFrame(function(){return e?h.Bgm.unpause():h.Bgm.pause()}),t.args.muteSwitch.args.active=e}))}),t.args.showConsole=null,t.listen(document,"keydown",function(e){"Escape"===e.key&&(t.args.showConsole=!1),"F10"!==e.key&&"`"!==e.key||(t.args.subspace||(t.args.subspace=new z.Console({scroller:t.tags.subspace,path:{input:q.Input,mark:W.Mark,impulse:U.Impulse,move:H.Move,pos:G.Pos,set:V.Settings,spawn:K.Spawn,chao:Y.Chao}})),t.args.networked?t.args.showConsole=!1:t.args.showConsole=t.args.showConsole?null:"showConsole",e.preventDefault())}),t.args.bindTo("shakeY",function(e,r,n,o,i){t.controlActor&&t.controlActor.controller&&t.controlActor.controller.rumble&&(Math.abs(e)>40&&Math.abs(e)>Math.abs(i)?t.controlActor.controller&&t.controlActor.controller.rumble({duration:4*e,strongMagnitude:1,weakMagnitude:1}):Math.abs(e)>20&&Math.abs(e)>Math.abs(i)?t.controlActor.controller&&t.controlActor.controller.rumble({duration:8*e,strongMagnitude:e/20,weakMagnitude:1}):Math.abs(e)>1&&t.controlActor.controller&&t.controlActor.controller.rumble({duration:16*e,strongMagnitude:.1,weakMagnitude:1}))}),t.args.bindTo("showConsole",function(e){t.args.subspace&&(e?(t.onNextFrame(function(){return t.args.subspace.focus()}),t.args.showConsole="showConsole"):(t.onNextFrame(function(){return t.tags.viewport.focus()}),t.args.showConsole=null))}),t.controller=new I.Controller({deadZone:.2}),t.controller.zero(),t}return r=dt,(n=[{key:"loadWorld",value:function(t){var e=this,r=t.worldUrl,n=t.networked,o=void 0!==n&&n;new f.Elicit(r).json().then(function(t){var r,n=t.maps.sort(function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x}),i=Math.min.apply(Math,ct(n.map(function(t){return t.x}))),a=Math.min.apply(Math,ct(n.map(function(t){return t.y}))),s=Math.max.apply(Math,ct(n.map(function(t){return t.x+t.width}))),c=Math.max.apply(Math,ct(n.map(function(t){return t.y+t.height}))),l=st(n);try{for(l.s();!(r=l.n()).done;){var u=r.value;u.x-=i,u.y-=a}}catch(t){l.e(t)}finally{l.f()}var f=n.shift();e.loadMap({mapUrl:"/map/"+f.fileName,networked:o}).then(function(){var t=e.tileMap.mapData.tilewidth;e.tileMap.offset(-i,-a),e.tileMap.resize(s,c);var r,o=st(n);try{for(o.s();!(r=o.n()).done;){var l=r.value;console.log(l);var u="/map/"+l.fileName;e.appendMap(u,l.x/t,l.y/t)}}catch(t){o.e(t)}finally{o.f()}})})}},{key:"loadSaves",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!this.getSaveIndex?this.getSaveIndex=nt.Save.index():this.getSaveIndex}},{key:"getZoneState",value:function(t){var e,r,n=null!==(e=this.currentSave)&&void 0!==e?e:{},o=null!==(r=this.currentMap)&&void 0!==r?r:"";return n.getZoneState(t||o)}},{key:"loadMap",value:function(t){var e=this,r=t.mapUrl,n=t.networked,o=void 0!==n&&n,i=new d.TileMap({mapUrl:r});this.currentMap=r,this.args.networked=o,this.tileMap=i,this.args.started=!1,this.args.running=!1;var a=new S.LoadingCard({timeout:-1,text:"loading ... 0%"},this);return i.addEventListener("level-progress",function(t){var e=t.detail,r=(e.received,e.length,e.done);a.args.text="loading level ... ".concat((100*r).toFixed(4),"%")}),i.addEventListener("texture-progress",function(t){var e=t.detail,r=(e.received,e.length,e.done);a.args.text="loading textures ... ".concat((100*r).toFixed(4),"%"),1===r&&(a.args.text="initializing...")}),i.ready.then(function(){if(e.tileMap.mapData&&e.tileMap.mapData.properties){var t,r=st(e.tileMap.mapData.properties);try{for(r.s();!(t=r.n()).done;){var n=t.value,o=n.name.replace(/-/g,"_");e.meta[o]=n.value}}catch(t){r.e(t)}finally{r.f()}}e.args.layers.length=0;var i=e.tileMap.tileLayers,a=i.length,s=e.tileMap.mapData.tilewidth;e.args.blockSize=s;for(var c=0;c<a;c++){var l=new D.Layer({layerId:c,blockSize:s,viewport:e,name:i[c].name,width:e.args.width,height:e.args.height});"Foreground"===i[c].name.substring(0,10)?e.args.fgLayers.push(l):e.args.layers.push(l),"construct"!==e.meta.theme&&("Collision"===i[c].name.substring(0,9)?l.args.hidden=!0:"Moving"===i[c].name.substring(0,6)&&"Moving Art"!==i[c].name.substring(0,10)?l.args.hidden=!0:l.args.hidden=!1)}}),this.args.titlecard=new v.Series({cards:[a]},this),this.args.titlecard.play(),i.ready.then(function(){return e.startLevel()}),i.ready}},{key:"fullscreen",value:function(){var t=this;this.exitFullscreen(),this.args.focusMe.args.hide="hide",this.initScale=this.args.scale,this.showStatus(3500," hit escape to revert. "),this.tags.frame.node.requestFullscreen().then(function(e){t.onTimeout(100,function(){t.fitScale(),t.args.fullscreen="fullscreen"})}).catch(function(t){return console.error(t)})}},{key:"exitFullscreen",value:function(){if(document.fullscreenElement)return document.exitFullscreen(),this.showStatus(0,""),this.args.focusMe.args.hide="",void(this.args.fullscreen="")}},{key:"fitScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.settings.scaling){var e=window.innerHeight/this.args.height,r=window.innerWidth/this.args.width;this.args.scale=t?e>r?e:r:e>r?r:e}else this.args.scale=1;this.tags.frame&&this.tags.frame.style({"--width":this.args.width,"--height":this.args.height,"--scale":this.args.scale})}},{key:"showStatus",value:function(t,e){var r=this;this.args.status.args.hide="",this.args.status.args.value="",this.args.status.args.value=e,t>=0&&(this.statusTimeout&&(clearTimeout(this.statusTimeout),this.statusTimeout=null),this.statusTimeout=this.onTimeout(t,function(){r.args.status.args.hide="hide"}))}},{key:"getAudioSetting",value:function(){var t;return!!JSON.parse(null===(t=localStorage.getItem("sonic-3000-audio-enabled"))||void 0===t||t)}},{key:"onAttached",value:function(t){var e=this;V.Settings.viewport=this,U.Impulse.viewport=this,q.Input.viewport=this,W.Mark.viewport=this,H.Move.viewport=this,G.Pos.viewport=this,K.Spawn.viewport=this,Y.Chao.viewport=this,this.buildDetect(),this.cpuDetect(),this.gpuDetect(),this.onTimeout(100,function(){return e.fitScale(!1)}),this.onTimeout(5500,function(){return e.args.ntsc=""});var r=this.getAudioSetting();this.onTimeout(c.Router.query.map||c.Router.query.nointro?0:36e3,function(){e.args.bindTo("interacted",function(t){var n=!t&&r?" Click here to enable audio. ":" Click here to enable keyboard control. ";e.args.focusMe.args.value!==n&&(e.args.focusMe.args.value="",e.args.focusMe.args.value=n)},{wait:250})}),this.tags.blurDistance.setAttribute("style","filter:url(#motionBlur)"),this.tags.blurDistanceFg.setAttribute("style","filter:url(#motionBlur)"),this.listen(window,"resize",function(t){e.onTimeout(100,function(){return e.fitScale(!1)})}),this.listen(document,"fullscreenchange",function(t){if(e.onTimeout(100,function(){return e.fitScale(!1)}),!document.fullscreenElement)return e.args.scale=e.initScale,void(e.args.fullscreen="")}),this.tags.frame.style({"--width":this.args.width,"--height":this.args.height,"--scale":this.args.scale}),this.startTime||(this.startTime=0),this.args.started=!1,this.args.running=!1,this.args.paused=!1,this.listen(document.body,"click",function(t){for(var r=t.target;r&&r.matches;){if(r.matches("[data-click-barrier]"))return;r=r.parentNode}e.tags.viewport.focus()},{capture:!0}),this.args.scale=this.args.scale||1;var n=l.Keyboard.get();n.listening=!0,n.focusElement=this.tags.viewport.node,n.codes.bindTo(function(t,r,n,o){-1===t&&e.sequences.map(function(t){return t.check(r)})}),this.tags.viewport.node.focus(),(window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches)&&(this.args.standalone="standalone",document.title="Sonic 3000",this.listen(window,"resize",function(){return e.fitScale(!1)}),this.onTimeout(100,function(){return e.fitScale(!1)})),this.onTimeout(100,function(){return e.args.initializing=""})}},{key:"setZoneCard",value:function(){this.args.zonecard=new y.Titlecard({waitFor:this.tileMap.ready},this);var t=this.meta.titlecard_title_1,e=this.meta.titlecard_title_2,r=this.meta.titlecard_author,n=this.meta.titlecard_number;return this.args.zonecard.args.firstLine=t,this.args.zonecard.args.secondLine=e,this.args.zonecard.args.creditLine=r,this.args.zonecard.args.actNumber=n,this.args.actName="".concat(t," ").concat(e," ").concat(n),this.args.titlecard=new v.Series({cards:[this.args.zonecard]},this),this.args.titlecard.play()}},{key:"fillBackground",value:function(){var t=L.BackdropPalette[this.meta.backdrop];delete this.args.backdrop,this.args.backdrop=t?new t:null,this.args.theme=this.meta.theme||"construct",this.args.bg=this.meta.backdrop}},{key:"startLevel",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.clearDialog(),this.hideDialog(),this.args.hasFire=!1,this.args.hasWater=!1,this.args.hasElecric=!1,this.args.hasNormal=!1,this.meta.bgm?(h.Bgm.stop("MENU_THEME"),h.Bgm.playing&&this.meta.bgm!==this.bgm&&h.Bgm.stop(),h.Bgm.play(this.meta.bgm,!0)):h.Bgm.fadeOut(250),this.args.audio||h.Bgm.pause(),this.populateMap(),e&&this.setZoneCard(),this.args.startFrameId=this.args.frameId,this.fillBackground(),this.args.networked){var r=new tt.Sonic({name:"Player 1",id:String(new a.Uuid)},this),n=new tt.Sonic({name:"Player 2",id:String(new a.Uuid)},this),o=this.defsByName.get("player-start");r.args.x=o.x,r.args.y=o.y,n.args.x=o.x,n.args.y=o.y,this.spawn.add({object:r}),this.spawn.add({object:n}),this.auras.add(r),this.auras.add(n),this.actors.add(r),this.actors.add(n),1===this.args.playerId?(this.nextControl=r,this.remotePlayer=n,n.args.netplayer=!0):2===this.args.playerId&&(this.remotePlayer=r,this.nextControl=n,r.args.netplayer=!0)}for(var i=0,s=[].concat(ct(this.args.layers),ct(this.args.fgLayers));i<s.length;i++){s[i].args.destroyed=!1}if(!this.args.networked){this.actors.list;this.playableIterator||(this.playableIterator=this.playable.entries()),Object.values(this.args.actors)[0]&&Object.values(this.args.actors)[0].controllable&&(this.nextControl=Object.values(this.args.actors)[0])}this.nextControl&&this.nextControl.controller?this.nextControl.controller.zero():this.controller&&this.controller.zero(),l.Keyboard.get().reset(),this.args.started=!1,h.Bgm.unpause(),this.args.zonecard.played.then(function(){var e,r=st(t.getZoneState().emblems);try{for(r.s();!(e=r.n()).done;){var n=e.value,o=t.actorsById[n];t.nextControl.args.emblems.push(o)}}catch(t){r.e(t)}finally{r.f()}if(t.args.startFrameId=t.args.frameId,c.Router.query.start){var i=c.Router.query.start;if(i.match(/\d+(\.\d+)?,\d+(\.\d+)?/)){var a=at(i.split(","),2),s=a[0],l=void 0===s?128:s,u=a[1],f=void 0===u?128:u;t.nextControl.args.x=Number(l),t.nextControl.args.y=Number(f)}else if(t.defsByName.has(i)){var p=t.defsByName.get(i);t.nextControl.args.x=Number(p.x),t.nextControl.args.y=Number(p.y)}t.nextControl.follower&&(t.nextControl.follower.args.x=t.nextControl.x,t.nextControl.follower.args.y=t.nextControl.y,t.setColCell(t.nextControl.follower))}else if(!t.args.isReplaying&&!t.args.isRecording&&!t.args.networked&&(t.args.demoIndicator=null,t.nextControl)){var h=t.getCheckpoint(t.nextControl.args.canonical);if(h){var g=h?t.actorsById[h.checkpointId]:null;g&&(t.args.startFrameId=t.args.frameId-h.frames,g.args.wasActive=!0,g.args.active=!0,t.nextControl.args.x=g.x,t.nextControl.args.y=g.y,t.nextControl.follower&&(t.nextControl.follower.args.x=g.x,t.nextControl.follower.args.y=g.y,t.setColCell(t.nextControl.follower)),t.args.xOffset=.5,t.args.yOffset=.5)}}t.args.level="level",t.args.fade=!1,t.args.started=!0,t.args.running=!0,t.startTime=Date.now(),"function"==typeof ga&&ga("send","event",{eventCategory:"zone",eventAction:"started",eventLabel:"".concat(t.args.actName)})})}},{key:"takeInput",value:function(t){var e=l.Keyboard.get();if(e.update(),this.gamepad||this.args.cutScene)if(this.args.cutScene)this.controlActor.args.idleTime=0;else for(var r=navigator.getGamepads(),n=0;n<r.length;n++){var o=r[n];if(o)if(t.readInput({keyboard:e,gamepad:o}),o){var i=String(o.id);i.match(/xbo?x/i)?this.args.inputType="input-xbox":i.match(/playstation/i)?this.args.inputType="input-playstation":this.args.inputType="input-generic"}else this.args.inputName="keyboard",this.args.inputType="input-keyboard"}else t.readInput({keyboard:e}),this.args.inputType="input-keyboard";if(this.controlActor&&this.args.debugEditMode){if(t.buttons[0]&&1===t.buttons[0].time){var a=Object.keys(F.ObjectPalette)[this.args.debugObjectCursor];this.debugBank[a]||(this.debugBank[a]=new F.ObjectPalette[a]);var s=this.debugBank[a];this.spawn.add({object:s}),s.controllable&&(s.args.name="SPAWN",this.playable.add(s)),s[mt]=this[mt],s.args.x=this.controlActor.args.x,s.args.y=this.controlActor.args.y,delete this.debugBank[a]}if(t.buttons[1]&&1===t.buttons[1].time){this.args.debugObjectCursor++;var c=Object.keys(F.ObjectPalette);this.args.debugObjectCursor>=c.length&&(this.args.debugObjectCursor=0);var u=c[this.args.debugObjectCursor];for(this.debugBank[u]||(this.debugBank[u]=new F.ObjectPalette[u]);this.tags.spawnPreview.node.firstChild;)this.tags.spawnPreview.node.firstChild.remove();this.debugBank[u].render(this.tags.spawnPreview.node),this.args.debugObjectName.args.value=u}if(t.buttons[2]&&1===t.buttons[2].time){this.args.debugObjectCursor--;var f=Object.keys(F.ObjectPalette);this.args.debugObjectCursor<=0&&(this.args.debugObjectCursor=f.length-1);var p=f[this.args.debugObjectCursor];for(this.debugBank[p]||(this.debugBank[p]=new F.ObjectPalette[p]);this.tags.spawnPreview.node.firstChild;)this.tags.spawnPreview.node.firstChild.remove();this.debugBank[p].render(this.tags.spawnPreview.node),this.args.debugObjectName.args.value=p}}if(this.args.debugEnabled&&t.buttons[8]&&1===t.buttons[8].time&&(this.args.debugEditMode=!this.args.debugEditMode,this.settings.debugOsd=this.args.debugEditMode),t.buttons[2011]&&1===t.buttons[2011].time&&this.fullscreen(),t.buttons[2008]&&1===t.buttons[2008].time&&(this.args.muteSwitch.args.active=!this.args.muteSwitch.args.active),t.buttons[2009]&&1===t.buttons[2009].time&&(this.settings.debugOsd=!this.settings.debugOsd),t.buttons[1020]&&1===t.buttons[1020].time&&(this.args.fullscreen||(this.args.paused?this.unpauseGame():this.pauseGame()),this.exitFullscreen()),!this.args.networked&&t.buttons[1011]&&t.buttons[1011].time>0&&this.args.pauseMenu.input(t),!this.args.networked&&!this.args.paused&&!this.dontSwitch&&t.buttons[11]&&1===t.buttons[11].time){this.playableIterator=this.playableIterator||this.playable.entries();var h=this.playableIterator.next();h.done&&(this.playableIterator=!1,this.playableIterator=this.playable.entries(),h=this.playableIterator.next()),h.value&&(this.nextControl=h.value[0],this.dontSwitch=3)}if(this.args.started){this.controlActor&&(this.args.currentSheild=this.controlActor.args.currentSheild?this.controlActor.args.currentSheild.type:"");if(t.buttons[9]&&t.buttons[9].active&&1===t.buttons[9].time&&(this.args.paused?this.unpauseGame():this.pauseGame()),this.args.isRecording){this.args.demoIndicator||(this.args.demoIndicator=new B.CharacterString({value:" REC",color:"red"}));var g=this.args.frameId,d=t.serialize(),y={};this.controlActor&&(y=yt({},this.controlActor.args.id,{x:this.controlActor.args.x,y:this.controlActor.args.y,gSpeed:this.controlActor.args.gSpeed,xSpeed:this.controlActor.args.xSpeed,ySpeed:this.controlActor.args.ySpeed})),this.replayInputs[g]={frame:g,input:d,args:y}}}t.update({gamepad:this.gamepad})}},{key:"moveCamera",value:function(){if(this.controlActor){this.cameraBound<=this.maxCameraBound?this.cameraBound=this.maxCameraBound:this.cameraBound-=.05*this.cameraBound;var t=30,e=this.controlActor;if(e.args.standingOn&&e.args.standingOn.isVehicle&&(e=e.args.standingOn),e.focused){if("panning"!==this.cameraMode&&"panning"===e.args.cameraMode){var r=e.focused;this.cameraBound=this.maxCameraBound=Math.max(Math.abs(r.x-e.args.x),Math.abs(r.y-e.args.y)),this.args.x-=e.args.x-r.x,this.args.y-=e.args.y-r.y}this.cameraMode=e.args.cameraMode,e=e.focused}else this.cameraMode=e.args.cameraMode;var n=e.args.highJump,o=e.args.deepJump,i=(e.args.falling,e.args.ySpeed);switch(this.cameraMode){case"panning":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.85,t=8;break;case"cutScene":this.args.xOffsetTarget=[.5,.25,.5,.75][e.args.mode],this.args.yOffsetTarget=[.75,.5,.25,.5][e.args.mode],this.maxCameraBound=64,t=15;break;case"corkscrew":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.75,this.maxCameraBound=96,t=64;break;case"normal":this.args.xOffsetTarget=[.5,.45,.5,.55][e.args.mode],this.args.yOffsetTarget=[.5,.5,.5,.5][e.args.mode],this.maxCameraBound=96,t=24;break;case"airplane":var a=e.args.xSpeed,s=Math.abs(a);t=20;var c=Math.max(s/100,.45)*-Math.sign(a);this.args.xOffsetTarget=.5+c,this.args.yOffsetTarget=.5;break;case"aerial":this.args.xOffsetTarget=.5,t=24,e.args.flying||!o&&!n?this.args.yOffsetTarget=.5:this.args.yOffsetTarget=i<0?.75:.35;break;case"hooked":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.6,this.maxCameraBound=1,t=25;break;case"tube":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.5,this.maxCameraBound=64,t=24;break;case"cinematic":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.5,this.maxCameraBound=1,t=0;break;case"cliff":this.args.xOffsetTarget=.5+-.02*e.args.direction,this.args.yOffsetTarget=.45,t=30;break;case"bridge":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.4,t=24;break;case"boss":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.72,this.maxCameraBound=64,t=24;break;case"draggable":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.5,this.maxCameraBound=48,t=3;break;case"locked":this.args.xOffsetTarget=.5,this.args.yOffsetTarget=.25,this.maxCameraBound=32,t=16;break;default:this.maxCameraBound=64,t=25}var l=e.args.gSpeed,u=e.args.xSpeed;if(["normal","bridge","cliff","aerial","tube","hooked","cutScene","hooked","corkscrew"].includes(this.cameraMode)&&!e.args.pushing&&e.args.modeTime>0){e.args.hangingFrom&&(u=e.args.hangingFrom.args.xSpeed),e.args.standingLayer&&(l+=e.args.standingLayer.offsetXChanged);var f=!e.args.falling,p=Math.abs(f?l:u),h=Math.min(p/17,1)*-Math.sign(l||u);switch(e.args.mode){case 0:this.args.xOffsetTarget+=.4*h;break;case 1:this.args.yOffsetTarget+=.4*h;break;case 2:this.args.xOffsetTarget-=.4*h;break;case 3:this.args.yOffsetTarget-=.4*h}this.args.speedBias=h}this.args.xOffsetTarget=Math.max(0,Math.min(1,this.args.xOffsetTarget)),e.args.jumping&&e.args.fallTime>15&&(this.maxCameraBound=128,(o||n)&&(t*=.75));var g=0,d=512,y=0;if("boss"!==this.cameraMode&&"rocket"!==this.cameraMode&&e.args.modeTime>0&&(e.args.falling||1!==e.args.mode?e.args.falling||3!==e.args.mode||(d=e.args.gSpeedMax,y=-e.args.gSpeed/12):(d=e.args.gSpeedMax,y=e.args.gSpeed/12),e.args.rolling&&(y/=4),e.args.falling&&e.args.ySpeed>0&&((o||n)&&(y=e.args.ySpeed),e.args.ySpeed>0?g+=e.args.ySpeed>24?.5:0:g+=e.args.deepJump||e.args.ySpeed<-24?-.5:0),e.args.hangingFrom&&(y=e.args.ySpeed),g+=y/d,e.args.hangingFrom&&(g+=.2)),this.args.yOffsetTarget+=e.args.cameraBias-g,0===e.args.mode&&Math.abs(e.args.groundAngle- -Math.PI/4)<.001&&(this.args.yOffsetTarget-=.25),t){var b=this.args.xOffsetTarget-this.args.xOffset,v=this.args.yOffsetTarget-this.args.yOffset;this.args.xOffset+=b/t,this.args.yOffset+=v/t}else this.args.xOffset=this.args.xOffsetTarget,this.args.yOffset=this.args.yOffsetTarget;var m=e.rotatePoint(0,-e.args.height/2),w=m[0]+-e.args.x,S=m[1]+-e.args.y,O=w+m[0]+this.args.width*this.args.xOffset,k=S+m[1]+this.args.height*this.args.yOffset,x=this.args.x+-O,j=this.args.y+-k,P=Math.sqrt(Math.pow(x,2)+Math.pow(j,2)),_=Math.atan2(j,x),R=this.cameraBound,M=Math.min(R,P),T=Math.abs(M/R),E=M/("panning"===this.cameraMode?6:12),A=O+M*Math.cos(_),C=k+M*Math.sin(_);A-=T*Math.cos(_)*E,C-=T*Math.sin(_)*E/2,A>0&&!this.meta.wrapX&&(A=0),C>0&&!this.meta.wrapY&&(C=0);var B=this.meta.deathLine||this.tileMap.mapData.height*this.tileMap.mapData.tileheight,D=-this.tileMap.mapData.width*this.tileMap.mapData.tilewidth+this.args.width,I=-B+this.args.height;A<D&&!this.meta.wrapX&&(A=D),C<I&&!this.meta.wrapY&&(C=I),this.args.shakeX*=-.95,this.args.shakeY*=-.95,e.args.dead&&!e.args.respawning?this.args.x=A+this.args.shakeX:(this.args.x=A+this.args.shakeX,this.args.y=C+this.args.shakeY)}}},{key:"applyMotionBlur",value:function(){if(this.args.frameId%this.settings.frameSkip==0){var t=this.controlActor;if(this.settings.blur&&t&&this.tags.blur){var e=this.args.x-this.xPrev,r=this.args.y-this.yPrev,n=Math.pow(Number(e)/5,2),o=Math.pow(Number(r)/5,2);n=n<32?n:32,o=o<32?o:32;var i=Math.sqrt(Math.pow(n,2)+Math.pow(o,2))/3,a=Math.atan2(r,e);i>.5?(this.tags.blurAngle.setAttribute("style","transform:rotate(calc(1rad * ".concat(a,"))")),this.tags.blurAngleFg.setAttribute("style","transform:rotate(calc(1rad * ".concat(a,"))")),this.tags.blurAngleCancel.setAttribute("style","transform:rotate(calc(-1rad * ".concat(a,"))")),this.tags.blurAngleCancelFg.setAttribute("style","transform:rotate(calc(-1rad * ".concat(a,"))")),this.tags.blur.setAttribute("stdDeviation","".concat(.75*i-1,", 0"))):(this.tags.blurAngle.setAttribute("style","transform:none;"),this.tags.blurAngleFg.setAttribute("style","transform:none;"),this.tags.blurAngleCancel.setAttribute("style","transform:none;"),this.tags.blurAngleCancelFg.setAttribute("style","transform:none;"),this.tags.blur.removeAttribute("stdDeviation")),this.xPrev=this.args.x,this.yPrev=this.args.y}else this.tags.blurAngle.setAttribute("style","transform:none;"),this.tags.blurAngleFg.setAttribute("style","transform:none;"),this.tags.blurAngleCancel.setAttribute("style","transform:none;"),this.tags.blurAngleCancelFg.setAttribute("style","transform:none;"),this.tags.blur.removeAttribute("stdDeviation")}}},{key:"updateBackground",value:function(){if(this.args.frameId%this.settings.frameSkip==0){var t=this.controlActor;t&&t.standingOn&&t.standingOn.isVehicle&&(t=this.controlActor.standingOn),this.tags.bgFilters.style({"--x":this.args.x,"--y":this.args.y}),this.tags.content.style({"--x":this.args.x,"--y":this.args.y,"--outlineWidth":this.settings.outline+"px"});var e=this.args.x<=0?this.args.x%this.args.blockSize:(-this.args.blockSize+this.args.x%this.args.blockSize)%this.args.blockSize,r=this.args.y<=0?this.args.y%this.args.blockSize:(-this.args.blockSize+this.args.y%this.args.blockSize)%this.args.blockSize;this.tags.background.style({transform:"translate( ".concat(e,"px, ").concat(r,"px )")}),this.tags.foreground.style({transform:"translate( ".concat(e,"px, ").concat(r,"px )")}),this.tags.frame.style({"--width":this.args.width,"--height":this.args.height,"--scale":this.args.scale})}}},{key:"updateBackdrops",value:function(){var t=this;if(this.args.frameId%this.settings.frameSkip==0){var e,r=st(this.backdrops);try{for(r.s();!(e=r.n()).done;){var n=at(e.value,2)[1];if(!n.view){var o,i={},a="",s=st(n.properties);try{for(s.s();!(o=s.n()).done;){var c=o.value;"backdrop"!==c.name?i[c.name]=c.value:a=c.value}}catch(t){s.e(t)}finally{s.f()}i.width=n.width,i.height=n.height,i.bX=n.x,i.bY=n.y;var l=L.BackdropPalette[a];l&&(n.view=new l(i,this),n.view.render(this.tags.backdrops))}this.args.width,this.args.x,n.x;var u=this.args.height+-this.args.y+-n.y,f=(n.width,this.args.x,n.x,-(-n.height-this.args.y-n.y)),p=this.tileMap?-32*this.tileMap.mapData.width:Math.pow(2,9);this.tileMap?this.tileMap.mapData.height:Math.pow(2,9);n.view&&Object.assign(n.view.args,{x:this.args.x,xOffset:-this.args.x-n.x,xPan:this.args.x,xMax:p,y:this.args.y+n.y,yMax:this.args.y+n.y+-n.view.stacked,stacked:-n.view.stacked+"px",frame:this.args.frameId,top:u,bottom:f})}}catch(t){r.e(t)}finally{r.f()}this.tileMap.mapData.tilewidth;var h=this.tileMap.mapData.tileheight,g=this.tileMap.mapData.width,d=this.tileMap.mapData.height;this.tileMap&&this.tileMap.ready.then(function(){var e=t.tileMap?-g*h:Math.pow(2,9),r=t.tileMap?-d*h:Math.pow(2,9);t.args.backdrop&&Object.assign(t.args.backdrop.args,{x:0,xPan:t.args.x,y:t.args.y+t.args.yOffset,xMax:null!==e&&void 0!==e?e:0,yMax:null!==r&&void 0!==r?r:0,frame:t.args.frameId,stacked:-t.args.backdrop.stacked+"px"})})}}},{key:"spawnFromDef",value:function(t){var e=t.type||t.class||t.name;if(t.id>this.maxObjectId&&(this.maxObjectId=t.id),"particle"===e){var r=new b.Particle3d;r.style({"--x":t.x,"--y":t.y}),this.particles.add(r.node)}if("backdrop"!==e){if(this.defsByName.set(t.name,t),this.objDefs.set(t.id,t),F.ObjectPalette[e]){var n=F.ObjectPalette[e].fromDef(t);n[mt]=this[mt],n[o.Bindable.NoGetters]=!0;var i=o.Bindable.make(n);i.name=t.name,this.actors.add(i)}}else this.backdrops.set(t.id,t)}},{key:"spawnInitialObjects",value:function(t){for(var e in t)this.spawnFromDef(t[e]);var r,n=st(this.actors.items());try{for(n.s();!(r=n.n()).done;){var o=r.value;this.actorIsOnScreen(o)||o.isRegion?(o.args.display=o.defaultDisplay||null,o.render(this.tags.actors)):(o.args.display="none",o.render(),o.detach()),(o.onAttach&&!1===o.onAttach()||o.args.hidden)&&(o.args.display="none",o.detach()),o.controllable&&(o.args.display=o.defaultDisplay||null)}}catch(t){n.e(t)}finally{n.f()}}},{key:"appendMap",value:function(t,e,r){var n=this;return this.args.loadingMap=!0,this.tileMap.append(t,e,r).then(function(t){var o,i=n.maxObjectId,a=st(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.id+=i,s.x+=e*n.tileMap.mapData.tilewidth,s.y+=r*n.tileMap.mapData.tileheight,s.properties){var c,l=st(s.properties);try{for(l.s();!(c=l.n()).done;){var u=c.value;"object"===u.type&&(u.value+=i)}}catch(t){l.e(t)}finally{l.f()}}}}catch(t){a.e(t)}finally{a.f()}return n.spawnInitialObjects(t)}).finally(function(){return n.args.loadingMap=!1})}},{key:"populateMap",value:function(){if(!this.args.populated){var t=32*this.tileMap.mapData.width+64,e=32*this.tileMap.mapData.height+64;this.args.populated=!0;var r=this.tileMap.getObjectDefs();this.defsByName=new Map,this.objDefs=new Map;var n,o=st(this.backdrops);try{for(o.s();!(n=o.n()).done;){var i=at(n.value,2),a=i[0],s=i[1];s.view&&(s.view.remove(),s.view=void 0),this.backdrops.delete(a)}}catch(t){o.e(t)}finally{o.f()}for(var l=0,u=Object.entries(this.particles.list);l<u.length;l++){var f=u[l];f&&this.particles.remove(f)}var p=String(this.args.selectedChar||c.Router.query.char||"Sonic").toLowerCase(),h=new(F.ObjectPalette[p]||tt.Sonic)({name:p},this);if(this.spawnInitialObjects(r),!this.args.networked){var g,d="player-start";!h.canRoll&&this.defsByName.has("wide-player-start")&&(d="wide-player-start");var y=this.defsByName.get(d);h.args.x=y?y.x:t/2,h.args.y=y?y.y:e/2,h.args.z=y&&null!==(g=y.z)&&void 0!==g?g:10,h.args.animation="dropping";var b=String(this.args.followerChar||c.Router.query.follower||"").toLowerCase();if(b){var v=new(F.ObjectPalette[b]||et.Tails)({following:!0,name:b,x:h.args.x,y:h.args.y,z:h.args.z-1},this);this.spawn.add({object:v}),this.auras.add(v),this.actors.add(v),h.follower=v}if(this.spawn.add({object:h}),this.auras.add(h),this.actors.add(h),y&&y.properties){var m,w=st(y.properties);try{for(w.s();!(m=w.n()).done;){var S=m.value;h.args[S.name]=S.value}}catch(t){w.e(t)}finally{w.f()}}this.nextControl=h}this.onFrameOut(1,function(){h.follower&&(h.follower.args.x=h.args.x,h.follower.args.y=h.args.y)});for(var O=0,k=Object.entries(this.actors.list);O<k.length;O++){var x=at(k[O],2),j=(x[0],x[1]);if(j&&!j.args.npc&&j.controllable){var P=this.getCheckpoint(j.args.canonical);if(P&&P.checkpointId){var _=this.actorsById[P.checkpointId];_.args.active=!0,_&&(j.args.x=_.x,j.args.y=_.y)}}}}}},{key:"actorIsOnScreen",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;if(t){var r=this.args.width,n=this.args.height,o=-this.args.x-16-e,i=16-this.args.x+e+r,a=-this.args.y-e,s=-this.args.y+n+.5*e,c=t.args.width,l=t.args.y-t.args.height,u=t.args.x-(t.isRegion?0:c/2);return!(o>t.args.x+(t.isRegion?c:c/2)||u>i)&&!(a>t.args.y||l>s)}}},{key:"spawnActors",value:function(){var t,e=new DocumentFragment,r=(new DocumentFragment,!1),n=st(this.spawn);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.frame){if(i.frame<=this.args.frameId){this.spawn.delete(i),i.object[o.Bindable.NoGetters]=!0,i.object[mt]=this[mt],i.object.startFrame=this.args.frameId,i.object.args.id=++this.maxObjectId,this.actors.add(o.Bindable.make(i.object));i.object,C.Region;var a=e;i.object.render(a),i.object.onRendered(),i.object.onAttach&&!1===i.object.onAttach()&&(i.object.args.hidden||i.object.detach()),r=!0}}else this.spawn.delete(i),i.object[o.Bindable.NoGetters]=!0,i.object[mt]=this[mt],i.object.startFrame=this.args.frameId,i.object.args.id=++this.maxObjectId,this.actors.add(o.Bindable.make(i.object)),i.object.render(e),i.object.onRendered(),i.object.onAttached&&i.object.onAttached(),i.object.onAttach&&!1===i.object.onAttach()&&i.object.detach(),r=!0}}catch(t){n.e(t)}finally{n.f()}r&&this.tags.actors.append(e)}},{key:"actorUpdateStart",value:function(t){this.updateStarted.has(t)||(this.updateStarted.add(t),t.updateStart(),t.colliding&&(t.colliding=!1))}},{key:"actorUpdate",value:function(t){this.updated.has(t)||(this.updated.add(t),t.update())}},{key:"actorUpdateEnd",value:function(t){this.updateEnded.has(t)||(this.updateEnded.add(t),t.args.colliding=t.colliding,t.updateEnd(),t.removed||this.setColCell(t))}},{key:"nearbyActors",value:function(t,e){var r,n=this.getNearbyColCells(t,e),o=new Set,i=st(n);try{for(i.s();!(r=i.n()).done;){var a,s=st(r.value);try{for(s.s();!(a=s.n()).done;){var c=a.value;o.add(c)}}catch(t){s.e(t)}finally{s.f()}}}catch(t){i.e(t)}finally{i.f()}return o}},{key:"update",value:function(){var t=this;if(!this.args.loadingMap){this.args.paused>0&&this.args.paused--;var e=this.controlActor?this.controlActor.controller:this.controller;if(this.args.frameId%600==0&&(ga("set","metric1",this.args.frameId/60),"function"==typeof ga&&ga("send","event",{eventCategory:"fps-check",eventAction:"fps-check::".concat(navigator.platform,"::cores_").concat(navigator.hardwareConcurrency),eventLabel:"".concat(this.args.actName),eventValue:Math.trunc(this.args.fps)})),this.args.started||(this.startTime=Date.now(),e&&(this.takeInput(e),this.args.titlecard&&this.args.titlecard.input(e))),!1!==this.args.paused&&(this.takeInput(e),this.args.pauseMenu.input(e)),!1===this.args.paused||this.args.paused>0||this.args.networked){this.callFrameOuts(),this.callRenderedFrameOut(),this.callFrameIntervals();var r,n=st(this.timers);try{for(n.s();!(r=n.n()).done;){var o=at(r.value,2);o[0];o[1].update()}}catch(t){n.e(t)}finally{n.f()}this.args.lastFrameId=this.args.frameId,this.args.cutScene?(this.args.startFrameId++,this.args.showHud=!1):this.settings.showHud&&(this.args.showHud=!0),this.args.debugEditMode||this.args.frameId++,this.args.frame.args.value=this.args.frameId}if(!(!this.args.networked&&this.args.started&&!1!==this.args.paused&&this.args.paused<=0)&&(this.tileMap&&this.tileMap.mapData&&this.updateBackdrops(),this.args.started)){var i,a=st(this.willDetach);try{for(a.s();!(i=a.n()).done;){var s=at(i.value,2),c=s[0],l=s[1];this.willDetach.delete(c),l()}}catch(t){a.e(t)}finally{a.f()}Number(this.args.rings.args.value)?this.args.ringLabel.args.color="yellow":this.args.ringLabel.args.color="red-alert",this.args.fpsSprite.args.value=Number(this.args.fps).toFixed(0);var u=(this.args.frameId-this.args.startFrameId)/60,f=String(Math.trunc(Math.abs(u)/60)).padStart(2,"0"),p=String(Math.trunc(Math.abs(u)%60)).padStart(2,"0"),h=u<0?"-":"";if(h&&(f=Number(f)),this.args.timer.args.value="".concat(h).concat(f,":").concat(p),this.dontSwitch>0&&this.dontSwitch--,this.dontSwitch<0&&(this.dontSwitch=0),this.args.rippleFrame=this.args.frameId%128,this.args.displaceWater=this.args.frameId%128,this[bt].clear(),this.args.isReplaying||this.args.isRecording||(this.args.demoIndicator=null),this.updateBackground(),this.controlActor)if(this.args.isReplaying)if(this.args.demoIndicator||(this.args.demoIndicator=new B.CharacterString({value:" PLAY",color:"green"})),this.args.focusMe.args.hide="hide",this.args.frameId<this.replayInputs.length){var g=this.replayInputs[this.args.frameId];if(g)for(var d in g.args){var y=this.controlActor;y&&(g.args&&Object.assign(y.args,g.args[d]),g.input&&(y.controller.replay(g.input),y.readInput()))}this.args.hasRecording=!0,this.args.topLine.args.value=" i cant believe its not canvas. ",this.args.topLine.args.hide="",this.args.status.args.value=" click here to exit demo. ",this.args.status.args.hide=""}else this.args.topLine.args.hide="hide",this.args.status.args.hide="hide",this.args.isReplaying=!1;else this.gamepad&&(this.args.focusMe.args.hide="hide"),this.controlActor.controller&&this.takeInput(this.controlActor.controller),this.args.cutScene||this.controlActor.readInput();this.collisions=new Map,this.updateStarted.clear(),this.updated.clear(),this.controlActor&&this.controlActor.setCameraMode(),this.updateEnded.clear();for(var b=0,v=[].concat(ct(this.args.layers),ct(this.args.fgLayers));b<v.length;b++){var m=v[b],w=Math.sign(m.x-this.args.x),S=Math.sign(m.y-this.args.y);m.x=this.args.x,m.y=this.args.y,m.update(this.tileMap,w,S)}for(var O=0,k=[].concat(ct(this.args.layers),ct(this.args.fgLayers));O<k.length;O++){k[O].move()}if(this.args.running&&!this.args.debugEditMode){var x,j=new Set,P=st(this.regions);try{for(P.s();!(x=P.n()).done;){var _=x.value;this.actorIsOnScreen(_,768)&&j.add(_)}}catch(t){P.e(t)}finally{P.f()}var R,M=st(this.auras);try{for(M.s();!(R=M.n()).done;){var T=R.value;if(T){T!==this.controlActor&&j.add(T);var E,D=st(this.nearbyActors(T.args.x,T.args.y));try{for(D.s();!(E=D.n()).done;){var I=E.value;I!==this.controlActor&&j.add(I)}}catch(t){D.e(t)}finally{D.f()}}else this.auras.delete(T)}}catch(t){M.e(t)}finally{M.f()}var L,F=st(j);try{for(F.s();!(L=F.n()).done;){var N=L.value;N[mt]===this[mt]&&this.actorUpdateStart(N)}}catch(t){F.e(t)}finally{F.f()}this.controlActor&&this.controlActor[mt]===this[mt]&&this.actorUpdateStart(this.controlActor);var z,q=st(j);try{for(q.s();!(z=q.n()).done;){var U=z.value;U[mt]===this[mt]&&this.actorUpdate(U)}}catch(t){q.e(t)}finally{q.f()}this.controlActor&&this.controlActor[mt]===this[mt]&&this.actorUpdate(this.controlActor);var W,V=st(j);try{for(V.s();!(W=V.n()).done;){var H=W.value;H[mt]===this[mt]&&this.actorUpdateEnd(H)}}catch(t){V.e(t)}finally{V.f()}this.controlActor&&this.controlActor[mt]===this[mt]&&this.actorUpdateEnd(this.controlActor);var G,K=st(j);try{for(K.s();!(G=K.n()).done;){var Y=G.value;Y.removed||Y[mt]!==this[mt]||this.setColCell(Y)}}catch(t){K.e(t)}finally{K.f()}if(this.controlActor&&this.controlActor[mt]===this[mt]&&this.setColCell(this.controlActor),this.collisions){var J,X=st(this.collisions);try{for(X.s();!(J=X.n()).done;){var $,Z=at(J.value,2),Q=(Z[0],st(Z[1]));try{for(Q.s();!($=Q.n()).done;){var tt=at($.value,2),et=tt[0];tt[1];et&&et.pause(!1)}}catch(t){Q.e(t)}finally{Q.f()}}}catch(t){X.e(t)}finally{X.f()}}if(this.controlActor&&(this.args.score.args.value=String(this.controlActor.args.score).padStart(4," "),this.args.rings.args.value=String(this.controlActor.args.rings).padStart(4," "),this.args.emblems=this.controlActor.args.emblems,this.args.hasRings=!!this.controlActor.args.rings,this.args.hasEmeralds=!!this.controlActor.args.emeralds,this.args.char.args.value=this.controlActor.args.name,this.args.charName=this.controlActor.args.name,this.args.debugOsd)){this.args.xPos.args.value=Number(this.controlActor.args.x).toFixed(3),this.args.yPos.args.value=Number(this.controlActor.args.y).toFixed(3),this.args.layer.args.value=Number(this.controlActor.args.layer),this.args.ground.args.value=this.controlActor.args.landed,this.args.gSpeed.args.value=Number(this.controlActor.args.gSpeed).toFixed(3),this.args.xSpeed.args.value=Number(this.controlActor.args.xSpeed).toFixed(3),this.args.ySpeed.args.value=Number(this.controlActor.args.ySpeed).toFixed(3),this.args.angle.args.value=(Math.round(1e3*this.controlActor.args.groundAngle)/1e3).toFixed(3),this.args.airAngle.args.value=(Math.round(1e3*this.controlActor.args.airAngle)/1e3).toFixed(3),this.args.ignore.args.value=this.controlActor.args.ignore;this.args.mode.args.value=["FLOOR (0)","L-WALL (1)","CEILING (2)","R-WALL (3)"][Math.floor(this.controlActor.args.mode)]||Math.floor(this.controlActor.args.mode),this.args.cameraMode.args.value=this.controlActor.args.cameraMode}}else this.args.running&&this.args.debugEditMode&&this.controlActor&&(this.controlActor.args.x+=4*e.axes[0].magnitude,this.controlActor.args.y+=4*e.axes[1].magnitude,this.controlActor.args.respawning=!1,this.controlActor.args.dead=!1,this.controlActor.noClip=!1,this.controlActor.args.xSpeed=0,this.controlActor.args.ySpeed=0,this.controlActor.args.gSpeed=0);var rt=this.args.width,nt=this.args.height,it=(this.args.x,this.args.x,this.args.y,this.args.y,new WeakSet);if(this.controlActor&&function(){var e=new DocumentFragment,r=(new DocumentFragment,!1),n=t.controlActor;t.controlActor.focused&&(n=t.controlActor.focused);for(var o=0,i=[t.nearbyActors(n.args.x,n.args.y)||[],t.regions];o<i.length;o++){var a,s=st(i[o]);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(c[mt]===t[mt])c.args.hidden||c.nodes.length||c.render(t.tags.actors),!t.actorIsOnScreen(c)||c instanceof A.LayerSwitch||(c.args.display=c.defaultDisplay||null,c.vizi||(c.nodes.length||c.onAttach&&!1===c.onAttach()&&c.detach(),c.args.hidden||(C.Region,c.nodes.map(function(t){return e.append(t)}),r=!0),c.wakeUp()),t.willDetach.delete(c),t.visible.add(c),c.vizi=!0),it.add(c),t.recent.add(c)}}catch(t){s.e(t)}finally{s.f()}}var l,u=st(new Set([].concat(ct(t.recent),ct(t.visible))));try{var f=function(){var e=l.value;if(e[mt]!==t[mt])return t.recent.delete(e),"continue";var r=t.actorIsOnScreen(e);!e.vizi||t.willDetach.has(e)||r||(t.willDetach.set(e,function(){e.sleep(),e.args.display="none",e.detach(),t.visible.delete(e),e.vizi=!1,e.willhide=null,t.willDetach.delete(e)}),t.recent.delete(e))};for(u.s();!(l=u.n()).done;)f()}catch(t){u.e(t)}finally{u.f()}r&&t.tags.actors.append(e)}(),this.nextControl&&(!this.args.networked&&this.auras.clear(),this.controlActor&&this.controlActor.sprite&&this.controlActor.sprite.parentNode&&this.controlActor.sprite.parentNode.classList.remove("actor-selected"),this.controlActor&&(this.controlActor.args.selected=!1),this.controlActor=this.nextControl,this.controlActor.args.selected=!0,this.auras.add(this.controlActor),this.controlActor.args.display=this.controlActor.defaultDisplay||null,this.controlActor.nodes.map(function(e){return t.tags.actors.append(e)}),this.visible.add(this.controlActor),this.controlActor.vizi=!0,this.args.maxSpeed=null,this.nextControl=null),this.updated.forEach(function(t){if(t.args.standingLayer){var e=t.args.standingLayer.offsetXChanged;if(e){var r=t.bMap("scanForward",e).get(ot.Platformer);t.args.x+=!1===r?e||0:r*Math.sign(e)}t.args.y+=t.args.standingLayer.offsetYChanged||0}}),this.controlActor&&(this.moveCamera(),this.applyMotionBlur()),this.args.networked&&this.controlActor){var lt={frame:this.serializePlayer()};1===this.args.playerId?this.server.send(JSON.stringify(lt)):2===this.args.playerId&&this.client.send(JSON.stringify(lt))}this.spawnActors(),this.args.fps<30?this.settings.frameSkip=3:this.args.fps<45?this.settings.frameSkip=2:this.settings.frameSkip=1}}}},{key:"click",value:function(t){this.args.isReplaying&&(this.controlActor&&this.controlActor.controller.zero(),this.stop())}},{key:"regionsAtPoint",value:function(t,e){var r,n=new Set,o=st(this.regions);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i[mt]===this[mt]){var a=i.args,s=a.x,c=a.y,l=a.width,u=a.height;Math.floor(l/2);t>=s&&s+l>t&&c>=e&&e>c-u&&n.add(i)}else this.regions.delete(i)}}catch(t){o.e(t)}finally{o.f()}return n}},{key:"actorsAtPoint",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=t+"::"+e+"::"+r+"::"+n,i=this[bt];if(i.has(o))return i.get(o);var a=this.nearbyActors(t,e);if(!a.size)return[];var s,c=new Set,l=st(a);try{for(l.s();!(s=l.n()).done;){var u=s.value,f=Math.max(Math.floor(r/2),0),p=t-f,h=t+f,g=u.args,d=g.x,y=g.width,b=y/2,v=u.isRegion;if(!(h<d-(v?0:b)||d+(v?y:b)<=p)){var m=e-Math.max(n,0),w=e,S=g.y,O=g.height;S<m||w<S-O||c.add(u)}}}catch(t){l.e(t)}finally{l.f()}var k=ct(c);return i.set(o,k),k}},{key:"padConnected",value:function(t){this.gamepad=t.gamepad;var e=String(this.gamepad.id).replace(/\(.\)/," ").replace(/\s?\(.+/,"");this.showStatus(2500," Gamepad connected: "+e+" "),this.args.focusMe.args.hide="hide",this.interact(),"function"==typeof ga&&ga("send","event",{eventCategory:"gamepad",eventAction:"connected",eventLabel:t.gamepad.id})}},{key:"padRemoved",value:function(t){if(this.gamepad){var e=String(this.gamepad.id).replace(/\(.\)/," ").replace(/\s?\(.+/,"");this.showStatus(2500," Gamepad disconnected: "+e+" "),this.args.started&&this.pauseGame(),this.gamepad.index===t.gamepad.index&&(this.gamepad=null),"function"==typeof ga&&ga("send","event",{eventCategory:"gamepad",eventAction:"disconnected",eventLabel:t.gamepad.id})}}},{key:"getColCell",value:function(t){var e=this.colCellDiv,r=this.colCells,n=Math.floor(t.x/e),o=Math.floor(t.y/e),i="".concat(n,":").concat(o);if(!r.has(i)){var a=new Set;return r.set(i,a),a.name=i,a}return r.get(i)}},{key:"getColCells",value:function(t){for(var e=this.colCellDiv,r=t.args.y-t.args.height,n=t.args.width,o=t.args.x-n/2,i=t.args.x+n/2,a=Math.floor(o/e),s=Math.ceil(i/e),c=Math.floor(r/e),l=Math.ceil(t.args.y/e),u=new Set,f=a;f<=s;f++)for(var p=c;p<=l;p++)u.add(this.getColCell({x:f*e,y:p*e}));return u}},{key:"setColCell",value:function(t){if(!t.removed){t[o.Bindable.NoGetters]=!0,t=o.Bindable.make(t);var e=this.getColCell(t.args);return t[vt]&&t[vt]!==e&&t[vt].delete(t),e.add(t),t[vt]=e,e}}},{key:"getNearbyColCells",value:function(t,e){var r=this.colCellDiv,n=Math.floor(t/r),o=Math.floor(e/r),i="".concat(n,"::").concat(o),a=this.colCellCache.get(i);if(a)return a;var s=t-r,c=t,l=t+r,u=e-r,f=e,p=e+r;return this.colCellCache.set(i,a=[this.getColCell({x:s,y:u}),this.getColCell({x:s,y:f}),this.getColCell({x:s,y:p}),this.getColCell({x:c,y:u}),this.getColCell({x:c,y:f}),this.getColCell({x:c,y:p}),this.getColCell({x:l,y:u}),this.getColCell({x:l,y:f}),this.getColCell({x:l,y:p})]),a}},{key:"screenFilter",value:function(t){this.args.screenFilter=t}},{key:"reset",value:function(){console.clear(),this[mt]++,this.stop(),this.args.hasFire=!1,this.args.hasWater=!1,this.args.hasElecric=!1,this.args.hasNormal=!1,this.clearDialog(),this.hideDialog(),this.tileMap.reset(),this.visible.clear(),this.callFrames.clear(),this.callIntervals.clear(),this.collisions.clear(),this.colCellCache.clear(),this.colCells.clear(),this.regions.clear(),this.spawn.clear(),this.auras.clear(),this.updateStarted.clear(),this.updateEnded.clear(),this.updated.clear(),this.objectDb.clear(),this.args.actClear=!1,this.args.cutScene=!1,this.args.fade=!1,this.args.xOffset=.5,this.args.yOffset=.5,this.args.screenEffects=new i.Bag;var t,e=st(this.tileMap.tileLayers);try{for(e.s();!(t=e.n()).done;){var r=t.value;r.offsetX=0,r.offsetY=0,r.offsetXChanged=0,r.offsetYChanged=0}}catch(t){e.e(t)}finally{e.f()}for(var n=0,o=[].concat(ct(this.args.layers),ct(this.args.fgLayers));n<o.length;n++){var a=o[n];a.args.destroyed=!1,a.args.offsetX=0,a.args.offsetY=0,a.args.offsetXChanged=0,a.args.offsetYChanged=0}var s,c=st(this.actors.items());try{for(c.s();!(s=c.n()).done;){var l=s.value;this.actors.remove(l)}}catch(t){c.e(t)}finally{c.f()}this.controlActor&&this.actors.remove(this.controlActor),this.nextControl=null,this.actorsById={};for(var u=0,f=Object.entries(this.effects.list);u<f.length;u++){var p=at(f[u],2),h=(p[0],p[1]);h&&this.effects.remove(h)}for(var g=0,d=Object.entries(this.particles.list);g<d.length;g++){var y=at(d[g],2),b=(y[0],y[1]);b&&this.particles.remove(b)}this.spawn.clear(),this[bt].clear(),this.args.isRecording=!1,this.args.isReplaying=!1,this.args.populated=!1,this.controlActor=null,this.tags.viewport.focus(),this.args.paused=!0}},{key:"quit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.args.actClear=!1,this.args.cutScene=!1,this.args.fade=!0,this.args.screenEffects=new i.Bag,this.callFrames.clear(),this.callIntervals.clear(),this.collisions.clear(),this.colCellCache.clear(),this.colCells.clear(),this.regions.clear(),this.spawn.clear(),this.auras.clear(),this.args.timeBonus.args.value=0,this.args.ringBonus.args.value=0,this.args.speedBonus.args.value=0,this.args.totalBonus.args.value=0,this.meta={};var e,r=st(this.actors.items());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.actors.remove(n)}}catch(t){r.e(t)}finally{r.f()}for(var o=0,a=[].concat(ct(this.args.layers),ct(this.args.fgLayers));o<a.length;o++){a[o].args.destroyed=!1}this.willDetach.clear(),this.objectDb.clear(),this.args.isRecording=!1,this.args.isReplaying=!1,this.playableIterator=!1,this.args.populated=!1,this.args.paused=!1,this.args.started=!1,this.controlActor=null,this.args.frameId=-1,this.args.timer.args.value="",this.args.rings.args.value=0,this.args.hasRings=!1,this.args.hasCoins=!1,this.args.hasEmeralds=!1,this.args.char.args.value="",this.args.charName="",this.args.level=!1;this.args.layers.length;var s,c=st(this.args.layers);try{for(c.s();!(s=c.n()).done;){s.value.remove()}}catch(t){c.e(t)}finally{c.f()}var u,f=st(this.args.fgLayers);try{for(f.s();!(u=f.n()).done;){u.value.remove()}}catch(t){f.e(t)}finally{f.f()}var p=[];if(2===t||this.args.networked){var g=new E.MainMenu({timeout:-1},this);this.args.networked&&(g.args.initialPath=["Multiplayer","Matrix Lobby"]),p.push(g)}else t?(h.Bgm.fadeOut(2e3),p.push.apply(p,ct(this.homeCards()))):(h.Bgm.fadeOut(3e3),p.push.apply(p,ct(this.returnHomeCards())));this.args.titlecard=new v.Series({cards:p},this),this.args.titlecard.play(),this.args.bg=this.args.backdrop=null,l.Keyboard.get().reset(),this.controller.zero()}},{key:"introCards",value:function(){return[new S.LoadingCard({timeout:3500,text:"loading"},this),new O.BootCard({timeout:3500}),new P.WarningCard({timeout:8500}),new k.DebianCard({timeout:4500}),new x.WebkitCard({timeout:3500}),new _.SaneCard({timeout:4500}),new j.GamepadCard({timeout:2500}),new M.SeanCard({timeout:5e3},this)].concat(ct(this.homeCards()))}},{key:"homeCards",value:function(){return[new m.TitleScreenCard({timeout:51e3},this),new E.MainMenu({timeout:-1},this)]}},{key:"returnHomeCards",value:function(){return[new w.ThankYouCard({timeout:5e3},this)].concat(ct(this.homeCards()))}},{key:"playCards",value:function(){this.args.titlecard.play()}},{key:"record",value:function(){this.args.demoIndicator=null,this.reset(),this.args.frameId=0,this.replayInputs=[],this.args.isRecording=!0,this.args.isReplaying=!1,this.args.hasRecording=!0,this.args.paused=!1,this.startLevel()}},{key:"playback",value:function(){this.args.demoIndicator=null,this.reset(),this.replayInputs=JSON.parse(localStorage.getItem("replay"))||[],this.startLevel(),this.args.frameId=0,this.args.isReplaying=!0,this.args.isRecording=!1,this.args.paused=!1}},{key:"stop",value:function(){if(this.args.isRecording){var t=JSON.stringify(ct(this.replayInputs));localStorage.setItem("replay",t)}this.args.isReplaying=!1,this.args.isRecording=!1,this.args.paused=!1,this.controlActor&&this.controlActor.controller.zero(),this.tags.viewport.focus()}},{key:"focus",value:function(){this.tags.viewport&&this.tags.viewport.focus()}},{key:"getServer",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&e||new X.RtcServer({iceServers:[{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]});return this.listen(e,"open",function(r){t.args.chatBox=new Z.ChatBox({pipe:e}),t.args.playerId=1},{once:!0}),this.listen(e,"message",function(e){if(t.remotePlayer){var r=JSON.parse(e.detail),n=t.remotePlayer;r.frame&&(r.frame.frame>t.args.frameId&&(t.args.frameId=r.frame.frame),r.frame.input&&(n.controller.replay(r.frame.input),n.readInput()),r.frame.args&&Object.assign(n.args,r.frame.args),n.noClip=n.args.dead)}}),this.server=e,e}},{key:"getClient",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.client||new J.RtcClient({iceServers:[{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]});return this.listen(e,"open",function(r){t.args.chatBox=new Z.ChatBox({pipe:e}),t.args.playerId=2},{once:!0}),this.listen(e,"message",function(e){if(t.remotePlayer){var r=JSON.parse(e.detail),n=t.remotePlayer;r.frame&&(r.frame.frame>t.args.frameId&&(t.args.frameId=r.frame.frame),r.frame.input&&(n.controller.replay(r.frame.input),n.readInput()),r.frame.args&&Object.assign(n.args,r.frame.args),n.noClip=n.args.dead)}}),this.client=e,e}},{key:"serializePlayer",value:function(){return this.controlActor&&this.controlActor.controller?{frame:this.args.frameId,input:this.controlActor.controller.serialize(),args:{x:this.controlActor.args.x,y:this.controlActor.args.y,gSpeed:this.controlActor.args.gSpeed,xSpeed:this.controlActor.args.xSpeed,ySpeed:this.controlActor.args.ySpeed,direction:this.controlActor.args.direction,facing:this.controlActor.args.facing,falling:this.controlActor.args.falling,rolling:this.controlActor.args.rolling,jumping:this.controlActor.args.jumping,flying:this.controlActor.args.flying,float:this.controlActor.args.float,angle:this.controlActor.args.angle,mode:this.controlActor.args.mode,rings:this.controlActor.args.rings,groundAngle:this.controlActor.args.groundAngle,respawning:this.controlActor.args.respawning,dead:!!this.controlActor.args.dead}}:{}}},{key:"onRenderedFrameOut",value:function(t,e){t<0?e():this.callRenderedFrames.set(e,t)}},{key:"onFrameOut",value:function(t,e){if(!(t<=0)){var r=this.args.frameId+t;this.callFrames.has(r)||this.callFrames.set(r,new Set);var n=this.callFrames.get(r);return n.add(e),function(){return n.delete(e)}}e()}},{key:"onFrameInterval",value:function(t,e){if(!(frames<=0)){var r=t;this.callIntervals.has(r)||this.callIntervals.set(r,new Set);var n=this.callIntervals.get(r);return n.add(e),function(){return n.delete(e)}}}},{key:"callFrameOuts",value:function(){for(var t=this.args.lastFrameId;t<=this.args.frameId;t++)if(this.callFrames.has(t)){var e,r=st(this.callFrames.get(t));try{for(r.s();!(e=r.n()).done;){(0,e.value)()}}catch(t){r.e(t)}finally{r.f()}this.callFrames.delete(t)}}},{key:"callRenderedFrameOut",value:function(){if(this.args.frameId%this.settings.frameSkip==0){var t,e=st(this.callRenderedFrames);try{for(e.s();!(t=e.n()).done;){var r=at(t.value,2),n=r[0];r[1]<=0?n():this.callRenderedFrames.set(n,-1+frames)}}catch(t){e.e(t)}finally{e.f()}}}},{key:"callFrameIntervals",value:function(){for(var t=this.args.lastFrameId;t<=this.args.frameId;t++){var e,r=st(this.callIntervals);try{for(r.s();!(e=r.n()).done;){var n=at(e.value,2),o=n[0],i=n[1];if(t%o==0){var a,s=st(i);try{for(s.s();!(a=s.n()).done;){(0,a.value)()}}catch(t){s.e(t)}finally{s.f()}}}}catch(t){r.e(t)}finally{r.f()}}}},{key:"pauseGame",value:function(){var t=this;this.focus(),this.args.paused=-1,this.args.pauseMenu.focusFirst(),h.Bgm.pause(),this.onTimeout(6,function(){t.controller&&t.controller.zero()})}},{key:"unpauseGame",value:function(){var t=this;this.args.pauseMenu.reset(),h.Bgm.unpause(),this.onTimeout(15,function(){t.controller&&t.controller.zero()}),this.onTimeout(30,function(){t.focus()}),this.onTimeout(60,function(){t.args.paused=!1})}},{key:"mousemove",value:function(t){var e=this;this.args.mouse="moved",this.onTimeout(5e3,function(){e.args.mouse="hide"})}},{key:"hyphenate",value:function(t){return String(t).replace(/\s/g,"-").toLowerCase()}},{key:"storeCheckpoint",value:function(t,e){this.checkpoints[this.tileMap.mapUrl]||(this.checkpoints[this.tileMap.mapUrl]={}),this.checkpoints[this.tileMap.mapUrl][t]={checkpointId:e,frames:this.args.frameId-this.args.startFrameId},localStorage.setItem("checkpoints:::".concat(this.tileMap.mapUrl),JSON.stringify(this.checkpoints[this.tileMap.mapUrl]))}},{key:"getCheckpoint",value:function(t){if(!this.checkpoints[this.tileMap.mapUrl]){var e=localStorage.getItem("checkpoints:::".concat(this.tileMap.mapUrl))||"{}";this.checkpoints[this.tileMap.mapUrl]=JSON.parse(e)||{}}return this.checkpoints[this.tileMap.mapUrl][t]}},{key:"setCheckpoint",value:function(t,e){localStorage.setItem("checkpoints:::".concat(t),JSON.stringify(e))}},{key:"clearCheckpoints",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.controlActor&&(null===t&&(t=this.controlActor.args.canonical),this.checkpoints[this.tileMap.mapUrl]||(this.checkpoints[this.tileMap.mapUrl]={}),delete this.checkpoints[this.tileMap.mapUrl][t],localStorage.setItem("checkpoints:::".concat(this.tileMap.mapUrl),JSON.stringify(this.checkpoints[this.tileMap.mapUrl])))}},{key:"showCenterMessage",value:function(t,e){this.args.centerMessage=new B.CharacterString({value:t,color:e})}},{key:"hideCenterMessage",value:function(){this.args.centerMessage=!1}},{key:"showDialog",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.args.dialog=!0,this.clearDialog();var r,n=0,o=st(t=t.map(function(t){return new B.CharacterString({value:t})}));try{for(o.s();!(r=o.n()).done;){var i=r.value;i.offset=n,n+=i.args.value.length}}catch(t){o.e(t)}finally{o.f()}this.args.dialogLines=t,this.args.dialogClasses=e}},{key:"hideDialog",value:function(t){this.clearDialog(),this.args.dialog=!1}},{key:"clearDialog",value:function(){this.args.dialogLines=[]}},{key:"clearAct",value:function(t){var e=this,r=viewport.getZoneState();console.log(t),this.args.actClearLabel.args.value=t;var n=this.controlActor.args.rings,o=this.args.frameId-this.args.startFrameId,i=o/60,a=this.controlActor.args.airTimeTotal/(this.controlActor.args.airTimeTotal+this.controlActor.args.groundTimeTotal),s=Math.trunc(10*this.controlActor.args.clearSpeed),c=100*n,l=Math.round(1e4*a)/100+"%",u=0,f=Math.trunc(Math.abs(i)),p=(u=f<30?5e4:f<45?1e4:f<60?5e3:f<90?4e3:f<120?3e3:f<180?2e3:f<240?1e3:500)+c+s,h=this.controlActor.args.score+=p;this.args.actClear=!0,this.args.skidBonusValue=this.controlActor.args.dragBonus||0,this.args.timeBonus.args.value=0,this.args.ringBonus.args.value=0,this.args.airBonus.args.value=0,this.args.speedBonus.args.value=0,this.args.skidBonus.args.value=0,this.args.totalBonus.args.value=0,this.onFrameOut(45,function(){return e.args.timeBonus.args.value=u}),this.onFrameOut(90,function(){return e.args.ringBonus.args.value=c}),this.onFrameOut(135,function(){return e.args.speedBonus.args.value=s}),this.onFrameOut(180,function(){return e.args.skidBonus.args.value=e.controlActor.args.dragBonus||0}),this.onFrameOut(225,function(){return e.args.airBonus.args.value=l}),this.onFrameOut(270,function(){return e.args.totalBonus.args.value=p}),this.onFrameOut(315,function(){return e.args.actClear=!1}),(!r.time||r.time>o)&&(r.time=o),(!r.rings||r.rings<n)&&(r.rings=n),(!r.air||r.air<a)&&(r.air=a),(!r.score||r.score<h)&&(r.score=h),this.currentSave.save()}},{key:"cpuDetect",value:function(){try{ga("send","event",{eventCategory:"cpu",eventAction:"cores",eventLabel:"core check",eventValue:navigator.hardwareConcurrency})}catch(t){ga&&ga("send","event",{eventCategory:"cpu",eventAction:"core check fail",eventLabel:"Cpu Detect Failure: ".concat(t)})}}},{key:"gpuDetect",value:function(){try{this.gpuDetector=this.gpuDetector||document.createElement("canvas").getContext("webgl");var t=this.gpuDetector.getExtension("WEBGL_debug_renderer_info"),e=this.gpuDetector.getParameter(t.UNMASKED_VENDOR_WEBGL),r=this.gpuDetector.getParameter(t.UNMASKED_RENDERER_WEBGL);ga("send","event",{eventCategory:"gpu",eventAction:e,eventLabel:r})}catch(t){ga&&ga("send","event",{eventCategory:"gpu",eventAction:"fail",eventLabel:"Gpu Detect Failure: ".concat(t)})}}},{key:"buildDetect",value:function(){var t=document.head.querySelector('meta[name="x-build-time"]').getAttribute("content");ga&&ga("send","event",{eventCategory:"build",eventAction:"build check",eventLabel:t})}},{key:"interact",value:function(){this.args.interacted=!0}},{key:"matrixConnect",value:function(){var t=this;this.settings.matrixUrl||console.error("No matrixUrl defined!!!");var e=location.origin+"/accept-sso";return this.matrix?this.matrix.isLoggedIn?Promise.resolve(this.matrix):this.matrix.logIn(e).then(function(){return t.matrix}):(this.matrix=new it.Matrix(this.settings.matrixUrl,{interval:0}),this.matrix.logIn(e).then(function(){return t.matrix}))}}])&&ft(r.prototype,n),lt&&ft(r,lt),Object.defineProperty(r,"prototype",{writable:!1}),dt}();t.Viewport=wt}),require.register("viewport/layer.html",function(t,e,r){r.exports='<div data-name = "[[name]]" class = "viewport-background" cv-each = "blocks:block:b" cv-ref = "background" data-layer = "[[layerId]]">[[block]]</div>\n'}),require.register("viewport/viewport.html",function(t,e,r){r.exports='<section class = "filters" cv-each = "effects:effect">[[effect]]</section>\n\n<div class = "viewport-frame [[initializing]] [[standalone]] [[secret]] [[level]] [[noIntro]] [[inputType]] [[ntsc]] [[windowFocused]]" data-theme = "[[theme]]" data-bg = "[[bg]]" cv-ref = "frame" data-paused = "[[paused]]" data-smoothing = [[smoothing]] cv-on = "mousedown:interact:c;keydown:interact:c;">\n\t<div class = "viewport [[standalone]] [[fullscreen]] displacement-[[displacement]] mouse-[[mouse]] [[theme]] [[hideNowPlaying]]" cv-ref = "viewport" tabindex="0" cv-on = "click(event);mousemove(event)">\n\n\t\t<svg height="32" width="32">\n\t\t<defs>\n\t\t\t<filter id="motionBlur" x="0%"\n y="0%" width="100%" height="100%">\n\t\t\t\t<feGaussianBlur\n\t\t\t\t\tin = "SourceGraphic"\n\t\t\t\t\tedgeMode = "duplicate"\n\t\t\t\t\tstdDeviation = "0,0"\n\t\t\t\t\tcv-ref = "blur"\n\t\t\t\t/>\n\t\t\t</filter>\n\t\t</defs>\n\t\t</svg>\n\n\t\t<svg height="100" width="100">\n\t\t<defs>\n\t\t\t<filter id="waterBlur">\n\t\t\t\t<feGaussianBlur in="SourceGraphic" stdDeviation="0.25,0" />\n\t\t\t</filter>\n\n\t\t\t<filter id="dilate">\n\t\t\t\t<feMorphology operator="dilate" radius="0.25" result = "expanded"/>\n\t\t\t\t<feMerge>\n\t\t\t\t\t<feMergeNode in="expanded" />\n\t\t\t\t\t<feMergeNode in="SourceGraphic" />\n\t\t\t\t</feMerge>\n\t\t\t</filter>\n\n\t\t\t<filter id = "waves"\n\t\t\t\tcolor-interpolation-filters="sRGB"\n\t\t\t\tx      ="0%"\n\t\t\t\ty      ="0%"\n\t\t\t\theight ="100%"\n\t\t\t\twidth  ="100%"\n\t\t\t>\n\t\t\t\t<feFlood\n\t\t\t\t\tflood-color="#408000"\n\t\t\t\t\tresult = "DisplacementGreen"\n\t\t\t\t></feFlood>\n\n\t\t\t\t<feImage\n\t\t\t\t\txlink:href="/effects/wave.png"\n\t\t\t\t\tresult="DisplacementSource"\n\t\t\t\t\theight="64"\n\t\t\t\t\twidth="64"\n\t\t\t\t></feImage>\n\n\t\t\t\t<feTile\n\t\t\t\t\tin="DisplacementSource"\n\t\t\t\t\tresult="DisplacementTile"\n\t\t\t\t></feTile>\n\n\t\t\t\t<feComposite\n\t\t\t\t\tin  = "DisplacementTile"\n\t\t\t\t\tin2 = "DisplacementGreen"\n\t\t\t\t\tresult ="DisplacementField"\n\t\t\t\t\toperator ="over"\n\t\t\t\t></feComposite>\n\n\t\t\t\t<feOffset\n\t\t\t\t\tin  = "DisplacementField"\n\t\t\t\t\tout = "DisplacementOffset"\n\t\t\t\t\tdx  = "0"\n\t\t\t\t>\n\t\t\t\t\t<animate\n\t\t\t\t\t\tattributeName="dy"\n\t\t\t\t\t\tvalues = "0;-64"\n\t\t\t\t\t\tdur="1500ms"\n\t\t\t\t\t\trepeatCount="indefinite" />\n\n\t\t\t\t</feOffset>\n\n\t\t\t\t<feDisplacementMap\n\t\t\t\t\tin="SourceGraphic"\n\t\t\t\t\tin2="DisplacementOffset"\n\t\t\t\t\tresult="Displaced"\n\t\t\t\t\txChannelSelector="R"\n\t\t\t\t\tyChannelSelector="G"\n\t\t\t\t\tscale="4"\n\t\t\t\t></feDisplacementMap>\n\n\t\t\t\t<feGaussianBlur\n\t\t\t\t\tin="Displaced"\n\t\t\t\t\tstdDeviation="0.35"\n\t\t\t\t></feGaussianBlur>\n\t\t\t</filter>\n\n\t\t\t<filter id = "ntsc"\n\t\t\t\tcolor-interpolation-filters="sRGB"\n\t\t\t\tx      = "0%"\n\t\t\t\ty      = "0%"\n\t\t\t\twidth  = "100%"\n\t\t\t\theight = "200%"\n\t\t\t>\n\t\t\t\t<feFlood\n\t\t\t\t\tflood-color="#808000"\n\t\t\t\t\tresult = "DisplacementGreen"\n\t\t\t\t></feFlood>\n\n\t\t\t\t<feImage\n\t\t\t\t\txlink:href="/effects/ntsc-static.png"\n\t\t\t\t\tresult ="DisplacementSource"\n\t\t\t\t\twidth  = "128"\n\t\t\t\t\theight = "128"\n\t\t\t\t></feImage>\n\n\t\t\t\t<feTile\n\t\t\t\t\tin="DisplacementSource"\n\t\t\t\t\tresult="DisplacementTile"\n\t\t\t\t></feTile>\n\n\t\t\t\t<feComposite\n\t\t\t\t\tin  = "DisplacementTile"\n\t\t\t\t\tin2 = "DisplacementGreen"\n\t\t\t\t\tresult ="DisplacementField"\n\t\t\t\t\toperator ="over"\n\t\t\t\t></feComposite>\n\n\t\t\t\t<feOffset\n\t\t\t\t\tin  = "DisplacementField"\n\t\t\t\t\tout = "DisplacementOffset"\n\t\t\t\t\tdx  = "0"\n\t\t\t\t\tdy  = "0"\n\t\t\t\t>\n\t\t\t\t\t<animate\n\t\t\t\t\t\tattributeName="dy"\n\t\t\t\t\t\tvalues = "-128;0"\n\t\t\t\t\t\tbegin="2000ms"\n\t\t\t\t\t\tdur="2000ms"\n\t\t\t\t\t\trepeatCount="8"\n\t\t\t\t\t></animate>\n\n\t\t\t\t</feOffset>\n\n\t\t\t\t<feDisplacementMap\n\t\t\t\t\tin="SourceGraphic"\n\t\t\t\t\tin2="DisplacementOffset"\n\t\t\t\t\tresult="Displaced"\n\t\t\t\t\txChannelSelector="R"\n\t\t\t\t\tyChannelSelector="G"\n\t\t\t\t\tscale = "0"\n\t\t\t\t>\n\t\t\t\t\t<animate\n\t\t\t\t\t\tattributeName="scale"\n\t\t\t\t\t\tvalues = "512;192;0"\n\t\t\t\t\t\tbegin="2000ms"\n\t\t\t\t\t\tdur="2000ms"\n\t\t\t\t\t\trepeatCount="1"\n\t\t\t\t\t></animate>\n\n\t\t\t\t</feDisplacementMap>\n\t\t\t</filter>\n\n\t\t</defs>\n\t\t</svg>\n\n\t\t<div class = "viewport-zoom">\n\n\t\t\t[[backdrop]]\n\n\t\t\t<div class = "backdrops" cv-ref ="backdrops"></div>\n\n\t\t\t<div class = "blurAngle" cv-ref = "blurAngle">\n\t\t\t<div class = "blurDistance" cv-ref = "blurDistance">\n\t\t\t<div class = "blurAngleCancel" cv-ref = "blurAngleCancel">\n\t\t\t\t<div\n\t\t\t\t\tcv-ref  = "background"\n\t\t\t\t\tclass   = "viewport-bg-layers"\n\t\t\t\t\tcv-each = "layers:layer"\n\t\t\t\t>[[layer]]</div>\n\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class = "filters filters-background" cv-ref = "bgFilters"></div>\n\n\t\t\t<div cv-ref = "content" class = "viewport-content">\n\t\t\t\t<div cv-ref = "actors" class = "viewport-actors"></div>\n\t\t\t\t<div cv-ref = "particles" class = "viewport-particles"></div>\n \t\t\t</div>\n\n\t\t\t<div class = "blurAngle" cv-ref = "blurAngleFg">\n\t\t\t<div class = "blurDistance" cv-ref = "blurDistanceFg">\n \t\t\t<div class = "blurAngleCancel" cv-ref = "blurAngleCancelFg">\n\t\t\t\t<div\n\t\t\t\t\tcv-ref  = "foreground"\n\t\t\t\t\tclass   = "viewport-bg-layers"\n\t\t\t\t\tcv-each = "fgLayers:layer"\n\t\t\t\t>[[layer]]</div>\n\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n \t\t</div>\n\n \t\t<div class = "viewport-overlay">\n \t\t\t<div class = "debug-spawn" cv-if = "debugEditMode">\n \t\t\t\t<div class = "debug-spawn" cv-ref = "spawnPreview"></div>\n \t\t\t\t<div class = "debug-spawn">[[debugObjectName]]</div>\n \t\t\t</div>\n\t\t\t<div class = "hud hud-top-right hud-table"  cv-if = "debugOsd">\n\t\t\t\t<table>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td colspan = "2">[[char]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelGround]]</td>\n\t\t\t\t\t\t<td>[[ground]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelCamera]]</td>\n\t\t\t\t\t\t<td>[[cameraMode]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelMode]]</td>\n\t\t\t\t\t\t<td>[[mode]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelX]]</td>\n\t\t\t\t\t\t<td>[[xPos]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelY]]</td>\n\t\t\t\t\t\t<td>[[yPos]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelLayer]]</td>\n\t\t\t\t\t\t<td>[[layer]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelGSpeed]]</td>\n\t\t\t\t\t\t<td>[[gSpeed]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelXSpeed]]</td>\n\t\t\t\t\t\t<td>[[xSpeed]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelYSpeed]]</td>\n\t\t\t\t\t\t<td>[[ySpeed]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelAirAngle]]</td>\n\t\t\t\t\t\t<td>[[airAngle]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelAngle]]</td>\n\t\t\t\t\t\t<td>[[angle]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelFrame]]</td>\n\t\t\t\t\t\t<td>[[frame]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[labelIgnore]]</td>\n\t\t\t\t\t\t<td>[[ignore]]</td>\n\t\t\t\t\t</tr>\n\n\t\t\t\t</table>\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-top-right" cv-if = "showHud">\n\n\t\t\t\t<div class = "char-hud">\n\t\t\t\t\t[[char]]\n\t\t\t\t\t<div class = "char-icon [[charName|hyphenate]]"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class = "emblem-hud" cv-each = "emblems:emblem:e">\n\t\t\t\t\t<img src = "/custom/hud-emblem.png" />\n\t\t\t\t</div>\n\t\t\t\t<div class = "emerald-hud" cv-each = "emeralds:emerald:e">\n\t\t\t\t\t<img src = "/Sonic/emerald-[[emerald]]-mini.png" />\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-bottom-right">\n\n\t\t\t\t<div cv-if = "showHud" class ="sheild-hud [[currentSheild]] [[hasElectric]] [[hasFire]] [[hasWater]] [[hasNormal]]">\n\t\t\t\t\t<div class = "sheild-icon sheild-electric"></div>\n\t\t\t\t\t<div class = "sheild-icon sheild-normal"></div>\n\t\t\t\t\t<div class = "sheild-icon sheild-fire"></div>\n\t\t\t\t\t<div class = "sheild-icon sheild-water"></div>\n\t\t\t\t</div>\n\n\t\t\t\t<span class = "contents" cv-if = "showFps">\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>[[labelFps]]</td>\n\t\t\t\t\t\t\t<td>[[fpsSprite]]</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-dark hud-bottom-left" cv-if = "showHud">\n\t\t\t\t[[nowPlaying]]\n\t\t\t\t[[trackName]]\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-top-left hud-table"  cv-if = "showHud">\n\t\t\t\t<table>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[scoreLabel]]</td><td>[[score]]</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[timerLabel]]</td><td>[[timer]]</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[ringLabel]]</td><td>[[rings]]</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t\t<div class = "demo-hud" cv-if = "demoIndicator">[[demoIndicator]]</div>\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-dark hud-centered" cv-if = "actClear">\n\t\t\t\t<table>\n\t\t\t\t\t<tr><td colspan="2">\n\t\t\t\t\t\t<div class = "centered">[[actClearLabel]]</div>\n\t\t\t\t\t</td></tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[timeBonusLabel]]</td>\n\t\t\t\t\t\t<td>[[timeBonus]]</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[ringBonusLabel]]</td>\n\t\t\t\t\t\t<td>[[ringBonus]]</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t\x3c!-- <tr>\n\t\t\t\t\t\t<td>[[perfectBonusLabel]]</td>\n\t\t\t\t\t\t<td>[[perfectBonus]]</td>\n\t\t\t\t\t</tr> --\x3e\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[speedBonusLabel]]</td>\n\t\t\t\t\t\t<td>[[speedBonus]]</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr cv-if = "skidBonusValue">\n\t\t\t\t\t\t<td>[[skidBonusLabel]]</td>\n\t\t\t\t\t\t<td>[[skidBonus]]</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[airBonusLabel]]</td>\n\t\t\t\t\t\t<td>[[airBonus]]</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>[[totalBonusLabel]]</td>\n\t\t\t\t\t\t<td>[[totalBonus]]</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-dark hud-centered" cv-if = "centerMessage">\n\t\t\t\t[[centerMessage]]\n\t\t\t</div>\n\n\t\t\t<div class = "hud hud-dark hud-centered-raised" cv-if = "dialog">\n\t\t\t\t<div class = "dialog-frame [[dialogClasses]]">\n\t\t\t\t\t<div class = "dialog-icon">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div cv-each = "dialogLines:line" class = "dialog-text">\n\t\t\t\t\t\t<span style = "--text-offset:[[line.offset]]">[[line]]</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class = "screen-effects" cv-each = "screenEffects:effect">\n\t\t\t\t[[effect]]\n\t\t\t</div>\n\n\t\t\t<section class = "pause-menu full" cv-if = "paused">[[pauseMenu]]</section>\n\n\t\t\t[[titlecard]]\n\n\t\t\t<div class = "topLine">\n\t\t\t\t<div class = "status-message">[[topLine]]</div>\n\t\t\t</div>\n\n\t\t\t<div class = "focus-me">\n\t\t\t\t<div class = "status-message">[[focusMe]]</div>\n\t\t\t</div>\n\n\t\t\t<div class = "status-message">[[status]]</div>\n\t\t\t<section class = "contents" cv-if = "networked">[[chatBox]]</section>\n\t\t\t\x3c!-- <div class = "filters filters-foreground" cv-ref = "fgFilters"></div> --\x3e\n\t\t\t<div class = "console [[showConsole]]" cv-ref = "subspace" tab-index = "0">[[subspace]]</div>\n\t\t\t<div class = "shade" data-fade = "[[fade]]"></div>\n\n\t\t</div>\n\n\t\t<div class = "quick-controls" cv-if = "shortcuts">\n\t\t\t[[muteSwitch]]\n\t\t\t<div class = "button" cv-on = "click:fullscreen()">\n\t\t\t\t<image src = "/ui/fullscreen.svg" />\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n</div>\n'}),require.register("___globals___",function(t,e,r){})}(),require("___globals___");
